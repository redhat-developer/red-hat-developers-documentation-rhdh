<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Monitoring and logging</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="As a Red Hat Developer Hub (RHDH) Operations or Project Manager, you can monitor performance and gather insights using Red Hat Developer Hub's monitoring and logging tools."/><link rel="next" href="#assembly-log-levels_title-monitoring-logging" title="1. Log Levels"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><section xml:lang="en-US" class="article" id="idm45270036800304"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.8</span></div><div><h1 class="title">Monitoring and logging</h1></div><div><h3 class="subtitle"><em>Tracking performance and capturing insights with monitoring and logging tools in Red Hat Developer Hub</em></h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm45270021175856">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				As a Red Hat Developer Hub (RHDH) Operations or Project Manager, you can monitor performance and gather insights using Red Hat Developer Hub's monitoring and logging tools.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#assembly-log-levels_title-monitoring-logging">1. Log Levels</a></span></li><li><span class="section"><a href="#assembly-rhdh-observability">2. Enabling observability for Red Hat Developer Hub on OpenShift Container Platform</a></span><ul><li><span class="section"><a href="#proc-admin-enabling-metrics-ocp-operator_assembly-rhdh-observability">2.1. Enabling metrics monitoring in a Red Hat Developer Hub Operator installation on an OpenShift Container Platform cluster</a></span></li><li><span class="section"><a href="#proc-admin-enabling-metrics-ocp-helm_assembly-rhdh-observability">2.2. Enabling metrics monitoring in a Helm chart installation on an OpenShift Container Platform cluster</a></span></li></ul></li><li><span class="section"><a href="#assembly-monitoring-and-logging-with-aws_assembly-rhdh-observability">3. Monitoring and logging Red Hat Developer Hub on Amazon Web Services (AWS)</a></span><ul><li><span class="section"><a href="#assembly-monitoring-with-amazon-prometheus_assembly-rhdh-observability">3.1. Monitoring with Amazon Prometheus</a></span></li><li><span class="section"><a href="#assembly-logging-with-amazon-cloudwatch_assembly-rhdh-observability">3.2. Logging with Amazon CloudWatch</a></span></li></ul></li><li><span class="section"><a href="#assembly-monitoring-and-logging-aks">4. Monitoring and logging with Azure Kubernetes Services (AKS) in Red Hat Developer Hub</a></span><ul><li><span class="section"><a href="#proc-enabling-azure-monitor-metrics_assembly-monitoring-and-logging-aks">4.1. Enabling Azure Monitor metrics</a></span></li><li><span class="section"><a href="#proc-configure-annotations-for-aks-monitoring_assembly-monitoring-and-logging-aks">4.2. Configuring annotations for monitoring</a></span></li><li><span class="section"><a href="#proc-view-logs-aks_assembly-monitoring-and-logging-aks">4.3. Viewing logs with Azure Kubernetes Service (AKS)</a></span></li></ul></li></ul></div><section class="section" id="assembly-log-levels_title-monitoring-logging"><div class="titlepage"><div><div><h2 class="title">1. Log Levels</h2></div></div></div><p>
			Logging is an essential part of monitoring and debugging software applications. It provides insight into how the application is functioning at runtime and can help you detect and diagnose issues. By adjusting the log level, you can control the amount and type of information displayed in the logs, ranging from highly detailed diagnostic output to the most critical errors. With this flexibility, you can customize logging output to match your current requirements, whether during development, testing, or production.
		</p><p>
			You can choose from the following log levels, listed in order of decreasing verbosity:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<code class="literal">debug</code>: Detailed information, typically useful only when troubleshooting.
				</li><li class="listitem">
					<code class="literal">info</code>: General information about the operation of the application. This is the default level.
				</li><li class="listitem">
					<code class="literal">warn</code>: Indicates potential issues or situations that might require attention.
				</li><li class="listitem">
					<code class="literal">error</code>: Indicates errors that have occurred but might not prevent the application from continuing.
				</li><li class="listitem">
					<code class="literal">critical</code>: Indicates critical errors that require immediate attention and are likely to prevent the application from functioning correctly.
				</li></ul></div><p>
			You can control the verbosity of the logging by setting the log level. The log level determines the minimum severity level of events displayed in the console. For example, if the log level is set to 'info', events with a severity level of 'debug' are ignored.
		</p><p>
			To increase the log level, you can set the <code class="literal">LOG_LEVEL</code> environment variable to a higher severity level, such as 'warn' or 'error'. However, increasing the log level might not result in more output if the existing code primarily emits logs at lower severity levels, for example, 'debug' or 'info'. In such a case, adjust the logging statements within the code to use higher severity levels to see more output.
		</p><p>
			No additional steps are required beyond setting the <code class="literal">LOG_LEVEL</code> environment variable, but its effectiveness depends on the existing logging statements in the code.
		</p></section><section class="section" id="assembly-rhdh-observability"><div class="titlepage"><div><div><h2 class="title">2. Enabling observability for Red Hat Developer Hub on OpenShift Container Platform</h2></div></div></div><p>
			In OpenShift Container Platform, metrics are exposed through an HTTP service endpoint under the <code class="literal">/metrics</code> canonical name. You can create a <code class="literal">ServiceMonitor</code> custom resource (CR) to scrape metrics from a service endpoint in a user-defined project.
		</p><section class="section" id="proc-admin-enabling-metrics-ocp-operator_assembly-rhdh-observability"><div class="titlepage"><div><div><h3 class="title">2.1. Enabling metrics monitoring in a Red Hat Developer Hub Operator installation on an OpenShift Container Platform cluster</h3></div></div></div><p>
				You can enable and view metrics for an Operator-installed Red Hat Developer Hub instance from the OpenShift Container Platform web console. Metrics are exposed through an HTTP service endpoint under the <code class="literal">/metrics</code> canonical name.
			</p><p>
				By setting the <code class="literal">spec.monitoring.enabled</code> field to <code class="literal">true</code> in your Red Hat Developer Hub custom resource (CR), you instruct the Operator to automatically create and manage the necessary <code class="literal">ServiceMonitor</code> to scrape metrics from the service endpoint.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Your OpenShift Container Platform cluster has <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/monitoring/index#enabling-monitoring-for-user-defined-projects">monitoring for user-defined projects</a> enabled.
					</li><li class="listitem">
						You have installed Red Hat Developer Hub on OpenShift Container Platform using the Red Hat Developer Hub Operator.
					</li><li class="listitem">
						You have installed the OpenShift CLI (<code class="literal">oc</code>).
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <span class="strong strong"><strong>OpenShift CLI</strong></span> (<code class="literal">oc</code>) to edit your existing Red Hat Developer Hub CR.
					</p><pre class="programlisting language-bash">oc edit Backstage &lt;instance-name&gt;</pre></li><li class="listitem"><p class="simpara">
						In the CR, locate the <code class="literal">spec</code> field and add the <code class="literal">monitoring</code> configuration block.
					</p><pre class="programlisting language-yaml">spec:
  monitoring:
    enabled: true</pre></li><li class="listitem"><p class="simpara">
						Save the RHDH CR. The RHDH Operator detects the configuration and automatically creates the corresponding <code class="literal">ServiceMonitor</code> custom resource (CR).
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The Operator automatically configures the <code class="literal">ServiceMonitor</code> with the correct labels (<code class="literal">app.kubernetes.io/instance</code> and <code class="literal">app.kubernetes.io/name</code>) that match your Backstage CR. The <code class="literal">ServiceMonitor</code> will be named <code class="literal">metrics-&lt;cr-name&gt;</code>. No additional label configuration is required.
						</p></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the OpenShift Container Platform web console, select the <span class="strong strong"><strong>Observe</strong></span> view.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Metrics</strong></span> tab to view metrics for Red Hat Developer Hub pods.
					</li><li class="listitem">
						From the OpenShift Container Platform web console, click <span class="strong strong"><strong>Project &gt; Services</strong></span> and verify the labels for <code class="literal">backstage-developer-hub</code>.
					</li></ol></div></section><section class="section" id="proc-admin-enabling-metrics-ocp-helm_assembly-rhdh-observability"><div class="titlepage"><div><div><h3 class="title">2.2. Enabling metrics monitoring in a Helm chart installation on an OpenShift Container Platform cluster</h3></div></div></div><p>
				You can enable and view metrics for a Red Hat Developer Hub Helm deployment from the OpenShift Container Platform web console. Metrics monitoring is enabled through configuration during a chart upgrade. After the upgrade, the Helm release generates the necessary <code class="literal">ServiceMonitor</code> resource.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Your OpenShift Container Platform cluster has <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/monitoring/index#enabling-monitoring-for-user-defined-projects">monitoring for user-defined projects</a> enabled.
					</li><li class="listitem">
						You have installed Red Hat Developer Hub on OpenShift Container Platform using the Helm chart.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the OpenShift Container Platform web console, select the <span class="strong strong"><strong>Topology</strong></span> view.
					</li><li class="listitem"><p class="simpara">
						Click the overflow menu of the Red Hat Developer Hub Helm chart, and select <span class="strong strong"><strong>Upgrade</strong></span>.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/rhdh/helm-upgrade.png" alt="helm upgrade"/></div></div></li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Upgrade Helm Release</strong></span> page, select the <span class="strong strong"><strong>YAML view</strong></span> option in <span class="strong strong"><strong>Configure via</strong></span>, then configure the <code class="literal">metrics</code> section in the YAML, as shown in the following example:
					</p><pre class="programlisting language-yaml">upstream:
# ...
  metrics:
    serviceMonitor:
      enabled: true
      path: /metrics
      port: http-metrics
# ...</pre><div class="informalfigure"><div class="mediaobject"><img src="images/rhdh/upgrade-helm-metrics.png" alt="upgrade helm metrics"/></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Upgrade</strong></span>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the OpenShift Container Platform web console, select the <span class="strong strong"><strong>Observe</strong></span> view.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Metrics</strong></span> tab to view metrics for Red Hat Developer Hub pods.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/monitoring/index">Configuring and using the monitoring stack in Red Hat OpenShift Container Platform</a>
					</li></ul></div></section></section><section class="section" id="assembly-monitoring-and-logging-with-aws_assembly-rhdh-observability"><div class="titlepage"><div><div><h2 class="title">3. Monitoring and logging Red Hat Developer Hub on Amazon Web Services (AWS)</h2></div></div></div><p>
			You can configure Red Hat Developer Hub to use Amazon CloudWatch for real-time monitoring and Amazon Prometheus for comprehensive logging. This is convenient when hosting Developer Hub on Amazon Web Services (AWS) infrastructure.
		</p><section class="section" id="assembly-monitoring-with-amazon-prometheus_assembly-rhdh-observability"><div class="titlepage"><div><div><h3 class="title">3.1. Monitoring with Amazon Prometheus</h3></div></div></div><p>
				You can configure Red Hat Developer Hub to use Amazon Prometheus for comprehensive logging. Amazon Prometheus extracts data from pods that have specific pod annotations.
			</p><section class="section" id="prerequisites"><div class="titlepage"><div><div><h4 class="title">3.1.1. Prerequisites</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							You <a class="link" href="https://docs.aws.amazon.com/eks/latest/userguide/prometheus.html">configured Prometheus for your Elastic Kubernetes Service (EKS) clusters</a>.
						</li><li class="listitem">
							You <a class="link" href="https://docs.aws.amazon.com/prometheus/latest/userguide/AMP-onboard-create-workspace.html">created an Amazon managed service for the Prometheus workspace</a>.
						</li><li class="listitem">
							You <a class="link" href="https://docs.aws.amazon.com/prometheus/latest/userguide/AMP-onboard-ingest-metrics.html">configured Prometheus to import the Developer Hub metrics</a>.
						</li><li class="listitem">
							You ingested Prometheus metrics into the created workspace.
						</li></ul></div></section><section class="section" id="configuring-annotations-for-monitoring-with-amazon-prometheus-by-using-the-operator_assembly-rhdh-observability"><div class="titlepage"><div><div><h4 class="title">3.1.2. Configuring annotations for monitoring with Amazon Prometheus by using the Red Hat Developer Hub Operator</h4></div></div></div><p>
					To enable logging to Amazon Prometheus, you can configure the required pod annotations by using the Red Hat Developer Hub Operator.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							As an administrator of the Red Hat Developer Hub Operator, edit the default configuration to add Prometheus annotations as follows:
						</p><pre class="screen"># Update OPERATOR_NS accordingly
$ OPERATOR_NS=rhdh-operator
$ kubectl edit configmap backstage-default-config -n "${OPERATOR_NS}"</pre></li><li class="listitem"><p class="simpara">
							Find the <code class="literal">deployment.yaml</code> key in the config map and add the annotations to the <code class="literal">spec.template.metadata.annotations</code> field as follows:
						</p><pre class="programlisting language-yaml">deployment.yaml: |-
  apiVersion: apps/v1
  kind: Deployment
  # --- truncated ---
  spec:
    template:
      # --- truncated ---
      metadata:
        labels:
         rhdh.redhat.com/app:  # placeholder for 'backstage-&lt;cr-name&gt;'
        # --- truncated ---
        annotations:
          prometheus.io/scrape: 'true'
          prometheus.io/path: '/metrics'
          prometheus.io/port: '9464'
          prometheus.io/scheme: 'http'
  # --- truncated ---</pre></li><li class="listitem">
							Save your changes.
						</li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To verify if the scraping works:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use <code class="literal">kubectl</code> to port-forward the Prometheus console to your local machine as follows:
						</p><pre class="screen">$ kubectl --namespace=prometheus port-forward deploy/prometheus-server 9090</pre></li><li class="listitem">
							Open your web browser and navigate to <code class="literal">http://localhost:9090</code> to access the Prometheus console.
						</li><li class="listitem">
							Monitor relevant metrics, such as <code class="literal">process_cpu_user_seconds_total</code>.
						</li></ol></div></section><section class="section" id="configuring-annotations-for-monitoring-with-amazon-prometheus-by-using-the-helm-chart_assembly-rhdh-observability"><div class="titlepage"><div><div><h4 class="title">3.1.3. Configuring annotations for monitoring with Amazon Prometheus by using the Red Hat Developer Hub Helm chart</h4></div></div></div><p>
					To enable logging to Amazon Prometheus, you can configure the required pod annotations by using the Red Hat Developer Hub Helm chart.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To annotate the backstage pod for monitoring, update your <code class="literal">values.yaml</code> file as follows:
						</p><pre class="programlisting language-yaml">upstream:
  backstage:
    # --- TRUNCATED ---
    podAnnotations:
      prometheus.io/scrape: 'true'
      prometheus.io/path: '/metrics'
      prometheus.io/port: '9464'
      prometheus.io/scheme: 'http'</pre></li></ul></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To verify if the scraping works:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use <code class="literal">kubectl</code> to port-forward the Prometheus console to your local machine as follows:
						</p><pre class="programlisting language-bash">kubectl --namespace=prometheus port-forward deploy/prometheus-server 9090</pre></li><li class="listitem">
							Open your web browser and navigate to <code class="literal">http://localhost:9090</code> to access the Prometheus console.
						</li><li class="listitem">
							Monitor relevant metrics, such as <code class="literal">process_cpu_user_seconds_total</code>.
						</li></ol></div></section></section><section class="section" id="assembly-logging-with-amazon-cloudwatch_assembly-rhdh-observability"><div class="titlepage"><div><div><h3 class="title">3.2. Logging with Amazon CloudWatch</h3></div></div></div><p>
				Logging within the Red Hat Developer Hub relies on the <a class="link" href="https://github.com/winstonjs/winston">Winston library</a>.
			</p><section class="section" id="configuring-the-application-log-level-by-using-the-operator_assembly-rhdh-observability"><div class="titlepage"><div><div><h4 class="title">3.2.1. Configuring the application log level by using the Red Hat Developer Hub Operator</h4></div></div></div><p>
					You can configure the application log level by using the Red Hat Developer Hub Operator.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Modify the logging level by including the environment variable <code class="literal">LOG_LEVEL</code> in your custom resource as follows:
						</p><pre class="programlisting language-yaml">spec:
  # Other fields omitted
  application:
    extraEnvs:
      envs:
        - name: LOG_LEVEL
          value: debug</pre></li></ul></div></section><section class="section" id="configuring-the-application-log-level-by-using-the-helm-chart_assembly-rhdh-observability"><div class="titlepage"><div><div><h4 class="title">3.2.2. Configuring the application log level by using the Red Hat Developer Hub Helm chart</h4></div></div></div><p>
					You can configure the application log level by using the Red Hat Developer Hub Helm chart.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Modify the logging level by adding the environment variable <code class="literal">LOG_LEVEL</code> to your Helm chart <code class="literal">values.yaml</code> file:
						</p><pre class="programlisting language-yaml">upstream:
  backstage:
    # --- Truncated ---
    extraEnvVars:
      - name: LOG_LEVEL
        value: debug</pre></li></ul></div></section><section class="section" id="retrieving-logs-from-amazon-cloudwatch_assembly-rhdh-observability"><div class="titlepage"><div><div><h4 class="title">3.2.3. Retrieving logs from Amazon CloudWatch</h4></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							CloudWatch Container Insights is used to capture logs and metrics for Amazon Elastic Kubernetes Service. For more information, see <a class="link" href="https://docs.aws.amazon.com/prescriptive-guidance/latest/implementing-logging-monitoring-cloudwatch/kubernetes-eks-logging.html">Logging for Amazon Elastic Kubernetes Service</a> documentation.
						</li><li class="listitem">
							To capture the logs and metrics, <a class="link" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Container-Insights-setup-EKS-addon.html">install the Amazon CloudWatch Observability EKS add-on</a> in your cluster. Following the setup of Container Insights, you can access container logs using Logs Insights or Live Tail views.
						</li><li class="listitem"><p class="simpara">
							CloudWatch names the log group where all container logs are consolidated in the following manner:
						</p><pre class="screen">/aws/containerinsights/<span class="emphasis"><em>&lt;cluster_name&gt;</em></span>/application</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To retrieve logs from the Developer Hub instance, run a query such as:
						</p><pre class="programlisting language-sql">fields @timestamp, @message, kubernetes.container_name
| filter kubernetes.container_name in ["install-dynamic-plugins", "backstage-backend"]</pre></li></ul></div></section></section></section><section class="section" id="assembly-monitoring-and-logging-aks"><div class="titlepage"><div><div><h2 class="title">4. Monitoring and logging with Azure Kubernetes Services (AKS) in Red Hat Developer Hub</h2></div></div></div><p>
			Monitoring and logging are integral aspects of managing and maintaining Azure Kubernetes Services (AKS) in Red Hat Developer Hub. With features like Managed Prometheus Monitoring and Azure Monitor integration, administrators can efficiently monitor resource utilization, diagnose issues, and ensure the reliability of their containerized workloads.
		</p><section class="section" id="proc-enabling-azure-monitor-metrics_assembly-monitoring-and-logging-aks"><div class="titlepage"><div><div><h3 class="title">4.1. Enabling Azure Monitor metrics</h3></div></div></div><p>
				To enable managed Prometheus monitoring, use the <code class="literal">-enable-azure-monitor-metrics</code> option within either the <code class="literal">az aks create</code> or <code class="literal">az aks update</code> command, depending on whether you’re creating a new cluster or updating an existing one, such as:
			</p><pre class="programlisting language-bash">az aks create/update --resource-group &lt;your-ResourceGroup&gt; --name &lt;your-Cluster&gt; --enable-azure-monitor-metrics</pre><p>
				The previous command installs the metrics add-on, which gathers <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/metrics/prometheus-metrics-overview">Prometheus metrics</a>. Using the previous command, you can enable monitoring of Azure resources through both native Azure Monitor metrics. You can also view the results in the portal under <span class="strong strong"><strong>Monitoring → Insights</strong></span>. For more information, see <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/platform/monitor-azure-resource">Monitor Azure resources with Azure Monitor</a>.
			</p><p>
				Furthermore, metrics from both the Managed Prometheus service and Azure Monitor can be accessed through Azure Managed Grafana service. For more information, see <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/metrics/azure-monitor-workspace-manage?tabs=azure-portal#link-a-grafana-workspace">Link a Grafana workspace</a> section.
			</p><p>
				By default, Prometheus uses the minimum ingesting profile, which optimizes ingestion volume and sets default configurations for scrape frequency, targets, and metrics collected. The default settings can be customized through custom configuration. Azure offers various methods, including using different ConfigMaps, to provide scrape configuration and other metric add-on settings. For more information about default configuration, see <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/containers/prometheus-metrics-scrape-default">Default Prometheus metrics configuration in Azure Monitor</a> and <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/containers/prometheus-metrics-scrape-configuration?tabs=CRDConfig%2CCRDScrapeConfig">Customize scraping of Prometheus metrics in Azure Monitor managed service for Prometheus</a> documentation.
			</p></section><section class="section" id="proc-configure-annotations-for-aks-monitoring_assembly-monitoring-and-logging-aks"><div class="titlepage"><div><div><h3 class="title">4.2. Configuring annotations for monitoring</h3></div></div></div><p>
				You can configure the annotations for monitoring Red Hat Developer Hub specific metrics in both Helm deployment and Operator-backed deployment.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Helm deployment</span></dt><dd><p class="simpara">
							To annotate the backstage pod for monitoring, update your <code class="literal">values.yaml</code> file as follows:
						</p><pre class="programlisting language-yaml">upstream:
  backstage:
    # --- TRUNCATED ---
    podAnnotations:
      prometheus.io/scrape: 'true'
      prometheus.io/path: '/metrics'
      prometheus.io/port: '9464'
      prometheus.io/scheme: 'http'</pre></dd><dt><span class="term">Operator-backed deployment</span></dt><dd><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									As an administrator of the operator, edit the default configuration to add Prometheus annotations as follows:
								</p><pre class="programlisting language-bash"># Update OPERATOR_NS accordingly
OPERATOR_NS=rhdh-operator
kubectl edit configmap backstage-default-config -n "${OPERATOR_NS}"</pre></li><li class="listitem"><p class="simpara">
									Find the <code class="literal">deployment.yaml</code> key in the ConfigMap and add the annotations to the <code class="literal">spec.template.metadata.annotations</code> field as follows:
								</p><pre class="programlisting language-yaml">deployment.yaml: |-
  apiVersion: apps/v1
  kind: Deployment
  # --- truncated ---
  spec:
    template:
      # --- truncated ---
      metadata:
        labels:
         rhdh.redhat.com/app:  # placeholder for 'backstage-&lt;cr-name&gt;'
        # --- truncated ---
        annotations:
          prometheus.io/scrape: 'true'
          prometheus.io/path: '/metrics'
          prometheus.io/port: '9464'
          prometheus.io/scheme: 'http'
  # --- truncated ---</pre></li><li class="listitem">
									Save your changes.
								</li></ol></div></dd></dl></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					To verify if the scraping works, navigate to the corresponding Azure Monitor Workspace and view the metrics under <span class="strong strong"><strong>Monitoring → Metrics</strong></span>.
				</p></div></section><section class="section" id="proc-view-logs-aks_assembly-monitoring-and-logging-aks"><div class="titlepage"><div><div><h3 class="title">4.3. Viewing logs with Azure Kubernetes Service (AKS)</h3></div></div></div><p>
				You can access live data logs generated by Kubernetes objects and collect log data in Container Insights within AKS.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have deployed Developer Hub on AKS.
					</li></ul></div><p>
				For more information, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/installing_red_hat_developer_hub_on_microsoft_azure_kubernetes_service_aks/index#assembly-install-rhdh-aks">Installing Red Hat Developer Hub on Microsoft Azure Kubernetes Service</a>.
			</p><div class="variablelist"><p class="title"><strong>Procedure</strong></p><dl class="variablelist"><dt><span class="term">View live logs from your Developer Hub instance</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Navigate to the Azure Portal.
								</li><li class="listitem">
									Search for the resource group <code class="literal">&lt;your-ResourceGroup&gt;</code> and locate your AKS cluster <code class="literal">&lt;your-Cluster&gt;</code>.
								</li><li class="listitem">
									Select <span class="strong strong"><strong>Kubernetes resources → Workloads</strong></span> from the menu.
								</li><li class="listitem">
									Select the <code class="literal">&lt;your-rhdh-cr&gt;-developer-hub</code> (in case of Helm Chart installation) or <code class="literal">&lt;your-rhdh-cr&gt;-backstage</code> (in case of Operator-backed installation) deployment.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Live Logs</strong></span> in the left menu.
								</li><li class="listitem"><p class="simpara">
									Select the pod.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										There must be only single pod.
									</p></div></div></li></ol></div><p class="simpara">
							Live log data is collected and displayed.
						</p></dd><dt><span class="term">View real-time log data from the Container Engine</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Navigate to the Azure Portal.
								</li><li class="listitem">
									Search for the resource group <code class="literal">&lt;your-ResourceGroup&gt;</code> and locate your AKS cluster <code class="literal">&lt;your-Cluster&gt;</code>.
								</li><li class="listitem">
									Select <span class="strong strong"><strong>Monitoring</strong></span> → <span class="strong strong"><strong>Insights</strong></span> from the menu.
								</li><li class="listitem">
									Go to the <span class="strong strong"><strong>Containers</strong></span> tab.
								</li><li class="listitem">
									Find the backend-backstage container and click it to view real-time log data as it’s generated by the Container Engine.
								</li></ol></div></dd></dl></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm45270021175856"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2025 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></section></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>