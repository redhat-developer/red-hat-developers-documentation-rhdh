<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Orchestrator in Red Hat Developer Hub</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="As an administrator, you can use Orchestrator to enable serverless workflows in Red Hat Developer Hub to support cloud migration, developer onboarding, and custom workflows."/><link rel="next" href="#assembly-orchestrator-rhdh" title="1. About Orchestrator in Red Hat Developer Hub"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><section xml:lang="en-US" class="article" id="idm46323751091024"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.8</span></div><div><h1 class="title">Orchestrator in Red Hat Developer Hub</h1></div><div><h3 class="subtitle"><em>Orchestrator enables serverless workflows for cloud migration, onboarding, and customization in Red Hat Developer Hub</em></h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm46323729071264">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				As an administrator, you can use Orchestrator to enable serverless workflows in Red Hat Developer Hub to support cloud migration, developer onboarding, and custom workflows.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#assembly-orchestrator-rhdh">1. About Orchestrator in Red Hat Developer Hub</a></span><ul><li><span class="section"><a href="#con-architecture-overview.adoc_orchestrator-rhdh">1.1. Understand Orchestrator architecture</a></span></li><li><span class="section"><a href="#con-compatibility-guide-for-orchestrator.adoc_orchestrator-rhdh">1.2. Compatibility guide for Orchestrator</a></span></li><li><span class="section"><a href="#con-orchestrator-plugin-dependencies-operator.adoc_orchestrator-rhdh">1.3. Orchestrator plugin dependencies for Operator installation</a></span></li><li><span class="section"><a href="#proc-enabling-orchestrator-plugins-components.adoc_orchestrator-rhdh">1.4. Enabling Orchestrator plugins components</a></span></li></ul></li><li><span class="section"><a href="#assembly-building-and-deploying-serverless-workflows">2. Build and deploy serverless workflows</a></span><ul><li><span class="section"><a href="#con-benefits-of-workflow-images.adoc_orchestrator-rhdh">2.1. Benefits of workflow images</a></span></li><li><span class="section"><a href="#proc-building-locally.adoc_orchestrator-rhdh">2.2. Building workflow images locally</a></span></li><li><span class="section"><a href="#con-generated-workflow-manifests.adoc_orchestrator-rhdh">2.3. Generated workflow manifests</a></span></li><li><span class="section"><a href="#proc-deploying-workflows-on-a-cluster.adoc_orchestrator-rhdh">2.4. Deploying workflows on a cluster</a></span></li></ul></li><li><span class="section"><a href="#assembly-install-rhdh-orchestrator">3. Installing Red Hat Developer Hub with Orchestrator</a></span><ul><li><span class="section"><a href="#proc-enable-orchestrator-plugin_install-rhdh-orchestrator">3.1. Enabling the Orchestrator plugin using Operator</a></span></li><li><span class="section"><a href="#proc-install-rhdh-with-orchestrator-helm-cli_install-rhdh-orchestrator">3.2. Installing Red Hat Developer Hub (RHDH) on OpenShift Container Platform with the Orchestrator using the Helm CLI</a></span></li><li><span class="section"><a href="#proc-install-rhdh-with-orchestrator-helm-webui_install-rhdh-orchestrator">3.3. Install Red Hat Developer Hub (RHDH) using Helm from the OpenShift Container Platform web console</a></span></li><li><span class="section"><a href="#ref-orchestrator-resource-limits_install-rhdh-orchestrator">3.4. Resource limits for installing Red Hat Developer Hub with the Orchestrator plugin when using Helm</a></span></li></ul></li></ul></div><section class="section" id="assembly-orchestrator-rhdh"><div class="titlepage"><div><div><h2 class="title">1. About Orchestrator in Red Hat Developer Hub</h2></div></div></div><p>
			You can streamline and automate your work by using the Orchestrator in Red Hat Developer Hub. It enables you to:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Design, run, and monitor workflows to simplify multi-step processes across applications and services.
				</li><li class="listitem">
					Standardize onboarding, migration, and integration workflows to reduce manual effort and improve consistency.
				</li><li class="listitem">
					Extend RHDH with enterprise-grade Orchestration features to support collaboration and scalability.
				</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				Orchestrator currently supports only Red Hat OpenShift Container Platform (OpenShift Container Platform); it is not available on Microsoft Azure Kubernetes Service (AKS), Amazon Elastic Kubernetes Service (EKS), or Google Kubernetes Engine (GKE).
			</p></div></div><p>
			To start using Orchestrator in RHDH, you must:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Install the required infrastructure components, such as Red Hat OpenShift Serverless Operator, Knative Serving, Knative Eventing, and OpenShift Serverless Logic Operator
				</li><li class="listitem">
					Configure your Backstage custom resource (CR) or Helm values file for Orchestrator
				</li><li class="listitem">
					Import the Orchestrator software templates into the Red Hat Developer Hub catalog
				</li></ul></div><section class="section" id="con-architecture-overview.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h3 class="title">1.1. Understand Orchestrator architecture</h3></div></div></div><p>
				The Orchestrator architecture is composed of several components, each contributing to the running and management of workflows.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Red Hat Developer Hub (RHDH)</span></dt><dd><p class="simpara">
							Serves as the primary interface. It contains the following subcomponents:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Orchestrator frontend plugins</span></dt><dd>
										Provide the interface for users to run and monitor workflows within RHDH.
									</dd><dt><span class="term">Orchestrator backend plugins</span></dt><dd>
										Get workflow data into Developer Hub.
									</dd><dt><span class="term">Notifications plugins</span></dt><dd>
										Inform users about workflow events.
									</dd></dl></div></dd><dt><span class="term">Sonataflow</span></dt><dd><p class="simpara">
							The Sonataflow orchestrator and its subcomponents handle the workflows. The Red Hat Developer Hub Orchestrator and the Red Hat Developer Hub Helm chart manage the following subcomponents lifecycle:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">OpenShift Serverless Logic Operator</span></dt><dd>
										Manages the Sonataflow custom resource (CR), where each CR represents a deployed workflow.
									</dd><dt><span class="term">Sonataflow Runtime/Workflow Application</span></dt><dd>
										Functions as a deployed workflow. Operates as an HTTP server, handling requests for running workflow instances. It is managed as a Kubernetes (K8s) deployment by the Openshift Serverless Logic Operator.
									</dd><dt><span class="term">Data Index Service</span></dt><dd>
										Serves as a repository for workflow definitions, instances, and associated jobs. It exposes a GraphQL API used by the Orchestrator backend plugin to retrieve workflow definitions and instances.
									</dd><dt><span class="term">Job Service</span></dt><dd>
										Orchestrates scheduled tasks for workflows.
									</dd><dt><span class="term">OpenShift Serverless</span></dt><dd>
										Provides serverless capabilities essential for workflow communication. It employs Knative eventing to interface with the Data Index service and uses Knative functions to introduce more complex logic to workflows.
									</dd><dt><span class="term">PostgreSQL Server</span></dt><dd>
										Provides a database solution essential for data persistence within the Orchestrator ecosystem. The system uses PostgreSQL Server for storing both Sonataflow information and Developer Hub data.
									</dd></dl></div></dd><dt><span class="term">Keycloak</span></dt><dd>
							Provides authentication and security services within applications. Keycloak must be provisioned externally to manage authentication, as the Orchestrator Operator does not install it.
						</dd><dt><span class="term">OpenShift AMQ Streams (Strimzi/Kafka)</span></dt><dd><p class="simpara">
							Provides enhanced reliability of the eventing system. Eventing can work without Kafka by using direct HTTP calls, however, this approach is not reliable.
						</p><p class="simpara">
							Optional: The current deployment iteration does not natively integrate or include the AMQ Streams Operator. However, you can add the Operator post-install for enhanced reliability if you require it.
						</p></dd></dl></div></section><section class="section" id="con-compatibility-guide-for-orchestrator.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h3 class="title">1.2. Compatibility guide for Orchestrator</h3></div></div></div><p>
				The following table lists the RHDH Orchestrator plugin versions and their compatible corresponding infrastructure versions.
			</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 20%; " class="col_1"/><col style="width: 20%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 20%; " class="col_4"/><col style="width: 20%; " class="col_5"/></colgroup><tbody><tr><td align="left" valign="top">
							<p>
								Orchestrator plugin version
							</p>
							</td><td align="left" valign="top">
							<p>
								Red Hat Developer Hub (RHDH) version
							</p>
							</td><td align="left" valign="top">
							<p>
								OpenShift version
							</p>
							</td><td align="left" valign="top">
							<p>
								OpenShift Serverless Logic (OSL) version
							</p>
							</td><td align="left" valign="top">
							<p>
								OpenShift Serverless version
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								Orchestrator <code class="literal">1.5</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								<code class="literal">1.5</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								<code class="literal">4.14</code> - <code class="literal">4.18</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								OSL <code class="literal">1.35</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								<code class="literal">1.35</code>
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								Orchestrator <code class="literal">1.6</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								<code class="literal">1.6</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								<code class="literal">4.14</code> - <code class="literal">4.18</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								OSL <code class="literal">1.36</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								<code class="literal">1.36</code>
							</p>
							</td></tr><tr><td align="left" valign="top">
							<p>
								Orchestrator <code class="literal">1.7</code> (RHDH 1.8)
							</p>
							</td><td align="left" valign="top">
							<p>
								1.8
							</p>
							</td><td align="left" valign="top">
							<p>
								<code class="literal">4.16</code> - <code class="literal">4.19</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								OSL <code class="literal">1.36</code>
							</p>
							</td><td align="left" valign="top">
							<p>
								<code class="literal">1.36</code>
							</p>
							</td></tr></tbody></table></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Orchestrator plugin supports the same OpenShift Container Platform versions as RHDH. See the <a class="link" href="https://access.redhat.com/support/policy/updates/developerhub?extIdCarryOver=true&amp;sc_cid=RHCTG0180000371695">Life Cycle</a> page.
				</p></div></div></section><section class="section" id="con-orchestrator-plugin-dependencies-operator.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h3 class="title">1.3. Orchestrator plugin dependencies for Operator installation</h3></div></div></div><p>
				When you enable the Orchestrator plugin in your Backstage custom resource (CR), the Operator automatically provisions the following required dependencies:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						A <code class="literal">SonataflowPlatform</code> CR
					</li><li class="listitem">
						<code class="literal">NetworkPolicies</code> that allow traffic between infrastructure resources (Knative, Serverless Logic Operator), monitoring traffic, and intra-namespace traffic
					</li></ul></div><p>
				The Orchestrator plugin requires these components to run. For example, to communicate with the SonataFlow platform, the Orchestrator plugin uses the <code class="literal">sonataflow-platform-data-index-service</code>, which is created by the <code class="literal">SonataFlowPlatform</code> CR.
			</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					The <code class="literal">SonataFlowPlatform</code> CR contains Data Index service that requires PostgreSQL database as shown in the following example:
				</p><pre class="programlisting language-yaml">      persistence:
        postgresql:
          secretRef:
            name: backstage-psql-secret-{{backstage-name}}
            userKey: POSTGRES_USER
            passwordKey: POSTGRES_PASSWORD
          serviceRef:
            name: backstage-psql-{{backstage-name}} # # Namespace where the Backstage CR is created
            namespace: {{backstage-ns}} # Namespace where the Backstage (CR) is created
            databaseName: backstage_plugin_orchestrator</pre></div></div><p>
				By default, the Orchestrator plugin dependencies use the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The PostgreSQL database named <code class="literal">backstage_plugin_orchestrator</code> created by Backstage
					</li><li class="listitem">
						A Secret created by Backstage Operator for the PostgreSQL with <code class="literal">POSTGRES_USER</code> and <code class="literal">POSTGRES_PASSWORD</code> keys as the database credentials in the Backstage CR namespace.
					</li><li class="listitem">
						A Service created by Backstage Operator for the PostgreSQL database with the name <code class="literal">backstage-psql-{{backstage-name}}</code> in the Backstage CR namespace.
					</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					To enable the Backstage Operator to work with the SonataFlow platform, its <code class="literal">ServiceAccount</code> must have the appropriate permissions.
				</p><p>
					The Operator automatically creates the required Role and <span class="emphasis"><em>RoleBinding</em></span> resource in <code class="literal">profile/rhdh/plugin-rbac</code> directory.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://github.com/redhat-developer/rhdh-operator/blob/release-1.7/docs/dynamic-plugins.md#dynamic-plugins-dependency-management">Dynamic plugins dependency management</a>
					</li></ul></div></section><section class="section" id="proc-enabling-orchestrator-plugins-components.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h3 class="title">1.4. Enabling Orchestrator plugins components</h3></div></div></div><p>
				To use the Orchestrator, enable the Orchestrator plugins for Red Hat Developer Hub, that are disabled by default:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Orchestrator frontend plugins</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">backstage-plugin-orchestrator</code></span></dt><dd>
										Provides the interface for users to run and monitor workflows within RHDH. You can run and track the execution status of processes.
									</dd><dt><span class="term"><code class="literal">backstage-plugin-orchestrator-form-widgets</code></span></dt><dd>
										Provides custom widgets for the workflow execution form, allowing you to customize input fields and streamline the process of launching workflows.
									</dd><dt><span class="term"><code class="literal">backstage-plugin-orchestrator-form</code></span></dt><dd>
										Provides the workflow execution form where you can define and submit the necessary input data required to start a new workflow instance.
									</dd><dt><span class="term"><code class="literal">backstage-plugin-orchestrator-form-api</code></span></dt><dd>
										Defines the API for extending the workflow execution form.
									</dd></dl></div></dd><dt><span class="term">Orchestrator backend plugins</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">backstage-plugin-orchestrator-backend</code></span></dt><dd>
										Gets workflow data into Developer Hub making sure RHDH ingests critical workflow metadata and runtime status fulfilling your need for visibility.
									</dd><dt><span class="term"><code class="literal">backstage-plugin-orchestrator-common</code></span></dt><dd>
										Contains the backend OpenAPI specification along with autogenerated API documentation and client libraries.
									</dd><dt><span class="term"><code class="literal">scaffolder-backend-module-orchestrator</code></span></dt><dd>
										Provides callable actions from scaffolder templates, such as <code class="literal">orchestrator:workflow:run</code> or <code class="literal">orchestrator:workflow:get_params</code>.
									</dd></dl></div></dd><dt><span class="term">Notification plugins</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">backstage-plugin-notifications</code></span></dt><dd>
										Provides notification frontend components that allow you to display immediate, visible alerts about key workflow state changes, allowing real-time status tracking.
									</dd><dt><span class="term"><code class="literal">backstage-plugin-signals</code></span></dt><dd>
										Provides notification frontend components user experience enhancements so you can process the real-time lifecycle events.
									</dd><dt><span class="term"><code class="literal">backstage-plugin-notifications-backend-dynamic</code></span></dt><dd>
										Provides notification backend components allowing you to manage and store the stream of workflow events, making sure that critical notifications are ready to be served to the front-end user interface.
									</dd><dt><span class="term"><code class="literal">backstage-plugin-signals-backend-dynamic</code></span></dt><dd>
										Provides the backend components for notification user experience enhancements allowing you to establish the necessary communication channels for the event-driven orchestration that is core to Serverless Workflows.
									</dd></dl></div></dd></dl></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						When using the Red Hat Developer Hub Helm chart, you have installed the necessary OpenShift Serverless Operators.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							When using the Red Hat Developer Hub Operator, the Operator installs the necessary OpenShift Serverless Operators automatically. For specific use cases, install the dependencies manually or use helper utilities.
						</p></div></div></li><li class="listitem">
						(Optional) For managing the Orchestrator project, you have an instance of Argo CD or Red Hat OpenShift GitOps in the cluster. It is disabled by default.
					</li><li class="listitem">
						(Optional) To use Tekton tasks and the build pipeline, you have an instance of Tekton or Red Hat OpenShift Pipelines in the cluster. These features are disabled by default.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Locate your Developer Hub configuration and enable the Orchestrator plugins and the supporting notification plugins.
					</p><pre class="programlisting language-yaml">plugins:
  - package: "@redhat/backstage-plugin-orchestrator@1.8.0"
    disabled: false
  - package: "@redhat/backstage-plugin-orchestrator-backend-dynamic@1.8.0"
    disabled: false
  - package: "@redhat/backstage-plugin-scaffolder-backend-module-orchestrator-dynamic@1.8.0"
    disabled: false
  - package: "@redhat/backstage-plugin-orchestrator-form-widgets@1.8.0"
    disabled: false
  - package: "@redhat/backstage-plugin-orchestrator-common@1.8.0"
    disabled: false
  - package: "@redhat/backstage-plugin-orchestrator-form@1.8.0"
    disabled: false
  - package: "@redhat/backstage-plugin-orchestrator-form-api@1.8.0"
    disabled: false
  - package: "./dynamic-plugins/dist/backstage-plugin-notifications"
    disabled: false
  - package: "./dynamic-plugins/dist/backstage-plugin-signals"
    disabled: false
  - package: "./dynamic-plugins/dist/backstage-plugin-notifications-backend-dynamic"
    disabled: false
  - package: "./dynamic-plugins/dist/backstage-plugin-signals-backend-dynamic"
    disabled: false</pre></li></ul></div><section class="section" id="proc-helm-install-components-orchestrator-plugin_orchestrator-rhdh"><div class="titlepage"><div><div><h4 class="title">1.4.1. Installing components using the Orchestrator Infrastructure for Red Hat Developer Hub Helm chart</h4></div></div></div><p>
					You can use Orchestrator Infrastructure for Red Hat Developer Hub to install components for the Orchestrator plugins.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Run the <code class="literal">helm install</code> command for the <code class="literal">orchestrator-infra</code> chart. This command initiates the installation of the Red Hat Serverless Operator and Red Hat Serverless Logic Operator components.
						</li><li class="listitem">
							Manually approve the install plans for the Operators. You must run the <code class="literal">oc patch installplan</code> commands provided in the output to approve their installation.
						</li></ol></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						By default, Orchestrator Infrastructure for Red Hat Developer Hub Helm chart does <span class="strong strong"><strong>not</strong></span> auto-approve the required Serverless Operators. You must manually approve the install plans.
					</p></div></div></section><section class="section" id="proc-manual-install-orchestrator-plugin_orchestrator-rhdh"><div class="titlepage"><div><div><h4 class="title">1.4.2. Installing Orchestrator components manually on OpenShift Container Platform</h4></div></div></div><p>
					Use manual installation when you want full control of the setup process and component versions. Manual installation method focuses on setting up the underlying infrastructure.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Install the OpenShift Serverless components manually by following the instructions in the <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_openshift_serverless/1.36">Red Hat OpenShift Serverless</a> documentation.
						</li><li class="listitem">
							You must also configure workflow persistence to prevent workflow context from being lost when the Pod restarts. You can do this configuration at the namespace level using the <code class="literal">SonataFlowPlatform</code> or <code class="literal">SonataFlow</code> custom resources (CR). For detailed instructions on configuring persistence using the <code class="literal">SonataFlowPlatform</code> or <code class="literal">SonataFlow</code> custom resources, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_openshift_serverless/1.36/html-single/serverless_logic/index#serverless-logic-managing-persistence">Managing workflow persistence</a>.
						</li><li class="listitem">
							(Optional) If required, deploy a custom PostgreSQL database.
						</li></ol></div></section><section class="section" id="proc-helper-script-overview.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h4 class="title">1.4.3. Installing components using the <code class="literal">RHDH</code> helper script</h4></div></div></div><p>
					You can use the RHDH helper script <code class="literal">plugin-infra.sh</code> to quickly install the OpenShift Serverless infrastructure and Openshift Serverless Logic infrastructure required by the Orchestrator plugin.
				</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
						Do not use <code class="literal">plugin-infra.sh</code> in production.
					</p></div></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Download the <code class="literal">plugin-infra.sh</code> script as shown in the following example:
						</p><pre class="programlisting language-terminal">curl -sSLO https://raw.githubusercontent.com/redhat-developer/rhdh-operator/refs/heads/release-${PRODUCT_VERSION}/config/profile/rhdh/plugin-infra/plugin-infra.sh # Specify the Red Hat Developer Hub version in the URL or use main</pre></li><li class="listitem"><p class="simpara">
							Run the script:
						</p><pre class="programlisting language-terminal">$ ./plugin-infra.sh</pre></li></ol></div></section></section></section><section class="section" id="assembly-building-and-deploying-serverless-workflows"><div class="titlepage"><div><div><h2 class="title">2. Build and deploy serverless workflows</h2></div></div></div><p>
			To deploy a workflow and make it available in the Orchestrator plugin, follow these main steps:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Building workflow images
				</li><li class="listitem">
					Generating workflow manifests
				</li><li class="listitem">
					Deploying workflows to a cluster
				</li></ul></div><p>
			This process moves the workflow from your local machine to deployment on a cluster.
		</p><section class="section" id="con-benefits-of-workflow-images.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h3 class="title">2.1. Benefits of workflow images</h3></div></div></div><p>
				While the OpenShift Serverless Logic Operator supports the building of workflows dynamically, this approach is primarily for experimentation. For production deployments, building images is the preferred method due to the following reasons:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Production readiness: Prebuilt images can be scanned, secured, and tested before going live.
					</li><li class="listitem">
						GitOps compatibility: The Orchestrator relies on a central OpenShift Serverless Logic Operator instance to track workflows and their state. To use this tracking service, you must deploy workflows with the <code class="literal">gitops</code> profile, which expects a prebuilt image.
					</li><li class="listitem">
						Testing and quality: Building an image gives you more control over the testing process.
					</li></ul></div><section class="section" id="con-project-structure-overview.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h4 class="title">2.1.1. Project structure overview</h4></div></div></div><p>
					The project utilizes <span class="strong strong"><strong>Quarkus project layout</strong></span> (Maven project structure). This structure is illustrated by the following <code class="literal">01_basic</code> workflow example:
				</p><pre class="programlisting language-yaml">01_basic
├── pom.xml
├── README.md
└── src
    └── main
        ├── docker
        │   ├── Dockerfile.jvm
        │   ├── Dockerfile.legacy-jar
        │   ├── Dockerfile.native
        │   └── Dockerfile.native-micro
        └── resources
            ├── application.properties
            ├── basic.svg
            ├── basic.sw.yaml
            ├── schemas
            │   ├── basic__main-schema.json
            │   └── workflow-output-schema.json
            └── secret.properties</pre><p>
					The main workflow resources are located under the <code class="literal">src/main/resources/</code> directory.
				</p><p>
					The <code class="literal">kn-workflow CLI</code> generated this project structure. You can try generating the structure yourself by following the <span class="emphasis"><em>Getting Started guide</em></span>. For more information on the Quarkus project, see <a class="link" href="https://quarkus.io/guides/getting-started">Creating your first application</a>.
				</p></section><section class="section" id="proc-creating-and-running-workflows.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h4 class="title">2.1.2. Creating and running your serverless workflow project locally</h4></div></div></div><p>
					The <code class="literal">kn-workflow</code> CLI is an essential tool that generates workflow manifests and project structures. To ensure successful development and immediate testing, begin developing a new serverless workflow locally by completing the following steps:
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use the <code class="literal">kn-workflow</code> CLI to create a new workflow project, which adheres to the Quarkus structure as shown in the following example:
						</p><pre class="programlisting language-bash">kn-workflow quarkus create --name &lt;specify project name, for example ,00_new_project&gt;</pre></li><li class="listitem"><p class="simpara">
							Edit the workflow, add schema and specific files, and run it locally from project folder as shown in the following example:
						</p><pre class="programlisting language-bash">kn-workflow quarkus run</pre></li><li class="listitem"><p class="simpara">
							Run the workflow locally using the <code class="literal">kn-workflow run</code> which pulls the following image:
						</p><pre class="programlisting language-yaml">registry.redhat.io/openshift-serverless-1/logic-swf-devmode-rhel8:1.36.0</pre></li><li class="listitem"><p class="simpara">
							For building the workflow image, the <code class="literal">kn-workflow</code> CLI pulls the following images:
						</p><pre class="programlisting language-yaml">registry.redhat.io/openshift-serverless-1/logic-swf-builder-rhel8:1.36.0-8
registry.access.redhat.com/ubi9/openjdk-17:1.21-2</pre></li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
							<a class="link" href="https://openshift-knative.github.io/docs/docs/latest/serverless-logic/about.html">About OpenShift Serverless Logic</a>
						</li><li class="listitem">
							<a class="link" href="https://redhat-scholars.github.io/serverless-workflow/osl/index.html">OpenShift Serverless Logic Tutorial</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index#running-behind-a-proxy">Running Red Hat Developer Hub behind a corporate proxy</a>
						</li><li class="listitem">
							<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_build_of_quarkus/3.15/html-single/getting_started_with_red_hat_build_of_quarkus/index#proc_online-maven_quarkus-getting-started">Using the Red Hat-hosted Quarkus repository</a>
						</li></ul></div></section></section><section class="section" id="proc-building-locally.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h3 class="title">2.2. Building workflow images locally</h3></div></div></div><p>
				You can use the build script (<code class="literal">build.sh</code>) to build workflow images. You can run it either locally or inside a container. This section highlights how build workflow images locally.
			</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Clone the project as shown in the following example:
					</p><pre class="programlisting language-yaml">git clone git@github.com:rhdhorchestrator/orchestrator-demo.git
cd orchestrator-demo</pre></li><li class="listitem"><p class="simpara">
						Check the help menu of the script:
					</p><pre class="programlisting language-yaml">./scripts/build.sh --help</pre></li><li class="listitem"><p class="simpara">
						Run the <code class="literal">build.sh</code> script, providing the required flags, for instance, the image path (<code class="literal">-i</code>), workflow source directory (<code class="literal">-w</code>), and manifests output directory (<code class="literal">-m</code>).
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							You must specify the full target image path with a tag as shown in the following example:
						</p><pre class="programlisting language-yaml">./scripts/build.sh --image=quay.io/orchestrator/demo-basic:test -w 01_basic/ -m 01_basic/manifests</pre></div></div></li></ol></div><section class="section" id="con-build-sh-script-and-its-uses.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h4 class="title">2.2.1. The <code class="literal">build-sh</code> script functionality and important flags</h4></div></div></div><p>
					The <code class="literal">build-sh</code> script does the following tasks in order:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Generates workflow manifests using the <code class="literal">kn-workflow</code> CLI.
						</li><li class="listitem">
							Builds the workflow image using <code class="literal">podman</code> or <code class="literal">docker</code>.
						</li><li class="listitem">
							Optional: The script pushes the images to an image registry and deploys the workflow using <code class="literal">kubectl</code>.
						</li></ul></div><p>
					You can review the script configuration options and see available flags and their functions by accessing the help menu:
				</p><pre class="programlisting language-bash">./scripts/build.sh [flags]</pre><p>
					The following flags are essential for running the script:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"/><col style="width: 75%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm46323729533840" scope="col">Flag</th><th align="left" valign="top" id="idm46323731343584" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46323729533840">
								<p>
									<code class="literal">-i</code>, <code class="literal">--image</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323731343584">
								<p>
									Required: Full image path, for example, <code class="literal">quay.io/orchestrator/demo:latest</code>
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323729533840">
								<p>
									<code class="literal">-w</code>, <code class="literal">--workflow-directory</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323731343584">
								<p>
									Workflow source directory (default is the current directory)
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323729533840">
								<p>
									<code class="literal">-m</code>, <code class="literal">--manifests-directory</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323731343584">
								<p>
									Where to save generated manifests
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323729533840">
								<p>
									<code class="literal">--push</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323731343584">
								<p>
									Push the image to the registry
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323729533840">
								<p>
									<code class="literal">--deploy</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323731343584">
								<p>
									Deploy the workflow
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323729533840">
								<p>
									<code class="literal">-h</code>, <code class="literal">--help</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323731343584">
								<p>
									Show the help message
								</p>
								</td></tr></tbody></table></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					The script also supports builder and runtime image overrides, namespace targeting, and persistence flags.
				</p></div></div></section><section class="section" id="con-environment-variables-supported-by-the-build-script.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h4 class="title">2.2.2. Environment variables supported by the build script</h4></div></div></div><p>
					The <code class="literal">build-sh</code> script supports the following environment variables to customize the workflow build process without modifying the script itself:
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">QUARKUS_EXTENSIONS</code></span></dt><dd><p class="simpara">
								The <code class="literal">QUARKUS_EXTENSIONS</code> variable specifies additional <a class="link" href="https://quarkus.io/extensions/">Quarkus</a> extensions required by the workflow. This variable takes the format of a comma-separated list of fully qualified extension IDs as shown in the following example:
							</p><pre class="programlisting language-yaml">export QUARKUS_EXTENSIONS="io.quarkus:quarkus-smallrye-reactive-messaging-kafka"</pre><p class="simpara">
								Add Kafka messaging support or other integrations at build time.
							</p></dd><dt><span class="term"><code class="literal">MAVEN_ARGS_APPEND</code></span></dt><dd><p class="simpara">
								The <code class="literal">MAVEN_ARGS_APPEND</code> variable appends additional arguments to the <span class="strong strong"><strong>Maven build</strong></span> command. This variable takes the format of a string of Maven CLI arguments as shown in the following example:
							</p><pre class="programlisting language-yaml">export MAVEN_ARGS_APPEND="-DmaxYamlCodePoints=35000000"</pre><p class="simpara">
								Control build behavior. For example, set <code class="literal">maxYamlCodePoints</code> parameter that controls the maximum input size for YAML input files to 35000000 characters (~33MB in UTF-8).
							</p></dd></dl></div></section><section class="section" id="con-required-tools.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h4 class="title">2.2.3. Required tools</h4></div></div></div><p>
					To run the <code class="literal">build-sh</code> script locally and manage the workflow lifecycle, you must install the following command-line tools:
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"/><col style="width: 75%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm46323726615680" scope="col">Tool</th><th align="left" valign="top" id="idm46323726614816" scope="col">Conceptual Purpose.</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46323726615680">
								<p>
									podman or docker
								</p>
								</td><td align="left" valign="top" headers="idm46323726614816">
								<p>
									Container runtime required for building the workflow images.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323726615680">
								<p>
									<code class="literal">kubectl</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323726614816">
								<p>
									Kubernetes CLI.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323726615680">
								<p>
									<code class="literal">yq</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323726614816">
								<p>
									YAML processor.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323726615680">
								<p>
									<code class="literal">jq</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323726614816">
								<p>
									JSON processor.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323726615680">
								<p>
									<code class="literal">curl</code>, <code class="literal">git</code>, <code class="literal">find</code>, <code class="literal">which</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323726614816">
								<p>
									Shell utilities.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm46323726615680">
								<p>
									<code class="literal">kn-workflow</code>
								</p>
								</td><td align="left" valign="top" headers="idm46323726614816">
								<p>
									CLI for generating workflow manifests.
								</p>
								</td></tr></tbody></table></div></section><section class="section" id="proc-building-the-01-basic-workflow.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h4 class="title">2.2.4. Building the <code class="literal">01_basic</code> workflow</h4></div></div></div><p>
					To run the script from the root directory of the repository, you must use the <code class="literal">-w</code> flag to point to the workflow directory. Additionally, specify the output directory with the <code class="literal">-m</code> flag.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have specified the target image using a tag.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Run the following command:
						</p><pre class="programlisting language-bash">./scripts/build.sh --image=quay.io/orchestrator/demo-basic:test -w 01_basic/ -m 01_basic/manifests</pre><p class="simpara">
							This build command produces the following two artifacts:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									A workflow image and Kubernetes manifests: <code class="literal">quay.io/orchestrator/demo-basic:test</code> and tagged as <code class="literal">latest</code>.
								</li><li class="listitem">
									Kubernetes manifests under: <code class="literal">01_basic/manifests/</code>
								</li></ul></div></li><li class="listitem">
							Optional: You can add the <code class="literal">--push</code> flag to automatically push the image after building. Otherwise, pushing manually is mandatory before deploying.
						</li></ol></div></section></section><section class="section" id="con-generated-workflow-manifests.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h3 class="title">2.3. Generated workflow manifests</h3></div></div></div><p>
				The following example is an illustration of what is generated under the <code class="literal">01_basic/manifests</code>:
			</p><pre class="programlisting language-yaml">01_basic/manifests
├── 00-secret_basic-secrets.yaml
├── 01-configmap_basic-props.yaml
├── 02-configmap_01-basic-resources-schemas.yaml
└── 03-sonataflow_basic.yaml</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">00-secret_basic-secrets.yaml</code></span></dt><dd>
							Contains secrets from <code class="literal">01_basic/src/main/resources/secret.properties</code>. Values are not required at this stage as you can set them later after applying CRs or when using GitOps.
						</dd></dl></div><div class="informalexample"><p>
				In OpenShift Serverless Logic <code class="literal">v1.36</code>, after updating a secret, you must manually restart the workflow Pod for changes to apply.
			</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">01-configmap_basic-props.yaml</code></span></dt><dd>
							Holds application properties from application.properties. Any change to this ConfigMap triggers an automatic Pod restart.
						</dd><dt><span class="term"><code class="literal">02-configmap_01-basic-resources-schemas.yaml</code></span></dt><dd><p class="simpara">
							Contains JSON schemas from src/main/resources/schemas.
						</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								You do not need to deploy certain configuration resources when using the GitOps profile.
							</p></div></div></dd><dt><span class="term"><code class="literal">03-sonataflow_basic.yaml</code></span></dt><dd><p class="simpara">
							The SonataFlow custom resource (CR) that defines the workflow.
						</p><pre class="programlisting language-yaml">podTemplate:
  container:
    image: quay.io/orchestrator/demo-basic
    resources: {}
    envFrom:
      - secretRef:
          name: basic-secrets</pre><pre class="programlisting language-yaml">persistence:
  postgresql:
    secretRef:
      name: <code class="literal">sonataflow-psql-postgresql</code>
      userKey: <code class="literal"><span class="emphasis"><em>&lt;your_postgres_username&gt;</em></span></code>
      passwordKey: <code class="literal"><span class="emphasis"><em>&lt;your_postgres_password&gt;</em></span></code>
    serviceRef:
      name: <code class="literal">sonataflow-psql-postgresql</code>
      port: 5432
      databaseName: sonataflow
      databaseSchema: basic</pre><p class="simpara">
							where:
						</p></dd><dt><span class="term"><code class="literal">postgresql:secretRef:name</code></span></dt><dd>
							Enter the Secret name for your deployment.
						</dd><dt><span class="term"><code class="literal">postgresql:secretRef:userKey</code></span></dt><dd>
							Enter the key for your deployment.
						</dd><dt><span class="term"><code class="literal">postgresql:secretRef:passwordKey</code></span></dt><dd>
							Enter the password for your deployment.
						</dd><dt><span class="term"><code class="literal">postgresql:serviceRef:name</code></span></dt><dd><p class="simpara">
							Enter the Service name for your deployment.
						</p><p class="simpara">
							If you must connect to an external database, replace <code class="literal">serviceRef</code> with <code class="literal">jdbcUrl</code>. See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_openshift_serverless/1.36/html-single/serverless_logic/index#serverless-logic-managing-persistence">Managing workflow persistence</a>.
						</p></dd></dl></div><p>
				By default, the script generates all the manifests without a namespace. You can specify a namespace to the script by using the <code class="literal">--namespace</code> flag if you know the target namespace in advance. Otherwise, you must provide the namespace when applying the manifests to the cluster. See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_openshift_serverless/1.36/html-single/serverless_logic/index#serverless-logic-configuring-workflow-services">Configuring workflow services</a>.
			</p></section><section class="section" id="proc-deploying-workflows-on-a-cluster.adoc_orchestrator-rhdh"><div class="titlepage"><div><div><h3 class="title">2.4. Deploying workflows on a cluster</h3></div></div></div><p>
				You can deploy the workflow on a cluster, since the image is pushed to the image registry and the deployment manifests are available.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have an OpenShift Container Platform cluster with the following versions of components installed:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								Red Hat Developer Hub (RHDH) <code class="literal">v1.7</code>
							</li><li class="listitem">
								Orchestrator plugins <code class="literal">v1.7.1</code>
							</li><li class="listitem">
								OpenShift Serverless <code class="literal">v1.36</code>
							</li><li class="listitem"><p class="simpara">
								OpenShift Serverless Logic <code class="literal">v1.36</code>
							</p><p class="simpara">
								For instructions on how to install these components, see the <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/orchestrator_in_red_hat_developer_hub/index#con-orchestrator-plugin-components.adoc_orchestrator-rhdh">Orchestrator plugin components on OpenShift Container Platform</a>.
							</p></li></ul></div></li><li class="listitem">
						You must apply the workflow manifests in a namespace that contains a <code class="literal">SonataflowPlatform</code> custom resource (CR), which manages the <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_openshift_serverless/1.36/html-single/serverless_logic/index#serverless-logic-configuring-workflow-services">supporting services</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Use the <code class="literal">kubectl create</code> command specifying the target namespace to apply the Kubernetes manifests as shown in the following example:
					</p><pre class="programlisting language-bash">kubectl create -n &lt;your_namespace&gt; -f ./01_basic/manifests/.</pre></li><li class="listitem"><p class="simpara">
						After deployment, monitor the status of the workflow pods as shown in the following example:
					</p><pre class="programlisting language-yaml">kubectl get pods -n &lt;your_namespace&gt; -l app=basic</pre><p class="simpara">
						The pod may initially appear in an <code class="literal">Error</code> state because of missing or incomplete configuration in the Secret or ConfigMap.
					</p></li><li class="listitem"><p class="simpara">
						Inspect the Pod logs as shown in the following example:
					</p><pre class="programlisting language-yaml">oc logs -n &lt;your_namespace&gt; basic-f7c6ff455-vwl56</pre><p class="simpara">
						The following code is an example of the output:
					</p><pre class="programlisting language-yaml">SRCFG00040: The config property quarkus.openapi-generator.notifications.auth.BearerToken.bearer-token is defined as the empty String ("") which the following Converter considered to be null: io.smallrye.config.Converters$BuiltInConverter
java.lang.RuntimeException: Failed to start quarkus
...
Caused by: io.quarkus.runtime.configuration.ConfigurationException: Failed to read configuration properties</pre><p class="simpara">
						The error indicates a missing property: <code class="literal">quarkus.openapi-generator.notifications.auth.BearerToken.bearer-token</code>.
					</p></li><li class="listitem"><p class="simpara">
						In such a case where the logs show the <code class="literal">ConfigurationException: Failed to read configuration properties</code> error or indicate a missing value, retrieve the ConfigMap as shown in the following example:
					</p><pre class="programlisting language-yaml">oc get -n &lt;your_namespace&gt; configmaps basic-props -o yaml</pre><p class="simpara">
						The following code is an example of the sample output:
					</p><pre class="programlisting language-yaml">apiVersion: v1
data:
  application.properties: |
    # Backstage notifications service
    quarkus.rest-client.notifications.url=${BACKSTAGE_NOTIFICATIONS_URL}
    quarkus.openapi-generator.notifications.auth.BearerToken.bearer-token=${NOTIFICATIONS_BEARER_TOKEN}
...</pre><p class="simpara">
						Resolve the placeholders using values provided using a Secret.
					</p></li><li class="listitem"><p class="simpara">
						You must edit the corresponding Secret and provide appropriate base64-encoded values to resolve the placeholders in <code class="literal">application.properties</code> as shown in the following example:
					</p><pre class="programlisting language-yaml">kubectl edit secrets -n &lt;your_namespace&gt; basic-secrets</pre></li><li class="listitem">
						Restart the workflow Pod for Secret changes to take effect in OpenShift Serverless Logic <code class="literal">v1.36</code>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify the deployment status by checking the Pods again as shown in the following example:
					</p><pre class="programlisting language-yaml">oc get pods -n &lt;your_namespace&gt; -l app=basic</pre><p class="simpara">
						The expected status for a successfully deployed workflow Pod is as shown in the following example:
					</p><pre class="programlisting language-yaml">NAME                    READY   STATUS    RESTARTS   AGE
basic-f7c6ff455-grkxd   1/1     Running   0          47s</pre></li><li class="listitem">
						Once the Pod is in the <code class="literal">Running</code> state, the workflow now appears in the Orchestrator plugin inside the Red Hat Developer Hub.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Inspect the provided build script to extract the actual steps and implement them in your preferred CI/CD tool, for example, GitHub Actions, GitLab CI, Jenkins, and Tekton.
					</li></ul></div></section></section><section class="section" id="assembly-install-rhdh-orchestrator"><div class="titlepage"><div><div><h2 class="title">3. Installing Red Hat Developer Hub with Orchestrator</h2></div></div></div><p>
			To install Red Hat Developer Hub, use one of the following methods:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					The Red Hat Developer Hub Operator
				</li><li class="listitem">
					The Red Hat Developer Hub Helm chart
				</li></ul></div><section class="section" id="proc-enable-orchestrator-plugin_install-rhdh-orchestrator"><div class="titlepage"><div><div><h3 class="title">3.1. Enabling the Orchestrator plugin using Operator</h3></div></div></div><p>
				You can enable the Orchestrator plugin in RHDH by configuring dynamic plugins in your Backstage custom resource (CR).
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have installed RHDH on OpenShift Container Platform.
					</li><li class="listitem">
						You have access to edit or create ConfigMaps in the namespace where the Backstage CR is deployed.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To enable the Orchestrator plugin with default settings, set <code class="literal">disabled: false</code> for the package. For example, <code class="literal">package: "@redhat/backstage-plugin-orchestrator@&lt;plugin_version&gt;</code> is set to <code class="literal">disabled: false</code>:
					</p><pre class="programlisting language-yaml">- package: "@redhat/backstage-plugin-orchestrator@&lt;plugin_version&gt;"
  disabled: false</pre><div class="formalpara"><p class="title"><strong>Example: Complete configuration of the Orchestrator plugin</strong></p><p>
							
<pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: orchestrator-plugin
data:
    dynamic-plugins.yaml: |
      includes:
        - dynamic-plugins.default.yaml
      plugins:
        - package: "@redhat/backstage-plugin-orchestrator@1.7.1"
          disabled: false
          pluginConfig:
            dynamicPlugins:
                frontend:
                  red-hat-developer-hub.backstage-plugin-orchestrator:
                    appIcons:
                      - importName: OrchestratorIcon
                        name: orchestratorIcon
                    dynamicRoutes:
                      - importName: OrchestratorPage
                        menuItem:
                          icon: orchestratorIcon
                          text: Orchestrator
                        path: /orchestrator
                    entityTabs:
                      - path: /workflows
                        title: Workflows
                        mountPoint: entity.page.workflows
                    mountPoints:
                      - mountPoint: entity.page.workflows/cards
                      importName: OrchestratorCatalogTab
                      config:
                        layout:
                          gridColumn: '1 / -1'
                          if:
                            anyOf:
                              - IsOrchestratorCatalogTabAvailable
        - package: "@redhat/backstage-plugin-orchestrator-backend-dynamic@1.7.1"
          disabled: false
          pluginConfig:
            orchestrator:
              dataIndexService:
                url: http://sonataflow-platform-data-index-service
          dependencies:
            - ref: sonataflow
        - package: "@redhat/backstage-plugin-scaffolder-backend-module-orchestrator-dynamic@1.7.1"
          disabled: false
          pluginConfig:
            orchestrator:
              dataIndexService:
                url: http://sonataflow-platform-data-index-service
        - package: "@redhat/backstage-plugin-orchestrator-form-widgets@1.7.1"
          disabled: false
          pluginConfig:
            dynamicPlugins:
              frontend:
                red-hat-developer-hub.backstage-plugin-orchestrator-form-widgets: { }
---
apiVersion: rhdh.redhat.com/v1alpha3
kind: Backstage
metadata:
  name: orchestrator
spec:
  application:
    appConfig:
      configMaps:
        - name: app-config-rhdh
    dynamicPluginsConfigMapName: orchestrator-plugin</pre>
						</p></div></li><li class="listitem"><p class="simpara">
						Create a secret containing the <code class="literal">BACKEND_SECRET</code> value as shown in the following example:
					</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config-rhdh
data:
  app-config-rhdh.yaml: |-
    auth:
      environment: development
      providers:
        guest:
          # using the guest user to query the '/api/dynamic-plugins-info/loaded-plugins' endpoint.
          dangerouslyAllowOutsideDevelopment: true
    backend:
      auth:
        externalAccess:
          - type: static
            options:
              token: ${BACKEND_SECRET}
              subject: orchestrator
---
apiVersion: v1
kind: Secret
metadata:
  name: backend-auth-secret
stringData:
  # generated with the command below (from https://backstage.io/docs/auth/service-to-service-auth/#setup):
  # node -p 'require("crypto").randomBytes(24).toString("base64")'
  # notsecret
  BACKEND_SECRET: "R2FxRVNrcmwzYzhhN3l0V1VRcnQ3L1pLT09WaVhDNUEK"</pre></li><li class="listitem"><p class="simpara">
						Configure your Backstage CR to update the secret name in the <code class="literal">extraEnvs</code> field as shown in the following example:
					</p><pre class="programlisting language-yaml">apiVersion: rhdh.redhat.com/v1alpha4
kind: Backstage
metadata:
  name: orchestrator
spec:
  application:
    appConfig:
      configMaps:
        - name: app-config-rhdh
    dynamicPluginsConfigMapName: orchestrator-plugin
    extraEnvs:
      secrets:
          # secret that contains the BACKEND_SECRET key
        - name: backend-auth-secret</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						In the RHDH console, confirm that the Orchestrator frontend and backend features are available.
					</li></ul></div></section><section class="section" id="proc-install-rhdh-with-orchestrator-helm-cli_install-rhdh-orchestrator"><div class="titlepage"><div><div><h3 class="title">3.2. Installing Red Hat Developer Hub (RHDH) on OpenShift Container Platform with the Orchestrator using the Helm CLI</h3></div></div></div><p>
				You can install Red Hat Developer Hub (RHDH) on OpenShift Container Platform with the Orchestrator by using the Helm CLI. The installation automatically enables the required dynamic plugins and integrates workflow infrastructure.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in as an administrator and have access to the Red Hat Developer Hub Helm chart repository.
					</li><li class="listitem"><p class="simpara">
						You can install the necessary infrastructures resources, such as SonataFlow, alongside RHDH in the same namespace.
					</p><p class="simpara">
						This is a one-off requirement and must be completed before enabling the Orchestrator plugin.
					</p></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						As an administrator, install relevant cluster-wide resources.
					</p><pre class="programlisting language-yaml">helm repo add openshift-helm-charts https://charts.openshift.io/
helm install <code class="literal">&lt;release_name&gt;</code> openshift-helm-charts/redhat-developer-hub-orchestrator-infra</pre><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							You must be an administrator to install the <code class="literal">redhat-developer-hub-orchestrator-infra</code> Helm chart because it deploys additional cluster-scoped OpenShift Serverless and OpenShift Serverless Logic Operators. As an administrator, you must manually approve the install plans for OpenShift Serverless and Serverless Logic Operators.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Install the Backstage chart with the orchestrator enabled as shown in the following example:
					</p><pre class="programlisting language-terminal">$ helm install &lt;release_name&gt; openshift-helm-charts/redhat-developer-hub --version 1.8.0 \
  --set orchestrator.enabled=true</pre></li><li class="listitem"><p class="simpara">
						(Optional) Enable <span class="strong strong"><strong>Notifications</strong></span> and <span class="strong strong"><strong>Signals</strong></span> plugins by adding them to the <code class="literal">global.dynamic.plugins</code> list in your <code class="literal">values.yaml</code> file as shown in the following example:
					</p><pre class="programlisting language-yaml">global:
  dynamic:
    plugins:
      - disabled: false
        package: "./dynamic-plugins/dist/backstage-plugin-notifications"
      - disabled: false
        package: "./dynamic-plugins/dist/backstage-plugin-signals"
      - disabled: false
        package: "./dynamic-plugins/dist/backstage-plugin-notifications-backend-dynamic"
      - disabled: false
        package: "./dynamic-plugins/dist/backstage-plugin-signals-backend-dynamic"</pre></li><li class="listitem"><p class="simpara">
						(Optional) You can disable the Serverless Logic and Serverless Operators individually or together by setting their values to <code class="literal">false</code>, as shown in the following example:
					</p><pre class="programlisting language-terminal">helm install &lt;release_name&gt; openshift-helm-charts/redhat-developer-hub \
  --version 1.8.0 \
  --set orchestrator.enabled=true \
  --set orchestrator.serverlessOperator=false \
  --set orchestrator.serverlessLogicOperator=false</pre></li><li class="listitem"><p class="simpara">
						(Optional) If you are using an external database, add the following configuration under <code class="literal">orchestrator.sonataflowPlatform</code> in your <code class="literal">values.yaml</code> file:
					</p><pre class="programlisting language-yaml">orchestrator:
  sonataflowPlatform:
    externalDBsecretRef: "&lt;cred-secret&gt;"
    externalDBName: "&lt;database_name&gt;" # The name of the user-configured existing database (Not the database that the orchestrator and sonataflow resources use).
    externalDBHost: "&lt;database_host&gt;"
    externalDBPort: "&lt;database_port&gt;"</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							This step only configures the Orchestrators use of an external database. To configure Red Hat Developer Hub to use an external PostgreSQL instance, follow the steps in <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index#proc-configuring-postgresql-instance-using-helm_configuring-external-postgresql-databases">Configuring a PostgreSQL instance using Helm</a>.
						</p></div></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Verify that the Orchestrator plugin is visible in the Red Hat Developer Hub UI.
					</li><li class="listitem">
						Create and run sample workflows to confirm the orchestration is functioning correctly.
					</li></ol></div></section><section class="section" id="proc-install-rhdh-with-orchestrator-helm-webui_install-rhdh-orchestrator"><div class="titlepage"><div><div><h3 class="title">3.3. Install Red Hat Developer Hub (RHDH) using Helm from the OpenShift Container Platform web console</h3></div></div></div><p>
				You can install Red Hat Developer Hub (RHDH) with the Orchestrator by using the (OpenShift Container Platform) web console. This method is useful if you prefer a graphical interface or want to deploy cluster-wide resources without using the Helm CLI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged in to the OpenShift Container Platform web console as an administrator.
					</li><li class="listitem">
						You have access to the Red Hat Developer Hub Helm chart repository.
					</li><li class="listitem">
						Your cluster has internet access or the Helm charts are mirrored in a disconnected environment.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						In the OpenShift Container Platform web console, go to the Helm Charts and verify that the Red Hat Developer Hub Helm chart repository is available.
					</li><li class="listitem"><p class="simpara">
						Search for the Orchestrator infrastructure for Red Hat Developer Hub and select <span class="strong strong"><strong>Install</strong></span>.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							You must be an administrator to install the Orchestrator Infrastructure for Red Hat Developer Hub Helm chart because it deploys cluster-scoped resources. As an administrator, you must manually approve the install plans for OpenShift Serverless and Serverless Logic Operators.
						</p></div></div><p class="simpara">
						As a regular user, search for the Red Hat Developer Hub chart and install it by setting the value of <code class="literal">orchestrator.enabled</code> to <code class="literal">true</code>. Otherwise, the Orchestrator will not be deployed.
					</p></li><li class="listitem">
						Wait until they are successfully deployed.
					</li><li class="listitem">
						Monitor the deployment status by navigating to <span class="strong strong"><strong>Pods</strong></span> or releases.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					After deployment completes:
				</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The orchestrator-related pods are running in the selected namespace.
					</li><li class="listitem">
						Cluster-wide resources are present.
					</li><li class="listitem">
						You can start connecting the orchestrator to your Red Hat Developer Hub UI.
					</li></ul></div></section><section class="section" id="ref-orchestrator-resource-limits_install-rhdh-orchestrator"><div class="titlepage"><div><div><h3 class="title">3.4. Resource limits for installing Red Hat Developer Hub with the Orchestrator plugin when using Helm</h3></div></div></div><p>
				When installing Red Hat Developer Hub (RHDH) with the Orchestrator plugin using Helm, the chart defines default CPU and memory limits for the <code class="literal">SonataFlowPlatform</code> component.
			</p><p>
				These limits are enforced by the cluster so that pods do not exceed their allocated resources.
			</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
						Default resource limits
					</li></ol></div><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm46323729064032" scope="col"><span class="strong strong"><strong>Resource</strong></span></th><th align="left" valign="top" id="idm46323729062800" scope="col"><span class="strong strong"><strong>Default value</strong></span></th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm46323729064032">
							<p>
								CPU limits
							</p>
							</td><td align="left" valign="top" headers="idm46323729062800">
							<p>
								<code class="literal">500m</code>
							</p>
							</td></tr><tr><td align="left" valign="top" headers="idm46323729064032">
							<p>
								Memory limits
							</p>
							</td><td align="left" valign="top" headers="idm46323729062800">
							<p>
								<code class="literal">1Gi</code>
							</p>
							</td></tr></tbody></table></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						You can override these values in any of the following ways:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								With <code class="literal">values.yaml</code>
							</li><li class="listitem">
								With <code class="literal">--set</code> flags
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Override defaults with <code class="literal">values.yaml</code> as shown in the following example:
					</p><pre class="programlisting language-yaml">orchestrator:
  enabled: true
  sonataflowPlatform:
  resources:
      limits:
        cpu: "500m"
        memory: "1Gi"</pre></li><li class="listitem"><p class="simpara">
						Override with <code class="literal">--set</code> as shown in the following example:
					</p><pre class="programlisting language-terminal">helm upgrade --install &lt;release_name&gt;  openshift-helm-charts/redhat-developer-hub \
  --set orchestrator.enabled=true \
  --set orchestrator.sonataflowPlatform.resources.requests.cpu=500m \
  --set orchestrator.sonataflowPlatform.resources.requests.memory=128Mi \
  --set orchestrator.sonataflowPlatform.resources.limits.cpu=1 \
  --set orchestrator.sonataflowPlatform.resources.limits.memory=2Gi</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							The <code class="literal">--set</code> setting is applicable only when <code class="literal">orchestrator.enabled</code> is <code class="literal">true</code>. By default, it is set to <code class="literal">false</code>.
						</p></div></div></li></ol></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm46323729071264"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2025 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></section></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>