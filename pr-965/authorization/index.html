<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Authorization</title>
<style>
/* Red Hat Fonts */
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}

/* Positioning toc and content */
@media screen and (min-width: 768px) {
  body.toc2 {
    padding-left: 400px;
    padding-right: 0;
  }
}
@media screen and (min-width: 768px) {
  #toc.toc2 {
    margin-top: 0 !important;
    position: fixed;
    width: 319px;
    left: 0;
    top: 0;
    border-right: 1px solid #e7e7e9;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
  }
}

/* Style borrowed from docs.redhat.com and adapted to the HTML structure */

#toc.toc2 {
  background:#f2f2f2;
  justify-content:space-between;
  margin:1rem 0 2rem;
  padding:1rem
}
#toctitle {
  font-size:1.25rem;
  font-weight:400;
  line-height:1.6667;
  margin-top:0;
  text-transform:none
}
#toc li {
  margin-bottom:.25em;
  padding-left:0;
  list-style:none;
}
#toc a,
#toc a:visited {
  color:black;
  display:inline-block;
  text-decoration:none;
}

.sectlevel1 {
  padding-left:0;
}

.sectlevel2,
.sectlevel3,
.sectlevel4,
.sectlevel5 {
  padding-left:1em;
}

h3 {
  color:#464646;
  font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);
  font-size:var(--rh-font-size-body-text-lg,1.125rem)
}

li {
  display:list-item;
  margin:0;
  padding:0;
  text-align:-webkit-match-parent
}

*,
:after,
:before,
:after,
:before {
  box-sizing:border-box
}
img,
object,
svg,
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
hr {
  border:0;
  border-top:.0625rem solid #d2d2d2;
  clear:both;
  margin:1rem 0
}
a {
  color:#06c;
  text-decoration:underline
}
a:focus,
a:hover {
  color:#036
}
p {
  margin:1.49963rem 0
}
li>p {
  margin:0
}
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-weight:400;
  margin:0 0 .625rem;
  color:#464646;
}
h1 {
  font-size:2rem;
  margin:2rem 0
}
h2 {
  font-size:2rem;
  margin:2rem 0
}
h3 {
  font-size:1.65rem;
  font-weight:400
}
h4 {
  font-size:1.5rem
}
h5 {
  font-size:1.25rem
  font-weight:400
}
h6 {
  font-size:1.125rem;
  font-weight:500;
  line-height:1.6667
}
ol ::marker,
ul ::marker {
  font:inherit
}
li {
  margin:0 0 .5em;
  padding:0
}
li>p {
  margin:.5rem 0
}
li>ol,
li>ul {
  margin:0
}
dl dd {
  margin:.5rem 0 .5rem 1rem
}
dl dd>p {
  margin:.5rem 0
}
.informaltable,
.table-contents,
.table-wrapper {
  max-height:var(--rh-table--maxHeight);
  overflow:auto
}
table {
  border:0;
  font-size:1rem;
  line-height:1.6667;
  /* commented out as it breaks on Safari on Mac // table-layout:fixed */
}
table caption {
  color:#585858;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:left
}
table td,
table th {
  border:0;
  border-bottom:.0625rem solid #d2d2d2;
  border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);
  padding:.5em 1rem
}
table td.halign-left,
table th.halign-left {
  text-align:left
}
table td.halign-center,
table th.halign-center,
table td.halign-center,
table th.halign-center {
  text-align:center
}
table td.halign-right,
table th.halign-right {
  text-align:right
}
table td.valign-top,
table th.valign-top {
  vertical-align:top
}
table td.valign-middle,
table th.valign-middle {
  vertical-align:middle
}
table td.valign-bottom,
table th.valign-bottom {
  vertical-align:bottom
}
table thead td,
table thead th {
  background:#f5f5f5;
  font-weight:600
}
rh-table table,
rh-table.rh-table--expanded-vertically {
  max-height:-moz-max-content;
  max-height:max-content
}
pre.nowrap {
  overflow:auto;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
.listingblock pre {
  background:transparent
}

[class] pre code {
  background:inherit;
  color:inherit;
  font-family:inherit;
  font-size:inherit;
  font-weight:inherit;
  line-height:inherit;
  padding:0
}
.keycap,
kbd {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
.keycap strong,
.keycap strong {
  font-weight:inherit
}
kbd.keyseq,
kbd.keyseq {
  background:transparent;
  border:0;
  box-shadow:none;
  padding:0
}
kbd.keyseq kbd,
kbd.keyseq kbd {
  display:inline-block;
  margin:0 .375rem
}
kbd.keyseq kbd:first-child,
kbd.keyseq kbd:first-child {
  margin-left:0
}
b.button {
  font-size:90%;
  font-weight:700;
  padding:.1875rem
}
b.button:before {
  content:"["
}
b.button:after {
  content:"]"
}
html {
  font-family:sans-serif;
  -ms-text-size-adjust:100%;
  -webkit-text-size-adjust:100%
}
body {
  margin:0
}
audio,
canvas,
progress,
video {
  display:inline-block;
  vertical-align:baseline
}
audio:not([controls]) {
  display:none;
  height:0
}
[hidden],
template {
  display:none
}
a {
  background:transparent
}
a:active,
a:hover {
  outline:0
}
abbr[title] {
  border-bottom:.0625rem dotted
}
dfn {
  font-style:italic
}

mark {
  background:#ff0;
  color:#000
}
small {
  font-size:80%
}
sub,
sup {
  font-size:75%;
  line-height:0;
  position:relative;
  vertical-align:baseline
}
sup {
  top:-.5em
}
sub {
  bottom:-.25em
}
img {
  border:0
}
svg:not(:root) {
  overflow:hidden
}
figure {
  margin:1em 2.5rem
}
hr {
  box-sizing:content-box;
  height:0
}
code,
kbd,
pre,
samp {
  font-family:monospace,monospace;
  font-size:1em
}
button,
optgroup,
select,
textarea,
.rhdocsinput {
  color:inherit;
  font:inherit;
  margin:0
}
button {
  overflow:visible
}
button,
select {
  text-transform:none
}
button,
html input[type=button],
input[type=reset],
input[type=submit] {
  -moz-appearance:button;
  appearance:button;
  -webkit-appearance:button;
  cursor:pointer
}
button[disabled],
html input[disabled] {
  cursor:default
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border:0;
  padding:0
}
input {
  line-height:normal
}
input[type=checkbox],
input[type=radio] {
  box-sizing:border-box;
  padding:0
}
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  height:auto
}
input[type=search] {
  -moz-appearance:textfield;
  appearance:textfield;
  -webkit-appearance:textfield;
  box-sizing:content-box
}
input[type=search]::-webkit-search-cancel-button,
input[type=search]::-webkit-search-decoration {
  -webkit-appearance:none
}
fieldset {
  border:.0625rem solid silver;
  margin:0 .125rem;
  padding:.35em .625em .75em
}
legend {
  border:0;
  padding:0
}
textarea {
  overflow:auto
}
optgroup {
  font-weight:700
}
table {
  border-collapse:collapse;
  border-spacing:0
}
td,
th {
  padding:0
}

.admonitionblock>div:nth-child(2),
.caution>div:nth-child(2),
.important>div:nth-child(2),
.note>div:nth-child(2),
.tip>div:nth-child(2),
.warning>div:nth-child(2) {
  margin:.5rem 0
}
.admonitionblock>div:nth-child(2)>:first-child,
.caution>div:nth-child(2)>:first-child,
.important>div:nth-child(2)>:first-child,
.note>div:nth-child(2)>:first-child,
.tip>div:nth-child(2)>:first-child,
.warning>div:nth-child(2)>:first-child {
  margin-top:0
}
.admonitionblock>div:nth-child(2)>:last-child,
.caution>div:nth-child(2)>:last-child,
.important>div:nth-child(2)>:last-child,
.note>div:nth-child(2)>:last-child,
.tip>div:nth-child(2)>:last-child,
.warning>div:nth-child(2)>:last-child {
  margin-bottom:0
}
.listingblock+.listingblock,
pre+pre,
pre[class]+pre[class] {
  margin-top:2rem
}
.listingblock {
  background:#f8f8f8;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0;
  border: 1px solid grey;
  border-radius:.1rem;
}
.listingblock:before {
  background-repeat:no-repeat;
  background-size:6.25rem 100%;
  bottom:var(--scrollbar__height,1px);
  content:"";
  display:block;
  height:7.125rem;
  max-height:100%;
  max-height:calc(100% - var(--scrollbar__height, 2px));
  position:absolute;
  right:var(--scrollbar__width,6px);
  top:.0625rem;
  width:4.0625rem;
  z-index:1
}

.colist>ol {
  counter-reset:colist;
  list-style:none;
  margin:1rem 0 2rem;
  padding:0
}
.colist>ol>li {
  counter-increment:colist;
  margin:.5rem 0;
  padding-left:1.75rem;
  position:relative;
}
.colist>ol>li:before {
  content:counter(colist);
  left:0;
  position:absolute;
  top:.1875rem
}
.colist>ol>li:before,
.conum {
  background:#06c;
  border-radius:50%;
  color:#fff;
  display:inline-block;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-style:normal;
  font-weight:600;
  height:1.25rem;
  line-height:1.35rem;
  padding:0;
  text-align:center;
  top:-.125em;
  vertical-align:middle;
  width:1.25rem
}
.colist div.paragraph {
  margin:0
}

rh-table {
  display:block
}
::-webkit-scrollbar,
:host ::-webkit-scrollbar {
  height:.625rem;
  width:.625rem
}
::-webkit-scrollbar,
::-webkit-scrollbar-track,
:host ::-webkit-scrollbar,
:host ::-webkit-scrollbar-track {
  background-color:#d6d6d6
}
::-webkit-scrollbar-thumb,
:host ::-webkit-scrollbar-thumb {
  background-color:#8e8e8e
}
*,
:host * {
  scrollbar-color:#8e8e8e #d6d6d6
}
p:empty,
p:empty {
  display:none
}
.book {
  font-size: var(--rh-font-size-body-text-lg,1.125rem);
  font-weight: var(--rh-font-weight-body-text-regular,400);
  line-height: 1.6667;
  padding-left: 6rem;
  padding-right: 6rem;
  padding-top: var(--rh-space-3xl,4rem);
  max-width: 1400px;
}

.book[class] h1 code,
.book[class] h2 code,
.book[class] h3 code,
.book[class] h4 code,
.book[class] h5 code,
.book[class] h6 code,
[class] h1 code,
[class] h2 code,
[class] h3 code,
[class] h4 code,
[class] h5 code,
[class] h6 code {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
details[class] {
  list-style:none;
  margin:1rem 0 3rem;
  padding:0
}

.preamble {
  margin:0 0 2rem
}
.sect1 {
  margin:2rem 0 1rem
}
:host .sect1,
cp-documentation .sect1 {
  margin:0 0 2rem;
  padding:.0625rem 0 0
}
:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,
:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child {
  margin-top:0
}
.listingblock,
.literalblock {
  margin:1rem 0
}
.quoteblock,
.verseblock {
  border-left:.25rem solid #d2d2d2;
  margin:1rem 0;
  padding:1rem 1rem 1rem 2rem
}
.quoteblock.pullleft,
.verseblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .quoteblock.pullleft,
  .verseblock.pullleft {
    margin-left:-1rem
  }
}
.quoteblock.pullright,
.verseblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-10rem
  }
}
.quoteblock>:first-child,
.verseblock>:first-child {
  margin-top:0
}
.quoteblock .content,
.verseblock .content {
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.25rem;
  line-height:1.6667
}
.quoteblock .attribution,
.verseblock .attribution {
  font-size:.875rem;
  font-style:italic;
  font-weight:600;
  line-height:1.6667;
  text-transform:uppercase
}
.quoteblock .attribution .citetitle,
.verseblock .attribution .citetitle {
  color:#585858
}
.quoteblock .attribution cite,
.verseblock .attribution cite {
  font-size:1em
}
.quoteblock blockquote {
  font-style:italic;
  margin:0;
  padding:0
}
.quoteblock blockquote .content>:first-child {
  margin-top:0
}
.quoteblock blockquote .content>:first-child:before {
  color:#e00;
  content:"â€œ";
  display:block;
  float:left;
  font-size:2.75rem;
  font-style:normal;
  line-height:1.125em;
  margin-right:.5rem
}
.quoteblock blockquote .content>:first-child .content>:first-child:before {
  content:none
}
.imageblock {
  margin:1rem 0
}
.imageblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .imageblock.pullleft {
    margin-left:-1rem
  }
}
.imageblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .imageblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .imageblock.pullright {
    margin-right:-10rem
  }
}
.imageblock.interrupter {
  margin:2rem 0
}
@media (min-width:768px) {
  .imageblock.interrupter {
    margin-left:-1rem;
    margin-right:-2rem
  }
  .imageblock.interrupter .caption {
    margin-left:1rem;
    margin-right:2rem
  }
}
@media (min-width:1100px) {
  .imageblock.interrupter {
    margin-right:-10rem
  }
  .imageblock.interrupter .caption {
    margin-right:10rem
  }
}
.imageblock.interrupter img {
  max-width:100%
}
.imageblock .caption {
  color:#585858;
  display:block;
  font-size:.875rem;
  line-height:1.6667;
  margin:.5rem 0 0
}
.rhdocs-footnotes {
  border-top:.0625rem solid #d2d2d2;
  margin:3rem 0 1rem;
  padding:1rem 0 0
}
.rhdocs-footnotes>ol {
  margin:0;
  padding:0 0 0 1.5rem
}
@supports (counter-reset:footnotenum) {
  .rhdocs-footnotes>ol {
    counter-reset:footnotenum;
    list-style:none;
    padding:0
  }
  .rhdocs-footnotes>ol>li {
    counter-increment:footnotenum
  }
  .rhdocs-footnotes>ol>li:before {
    color:#585858;
    content:"[" counter(footnotenum) "]";
    display:inline-block;
    margin-right:.25rem
  }
}
#footer {
  background:#ededed;
  color:#151515;
  font-size:.875rem;
  line-height:1.6667;
  margin:3rem 0 0;
  padding:1rem
}
.center {
  margin-left:auto;
  margin-right:auto
}
.stretch {
  width:100%
}

pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.language-none,
code.language-text,
code.language-txt,
pre.language-none,
pre.language-text,
pre.language-txt {
  color:#151515
}
code[class*=language-] ::-moz-selection,
code[class*=language-]::-moz-selection,
pre[class*=language-] ::-moz-selection,
pre[class*=language-]::-moz-selection {
  background:#cceae7;
  color:#263238
}
code[class*=language-] ::selection,
code[class*=language-]::selection,
pre[class*=language-] ::selection,
pre[class*=language-]::selection {
  background:#cceae7;
  color:#263238
}
:not(pre)>code[class*=language-] {
  border-radius:.2em;
  padding:.1em;
  white-space:normal
}
.token.atrule {
  color:#40199a
}
.token.attr-name {
  color:#06c
}
.token.attr-value,
.token.attribute {
  color:#b300b3
}
.token.boolean {
  color:#40199a
}
.token.builtin,
.token.cdata,
.token.char,
.token.class,
.token.class-name {
  color:#06c
}
.token.comment {
  color:#6a6e73
}
.token.constant {
  color:#40199a
}
.token.deleted {
  color:#c9190b
}
.token.doctype {
  color:#6a6e73
}
.token.entity {
  color:#c9190b
}
.token.function {
  color:#40199a
}
.token.hexcode {
  color:#b300b3
}
.token.id,
.token.important {
  color:#40199a;
  font-weight:700
}
.token.inserted {
  color:#06c
}
.token.keyword {
  color:#40199a
}
.token.number {
  color:#b300b3
}
.token.operator {
  color:#06c
}
.token.prolog {
  color:#6a6e73
}
.token.property {
  color:#06c
}
.token.pseudo-class,
.token.pseudo-element {
  color:#b300b3
}
.token.punctuation,
.token.regex {
  color:#06c
}
.token.selector {
  color:#c9190b
}
.token.string {
  color:#b300b3
}
.token.symbol {
  color:#40199a
}
.token.unit {
  color:#b300b3
}
.token.url,
.token.variable {
  color:#c9190b
}

@media print {
  .field code,
  .field pre,
  code[class*=language-],
  pre,
  pre[class*=language-] {
    white-space:pre-wrap!important;
    word-wrap:break-word!important;
    overflow-wrap:break-word!important;
    word-break:break-word!important
  }
}

.book>.titlepage:not(:last-child),
.chapter,
section[id] {
  padding-bottom:3.75rem
}
.book>.titlepage .chapter:last-child,
.book>.titlepage section[id]:last-child,
.chapter .chapter:last-child,
.chapter section[id]:last-child,
section[id] .chapter:last-child,
section[id] section[id]:last-child {
  margin-bottom:-3.75rem
}
.listingblock+section[id],
pre+section[id] {
  padding-top:3.75rem
}
.cta-link {
  font-size:inherit
}
a {
  word-wrap:break-word;
  overflow-wrap:break-word
}
.caution,
.important,
.note,
.tip,
.warning {
  padding:.8888888889em;
  position:relative
}
.caution {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.important {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.note {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.tip {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.warning {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.book>.titlepage,
.chapter,
section[id] {
  padding-bottom:var(--rh-space-4xl,64px)
}

.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.paragraph {
  margin:1.49963rem 0
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
dd {
  margin-bottom:2.5rem
}

.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}

.annotator-outer[class][class] {
  display:none;
  flex-direction:column;
  flex-grow:1;
  height:auto;
  margin:0;
  position:static;
  width:auto
}
@media (min-width:1400px) {
  .annotator-outer[class][class] {
    display:flex
  }
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
.title {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0;
  text-transform:none
}
.paragraph>.title[class]+.content>:first-child,
.paragraph>.title[class]+p,
p.title[class]+.content>:first-child,
p.title[class]+p {
  margin-top:0
}
[class] pre .caution,
[class] pre .important,
[class] pre .note,
[class] pre .tip,
[class] pre .warning {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
[class] pre .caution:after,
[class] pre .important:after,
[class] pre .note:after,
[class] pre .tip:after,
[class] pre .warning:after {
  content:none
}
[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}
[class] .author {
  margin-bottom:1.5rem
}
[class] .author .author {
  margin-bottom:0
}
table {
  margin:2rem 0
}
[class] table {
  width:auto
}
table .table-contents table {
  max-width:100%;
  overflow:auto
}
rh-table table {
  margin:0;
  max-width:9999em;
  overflow:visible
}
td,
th {
  border-left:0;
  padding:.5em 1rem;
  transition:background .25s ease-out
}
td.content--md[class][class],
th.content--md[class][class] {
  min-width:13em
}
td.content--lg[class][class],
th.content--lg[class][class] {
  min-width:20em
}
thead th {
  padding-top:1.5em
}
caption {
  color:currentColor;
  color:var(--pfe-table__caption--Color,currentColor);
  font-weight:700;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:center
}
.revhistory table td,
.revhistory table th {
  border-color:transparent
}
.revhistory table td {
  padding:.625rem .875rem
}
.revhistory table.simplelist {
  margin:0
}
@media print {
  #masthead {
    display:none!important
  }
}
.rh-table--is-full-screen #to-top {
  display:none
}
body {
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  background-color:white;
  font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);
  font-size:var(--rh-body-copy-lage,1.125rem);
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
rh-codeblock::slotted(#content) {
  border-radius:.25rem;
  padding:var (--rh-space-lg,16px)
}
rh-codeblock .screen {
  display:grid;
  grid-template-columns:1fr 4.375rem
}
rh-codeblock[class][class][class][class][class] {
  max-width:99999em
}
pre {
  border:0;
  max-height:-moz-max-content;
  max-height:max-content
}
pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
rh-code-block>div.codeblock__inner-wrapper>pre,
rh-code-block>div.codeblock__inner-wrapper>pre[class] {
  margin:0;
  padding:0;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.literal {
  background:#eee;
  border-radius:.25rem;
  color:#000;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
code.literal,
kbd,
span.keycap {
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace
}
kbd,
span.keycap {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
ol,
ul {
  margin:1rem 0;
  padding:0 0 0 1.5rem
}
._additional-resources[class][class],
._additional-resources[class][class][id]:last-child {
  background:#fff;
  border:.0625rem solid #d2d2d2;
  border-radius:.1875rem;
  margin:2em 0 4em;
  padding:2rem 2rem 1rem
}
._additional-resources[class][class] ul {
  border:0;
  list-style:none;
  margin:0;
  padding:0;
  position:relative
}
._additional-resources[class][class] li {
  border-bottom:.0625rem solid #d2d2d2;
  box-sizing:content-box;
  margin:0;
  padding:1rem 1.5rem 1rem 0;
  -moz-column-break-inside:avoid;
  break-inside:avoid
}
._additional-resources[class][class] li:last-child {
  border:0
}
section.section#additional_resource .additional-resources__heading,
section.section#additional_resource .heading,
section.section#additional_resource h1,
section.section#additional_resource h2,
section.section#additional_resource h3,
section.section#additional_resource h4,
section.section#additional_resource h5,
section.section#additional_resource h6,
section.section#additional_resource p.title {
  display:block;
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  font-weight:700;
  line-height:1.5rem;
  margin:0 0 .5rem;
  padding:0;
  text-transform:uppercase
}
section.section:first-of-type {
  margin-top:var(--rh-space-4xl,64px)
}
section.section p {
  margin-bottom:var(--rh-space-lg,16px);
  margin-top:0
}


dl {
  display:block;
  margin-block-end:1em;
  margin-block-start:1em;
  margin-inline-end:0;
  margin-inline-start:0
}
.paragraph {
  margin:1.49963rem 0
}
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.book[class] .author {
  margin-bottom:1.5rem
}
.book[class] .author .author {
  margin-bottom:0
}
.paragraph>.title[class],
p.title[class] {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0
}
.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}
code {
  background:#eee;
  color:#000;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
.book[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
dl {
  margin:1rem 0
}
dl dt {
  font-weight:600;
  margin:.5rem 0
}
ol ol {
  list-style:lower-roman
}
.codeblock--processed pf-clipboard-copy::part(input),
.codeblock--processed pf-clipboard-copy::part(span) {
  display:none
}
.token.tag {
  color:#c9190b
}

.admonitionblock {
  margin-bottom:var(--rh-space-lg,1rem)
}
.guibutton,
.guimenu,
.guimenuitem {
  font-weight:700
}
.guibutton {
  font-size:90%;
  padding:.1875rem
}
.guibutton:before {
  content:"["
}
.guibutton:after {
  content:"]"
}
.book,
{
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
pre[hidden] {
  display:none
}
.listingblock {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  margin:1rem 0;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0
}
nopre {
  display:block;
  font-size:.8125rem;
  line-height:1.42857;
  margin:0 0 .625rem;
  word-break:break-all;
  word-wrap:break-word;
  background-color:var(--rh-color-surface-lighter,#f2f2f2);
  border:.0625rem solid #ccc;
  border-radius:.25rem;
  color:#333
}
.book pre,
pre {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  color:#151515;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
pre[class] {
  line-height:1.6667;
  overflow-x:auto
}
*,
:after,
:before {
  box-sizing:border-box
}
:root {
  --rh-space-xs:4px;
  --rh-space-sm:6px;
  --rh-space-md:8px;
  --rh-space-lg:16px;
  --rh-space-xl:24px;
  --rh-space-2xl:32px;
  --rh-space-3xl:48px;
  --rh-space-4xl:64px;
  --rh-space-5xl:80px;
  --rh-space-6xl:96px;
  --rh-space-7xl:128px;
  --rh-font-size-body-text-xs:.75rem;
  --rh-font-size-body-text-sm:.875rem;
  --rh-font-size-body-text-md:1rem;
  --rh-font-size-body-text-lg:1.125rem;
  --rh-font-size-body-text-xl:1.25rem;
  --rh-font-size-body-text-2xl:1.5rem;
  --rh-font-size-heading-xs:1.25rem;
  --rh-font-size-heading-sm:1.5rem;
  --rh-font-size-heading-md:1.75rem;
  --rh-font-size-heading-lg:2.25rem;
  --rh-font-size-heading-xl:2.5rem;
  --rh-font-size-heading-2xl:3rem;
  --pfe-navigation--logo--maxWidth:200px;
  --pfe-navigation__logo--height:40px;
  --pfe-navigation--fade-transition-delay:.5s;
  --pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);
  --pf-global--icon--FontSize--sm:.75rem
}
body,
html {
  font-family:Red Hat Text,sans-serif;
  font-size:var(--rh-font-size-body-text-md,1rem);
  line-height:var(--rh-line-height-body-text,1.5);
}

main {
  line-height:30px
}
section {
  padding-bottom:3rem;
  padding-top:3rem
}
img {
  max-width:100%
}
a {
  color:var(--rh-color-interactive-blue-darker,#06c);
  text-decoration:underline
}
a:hover {
  color:var(--rh-color-interactive-blue-darkest,#004080)
}

@media (min-width:576px) {
  .book {
    max-width:540px
  }
}
@media (min-width:768px) {
  .book {
    max-width:720px
  }
}
@media (min-width:992px) {
  .book {
    max-width:1250px
  }
}
section {
  padding:0
}
.list-unstyled {
  list-style:none;
  padding-left:0
}
.doc-image-link {
  display:inline-block;
  text-decoration:none
}
.admonitionblock{
  margin-bottom:var(--rh-space-lg,1rem)
  font-size:var(--rh-font-size-body-text-md,1rem)
}
.admonitionblock table {
  margin:0;
  border:none;
  width:fit-content
}
.admonitionblock td {
  margin:0;
  border:none;
  display:block
}
.admonitionblock .title {
  margin:0;
  color:#002952;
  font-weight:700
}


</style>
</head>
<body id="configuring-authorization-in-rhdh" class="article toc2 toc-left">
<div id="header">
<h1>Configuring authorization in Red Hat Developer Hub</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#enabling-and-giving-access-to-rbac">1. Enabling and giving access to the Role-Based Access Control (RBAC) feature</a></li>
<li><a href="#proc-determining-policy-and-role-source">2. Determining permission policy and role configuration source</a></li>
<li><a href="#managing-authorizations-by-using-the-web-ui">3. Managing role-based access controls (RBAC) using the Red Hat Developer Hub Web UI</a>
<ul class="sectlevel2">
<li><a href="#proc-rbac-ui-create-role_title-authorization">3.1. Creating a role in the Red Hat Developer Hub Web UI</a></li>
<li><a href="#proc-rbac-ui-edit-role_title-authorization">3.2. Editing a role in the Red Hat Developer Hub Web UI</a></li>
<li><a href="#proc-rbac-ui-delete-role_title-authorization">3.3. Deleting a role in the Red Hat Developer Hub Web UI</a></li>
</ul>
</li>
<li><a href="#managing-authorizations-by-using-the-rest-api">4. Managing authorizations by using the REST API</a>
<ul class="sectlevel2">
<li><a href="#proc-sending-requests-to-the-rbac-rest-api-by-using-curl_title-authorization">4.1. Sending requests to the RBAC REST API by using the curl utility</a></li>
<li><a href="#proc-rbac-sending-requests-to-the-rbac-rest-api-by-using-a-rest-client_title-authorization">4.2. Sending requests to the RBAC REST API by using a REST client</a></li>
<li><a href="#ref-rbac-rest-api-endpoints_title-authorization">4.3. Supported RBAC REST API endpoints</a>
<ul class="sectlevel3">
<li><a href="#_roles">4.3.1. Roles</a></li>
<li><a href="#_permission-policies">4.3.2. Permission policies</a></li>
<li><a href="#_conditional-policies">4.3.3. Conditional policies</a></li>
<li><a href="#_user-statistics">4.3.4. User statistics</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#managing-authorizations-by-using-external-files">5. Managing authorizations by using external files</a>
<ul class="sectlevel2">
<li><a href="#defining-authorizations-in-external-files-by-using-the-operator">5.1. Defining authorizations in external files by using the operator</a></li>
<li><a href="#defining-authorizations-in-external-files-by-using-helm">5.2. Defining authorizations in external files by using Helm</a></li>
</ul>
</li>
<li><a href="#configuring-guest-access-with-rbac-ui_title-authorization">6. Configuring guest access with RBAC UI</a>
<ul class="sectlevel2">
<li><a href="#configuring-the-rbac-backend-plugin_title-authorization">6.1. Configuring the RBAC backend plugin</a></li>
<li><a href="#setting-up-the-guest-authentication-provider_title-authorization">6.2. Setting up the guest authentication provider</a></li>
</ul>
</li>
<li><a href="#ref-rbac-permission-policies_title-authorization">7. Permission policies reference</a></li>
<li><a href="#con-rbac-conditional-policies-rhdh_title-authorization">8. Conditional policies in Red Hat Developer Hub</a>
<ul class="sectlevel2">
<li><a href="#ref-rbac-conditional-policy-definition_title-authorization">8.1. Conditional policies reference</a>
<ul class="sectlevel3">
<li><a href="#_examples-of-conditional-policies">8.1.1. Examples of conditional policies</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#con-user-stats-rhdh_title-authorization">9. User statistics in Red Hat Developer Hub</a>
<ul class="sectlevel2">
<li><a href="#proc-download-user-stats-rhdh_title-authorization">9.1. Downloading active users list in Red Hat Developer Hub</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>In <a href="https://docs.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/authorization/index">Authentication</a>, you learnt how to authenticate users to Red Hat Developer Hub.
Developer Hub knowns who the users are.</p>
</div>
<div class="paragraph">
<p>In this book, learn how to authorize users to perform actions in Developer Hub.
Define what users can do in Developer Hub.</p>
</div>
<div class="paragraph">
<p>Role-Based Access Control (RBAC) is a security concept that controls access to resources in a system, and specifies a mapping between users of the system, and the actions they can perform on resources in the system.
You define roles with specific permissions, and then assign the roles to users and groups.</p>
</div>
<div class="paragraph">
<p>RBAC on Developer Hub is built on top of the Permissions framework, which defines RBAC policies in code.
Rather than defining policies in code,
the Developer Hub RBAC feature allows you
to define policies in a declarative fashion using a simple CSV based format.
You can define the policies by using Developer Hub web interface or REST API, rather than editing the CSV directly.</p>
</div>
<div class="paragraph">
<p>To define authorizations in Developer Hub:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The Developer Hub administrator enables and gives access to the RBAC feature.</p>
</li>
<li>
<p>You define your roles and policies by combining the following methods:</p>
<div class="ulist">
<ul>
<li>
<p>The Developer Hub policy administrator uses the Developer Hub web interface or REST API.</p>
</li>
<li>
<p>The Developer Hub administrator edits the main Developer Hub configuration file.</p>
</li>
<li>
<p>The Developer Hub administrator edits external files.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="enabling-and-giving-access-to-rbac">1. Enabling and giving access to the Role-Based Access Control (RBAC) feature</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Role-Based Access Control (RBAC) feature is disabled by default.
Enable the RBAC plugin and declare policy administrators to start using RBAC features.</p>
</div>
<div class="paragraph">
<p>The permission policies for users and groups in the Developer Hub are managed by permission policy administrators. Only permission policy administrators can access the Role-Based Access Control REST API.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have <a href="https://access.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#assembly-add-custom-app-file-openshift_admin-rhdh">added a custom Developer Hub application configuration</a>, and have sufficient permissions to modify it.</p>
</li>
<li>
<p>You have <a href="https://docs.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/authentication/index">enabled an authentication provider</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>The RBAC plugin is installed but disabled by default.
To enable the  <code>./dynamic-plugins/dist/janus-idp-backstage-plugin-rbac</code> plugin, edit your <code>dynamic-plugins.yaml</code> with the following content.</p>
<div class="listingblock">
<div class="title"><code>dynamic-plugins.yaml</code> fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">plugins:
  - package: ./dynamic-plugins/dist/janus-idp-backstage-plugin-rbac
    disabled: false</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/installing_and_viewing_dynamic_plugins/index">Installing and viewing dynamic plugins</a>.</p>
</div>
</li>
<li>
<p>Declare policy administrators to enable a select number of authenticated users to configure RBAC policies through the REST API or Web UI, instead of modifying the CSV file directly.
The permissions can be specified in a separate CSV file referenced in the <code>app-config-rhdh</code> ConfigMap, or permissions can be created using the REST API or Web UI.</p>
<div class="paragraph">
<p>To declare users such as <em>&lt;your_policy_administrator_name&gt;</em> as policy administrators, edit your custom Developer Hub ConfigMap, such as <code>app-config-rhdh</code>, and add following code to the <code>app-config-rhdh.yaml</code> content:</p>
</div>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">permission:
  enabled: true
  rbac:
    admin:
      users:
        - name: user:default/<em>&lt;your_policy_administrator_name&gt;</em></code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Sign out from the existing Red Hat Developer Hub session and log in again using the declared policy administrator account.</p>
</li>
<li>
<p>With RBAC enabled, most features are disabled by default.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Navigate to the <strong>Catalog</strong> page in RHDH.
The <strong>Create</strong> button is not visible.
You cannot create new components.</p>
</li>
<li>
<p>Navigate to the API page.
The <strong>Register</strong> button is not visible.</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Next steps</div>
<ul>
<li>
<p>Explicitly enable permissions to resources in Developer Hub.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proc-determining-policy-and-role-source">2. Determining permission policy and role configuration source</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure Red Hat Developer Hub policy and roles by using different sources.
To maintain data consistency, Developer Hub associates each permission policy and role with one unique source.
You can only use this source to change the resource.</p>
</div>
<div class="paragraph">
<p>The available sources are:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Configuration file</dt>
<dd>
<p>Configure roles and policies in the Developer Hub <code>app-config.yaml</code> configuration file, for instance to <a href="#enabling-and-giving-access-to-rbac">declare your policy administrators</a>.</p>
<div class="paragraph">
<p>The Configuration file pertains to the default <code>role:default/rbac_admin</code> role provided by the RBAC plugin.
The default role has limited permissions to create, read, update, delete permission policies or roles, and to read catalog entities.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>In case the default permissions are insufficient for your administrative requirements, you can create a custom admin role with the required permission policies.</p>
</div>
</td>
</tr>
</table>
</div>
</dd>
<dt class="hdlist1">REST API</dt>
<dd>
<p>Configure roles and policies <a href="#managing-authorizations-by-using-the-web-ui">by using the Developer Hub Web UI</a> or by using the REST API.</p>
</dd>
<dt class="hdlist1">CSV file</dt>
<dd>
<p>Configure roles and policies by using external CSV files.</p>
</dd>
<dt class="hdlist1">Legacy</dt>
<dd>
<p>The legacy source applies to policies and roles defined before RBAC backend plugin version <code>2.1.3</code>, and is the least restrictive among the source location options.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Replace the permissions and roles using the legacy source with the permissions using the REST API or the CSV file sources.
</td>
</tr>
</table>
</div>
</dd>
</dl>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To determine the source of a role or policy, use a <code>GET</code> request.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managing-authorizations-by-using-the-web-ui">3. Managing role-based access controls (RBAC) using the Red Hat Developer Hub Web UI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Policy administrators can use the Developer Hub web interface (Web UI) to allocate specific roles and permissions to individual users or groups. Allocating roles ensures that access to resources and functionalities is regulated across the Developer Hub.</p>
</div>
<div class="paragraph">
<p>With the policy administrator role in Developer Hub, you can assign permissions to users and groups. This role allows you to view, create, modify, and delete the roles using  Developer Hub Web UI.</p>
</div>
<div class="sect2">
<h3 id="proc-rbac-ui-create-role_title-authorization">3.1. Creating a role in the Red Hat Developer Hub Web UI</h3>
<div class="paragraph">
<p>You can create a role in the Red Hat Developer Hub using the Web UI.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You <a href="#enabling-and-giving-access-to-rbac">have enabled RBAC and have a policy administrator role in Developer Hub</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Go to <strong>Administration</strong> at the bottom of the sidebar in the Developer Hub.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <strong>RBAC</strong> tab appears, displaying all the created roles in the Developer Hub.</p>
</div>
</div>
</div>
</li>
<li>
<p>(Optional) Click any role to view the role information on the <strong>OVERVIEW</strong> page.</p>
</li>
<li>
<p>Click <strong>CREATE</strong> to create a role.</p>
</li>
<li>
<p>Enter the name and description of the role in the given fields and click <strong>NEXT</strong>.</p>
</li>
<li>
<p>Add users and groups using the search field, and click <strong>NEXT</strong>.</p>
</li>
<li>
<p>Select <strong>Plugin</strong> and <strong>Permission</strong> from the drop-downs in the <strong>Add permission policies</strong> section.</p>
</li>
<li>
<p>Select or clear the <strong>Policy</strong> that you want to set in the <strong>Add permission policies</strong> section, and click <strong>NEXT</strong>.</p>
</li>
<li>
<p>Review the added information in the <strong>Review and create</strong> section.</p>
</li>
<li>
<p>Click <strong>CREATE</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>The created role appears in the list available in the <strong>RBAC</strong> tab.</p>
</div>
</div>
<div class="sect2">
<h3 id="proc-rbac-ui-edit-role_title-authorization">3.2. Editing a role in the Red Hat Developer Hub Web UI</h3>
<div class="paragraph">
<p>You can edit a role in the Red Hat Developer Hub using the Web UI.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The policies generated from a <code>policy.csv</code> or ConfigMap file cannot be edited or deleted using the Developer Hub Web UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You <a href="#enabling-and-giving-access-to-rbac">have enabled RBAC and have a policy administrator role in Developer Hub</a>.</p>
</li>
<li>
<p>The role that you want to edit is created in the Developer Hub.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Go to <strong>Administration</strong> at the bottom of the sidebar in the Developer Hub.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <strong>RBAC</strong> tab appears, displaying all the created roles in the Developer Hub.</p>
</div>
</div>
</div>
</li>
<li>
<p>(Optional) Click any role to view the role information on the <strong>OVERVIEW</strong> page.</p>
</li>
<li>
<p>Select the edit icon for the role that you want to edit.</p>
</li>
<li>
<p>Edit the details of the role, such as name, description, users and groups, and permission policies, and click <strong>NEXT</strong>.</p>
</li>
<li>
<p>Review the edited details of the role and click <strong>SAVE</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>After editing a role, you can view the edited details of a role on the <strong>OVERVIEW</strong> page of a role. You can also edit a role’s users and groups or permissions by using the edit icon on the respective cards on the <strong>OVERVIEW</strong> page.</p>
</div>
</div>
<div class="sect2">
<h3 id="proc-rbac-ui-delete-role_title-authorization">3.3. Deleting a role in the Red Hat Developer Hub Web UI</h3>
<div class="paragraph">
<p>You can delete a role in the Red Hat Developer Hub using the Web UI.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The policies generated from a <code>policy.csv</code> or ConfigMap file cannot be edited or deleted using the Developer Hub Web UI.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You <a href="#enabling-and-giving-access-to-rbac">have enabled RBAC and have a policy administrator role in Developer Hub</a>.</p>
</li>
<li>
<p>The role that you want to delete is created in the Developer Hub.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Go to <strong>Administration</strong> at the bottom of the sidebar in the Developer Hub.</p>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The <strong>RBAC</strong> tab appears, displaying all the created roles in the Developer Hub.</p>
</div>
</div>
</div>
</li>
<li>
<p>(Optional) Click any role to view the role information on the <strong>OVERVIEW</strong> page.</p>
</li>
<li>
<p>Select the delete icon from the <strong>Actions</strong> column for the role that you want to delete.</p>
<div class="paragraph">
<p><strong>Delete this role?</strong> pop-up appears on the screen.</p>
</div>
</li>
<li>
<p>Click <strong>DELETE</strong>.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managing-authorizations-by-using-the-rest-api">4. Managing authorizations by using the REST API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To automate the maintenance of Red Hat Developer Hub permission policies and roles, you can use Developer Hub role-based access control (RBAC) REST API.</p>
</div>
<div class="paragraph">
<p>You can perform the following actions with the REST API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Retrieve information about:</p>
<div class="ulist">
<ul>
<li>
<p>All permission policies</p>
</li>
<li>
<p>Specific permission policies</p>
</li>
<li>
<p>Specific roles</p>
</li>
<li>
<p>Static plugins permission policies</p>
</li>
</ul>
</div>
</li>
<li>
<p>Create, update, or delete:</p>
<div class="ulist">
<ul>
<li>
<p>Permission policy</p>
</li>
<li>
<p>Role</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="proc-sending-requests-to-the-rbac-rest-api-by-using-curl_title-authorization">4.1. Sending requests to the RBAC REST API by using the curl utility</h3>
<div class="paragraph">
<p>You can send RBAC REST API requests by using the curl utility.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#enabling-and-giving-access-to-rbac">You have access to the RBAC feature</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Find your Bearer token to authenticate to the REST API.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In your browser, open the web console <strong>Network</strong> tab.</p>
</li>
<li>
<p>In the main screen, reload the Developer Hub <strong>Homepage</strong>.</p>
</li>
<li>
<p>In the web console <strong>Network</strong> tab, search for the <code>query?term=</code> network call.</p>
</li>
<li>
<p>Save the <strong>token</strong> in the response JSON for the next steps.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In a terminal, run the curl command and review the response:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title"><code>GET</code> or <code>DELETE</code> request</div>
<div class="content">
<pre class="CodeRay highlight"><code>curl -v \
  -H "Authorization: Bearer <em>&lt;token&gt;</em>" \
  -X <em>&lt;method&gt;</em> "https://<em>&lt;my_developer_hub_url&gt;</em>/<em>&lt;endpoint&gt;</em>" \</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title"><code>POST</code> or <code>PUT</code> request requiring JSON body data</div>
<div class="content">
<pre class="CodeRay highlight"><code>curl -v -H "Content-Type: application/json" \
  -H "Authorization: Bearer <em>&lt;token&gt;</em>" \
  -X POST "https://<em>&lt;my_developer_hub_url&gt;</em>/<em>&lt;endpoint&gt;</em>" \
  -d <em>&lt;body&gt;</em></code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>&lt;token&gt;</em></dt>
<dd>
<p>Enter your saved authorization token.</p>
</dd>
<dt class="hdlist1"><em>&lt;method&gt;</em></dt>
<dd>
<p>Enter the HTTP method for your <a href="#ref-rbac-rest-api-endpoints_title-authorization">API endpoint</a>.</p>
<div class="ulist">
<ul>
<li>
<p><code>GET</code>: To retrieve specified information from a specified resource endpoint.</p>
</li>
<li>
<p><code>POST</code>: To create or update a resource.</p>
</li>
<li>
<p><code>PUT</code>: To update a resource.</p>
</li>
<li>
<p><code>DELETE</code>: To delete a resource.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">https://<em>&lt;my_developer_hub_url&gt;</em></dt>
<dd>
<p>Enter your Developer Hub URL.</p>
</dd>
<dt class="hdlist1"><em>&lt;endpoint&gt;</em></dt>
<dd>
<p>Enter the <a href="#ref-rbac-rest-api-endpoints_title-authorization">API endpoint</a> to which you want to send a request, such as <code>/api/permission/policies</code>.</p>
</dd>
<dt class="hdlist1"><em>&lt;body&gt;</em></dt>
<dd>
<p>Enter the JSON body with data that your <a href="#ref-rbac-rest-api-endpoints_title-authorization">API endpoint</a> might need with the HTTP <code>POST</code> or <code>PUT</code> request.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Example request to create a role</div>
<div class="content">
<pre class="CodeRay highlight"><code>curl -v -H "Content-Type: application/json" \
  -H "Authorization: Bearer <em>&lt;token&gt;</em>" \
  -X POST "https://<em>&lt;my_developer_hub_url&gt;</em>/api/permission/roles" \
  -d '{
      "memberReferences": ["group:default/example"],
      "name": "role:default/test",
      "metadata": { "description": "This is a test role" }
    }'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example request to update a role</div>
<div class="content">
<pre class="CodeRay highlight"><code>curl -v -H "Content-Type: application/json" \
  -H "Authorization: Bearer <em>&lt;token&gt;</em>" \
  -X PUT "https://<em>&lt;my_developer_hub_url&gt;</em>/api/permission/roles/role/default/test" \
  -d '{
          "oldRole": {
            "memberReferences":  [ "group:default/example" ],
            "name": "role:default/test"
          },
          "newRole": {
            "memberReferences": [ "group:default/example", "user:default/test" ],
            "name": "role:default/test"
          }
        }'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example request to create a permission policy</div>
<div class="content">
<pre class="CodeRay highlight"><code>curl -v -H "Content-Type: application/json" \
  -H "Authorization: Bearer $token" \
  -X POST "https://<em>&lt;my_developer_hub_url&gt;</em>/api/permission/policies" \
  -d '[{
      "entityReference":"role:default/test",
      "permission": "catalog-entity",
      "policy": "read", "effect":"allow"
    }]'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example request to update a permission policy</div>
<div class="content">
<pre class="CodeRay highlight"><code>curl -v -H "Content-Type: application/json" \
  -H "Authorization: Bearer $token" \
  -X PUT "https://<em>&lt;my_developer_hub_url&gt;</em>/api/permission/policies/role/default/test" \
  -d '{
         "oldPolicy": [
           {
             "permission": "catalog-entity", "policy": "read", "effect": "allow"
           }
         ],
         "newPolicy":
           [
             {
               "permission": "policy-entity", "policy": "read", "effect": "allow"
             }
           ]
       }'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example request to create a condition</div>
<div class="content">
<pre class="CodeRay highlight"><code>curl -v -H "Content-Type: application/json" \
  -H "Authorization: Bearer $token" \
  -X POST "https://<em>&lt;my_developer_hub_url&gt;</em>/api/permission/roles/conditions" \
  -d '{
      "result": "CONDITIONAL",
      "roleEntityRef": "role:default/test",
      "pluginId": "catalog",
      "resourceType": "catalog-entity",
      "permissionMapping": ["read"],
      "conditions": {
        "rule": "IS_ENTITY_OWNER",
        "resourceType": "catalog-entity",
        "params": {"claims": ["group:default/janus-authors"]}
      }
    }'</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example request to update a condition</div>
<div class="content">
<pre class="CodeRay highlight"><code>curl -v -H "Content-Type: application/json" \
  -H "Authorization: Bearer $token" \
  -X PUT "https://<em>&lt;my_developer_hub_url&gt;</em>/api/permission/roles/conditions/1" \
  -d '{
          "result":"CONDITIONAL",
          "roleEntityRef":"role:default/test",
          "pluginId":"catalog",
          "resourceType":"catalog-entity",
          "permissionMapping": ["read",  "update", "delete"],
          "conditions": {
            "rule": "IS_ENTITY_OWNER",
            "resourceType": "catalog-entity",
            "params": {"claims": ["group:default/janus-authors"]}
          }
       }'</code></pre>
</div>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Review the returned HTTP status code:</p>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>200</code> OK</dt>
<dd>
<p>The request was successful.</p>
</dd>
<dt class="hdlist1"><code>201</code> Created</dt>
<dd>
<p>The request resulted in a new resource being successfully created.</p>
</dd>
<dt class="hdlist1"><code>204</code> No Content</dt>
<dd>
<p>The request was successful, and the response payload has no more content.</p>
</dd>
<dt class="hdlist1"><code>400</code> Bad Request</dt>
<dd>
<p>Input error with the request.</p>
</dd>
<dt class="hdlist1"><code>401</code> Unauthorized</dt>
<dd>
<p>Lacks valid authentication for the requested resource.</p>
</dd>
<dt class="hdlist1"><code>403</code> Forbidden</dt>
<dd>
<p>Refusal to authorize request.</p>
</dd>
<dt class="hdlist1"><code>404</code> Not Found</dt>
<dd>
<p>Could not find requested resource.</p>
</dd>
<dt class="hdlist1"><code>409</code> Conflict</dt>
<dd>
<p>Request conflict with the current state and the target resource.</p>
</dd>
</dl>
</div>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="proc-rbac-sending-requests-to-the-rbac-rest-api-by-using-a-rest-client_title-authorization">4.2. Sending requests to the RBAC REST API by using a REST client</h3>
<div class="paragraph">
<p>You can send RBAC REST API requests using any REST client.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#enabling-and-giving-access-to-rbac">You have access to the RBAC feature</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Find your Bearer token to authenticate to the REST API.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In your browser, open the web console <strong>Network</strong> tab.</p>
</li>
<li>
<p>In the main screen, reload the Developer Hub <strong>Homepage</strong>.</p>
</li>
<li>
<p>In the web console <strong>Network</strong> tab, search for the <code>query?term=</code> network call.</p>
</li>
<li>
<p>Save the <strong>token</strong> in the response JSON for the next steps.</p>
</li>
</ol>
</div>
</li>
<li>
<p>In your REST client, run a command with the following parameters and review the response:</p>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1">Authorization</dt>
<dd>
<p>Enter your saved authorization token.</p>
</dd>
<dt class="hdlist1">HTTP method</dt>
<dd>
<p>Enter the HTTP method for your <a href="#ref-rbac-rest-api-endpoints_title-authorization">API endpoint</a>.</p>
<div class="ulist">
<ul>
<li>
<p><code>GET</code>: To retrieve specified information from a specified resource endpoint.</p>
</li>
<li>
<p><code>POST</code>: To create or update a resource.</p>
</li>
<li>
<p><code>PUT</code>: To update a resource.</p>
</li>
<li>
<p><code>DELETE</code>: To delete a resource.</p>
</li>
</ul>
</div>
</dd>
<dt class="hdlist1">URL</dt>
<dd>
<p>Enter your Developer Hub URL and <a href="#ref-rbac-rest-api-endpoints_title-authorization">API endpoint</a>: https://<em>&lt;my_developer_hub_url&gt;</em>/<em>&lt;endpoint&gt;</em>, such as
<code>https://<em>&lt;my_developer_hub_url&gt;</em>/api/permission/policies</code>.</p>
</dd>
<dt class="hdlist1">Body</dt>
<dd>
<p>Enter the JSON body with data that your <a href="#ref-rbac-rest-api-endpoints_title-authorization">API endpoint</a> might need with the HTTP <code>POST</code> request.</p>
</dd>
</dl>
</div>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="ref-rbac-rest-api-endpoints_title-authorization">4.3. Supported RBAC REST API endpoints</h3>
<div class="paragraph">
<p>The RBAC REST API provides endpoints for managing roles, permissions, and conditional policies in the Developer Hub and for retrieving information about the roles and policies.</p>
</div>
<div class="sect3">
<h4 id="_roles">4.3.1. Roles</h4>
<div class="paragraph">
<p>The RBAC REST API supports the following endpoints for managing roles in the Red Hat Developer Hub.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[GET] /api/permission/roles</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns all roles in Developer Hub.</p>
</div>
<div class="listingblock">
<div class="title">Example response (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    "memberReferences": ["user:default/username"],
    "name": "role:default/guests"
  },
  {
    "memberReferences": [
      "group:default/groupname",
      "user:default/username"
    ],
    "name": "role:default/rbac_admin"
  }
]</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[GET] /api/permission/roles/<em>&lt;kind&gt;</em>/<em>&lt;namespace&gt;</em>/<em>&lt;name&gt;</em></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns information for a single role in Developer Hub.</p>
</div>
<div class="listingblock">
<div class="title">Example response (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    "memberReferences": [
      "group:default/groupname",
      "user:default/username"
    ],
    "name": "role:default/rbac_admin"
  }
]</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[POST] /api/permission/roles/<em>&lt;kind&gt;</em>/<em>&lt;namespace&gt;</em>/<em>&lt;name&gt;</em></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Creates a role in Developer Hub.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Request parameters</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>body</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>memberReferences</code>, <code>group</code>, <code>namespace</code>, and <code>name</code> the new role to be created.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request body</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example request body (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "memberReferences": ["group:default/test"],
  "name": "role:default/test_admin"
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>201 Created</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[PUT] /api/permission/roles/<em>&lt;kind&gt;</em>/<em>&lt;namespace&gt;</em>/<em>&lt;name&gt;</em></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Updates <code>memberReferences</code>, <code>kind</code>, <code>namespace</code>, or <code>name</code> for a role in Developer Hub.</p>
</div>
<div class="paragraph">
<div class="title">Request parameters</div>
<p>The request body contains the <code>oldRole</code> and <code>newRole</code> objects:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>body</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <code>memberReferences</code>, <code>group</code>, <code>namespace</code>, and <code>name</code> the new role to be created.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Request body</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example request body (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "oldRole": {
    "memberReferences": ["group:default/test"],
    "name": "role:default/test_admin"
  },
  "newRole": {
    "memberReferences": ["group:default/test", "user:default/test2"],
    "name": "role:default/test_admin"
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>200 OK</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[DELETE] /api/permission/roles/<em>&lt;kind&gt;</em>/<em>&lt;namespace&gt;</em>/<em>&lt;name&gt;</em>?memberReferences=&lt;VALUE&gt;</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Deletes the specified user or group from a role in Developer Hub.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Request parameters</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kind of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>memberReferences</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Associated group information</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>204</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[DELETE] /api/permission/roles/<em>&lt;kind&gt;</em>/<em>&lt;namespace&gt;</em>/<em>&lt;name&gt;</em></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Deletes a specified role from Developer Hub.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Request parameters</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kind of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>204</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_permission-policies">4.3.2. Permission policies</h4>
<div class="paragraph">
<p>The RBAC REST API supports the following endpoints for managing permission policies in the Red Hat Developer Hub.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[GET] /api/permission/policies</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns permission policies list for all users.</p>
</div>
<div class="listingblock">
<div class="title">Example response (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    "entityReference": "role:default/test",
    "permission": "catalog-entity",
    "policy": "read",
    "effect": "allow",
    "metadata": {
      "source": "csv-file"
    }
  },
  {
    "entityReference": "role:default/test",
    "permission": "catalog.entity.create",
    "policy": "use",
    "effect": "allow",
    "metadata": {
      "source": "csv-file"
    }
  },
]</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[GET] /api/permission/policies/<em>&lt;kind&gt;</em>/<em>&lt;namespace&gt;</em>/<em>&lt;name&gt;</em></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns permission policies related to the specified entity reference.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 4. Request parameters</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kind of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name related to the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example response (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    "entityReference": "role:default/test",
    "permission": "catalog-entity",
    "policy": "read",
    "effect": "allow",
    "metadata": {
      "source": "csv-file"
    }
  },
  {
    "entityReference": "role:default/test",
    "permission": "catalog.entity.create",
    "policy": "use",
    "effect": "allow",
    "metadata": {
      "source": "csv-file"
    }
  }
]</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[POST] /api/permission/policies</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Creates a permission policy for a specified entity.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 5. Request parameters</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>entityReference</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reference values of an entity including <code>kind</code>, <code>namespace</code>, and <code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permission</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permission from a specific plugin, resource type, or name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy action for the permission, such as <code>create</code>, <code>read</code>, <code>update</code>, <code>delete</code>, or <code>use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>effect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indication of allowing or not allowing the policy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example request body (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    "entityReference": "role:default/test",
    "permission": "catalog-entity",
    "policy": "read",
    "effect": "allow"
  }
]</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>201 Created</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[PUT] /api/permission/policies/<em>&lt;kind&gt;</em>/<em>&lt;namespace&gt;</em>/<em>&lt;name&gt;</em></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Updates a permission policy for a specified entity.</p>
</div>
<div class="paragraph">
<div class="title">Request parameters</div>
<p>The request body contains the <code>oldPolicy</code> and <code>newPolicy</code> objects:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permission</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permission from a specific plugin, resource type, or name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy action for the permission, such as <code>create</code>, <code>read</code>, <code>update</code>, <code>delete</code>, or <code>use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>effect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indication of allowing or not allowing the policy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example request body (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "oldPolicy": [
    {
      "permission": "catalog-entity",
      "policy": "read",
      "effect": "allow"
    },
    {
      "permission": "catalog.entity.create",
      "policy": "create",
      "effect": "allow"
    }
  ],
  "newPolicy": [
    {
      "permission": "catalog-entity",
      "policy": "read",
      "effect": "deny"
    },
    {
      "permission": "policy-entity",
      "policy": "read",
      "effect": "allow"
    }
  ]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>200</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[DELETE] /api/permission/policies/<em>&lt;kind&gt;</em>/<em>&lt;namespace&gt;</em>/<em>&lt;name&gt;</em>?permission={value1}&amp;policy={value2}&amp;effect={value3}</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Deletes a permission policy added to the specified entity.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 6. Request parameters</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kind of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name related to the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permission</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Permission from a specific plugin, resource type, or name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Policy action for the permission, such as <code>create</code>, <code>read</code>, <code>update</code>, <code>delete</code>, or <code>use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>effect</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indication of allowing or not allowing the policy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>204 No Content</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[DELETE] /api/permission/policies/<em>&lt;kind&gt;</em>/<em>&lt;namespace&gt;</em>/<em>&lt;name&gt;</em></dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Deletes all permission policies added to the specified entity.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 7. Request parameters</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kind</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kind of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>namespace</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace of the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name related to the entity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>204 No Content</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[GET] /api/permission/plugins/policies</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns permission policies for all static plugins.</p>
</div>
<div class="listingblock">
<div class="title">Example response (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    "pluginId": "catalog",
    "policies": [
      {
        "isResourced": true,
        "permission": "catalog-entity",
        "policy": "read"
      },
      {
        "isResourced": false,
        "permission": "catalog.entity.create",
        "policy": "create"
      },
      {
        "isResourced": true,
        "permission": "catalog-entity",
        "policy": "delete"
      },
      {
        "isResourced": true,
        "permission": "catalog-entity",
        "policy": "update"
      },
      {
        "isResourced": false,
        "permission": "catalog.location.read",
        "policy": "read"
      },
      {
        "isResourced": false,
        "permission": "catalog.location.create",
        "policy": "create"
      },
      {
        "isResourced": false,
        "permission": "catalog.location.delete",
        "policy": "delete"
      }
    ]
  },
  ...
]</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_conditional-policies">4.3.3. Conditional policies</h4>
<div class="paragraph">
<p>The RBAC REST API supports the following endpoints for managing conditional policies in the Red Hat Developer Hub.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[GET] /api/permission/plugins/condition-rules</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns available conditional rule parameter schemas for the available plugins that are enabled in Developer Hub.</p>
</div>
<div class="listingblock">
<div class="title">Example response (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
   {
      "pluginId": "catalog",
      "rules": [
         {
            "name": "HAS_ANNOTATION",
            "description": "Allow entities with the specified annotation",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "annotation": {
                     "type": "string",
                     "description": "Name of the annotation to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the annotation to match on"
                  }
               },
               "required": [
                  "annotation"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_LABEL",
            "description": "Allow entities with the specified label",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "label": {
                     "type": "string",
                     "description": "Name of the label to match on"
                  }
               },
               "required": [
                  "label"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_METADATA",
            "description": "Allow entities with the specified metadata subfield",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "key": {
                     "type": "string",
                     "description": "Property within the entities metadata to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the given property to match on"
                  }
               },
               "required": [
                  "key"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_SPEC",
            "description": "Allow entities with the specified spec subfield",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "key": {
                     "type": "string",
                     "description": "Property within the entities spec to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the given property to match on"
                  }
               },
               "required": [
                  "key"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "IS_ENTITY_KIND",
            "description": "Allow entities matching a specified kind",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "kinds": {
                     "type": "array",
                     "items": {
                        "type": "string"
                     },
                     "description": "List of kinds to match at least one of"
                  }
               },
               "required": [
                  "kinds"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "IS_ENTITY_OWNER",
            "description": "Allow entities owned by a specified claim",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "claims": {
                     "type": "array",
                     "items": {
                        "type": "string"
                     },
                     "description": "List of claims to match at least one on within ownedBy"
                  }
               },
               "required": [
                  "claims"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         }
      ]
   }
   ... &lt;another plugin condition parameter schemas&gt;
]</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[GET] /api/permission/roles/conditions/:id</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns conditions for the specified ID.</p>
</div>
<div class="listingblock">
<div class="title">Example response (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "id": 1,
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "anyOf": [
      {
        "rule": "IS_ENTITY_OWNER",
        "resourceType": "catalog-entity",
        "params": {
          "claims": ["group:default/team-a"]
        }
      },
      {
        "rule": "IS_ENTITY_KIND",
        "resourceType": "catalog-entity",
        "params": {
          "kinds": ["Group"]
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[GET] /api/permission/roles/conditions</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns list of all conditions for all roles.</p>
</div>
<div class="listingblock">
<div class="title">Example response (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    "id": 1,
    "result": "CONDITIONAL",
    "roleEntityRef": "role:default/test",
    "pluginId": "catalog",
    "resourceType": "catalog-entity",
    "permissionMapping": ["read"],
    "conditions": {
      "anyOf": [
        {
          "rule": "IS_ENTITY_OWNER",
          "resourceType": "catalog-entity",
          "params": {
            "claims": ["group:default/team-a"]
          }
        },
        {
          "rule": "IS_ENTITY_KIND",
          "resourceType": "catalog-entity",
          "params": {
            "kinds": ["Group"]
          }
        }
      ]
    }
  }
]</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[POST] /api/permission/roles/conditions</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Creates a conditional policy for the specified role.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 8. Request parameters</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always has the value <code>CONDITIONAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roleEntityRef</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String entity reference to the RBAC role, such as <code>role:default/dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pluginId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corresponding plugin ID, such as <code>catalog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permissionMapping</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array permission action, such as <code>['read', 'update', 'delete']</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resourceType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource type provided by the plugin, such as <code>catalog-entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>conditions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Condition JSON with parameters or array parameters joined by criteria</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The description of the role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example request body (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "rule": "IS_ENTITY_OWNER",
    "resourceType": "catalog-entity",
    "params": {
      "claims": ["group:default/team-a"]
    }
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "id": 1
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[PUT] /permission/roles/conditions/:id</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Updates a condition policy for a specified ID.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 9. Request parameters</caption>
<colgroup>
<col style="width: 15%;">
<col style="width: 45%;">
<col style="width: 15%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Presence</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always has the value <code>CONDITIONAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roleEntityRef</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String entity reference to the RBAC role, such as <code>role:default/dev</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pluginId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corresponding plugin ID, such as <code>catalog</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permissionMapping</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array permission action, such as <code>['read', 'update', 'delete']</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resourceType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource type provided by the plugin, such as <code>catalog-entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>conditions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Condition JSON with parameters or array parameters joined by criteria</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>metadata.description</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The description of the role</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional</p></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="title">Example request body (JSON)</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "anyOf": [
      {
        "rule": "IS_ENTITY_OWNER",
        "resourceType": "catalog-entity",
        "params": {
          "claims": ["group:default/team-a"]
        }
      },
      {
        "rule": "IS_ENTITY_KIND",
        "resourceType": "catalog-entity",
        "params": {
          "kinds": ["Group"]
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>200</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[DELETE] /api/permission/roles/conditions/:id</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Deletes a conditional policy for the specified ID.</p>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code>204</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_user-statistics">4.3.4. User statistics</h4>
<div class="paragraph">
<p>The <code>licensed-users-info-backend</code> plugin exposes various REST API endpoints to retrieve data related to logged-in users.</p>
</div>
<div class="paragraph">
<p>No additional configuration is required for the <code>licensed-users-info-backend</code> plugin. If the RBAC backend plugin is enabled, then an administrator role must be assigned to access the endpoints, as the endpoints are protected by the <code>policy.entity.read</code> permission.</p>
</div>
<div class="paragraph">
<p>The base URL for user statistics endpoints is <code>http://SERVER:PORT/api/licensed-users-info</code>, such as <code>http://localhost:7007/api/licensed-users-info</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">[GET] /users/quantity</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns the total number of logged-in users.</p>
</div>
<div class="listingblock">
<div class="title">Example request</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X GET "http://localhost:7007/api/licensed-users-info/users/quantity" \
-H "Content-Type: application/json" \
-H "Authorization: Bearer $token"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{ "quantity": "2" }</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[GET] /users</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns a list of logged-in users with their details.</p>
</div>
<div class="listingblock">
<div class="title">Example request</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X GET "http://localhost:7007/api/licensed-users-info/users" \
-H "Content-Type: application/json" \
-H "Authorization: Bearer $token"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
  {
    "userEntityRef": "user:default/dev",
    "lastTimeLogin": "Thu, 22 Aug 2024 16:27:41 GMT",
    "displayName": "John Leavy",
    "email": "dev@redhat.com"
  }
]</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">[GET] /users</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Returns a list of logged-in users in CSV format.</p>
</div>
<div class="listingblock">
<div class="title">Example request</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">curl -X GET "http://localhost:7007/api/licensed-users-info/users" \
-H "Content-Type: text/csv" \
-H "Authorization: Bearer $token"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Example response</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">userEntityRef,displayName,email,lastTimeLogin
user:default/dev,John Leavy,dev@redhat.com,"Thu, 22 Aug 2024 16:27:41 GMT"</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="managing-authorizations-by-using-external-files">5. Managing authorizations by using external files</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To automate Red Hat Developer Hub maintenance, you can configure permissions and roles in external files, before starting Developer Hub.</p>
</div>
<div class="sect2">
<h3 id="defining-authorizations-in-external-files-by-using-the-operator">5.1. Defining authorizations in external files by using the operator</h3>
<div class="paragraph">
<p>To automate Red Hat Developer Hub maintenance, you can define permissions and roles in external files, before starting Developer Hub.
You need to prepare your files, upload them to your OpenShift Container Platform project,
and configure Developer Hub to use the external files.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#enabling-and-giving-access-to-rbac">You enabled the RBAC feature</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Define your policies in a <code>rbac-policies.csv</code> CSV file by using the following format:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Define role permissions:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">p, <em>&lt;role_entity_reference&gt;</em>, <em>&lt;permission&gt;</em>, <em>&lt;action&gt;</em>, <em>&lt;allow_or_deny&gt;</em></code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>&lt;role_entity_reference&gt;</em></dt>
<dd>
<p>Role entity reference, such as: <code>role:default/guest</code>.</p>
</dd>
<dt class="hdlist1"><em>&lt;permission&gt;</em></dt>
<dd>
<p>Permission, such as: <code>bulk.import</code>, <code>catalog.entity.read</code>, or <code>catalog.entity.refresh</code>, or permission resource type, such as: <code>bulk-import</code> or <code>catalog-entity</code>.</p>
<div class="paragraph">
<p>See: <a href="#ref-rbac-permission-policies_title-authorization">Permission policies reference</a>.</p>
</div>
</dd>
<dt class="hdlist1"><em>&lt;action&gt;</em></dt>
<dd>
<p>Action type, such as: <code>use</code>, <code>read</code>, <code>create</code>, <code>update</code>, <code>delete</code>.</p>
</dd>
<dt class="hdlist1"><em>&lt;allow_or_deny&gt;</em></dt>
<dd>
<p>Access granted: <code>allow</code> or <code>deny</code>.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Assign the role to a group or a user:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">g, <em>&lt;group_or_user&gt;</em>, <em>&lt;role_entity_reference&gt;</em></code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>&lt;group_or_user&gt;</em></dt>
<dd>
<p>Group, such as: <code>user:default/mygroup</code>, or user, such as: <code>user:default/myuser</code>.</p>
<div class="listingblock">
<div class="title">Sample <code>rbac-policies.csv</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">p, role:default/guests, catalog-entity, read, allow
p, role:default/guests, catalog.entity.create, create, allow
g, user:default/my-user, role:default/guests
g, group:default/my-group, role:default/guests</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Define your conditional policies in a <code>rbac-conditional-policies.yaml</code> YAML file by using the following format:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">result: CONDITIONAL
roleEntityRef: <em>&lt;role_entity_reference&gt;</em>
pluginId: <em>&lt;plugin_id&gt;</em>
permissionMapping:
  - read
  - update
  - delete
conditions: <em>&lt;conditions&gt;</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="#ref-rbac-conditional-policy-definition_title-authorization">Conditional policies reference</a>.</p>
</div>
</li>
<li>
<p>Upload your <code>rbac-policies.csv</code> and <code>rbac-conditional-policies.yaml</code> files to a <code>rbac-policies</code> config map in your OpenShift Container Platform project containing Developer Hub.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">$ oc create configmap rbac-policies \
     --from-file=rbac-policies.csv \
     --from-file=rbac-conditional-policies.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>Update your Developer Hub <code>Backstage</code> custom resource to mount in the Developer Hub filesystem your files from the <code>rbac-policies</code> config map:</p>
<div class="listingblock">
<div class="title"><code>Backstage</code> Custom resource fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: rhdh.redhat.com/v1alpha1
kind: Backstage
spec:
  application:
    extraFiles:
      mountPath: /opt/app-root/src
      configMaps:
        - name: rbac-policies</code></pre>
</div>
</div>
</li>
<li>
<p>Update your Developer Hub <code>app-config.yaml</code> configuration file to use the <code>rbac-policies.csv</code> and <code>rbac-conditional-policies.yaml</code> external files:</p>
<div class="listingblock">
<div class="title"><code>app-config.yml</code> fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">permission:
  enabled: true
  rbac:
    conditionalPoliciesFile: /opt/app-root/src/rbac-conditional-policies.yaml
    policies-csv-file: /opt/app-root/src/rbac-policies.csv
    policyFileReload: true</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="defining-authorizations-in-external-files-by-using-helm">5.2. Defining authorizations in external files by using Helm</h3>
<div class="paragraph">
<p>To automate Red Hat Developer Hub maintenance, you can define permissions and roles in external files, before starting Developer Hub.
You need to prepare your files, upload them to your OpenShift Container Platform project,
and configure Developer Hub to use the external files.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p><a href="#enabling-and-giving-access-to-rbac">You enabled the RBAC feature</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Define your policies in a <code>rbac-policies.csv</code> CSV file by using the following format:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Define role permissions:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">p, <em>&lt;role_entity_reference&gt;</em>, <em>&lt;permission&gt;</em>, <em>&lt;action&gt;</em>, <em>&lt;allow_or_deny&gt;</em></code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>&lt;role_entity_reference&gt;</em></dt>
<dd>
<p>Role entity reference, such as: <code>role:default/guest</code>.</p>
</dd>
<dt class="hdlist1"><em>&lt;permission&gt;</em></dt>
<dd>
<p>Permission, such as: <code>bulk.import</code>, <code>catalog.entity.read</code>, or <code>catalog.entity.refresh</code>, or permission resource type, such as: <code>bulk-import</code> or <code>catalog-entity</code>.</p>
<div class="paragraph">
<p>See: <a href="#ref-rbac-permission-policies_title-authorization">Permission policies reference</a>.</p>
</div>
</dd>
<dt class="hdlist1"><em>&lt;action&gt;</em></dt>
<dd>
<p>Action type, such as: <code>use</code>, <code>read</code>, <code>create</code>, <code>update</code>, <code>delete</code>.</p>
</dd>
<dt class="hdlist1"><em>&lt;allow_or_deny&gt;</em></dt>
<dd>
<p>Access granted: <code>allow</code> or <code>deny</code>.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Assign the role to a group or a user:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">g, <em>&lt;group_or_user&gt;</em>, <em>&lt;role_entity_reference&gt;</em></code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><em>&lt;group_or_user&gt;</em></dt>
<dd>
<p>Group, such as: <code>user:default/mygroup</code>, or user, such as: <code>user:default/myuser</code>.</p>
<div class="listingblock">
<div class="title">Sample <code>rbac-policies.csv</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">p, role:default/guests, catalog-entity, read, allow
p, role:default/guests, catalog.entity.create, create, allow
g, user:default/my-user, role:default/guests
g, group:default/my-group, role:default/guests</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Define your conditional policies in a <code>rbac-conditional-policies.yaml</code> YAML file by using the following format:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">result: CONDITIONAL
roleEntityRef: <em>&lt;role_entity_reference&gt;</em>
pluginId: <em>&lt;plugin_id&gt;</em>
permissionMapping:
  - read
  - update
  - delete
conditions: <em>&lt;conditions&gt;</em></code></pre>
</div>
</div>
<div class="paragraph">
<p>See: <a href="#ref-rbac-conditional-policy-definition_title-authorization">Conditional policies reference</a>.</p>
</div>
</li>
<li>
<p>Upload your <code>rbac-policies.csv</code> and <code>rbac-conditional-policies.yaml</code> files to a <code>rbac-policies</code> config map in your OpenShift Container Platform project containing Developer Hub.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">$ oc create configmap rbac-policies \
     --from-file=rbac-policies.csv \
     --from-file=rbac-conditional-policies.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>Update your Developer Hub <code>Backstage</code> Helm chart to mount in the Developer Hub filesystem your files from the <code>rbac-policies</code> config map:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Developer Hub Helm Chart, go to <strong>Root Schema &#8594; Backstage chart schema &#8594; Backstage parameters &#8594; Backstage container additional volume mounts</strong>.</p>
</li>
<li>
<p>Select <strong>Add Backstage container additional volume mounts</strong> and add the following values:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">mountPath</dt>
<dd>
<p><code>/opt/app-root/src/rbac</code></p>
</dd>
<dt class="hdlist1">Name</dt>
<dd>
<p><code>rbac-policies</code></p>
</dd>
</dl>
</div>
</li>
<li>
<p>Add the RBAC policy to the <strong>Backstage container additional volumes</strong> in the Developer Hub Helm Chart:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">name</dt>
<dd>
<p><code>rbac-policies</code></p>
</dd>
<dt class="hdlist1">configMap</dt>
<dd>
<div class="dlist">
<dl>
<dt class="hdlist1">defaultMode</dt>
<dd>
<p><code>420</code></p>
</dd>
<dt class="hdlist1">name</dt>
<dd>
<p><code>rbac-policies</code></p>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Update your Developer Hub <code>app-config.yaml</code> configuration file to use the <code>rbac-policies.csv</code> and <code>rbac-conditional-policies.yaml</code> external files:</p>
<div class="listingblock">
<div class="title"><code>app-config.yml</code> fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">permission:
  enabled: true
  rbac:
    conditionalPoliciesFile: /opt/app-root/src/rbac-conditional-policies.yaml
    policies-csv-file: /opt/app-root/src/rbac-policies.csv
    policyFileReload: true</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-guest-access-with-rbac-ui_title-authorization">6. Configuring guest access with RBAC UI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Use guest access with the role-based access control (RBAC) front-end plugin to allow a user to test role and policy creation without the need to set up and configure an authentication provider.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Guest access is not recommended for production.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="configuring-the-rbac-backend-plugin_title-authorization">6.1. Configuring the RBAC backend plugin</h3>
<div class="paragraph">
<p>You can configure the RBAC backend plugin by updating the <code>app-config.yaml</code> file to enable the permission framework.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the <code>@janus-idp/backstage-plugin-rbac</code> plugin in Developer Hub. For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html/configuring_dynamic_plugins/index">Configuring dynamic plugins</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Update the <code>app-config.yaml</code> file to enable the permission framework as shown:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">permission
  enabled: true
  rbac:
    admin:
      users:
        - name: user:default/guest
    pluginsWithPermission:
      - catalog
      - permission
      - scaffolder</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>pluginsWithPermission</code> section of the <code>app-config.yaml</code> section includes only three plugins by default. Update the section as needed to include any additional plugins that also incorporate permissions.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="setting-up-the-guest-authentication-provider_title-authorization">6.2. Setting up the guest authentication provider</h3>
<div class="paragraph">
<p>You can enable guest authentication and use it alongside the RBAC frontend plugin.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the <code>@janus-idp/backstage-plugin-rbac</code> plugin in Developer Hub. For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html/configuring_dynamic_plugins/index">Configuring dynamic plugins</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In the <code>app-config.yaml</code> file, add the user entity reference to resolve and enable the <code>dangerouslyAllowOutsideDevelopment</code> option, as shown in the following example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: development
  providers:
    guest:
      userEntityRef: user:default/guest
      dangerouslyAllowOutsideDevelopment: true</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can use <code>user:default/guest</code> as the user entity reference to match the added user under the <code>permission.rbac.admin.users</code> section of the <code>app-config.yaml</code> file.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="ref-rbac-permission-policies_title-authorization">7. Permission policies reference</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Permission policies in Red Hat Developer Hub are a set of rules to govern access to resources or functionalities. These policies state the authorization level that is granted to users based on their roles. The permission policies are implemented to maintain security and confidentiality within a given environment.</p>
</div>
<div class="paragraph">
<p>You can define the following types of permissions in Developer Hub:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>resource type</p>
</li>
<li>
<p>basic</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The distinction between the two permission types depend on whether a permission includes a defined resource type.</p>
</div>
<div class="paragraph">
<p>You can define the resource type permission using either the associated resource type or the permission name as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="title">Example resource type permission definition</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">p, role:default/myrole, catalog.entity.read, read, allow
g, user:default/myuser, role:default/myrole

p, role:default/another-role, catalog-entity, read, allow
g, user:default/another-user, role:default/another-role</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can define the basic permission in Developer Hub using the permission name as shown in the following example:</p>
</div>
<div class="listingblock">
<div class="title">Example basic permission definition</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="csv">p, role:default/myrole, catalog.entity.create, create, allow
g, user:default/myuser, role:default/myrole</code></pre>
</div>
</div>
<div class="paragraph">
<p>Developer Hub supports following permission policies:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Catalog permissions</dt>
<dd>
<p>.Catalog permissions</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 25%;">
<col style="width: 15%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Resource type</th>
<th class="tableblock halign-left valign-top">Policy</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.entity.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog-entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to read from the catalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.entity.create</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>create</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to create catalog entities, including registering an existing component in the catalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.entity.refresh</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog-entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>update</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to refresh a single or multiple entities from the catalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.entity.delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog-entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to delete a single or multiple entities from the catalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.location.read</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to read a single or multiple locations from the catalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.location.create</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>create</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to create locations within the catalog</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>catalog.location.delete</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to delete locations from the catalog</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Bulk import permission</dt>
<dd>
<p>.Bulk import permission</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 25%;">
<col style="width: 15%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Resource type</th>
<th class="tableblock halign-left valign-top">Policy</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bulk.import</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bulk-import</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows the user to access the bulk import endpoints, such as listing all repositories and organizations accessible by all GitHub integrations and managing the import requests</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Scaffolder permissions</dt>
<dd>
<p>.Scaffolder permissions</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 25%;">
<col style="width: 15%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Resource type</th>
<th class="tableblock halign-left valign-top">Policy</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scaffolder.action.execute</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scaffolder-action</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows the execution of an action from a template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scaffolder.template.parameter.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scaffolder-template</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to read a single or multiple one parameters from a template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scaffolder.template.step.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scaffolder-template</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to read a single or multiple steps from a template</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scaffolder.task.create</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>create</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to trigger software templates which create new scaffolder tasks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scaffolder.task.cancel</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to cancel currently running scaffolder tasks</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>scaffolder.task.read</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to read all scaffolder tasks and their associated events and logs</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">RBAC permissions</dt>
<dd>
<p>.RBAC permissions</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 25%;">
<col style="width: 15%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Resource type</th>
<th class="tableblock halign-left valign-top">Policy</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy.entity.read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy-entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to read permission policies and roles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy.entity.create</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy-entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>create</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to create a single or multiple permission policies and roles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy.entity.update</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy-entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>update</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to update a single or multiple permission policies and roles</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy.entity.delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>policy-entity</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>delete</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to delete a single or multiple permission policies and roles</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Kubernetes permissions</dt>
<dd>
<p>.Kubernetes permissions</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 25%;">
<col style="width: 15%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Resource type</th>
<th class="tableblock halign-left valign-top">Policy</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.proxy</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to access the proxy endpoint</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">OCM permissions</dt>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 25%;">
<col style="width: 15%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Resource type</th>
<th class="tableblock halign-left valign-top">Policy</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ocm.entity.read</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to read from the OCM plugin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ocm.cluster.read</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to read the cluster information in the OCM plugin</p></td>
</tr>
</tbody>
</table>
<div class="dlist">
<dl>
<dt class="hdlist1">Topology permissions</dt>
<dd>
<p>.Topology permissions</p>
</dd>
</dl>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15%;">
<col style="width: 25%;">
<col style="width: 15%;">
<col style="width: 45%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Resource type</th>
<th class="tableblock halign-left valign-top">Policy</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>topology.view.read</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>read</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to view the topology plugin</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kubernetes.proxy</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>use</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows a user or role to access the proxy endpoint, allowing the user or role to read pod logs and events within RHDH</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="con-rbac-conditional-policies-rhdh_title-authorization">8. Conditional policies in Red Hat Developer Hub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The permission framework in Red Hat Developer Hub provides conditions, supported by the RBAC backend plugin (<code>backstage-plugin-rbac-backend</code>). The conditions work as content filters for the Developer Hub resources that are provided by the RBAC backend plugin.</p>
</div>
<div class="paragraph">
<p>The RBAC backend API stores conditions assigned to roles in the database. When you request to access the frontend resources, the RBAC backend API searches for the corresponding conditions and delegates them to the appropriate plugin using its plugin ID. If you are assigned to multiple roles with different conditions, then the RBAC backend merges the conditions using the <code>anyOf</code> criteria.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Conditional criteria</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>A condition in Developer Hub is a simple condition with a rule and parameters. However, a condition can also contain a parameter or an array of parameters combined by conditional criteria. The supported conditional criteria includes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>allOf</code>: Ensures that all conditions within the array must be true for the combined condition to be satisfied.</p>
</li>
<li>
<p><code>anyOf</code>: Ensures that at least one of the conditions within the array must be true for the combined condition to be satisfied.</p>
</li>
<li>
<p><code>not</code>: Ensures that the condition within it must not be true for the combined condition to be satisfied.</p>
</li>
</ul>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Conditional object</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The plugin specifies the parameters supported for conditions. You can access the conditional object schema from the RBAC API endpoint to understand how to construct a conditional JSON object, which is then used by the RBAC backend plugin API.</p>
</div>
<div class="paragraph">
<p>A conditional object contains the following parameters:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 10. Conditional object parameters</caption>
<colgroup>
<col style="width: 30%;">
<col style="width: 45%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>result</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Always has the value <code>CONDITIONAL</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>roleEntityRef</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String entity reference to the RBAC role, such as <code>role:default/dev</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>pluginId</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Corresponding plugin ID, such as <code>catalog</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>permissionMapping</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String array</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Array permission actions, such as <code>['read', 'update', 'delete']</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>resourceType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Resource type provided by the plugin, such as <code>catalog-entity</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>conditions</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">JSON</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Condition JSON with parameters or array parameters joined by criteria</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</dd>
<dt class="hdlist1">Conditional policy aliases</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>The RBAC backend plugin (<code>backstage-plugin-rbac-backend</code>) supports the use of aliases in conditional policy rule parameters. The conditional policy aliases are dynamically replaced with the corresponding values during policy evaluation. Each alias in conditional policy is prefixed with a <code>$</code> sign indicating its special function.</p>
</div>
<div class="paragraph">
<p>The supported conditional aliases include:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>$currentUser</code>: This alias is replaced with the user entity reference for the user who requests access to the resource. For example, if user Tom from the default namespace requests access, <code>$currentUser</code> becomes <code>user:default/tom</code>.</p>
</li>
</ul>
</div>
</div>
</div>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="title">Example conditional policy object with <code>$currentUser</code> alias</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/developer",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["delete"],
  "conditions": {
    "rule": "IS_ENTITY_OWNER",
    "resourceType": "catalog-entity",
    "params": {
      "claims": ["$currentUser"]
    }
  }
}</code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><code>$ownerRefs</code>: This alias is replaced with ownership references, usually as an array that includes the user entity reference and the user&#8217;s parent group entity reference. For example, for user Tom from team-a, <code>$ownerRefs</code> becomes <code>['user:default/tom', 'group:default/team-a']</code>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="listingblock">
<div class="title">Example conditional policy object with <code>$ownerRefs</code> alias</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/developer",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["delete"],
  "conditions": {
    "rule": "IS_ENTITY_OWNER",
    "resourceType": "catalog-entity",
    "params": {
      "claims": ["$ownerRefs"]
    }
  }
}</code></pre>
</div>
</div>
<div class="openblock">
<div class="content">

</div>
</div>
<div class="sect2">
<h3 id="ref-rbac-conditional-policy-definition_title-authorization">8.1. Conditional policies reference</h3>
<div class="paragraph">
<p>You can access API endpoints for conditional policies in Red Hat Developer Hub. For example, to retrieve the available conditional rules, which can help you define these policies, you can access the <code>GET [api/plugins/condition-rules]</code> endpoint.</p>
</div>
<div class="paragraph">
<p>The <code>api/plugins/condition-rules</code> returns the condition parameters schemas, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">[
   {
      "pluginId": "catalog",
      "rules": [
         {
            "name": "HAS_ANNOTATION",
            "description": "Allow entities with the specified annotation",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "annotation": {
                     "type": "string",
                     "description": "Name of the annotation to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the annotation to match on"
                  }
               },
               "required": [
                  "annotation"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_LABEL",
            "description": "Allow entities with the specified label",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "label": {
                     "type": "string",
                     "description": "Name of the label to match on"
                  }
               },
               "required": [
                  "label"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_METADATA",
            "description": "Allow entities with the specified metadata subfield",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "key": {
                     "type": "string",
                     "description": "Property within the entities metadata to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the given property to match on"
                  }
               },
               "required": [
                  "key"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "HAS_SPEC",
            "description": "Allow entities with the specified spec subfield",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "key": {
                     "type": "string",
                     "description": "Property within the entities spec to match on"
                  },
                  "value": {
                     "type": "string",
                     "description": "Value of the given property to match on"
                  }
               },
               "required": [
                  "key"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "IS_ENTITY_KIND",
            "description": "Allow entities matching a specified kind",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "kinds": {
                     "type": "array",
                     "items": {
                        "type": "string"
                     },
                     "description": "List of kinds to match at least one of"
                  }
               },
               "required": [
                  "kinds"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         },
         {
            "name": "IS_ENTITY_OWNER",
            "description": "Allow entities owned by a specified claim",
            "resourceType": "catalog-entity",
            "paramsSchema": {
               "type": "object",
               "properties": {
                  "claims": {
                     "type": "array",
                     "items": {
                        "type": "string"
                     },
                     "description": "List of claims to match at least one on within ownedBy"
                  }
               },
               "required": [
                  "claims"
               ],
               "additionalProperties": false,
               "$schema": "http://json-schema.org/draft-07/schema#"
            }
         }
      ]
   }
   ... &lt;another plugin condition parameter schemas&gt;
]</code></pre>
</div>
</div>
<div class="paragraph">
<p>The RBAC backend API constructs a condition JSON object based on the previous condition schema.</p>
</div>
<div class="sect3">
<h4 id="_examples-of-conditional-policies">8.1.1. Examples of conditional policies</h4>
<div class="paragraph">
<p>In Red Hat Developer Hub, you can define conditional policies with or without criteria. You can use the following examples to define the conditions based on your use case:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">A condition without criteria</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Consider a condition without criteria displaying catalogs only if user is a member of the owner group. To add this condition, you can use the catalog plugin schema <code>IS_ENTITY_OWNER</code> as follows:</p>
</div>
<div class="listingblock">
<div class="title">Example condition without criteria</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "rule": "IS_ENTITY_OWNER",
  "resourceType": "catalog-entity",
  "params": {
    "claims": ["group:default/team-a"]
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the previous example, the only conditional parameter used is <code>claims</code>, which contains a list of user or group entity references.</p>
</div>
<div class="paragraph">
<p>You can apply the previous example condition to the RBAC REST API by adding additional parameters as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "rule": "IS_ENTITY_OWNER",
    "resourceType": "catalog-entity",
    "params": {
      "claims": ["group:default/team-a"]
    }
  }
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">A condition with criteria</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>Consider a condition with criteria, which displays catalogs only if user is a member of owner group OR displays list of all catalog user groups.</p>
</div>
<div class="paragraph">
<p>To add the criteria, you can add another rule as <code>IS_ENTITY_KIND</code> in the condition as follows:</p>
</div>
<div class="listingblock">
<div class="title">Example condition with criteria</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "anyOf": [
    {
      "rule": "IS_ENTITY_OWNER",
      "resourceType": "catalog-entity",
      "params": {
        "claims": ["group:default/team-a"]
      }
    },
    {
      "rule": "IS_ENTITY_KIND",
      "resourceType": "catalog-entity",
      "params": {
        "kinds": ["Group"]
      }
    }
  ]
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Running conditions in parallel during creation is not supported. Therefore, consider defining nested conditional policies based on the available criteria.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Example of nested conditions</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "anyOf": [
    {
      "rule": "IS_ENTITY_OWNER",
      "resourceType": "catalog-entity",
      "params": {
        "claims": ["group:default/team-a"]
      }
    },
    {
      "rule": "IS_ENTITY_KIND",
      "resourceType": "catalog-entity",
      "params": {
        "kinds": ["Group"]
      }
    }
  ],
  "not": {
    "rule": "IS_ENTITY_KIND",
    "resourceType": "catalog-entity",
    "params": { "kinds": ["Api"] }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can apply the previous example condition to the RBAC REST API by adding additional parameters as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/test",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["read"],
  "conditions": {
    "anyOf": [
      {
        "rule": "IS_ENTITY_OWNER",
        "resourceType": "catalog-entity",
        "params": {
          "claims": ["group:default/team-a"]
        }
      },
      {
        "rule": "IS_ENTITY_KIND",
        "resourceType": "catalog-entity",
        "params": {
          "kinds": ["Group"]
        }
      }
    ]
  }
}</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The following examples can be used with Developer Hub plugins. These examples can help you determine how to define conditional policies:</p>
</div>
<div class="listingblock">
<div class="title">Conditional policy defined for Keycloak plugin</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/developer",
  "pluginId": "catalog",
  "resourceType": "catalog-entity",
  "permissionMapping": ["update", "delete"],
  "conditions": {
    "not": {
      "rule": "HAS_ANNOTATION",
      "resourceType": "catalog-entity",
      "params": { "annotation": "keycloak.org/realm", "value": "&lt;YOUR_REALM&gt;" }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The previous example of Keycloak plugin prevents users in the <code>role:default/developer</code> from updating or deleting users that are ingested into the catalog from the Keycloak plugin.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>In the previous example, the annotation <code>keycloak.org/realm</code> requires the value of <code>&lt;YOUR_REALM&gt;</code>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title">Conditional policy defined for Quay plugin</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{
  "result": "CONDITIONAL",
  "roleEntityRef": "role:default/developer",
  "pluginId": "scaffolder",
  "resourceType": "scaffolder-action",
  "permissionMapping": ["use"],
  "conditions": {
    "not": {
      "rule": "HAS_ACTION_ID",
      "resourceType": "scaffolder-action",
      "params": { "actionId": "quay:create-repository" }
    }
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The previous example of Quay plugin prevents the role <code>role:default/developer</code> from using the Quay scaffolder action. Note that <code>permissionMapping</code> contains <code>use</code>, signifying that <code>scaffolder-action</code> resource type permission does not have a permission policy.</p>
</div>
<div class="paragraph">
<p>For more information about permissions in Red Hat Developer Hub, see <a href="#ref-rbac-permission-policies_title-authorization">Permission policies reference</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="con-user-stats-rhdh_title-authorization">9. User statistics in Red Hat Developer Hub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Red Hat Developer Hub, the <code>licensed-users-info-backend</code> plugin provides statistical information about the logged-in users using the Web UI or REST API endpoints.</p>
</div>
<div class="paragraph">
<p>The <code>licensed-users-info-backend</code> plugin enables administrators to monitor the number of active users on Developer Hub. Using this feature, organizations can compare their actual usage with the number of licenses they have purchased. Additionally, you can share the user metrics with Red Hat for transparency and accurate licensing.</p>
</div>
<div class="paragraph">
<p>The <code>licensed-users-info-backend</code> plugin is enabled by default. This plugin enables a <strong>Download User List</strong> link at the bottom of the <strong>Administration &#8594; RBAC</strong> tab.</p>
</div>
<div class="sect2">
<h3 id="proc-download-user-stats-rhdh_title-authorization">9.1. Downloading active users list in Red Hat Developer Hub</h3>
<div class="paragraph">
<p>You can download the list of users in CSV format using the Developer Hub web interface.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>RBAC plugins (<code>@janus-idp/backstage-plugin-rbac</code> and <code>@janus-idp/backstage-plugin-rbac-backend</code>) must be enabled in Red Hat Developer Hub.</p>
</li>
<li>
<p>An administrator role must be assigned.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>In Red Hat Developer Hub, navigate to <strong>Administration</strong> and select the <strong>RBAC</strong> tab.</p>
</li>
<li>
<p>At the bottom of the <strong>RBAC</strong> page, click <strong>Download User List</strong>.</p>
</li>
<li>
<p>Optional: Modify the file name in the <strong>Save as</strong> field and click <strong>Save</strong>.</p>
</li>
<li>
<p>To access the downloaded users list, go to the <strong>Downloads</strong> folder on your local machine and open the CSV file.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-02-28 10:21:11 UTC
</div>
</div>
</body>
</html>