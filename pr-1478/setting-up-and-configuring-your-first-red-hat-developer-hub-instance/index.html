<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Setting up and configuring your first Red Hat Developer Hub instance</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="Prepare your IT infrastructure including Red Hat OpenShift Container Platform and required external components, and run your first Red Hat Developer Hub (RHDH) instance in production."/><link rel="next" href="#checklist-to-run-your-first-rhdh-instance-in-production_setting-up-and-configuring-your-first-rhdh-instance" title="1. Checklist to run your first Red Hat Developer Hub (RHDH) instance in production."/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><section xml:lang="en-US" class="article" id="idm46816526130800"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.8</span></div><div><h1 class="title">Setting up and configuring your first Red Hat Developer Hub instance</h1></div><div><h3 class="subtitle"><em>Prepare your IT infrastructure including Red Hat OpenShift Container Platform and required external components, and run your first Red Hat Developer Hub (RHDH) instance in production.</em></h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm46816527586016">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Prepare your IT infrastructure including Red Hat OpenShift Container Platform and required external components, and run your first Red Hat Developer Hub (RHDH) instance in production.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#checklist-to-run-your-first-rhdh-instance-in-production_setting-up-and-configuring-your-first-rhdh-instance">1. Checklist to run your first Red Hat Developer Hub (RHDH) instance in production.</a></span></li><li><span class="section"><a href="#proc-install-operator_setting-up-and-configuring-your-first-rhdh-instance">2. Installing the Red Hat Developer Hub Operator</a></span></li><li><span class="section"><a href="#preparing-your-external-services">3. Preparing your external services</a></span></li><li><span class="section"><a href="#provisioning-your-custom-configuration">4. Provisioning your custom Red Hat Developer Hub configuration</a></span></li><li><span class="section"><a href="#enabling-authentication-with-mandatory-steps-only">5. Enabling authentication in Red Hat Developer Hub (with mandatory steps only)</a></span><ul><li><span class="section"><a href="#understanding-authentication-and-user-provisioning">5.1. Understanding authentication and user provisioning</a></span></li><li><span class="section"><a href="#authenticating-with-the-guest-user_setting-up-and-configuring-your-first-rhdh-instance">5.2. Authenticating with the Guest user</a></span></li><li><span class="section"><a href="#enabling-user-authentication-with-rhbk-with-mandatory-steps">5.3. Enabling user authentication with Red Hat Build of Keycloak (RHBK)</a></span></li><li><span class="section"><a href="#enabling-user-authentication-with-github-with-mandatory-steps">5.4. Enabling user authentication with GitHub</a></span></li><li><span class="section"><a href="#enabling-user-authentication-with-microsoft-azure-with-mandatory-steps">5.5. Enabling user authentication with Microsoft Azure</a></span></li></ul></li><li><span class="section"><a href="#using-the-operator-to-run-rhdh-with-your-custom-configuration">6. Using the Red Hat Developer Hub Operator to run Developer Hub with your custom configuration</a></span></li><li><span class="section"><a href="#proc-customizing-rhdh-theme-mode_setting-up-and-configuring-your-first-rhdh-instance">7. Customizing the theme mode for your Developer Hub instance</a></span></li><li><span class="section"><a href="#managing-authorizations-by-using-the-web-ui">8. Managing role-based access controls (RBAC) using the Red Hat Developer Hub Web UI</a></span><ul><li><span class="section"><a href="#proc-rbac-ui-create-role_setting-up-and-configuring-your-first-rhdh-instance">8.1. Creating a role in the Red Hat Developer Hub Web UI</a></span></li><li><span class="section"><a href="#proc-rbac-ui-edit-role_setting-up-and-configuring-your-first-rhdh-instance">8.2. Editing a role in the Red Hat Developer Hub Web UI</a></span></li><li><span class="section"><a href="#proc-rbac-ui-delete-role_setting-up-and-configuring-your-first-rhdh-instance">8.3. Deleting a role in the Red Hat Developer Hub Web UI</a></span></li></ul></li></ul></div><p>
		Prepare your IT infrastructure including Red Hat OpenShift Container Platform and required external components, and run your first Red Hat Developer Hub (RHDH) instance in production.
	</p><section class="section" id="checklist-to-run-your-first-rhdh-instance-in-production_setting-up-and-configuring-your-first-rhdh-instance"><div class="titlepage"><div><div><h2 class="title">1. Checklist to run your first Red Hat Developer Hub (RHDH) instance in production.</h2></div></div></div><p>
			With the default configuration, Developer Hub runs with a minimal feature set that does not require secure connection to external services such as an identity provider, a Git provider, and external PostgreSQL and Redis databases.
		</p><p>
			Using critical features therefore requires following additional configuration:
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">For resiliency</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Use an external PostgreSQL database.
							</li><li class="listitem">
								Enable high-availability.
							</li></ul></div></dd><dt><span class="term">For performance</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Enable assets caching to an external Redis database.
							</li></ul></div></dd><dt><span class="term">For security</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Use secure connections to your external services.
							</li><li class="listitem">
								Provision users and enable authentication.
							</li><li class="listitem">
								Enable role-based access control, and configure the permission policy by using the Web UI.
							</li></ul></div></dd><dt><span class="term">For adapting to your environment</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								Enable GitHub repository discovery.
							</li><li class="listitem">
								Customize Developer Hub appearance with your logo.
							</li></ul></div></dd></dl></div></section><section class="section" id="proc-install-operator_setting-up-and-configuring-your-first-rhdh-instance"><div class="titlepage"><div><div><h2 class="title">2. Installing the Red Hat Developer Hub Operator</h2></div></div></div><p>
			As an administrator, you can install the Red Hat Developer Hub Operator. Authorized users can use the Operator to install Red Hat Developer Hub on Red Hat OpenShift Container Platform (OpenShift Container Platform) and supported Kubernetes platforms. For more information on supported platforms and versions, see the <a class="link" href="https://access.redhat.com/support/policy/updates/developerhub">Red Hat Developer Hub Life Cycle</a> page.
		</p><p>
			Containers are available for the following CPU architectures:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					AMD64 and Intel 64 (<code class="literal">x86_64</code>)
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You are logged in as an administrator on the OpenShift Container Platform web console.
				</li><li class="listitem">
					You have configured the appropriate roles and permissions within your project to create or access an application. For more information, see the <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/building_applications/index#building-applications-overview">Red Hat OpenShift Container Platform documentation on Building applications</a>.
				</li><li class="listitem">
					You have installed Red Hat OpenShift Container Platform 4.16 to 4.19.
				</li><li class="listitem">
					Make sure that your system meets the minimum sizing requirements. See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/about_red_hat_developer_hub/index#rhdh-sizing_about-rhdh">Sizing requirements for Red Hat Developer Hub</a>.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					In the navigation menu of the OpenShift Container Platform console, click <span class="strong strong"><strong>Operators &gt; OperatorHub</strong></span>.
				</li><li class="listitem">
					In the <span class="strong strong"><strong>Filter by keyword</strong></span> box, enter Developer Hub and click the <span class="strong strong"><strong>Red Hat Developer Hub Operator</strong></span> card.
				</li><li class="listitem">
					On the <span class="strong strong"><strong>Red Hat Developer Hub Operator</strong></span> page, read the information about the Operator and click <span class="strong strong"><strong>Install</strong></span> to open the <span class="strong strong"><strong>Install Operator</strong></span> page.
				</li><li class="listitem"><p class="simpara">
					After the Operator is successfully installed, provision your custom configuration:
				</p><p class="simpara">
					Before you create a Developer Hub instance, you must create the required config map and Secret resources in your project. These include the <code class="literal">baseUrl</code> and service-to-service authentication secrets.
				</p><p class="simpara">
					For detailed steps, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index#provisioning-and-using-your-custom-configuration">Provisioning your custom Red Hat Developer Hub configuration</a>.
				</p></li><li class="listitem"><p class="simpara">
					From the <span class="strong strong"><strong>Update channel</strong></span> drop-down menu, select the update channel that you want to use, for example, <span class="strong strong"><strong>fast</strong></span> or <span class="strong strong"><strong>fast-1.8</strong></span>.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The `<span class="strong strong"><strong>fast</strong></span> channel includes all of the updates available for a particular version. Any update might introduce unexpected changes in your Red Hat Developer Hub deployment. Check the release notes for details about any potentially breaking changes.
					</p><p>
						The <span class="strong strong"><strong>fast-1.8</strong></span> channel only provides z-stream updates, for example, updating from version 1.8.1 to 1.8.2. If you want to update the Red Hat Developer Hub y-version in the future, for example, updating from 1.8 to 1.9, you must switch to the <span class="strong strong"><strong>fast-1.9</strong></span> channel manually.
					</p></div></div></li><li class="listitem">
					From the <span class="strong strong"><strong>Version</strong></span> drop-down menu, select the version of the Red Hat Developer Hub Operator that you want to install. The default version is the latest version available in the selected channel.
				</li><li class="listitem"><p class="simpara">
					Select the Operator <span class="strong strong"><strong>Installation mode</strong></span>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						The <span class="strong strong"><strong>All namespaces on the cluster (default)</strong></span> option is selected by default. The <span class="strong strong"><strong>Specific namespace on the cluster</strong></span> option is not currently supported.
					</p></div></div></li><li class="listitem"><p class="simpara">
					In the <span class="strong strong"><strong>Installed Namespace</strong></span> field, do one of the following actions:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Select <span class="strong strong"><strong>Operator recommended Namespace</strong></span> to create and use the <span class="strong strong"><strong>rhdh-operator</strong></span> namespace. This option is selected by default.
						</li><li class="listitem"><p class="simpara">
							Select <span class="strong strong"><strong>Select a Namespace</strong></span> to use an alternative namespace.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p class="simpara">
									From the <span class="strong strong"><strong>Select Project</strong></span> drop-down menu, do one of the following actions:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
											Select an existing project.
										</li><li class="listitem"><p class="simpara">
											Select <span class="strong strong"><strong>Create Project</strong></span> to create a new project for the Operator.
										</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
													On the <span class="strong strong"><strong>Create Project</strong></span> dialog, enter text into the required fields and click <span class="strong strong"><strong>Create</strong></span>.
												</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
														For enhanced security, better control over the Operator lifecycle, and preventing potential privilege escalation, install the Red Hat Developer Hub Operator in a dedicated default <code class="literal">rhdh-operator</code> namespace. You can restrict other users' access to the Operator resources through role bindings or cluster role bindings.
													</p><p>
														You can also install the Operator in another namespace by creating the necessary resources, such as an Operator group. For more information, see <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/operators/index#olm-installing-global-namespaces_olm-adding-operators-to-a-cluster">Installing global Operators in custom namespaces</a>.
													</p><p>
														However, if the Red Hat Developer Hub Operator shares a namespace with other Operators, then it shares the same update policy as well, preventing the customization of the update policy. For example, if one Operator is set to manual updates, the Red Hat Developer Hub Operator update policy is also set to manual. For more information, see <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/operators/index#olm-colocation-namespaces_olm-colocation">Colocation of Operators in a namespace</a>.
													</p></div></div></li></ul></div></li></ul></div></li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
					Select the <span class="strong strong"><strong>Update approval</strong></span> method for the Operator.
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							If you select the <span class="strong strong"><strong>Automatic</strong></span> option, the Operator is updated without requiring manual confirmation.
						</li><li class="listitem">
							If you select the <span class="strong strong"><strong>Manual</strong></span> option, a notification opens when a new update is released in the update channel. The update must be manually approved by an administrator before installation can begin.
						</li></ul></div></li><li class="listitem"><p class="simpara">
					Click <span class="strong strong"><strong>Install</strong></span>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						If you selected a <span class="strong strong"><strong>Manual</strong></span> approval strategy, the upgrade status of the subscription remains <span class="strong strong"><strong>Upgrading</strong></span> until you review and approve the install plan. After you click <span class="strong strong"><strong>Approve</strong></span> on the <span class="strong strong"><strong>Install Plan</strong></span> page, the subscription upgrade status changes to <span class="strong strong"><strong>Up to date</strong></span>.
					</p><p>
						If you selected an <span class="strong strong"><strong>Automatic</strong></span> approval strategy, the upgrade status should resolve to <span class="strong strong"><strong>Up to date</strong></span> without intervention.
					</p></div></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Immediately after the Operator is installed, the dialog box on the <span class="strong strong"><strong>OperatorHub</strong></span> page displays the <span class="strong strong"><strong>Installed operator: ready for use</strong></span> message.
				</li><li class="listitem"><p class="simpara">
					From the dialog box, do one of the following actions:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
							Click <span class="strong strong"><strong>View Operator</strong></span> to open the <span class="strong strong"><strong>Operator details</strong></span> page for the Red Hat Developer Hub Operator.
						</li><li class="listitem"><p class="simpara">
							Click <span class="strong strong"><strong>View all installed operators</strong></span> to open the <span class="strong strong"><strong>Installed Operators</strong></span> page.
						</p><div class="itemizedlist"><ul class="itemizedlist" type="square"><li class="listitem">
									From the list of installed Operators, locate the Red Hat Developer Hub Operator name and details.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Red Hat Developer Hub Operator</strong></span> to open the <span class="strong strong"><strong>Operator details</strong></span> page for the Red Hat Developer Hub Operator.
								</li></ul></div></li></ul></div></li></ul></div></section><section class="section" id="preparing-your-external-services"><div class="titlepage"><div><div><h2 class="title">3. Preparing your external services</h2></div></div></div><p>
			Red Hat Developer Hub relies on external services. Prepare the following required external services:
		</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">PostgreSQL database</span></dt><dd>
						Developer Hub stores data in a PostgreSQL database. Use an external database for resiliency and include it in your disaster recovery plan.
					</dd><dt><span class="term">Redis cache</span></dt><dd>
						For efficiency, Developer Hub caches plugin and Techdocs assets when your provide a Redis cache server.
					</dd><dt><span class="term">GitHub API access</span></dt><dd>
						Provide credentials to a GitHub app to enable access to the GitHub API for repository discovery.
					</dd><dt><span class="term">Connection to your identity provider</span></dt><dd>
						Provide credentials to your identity provider to enable user provisioning and authentication.
					</dd></dl></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					Get your external PostgreSQL database connection strings and certificates.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">postgres-host</span></dt><dd>
								Your PostgreSQL instance Domain Name System (DNS) or IP address.
							</dd><dt><span class="term">postgres-port</span></dt><dd>
								Your PostgreSQL instance port number, such as 5432.
							</dd><dt><span class="term">postres-username</span></dt><dd>
								The user name to connect to your PostgreSQL instance.
							</dd><dt><span class="term">postgres-password</span></dt><dd>
								The password to connect to your PostgreSQL instance.
							</dd><dt><span class="term">postgres-ca.pem, </span><span class="term">postgres-key.key, </span><span class="term">postgres-crt.pem</span></dt><dd><p class="simpara">
								For security, use TLS certificates to secure the connection to the database.
							</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
										Get your Redis cache server connection string, such as <code class="literal">rediss://user:pass@cache.example.com:6379</code>. For security, consider using a <code class="literal">rediss</code> secure server connection.
									</li><li class="listitem"><p class="simpara">
										Create a GitHub App to allow Developer Hub to access the GitHub API for repository. Opt for a GitHub App instead of an OAuth app to use fine-grained permissions, gain more control over which repositories the application can access, and use short-lived tokens.
									</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
												<a class="link" href="https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app">Register a GitHub App</a> with the following configuration:
											</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">GitHub App name</span></dt><dd>
															Enter a unique name identifying your GitHub App, such as <code class="literal">integrating-with-rhdh-<span class="emphasis"><em>&lt;GUID&gt;</em></span></code>.
														</dd><dt><span class="term">Homepage URL</span></dt><dd>
															Enter your Developer Hub URL: <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span></code>.
														</dd><dt><span class="term">Authorization callback URL</span></dt><dd>
															Enter your Developer Hub authentication backend URL: <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span>/api/auth/github/handler/frame</code>.
														</dd><dt><span class="term">Webhook</span></dt><dd>
															Clear "Active", as this is not needed for authentication and catalog providers.
														</dd><dt><span class="term">App permissions</span></dt><dd>
															Select permissions to define the level of access for the app. Adapt permissions to your needs:
														</dd></dl></div></li></ol></div></li></ol></div></dd><dt><span class="term">Reading software components</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Contents</span></dt><dd>
											<code class="literal">Read-only</code>
										</dd><dt><span class="term">Commit statuses</span></dt><dd>
											<code class="literal">Read-only</code>
										</dd></dl></div></dd><dt><span class="term">Reading organization data</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Members</span></dt><dd>
											<code class="literal">Read-only</code>
										</dd></dl></div></dd><dt><span class="term">Publishing software templates</span></dt><dd><p class="simpara">
								Set permissions if you intend to use the same GitHub App for software templates.
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Administration</span></dt><dd>
											<code class="literal">Read &amp; write</code> (for creating repositories)
										</dd><dt><span class="term">Contents</span></dt><dd>
											<code class="literal">Read &amp; write</code>
										</dd><dt><span class="term">Metadata</span></dt><dd>
											<code class="literal">Read-only</code>
										</dd><dt><span class="term">Pull requests</span></dt><dd>
											<code class="literal">Read &amp; write</code>
										</dd><dt><span class="term">Issues</span></dt><dd>
											<code class="literal">Read &amp; write</code>
										</dd><dt><span class="term">Workflows</span></dt><dd>
											<code class="literal">Read &amp; write</code> (if templates include GitHub workflows)
										</dd><dt><span class="term">Variables</span></dt><dd>
											<code class="literal">Read &amp; write</code> (if templates include GitHub Action Repository Variables)
										</dd><dt><span class="term">Secrets</span></dt><dd>
											<code class="literal">Read &amp; write</code> (if templates include GitHub Action Repository Secrets)
										</dd><dt><span class="term">Environments</span></dt><dd><p class="simpara">
											<code class="literal">Read &amp; write</code> (if templates include GitHub Environments)
										</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Organization permissions</span></dt><dd/></dl></div></dd></dl></div></dd><dt><span class="term">Members</span></dt><dd><p class="simpara">
								<code class="literal">Read-only</code>
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Where can this GitHub App be installed?</span></dt><dd><p class="simpara">
											Select <code class="literal">Only on this account</code>.
										</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
													In the <span class="strong strong"><strong>General</strong></span> → <span class="strong strong"><strong>Clients secrets</strong></span> section, click <span class="strong strong"><strong>Generate a new client secret</strong></span>.
												</li><li class="listitem">
													In the <span class="strong strong"><strong>General</strong></span> → <span class="strong strong"><strong>Private keys</strong></span> section, click <span class="strong strong"><strong>Generate a private key</strong></span>.
												</li><li class="listitem">
													In the <span class="strong strong"><strong>Install App</strong></span> tab, choose an account to install your GitHub App on.
												</li><li class="listitem">
													Save the following values for the next step:
												</li></ol></div></dd></dl></div></dd></dl></div></li><li class="listitem">
					<span class="strong strong"><strong>App ID</strong></span>
				</li><li class="listitem">
					<span class="strong strong"><strong>Client ID</strong></span>
				</li><li class="listitem">
					<span class="strong strong"><strong>Client secret</strong></span>
				</li><li class="listitem">
					<span class="strong strong"><strong>Private key</strong></span>
				</li></ul></div></section><section class="section" id="provisioning-your-custom-configuration"><div class="titlepage"><div><div><h2 class="title">4. Provisioning your custom Red Hat Developer Hub configuration</h2></div></div></div><p>
			To configure Red Hat Developer Hub, provision your custom Red Hat Developer Hub config maps and secrets to {platform-long} before running Red Hat Developer Hub.
		</p><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
			On Red Hat OpenShift Container Platform, you can skip this step to run Developer Hub with the default config map and secret. Your changes on this configuration might get reverted on Developer Hub restart.
		</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					By using the {platform-cli-link}, you have access, with developer permissions, to the OpenShift cluster aimed at containing your Developer Hub instance.
				</li><li class="listitem">
					You have the connection string to an active Redis server, such as <code class="literal">rediss://user:pass@cache.example.com:6379</code>. For security, consider using a <code class="literal">rediss</code> secure server connection. See <a class="xref" href="#preparing-your-external-services" title="3. Preparing your external services">Section 3, “Preparing your external services”</a>.
				</li><li class="listitem"><p class="simpara">
					You have an external PostgreSQL database, with the following details. See See <a class="xref" href="#preparing-your-external-services" title="3. Preparing your external services">Section 3, “Preparing your external services”</a>.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">postgres-host</span></dt><dd>
								Your PostgreSQL instance Domain Name System (DNS) or IP address.
							</dd><dt><span class="term">postgres-port</span></dt><dd>
								Your PostgreSQL instance port number, such as 5432.
							</dd><dt><span class="term">postres-username</span></dt><dd>
								The user name to connect to your PostgreSQL instance.
							</dd><dt><span class="term">postgres-password</span></dt><dd>
								The password to connect to your PostgreSQL instance.
							</dd><dt><span class="term">postgres-ca.pem, </span><span class="term">postgres-key.key, </span><span class="term">postgres-crt.pem</span></dt><dd>
								TLS certificates to secure the connection to the database.
							</dd></dl></div></li><li class="listitem"><p class="simpara">
					You have a GitHub App enabling access to the GitHub API for repository discovery, with the following details. See <a class="xref" href="#preparing-your-external-services" title="3. Preparing your external services">Section 3, “Preparing your external services”</a>.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">GITHUB_INTEGRATION_APP_ID</span></dt><dd>
								Your GitHub integration App ID.
							</dd><dt><span class="term">GITHUB_INTEGRATION_CLIENT_ID</span></dt><dd>
								Your GitHub integration App client ID.
							</dd><dt><span class="term">GITHUB_INTEGRATION_CLIENT_SECRET</span></dt><dd>
								Your GitHub integration App client secret.
							</dd><dt><span class="term">GITHUB_INTEGRATION_PRIVATE_KEY_FILE</span></dt><dd>
								Your GitHub integration App private key.
							</dd></dl></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					For security, store your secrets as environment variables values in an OpenShift Container Platform secret, rather than in clear text in your configuration files. Collect all your secrets in the <code class="literal">secrets.txt</code> file, with one secret per line in <code class="literal">KEY=value</code> form.
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							Enter your custom logo.
						</p><pre class="screen">BASE64_EMBEDDED_FULL_LOGO="data:image/svg+xml;base64,&lt;base64_full_logo_data&gt;"
BASE64_EMBEDDED_ICON_LOGO="data:image/svg+xml;base64,&lt;base64_icon_logo_data&gt;"</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">BASE64_EMBEDDED_FULL_LOGO</code></span></dt><dd><p class="simpara">
										Enter your logo for the expanded (pinned) sidebar as a base64 encoded SVG image.
									</p><p class="simpara">
										To encode your logo in base64, run:
									</p><pre class="screen">$ base64 -i logo.svg</pre></dd><dt><span class="term"><code class="literal">BASE64_EMBEDDED_ICON_LOGO</code></span></dt><dd>
										Enter your logo for the collapsed (unpinned) sidebar as a base64 encoded SVG image.
									</dd></dl></div></li><li class="listitem"><p class="simpara">
							Enter the connection string to your Redis server that caches plugin assets.
						</p><pre class="screen">REDIS_CONNECTION=rediss://user:pass@cache.example.com:6379</pre></li><li class="listitem"><p class="simpara">
							Enter your GitHub integration credentials:
						</p><pre class="screen">GITHUB_INTEGRATION_APP_ID=<span class="emphasis"><em>_&lt;Enter_the_saved_App_ID&gt;</em></span>
GITHUB_INTEGRATION_CLIENT_ID=<span class="emphasis"><em>&lt;Enter_the_saved_Client_ID&gt;</em></span>
GITHUB_INTEGRATION_CLIENT_SECRET=<span class="emphasis"><em>&lt;Enter_the_saved_Client_Secret&gt;</em></span>
GITHUB_INTEGRATION_HOST_DOMAIN=github.com
GITHUB_INTEGRATION_ORGANIZATION=<span class="emphasis"><em>&lt;Enter_your_github_organization_name&gt;</em></span>
GITHUB_INTEGRATION_PRIVATE_KEY_FILE= <span class="emphasis"><em>&lt;Enter_the_saved_Private_key&gt;</em></span></pre></li><li class="listitem"><p class="simpara">
							Enter your PosgreSQL database secrets:
						</p><pre class="screen">POSTGRES_PASSWORD: &lt;postgres-password&gt;
POSTGRES_PORT: "&lt;postgres-port&gt;"
POSTGRES_USER: &lt;postgres-username&gt;
POSTGRES_HOST: &lt;postgres-host&gt;
PGSSLMODE: verify-full
NODE_EXTRA_CA_CERTS: /opt/app-root/src/postgres-crt.pem</pre></li><li class="listitem">
							<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/authentication_in_red_hat_developer_hub/index">Enter your authentication secrets</a>.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					Author your custom <code class="literal">app-config.yaml</code> file. This is the main Developer Hub configuration file. You need a custom <code class="literal">app-config.yaml</code> file to avoid the Developer Hub installer to revert user edits during upgrades. When your custom <code class="literal">app-config.yaml</code> file is empty, Developer Hub is using default values.
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							For a production environment, start with the following setup:
						</p><div class="formalpara"><p class="title"><strong><code class="literal">app-config.yaml</code></strong></p><p>
								
<pre class="programlisting language-yaml">app:
  title: <span class="emphasis"><em>&lt;Red Hat Developer Hub&gt;</em></span>
  branding:
    fullLogo: ${BASE64_EMBEDDED_FULL_LOGO}
    fullLogoWidth: 110px
    iconLogo: ${BASE64_EMBEDDED_ICON_LOGO}
backend:
  cache:
    store: redis
    connection: ${REDIS_CONNECTION}
techdocs:
  cache:
    ttl: 3600000
catalog:
  providers:
    <span class="emphasis"><em>&lt;enter_your_provider_configuration&gt;</em></span>
integrations:
    <span class="emphasis"><em>&lt;enter_your_integrations_configuration&gt;</em></span>
permission:
  enabled: true
  rbac:
    admin:
      users:
        - name: user:default/&lt;your_policy_administrator_name&gt;
    pluginsWithPermission:
      - catalog
      - scaffolder
      - permission</pre>
							</p></div><p class="simpara">
							Most fields use environment variables that you defined in secrets in the previous step.
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">app</code></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">title</code></span></dt><dd>
													Enter your Developer Hub instance display name, such as <span class="emphasis"><em>&lt;Red Hat Developer Hub&gt;</em></span>.
												</dd><dt><span class="term"><code class="literal">branding</code></span></dt><dd><p class="simpara">
													Set your custom logo.
												</p><p class="simpara">
													Optionally, customize the width of the branding logo by changing value for the <code class="literal">fullLogoWidth</code> field. The following units are supported: integer, px, em, rem, percentage.
												</p></dd></dl></div></dd><dt><span class="term"><code class="literal">backend</code></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">cache</code></span></dt><dd>
													Enable the plugins assets cache.
												</dd></dl></div></dd><dt><span class="term"><code class="literal">techdocs</code></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">cache</code></span></dt><dd>
													Enable the Techdocs cache.
												</dd></dl></div></dd><dt><span class="term"><code class="literal">catalog</code></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">provider</code></span></dt><dd>
													Enter your catalog provider configuration.
												</dd></dl></div></dd><dt><span class="term"><code class="literal">integrations</code></span></dt><dd>
										Enter your repository discovery configuration.
									</dd></dl></div><div class="variablelist" id="enabling-and-giving-access-to-rbac"><dl class="variablelist"><dt><span class="term"><code class="literal">permissions</code></span></dt><dd>
										Enable Role-based access control. Enter your policy administrator name.
									</dd></dl></div></li><li class="listitem">
							Additionally, <a class="link" href="{authentication-book-url}">provision users and enable authentication with your external identity provider</a>.
						</li></ol></div></li><li class="listitem"><p class="simpara">
					Author your custom <code class="literal">dynamic-plugins.yaml</code> file to enable plugins. By default, Developer Hub enables a minimal plugin set, and disables plugins that require configuration or secrets, such as the GitHub repository discovery plugin and the Role-based access control (RBAC) plugin.
				</p><p class="simpara">
					Enable the GitHub repository discovery and the RBAC features:
				</p><div class="formalpara"><p class="title"><strong><code class="literal">dynamic.plugins.yaml</code></strong></p><p>
						
<pre class="programlisting language-yaml">includes:
  - dynamic-plugins.default.yaml
plugins:
  - package: ./dynamic-plugins/dist/backstage-plugin-catalog-backend-module-github
    disabled: false
  - package: ./dynamic-plugins/dist/backstage-community-plugin-rbac
    disabled: false</pre>
					</p></div></li><li class="listitem"><p class="simpara">
					Provision your custom configuration files to your {platform} cluster.
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							Create the <span class="emphasis"><em>&lt;my-rhdh-project&gt;</em></span> {namespace} aimed at containing your Developer Hub instance.
						</p><pre class="programlisting language-terminal">$ oc create namespace my-rhdh-project</pre></li><li class="listitem"><p class="simpara">
							Provision your <code class="literal">app-config.yaml</code> and <code class="literal">dynamic-plugins.yaml</code> files respectively to the <code class="literal">my-rhdh-app-config</code>, and <code class="literal">dynamic-plugins-rhdh</code> config maps in the <span class="emphasis"><em>&lt;my-rhdh-project&gt;</em></span> project.
						</p><pre class="programlisting language-terminal">$ oc create configmap my-rhdh-app-config --from-file=app-config.yaml --namespace=my-rhdh-project
$ oc create configmap dynamic-plugins-rhdh --from-file=dynamic-plugins.yaml --namespace=my-rhdh-project</pre><p class="simpara">
							Alternatively, <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/nodes/index#nnodes-pods-configmap-create-from-console_configmaps">create the config maps by using the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							Provision your <code class="literal">secrets.txt</code> file to the <code class="literal">my-rhdh-secrets</code> secret in the <span class="emphasis"><em>&lt;my-rhdh-project&gt;</em></span> project.
						</p><pre class="programlisting language-terminal">$ oc create secret generic my-rhdh-secrets --from-file=secrets.txt --namespace=my-rhdh-project</pre><p class="simpara">
							Alternatively, <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/nodes/index#nodes-pods-secrets-creating-web-console-secrets_nodes-pods-secrets">create the secret by using the web console</a>.
						</p></li><li class="listitem"><p class="simpara">
							Provision your PosgreSQL TLS certificates to the <code class="literal">my-rhdh-database-secrets</code> secret in the <span class="emphasis"><em>&lt;my-rhdh-project&gt;</em></span> project.
						</p><pre class="programlisting language-terminal">$ oc create secret generic my-rhdh-secrets --from-file=postgres-ca.pem --from-file=postgres-crt.pem --from-file=postgres-key.key --namespace=my-rhdh-project</pre></li></ol></div></li></ol></div></section><section class="section" id="enabling-authentication-with-mandatory-steps-only"><div class="titlepage"><div><div><h2 class="title">5. Enabling authentication in Red Hat Developer Hub (with mandatory steps only)</h2></div></div></div><section class="section" id="understanding-authentication-and-user-provisioning"><div class="titlepage"><div><div><h3 class="title">5.1. Understanding authentication and user provisioning</h3></div></div></div><p>
				Learn about the authentication process from creating user and group entities in the software catalog to user sign-in, and how authentication and catalog plugins enable each step. Understanding this process is essential for successfully configuring your Developer Hub instance, securing access through authorization, and enabling features that rely on synchronized user and group data.
			</p><p>
				To fully enable catalog features, provision user and group data from the Identity Provider to the Developer Hub software catalog. Catalog provider plugins handle this task asynchronously. These plugins query the Identity Provider (IdP) for relevant user and group information, and create or update corresponding entities in the Developer Hub catalog. Scheduled provisioning ensures that the catalog accurately reflects the users and groups in your organization.
			</p><p>
				When a user attempts to access Developer Hub, Developer Hub redirects them to a configured authentication provider, such as Red Hat Build of Keycloak (RHBK), GitHub, or Microsoft Azure. This external IdP is responsible for authenticating the user.
			</p><p>
				On successful authentication, the Developer Hub authentication plugin, configured in your <code class="literal">app-config.yaml</code> file, processes the response from the IdP, resolves the identity in the Developer Hub software catalog, and establishes a user session within Developer Hub.
			</p><p>
				Configuring authentication and user provisioning is critical for several reasons.
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Securing your Developer Hub instance by ensuring only authenticated users can gain access.
					</li><li class="listitem">
						Enabling authorization by allowing you to define access controls based on user and group memberships synchronized from your IdP.
					</li><li class="listitem"><p class="simpara">
						Provisioning user and group data to the catalog is necessary for various catalog features that rely on understanding entity ownership and relationships between users, groups, and software components.
					</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
							Without this provisioning step, features such as displaying who owns a catalog entity might not function correctly.
						</p></div></div></li></ul></div><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
				To explore Developer Hub features in a non-production environment, you can:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						To use Developer Hub without external IdP, enable the guest user to skip configuring authentication and authorization, log in as the guest user, and access all Developer Hub features.
					</li><li class="listitem">
						To use Developer Hub without authorization policies and features relying on the software catalog, you can enable the <code class="literal">dangerouslyAllowSignInWithoutUserInCatalog</code> resolver option. This setting bypasses the check requiring a user to be in the catalog but still enforces authentication.
					</li></ul></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					Developer Hub uses a one-way synchronization model, where user and group data flow from your Identity Provider to the Developer Hub software catalog. As a result, deleting users or groups manually through the Developer Hub Web UI or REST API might be ineffective or cause inconsistencies, since Developer Hub will create those entities again during the next import.
				</p></div></div></section><section class="section" id="authenticating-with-the-guest-user_setting-up-and-configuring-your-first-rhdh-instance"><div class="titlepage"><div><div><h3 class="title">5.2. Authenticating with the Guest user</h3></div></div></div><p>
				For trial or non-production environments, you can enable guest access to skip configuring authentication and authorization and explore Developer Hub features.
			</p><section class="section" id="authenticating-with-the-guest-user-on-an-operator-based-installation_setting-up-and-configuring-your-first-rhdh-instance"><div class="titlepage"><div><div><h4 class="title">5.2.1. Authenticating with the Guest user on an Operator-based installation</h4></div></div></div><p>
					For trial or non-production environments installed by using the Red Hat Developer Hub Operator, you can enable guest access to skip configuring authentication and authorization and explore Developer Hub features.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">added a custom Developer Hub application configuration</a>, and have enough permissions to change it.
						</li><li class="listitem">
							You <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index#using-the-operator-to-run-rhdh-with-your-custom-configurationn">use the Red Hat Developer Hub Operator to run Developer Hub</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Add the following content to the <code class="literal">app-config.yaml</code> file:
						</p><pre class="programlisting language-yaml">auth:
  environment: development
  providers:
    guest:
      dangerouslyAllowOutsideDevelopment: true</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Go to the Developer Hub login page.
						</li><li class="listitem">
							To log in with the Guest user account, click <span class="strong strong"><strong>Enter</strong></span> in the <span class="strong strong"><strong>Guest</strong></span> tile.
						</li><li class="listitem">
							In the Developer Hub <span class="strong strong"><strong>Settings</strong></span> page, your profile name is <span class="strong strong"><strong>Guest</strong></span>.
						</li><li class="listitem">
							You can use Developer Hub features.
						</li></ol></div></section><section class="section" id="authenticating-with-the-guest-user-on-a-helm-based-installation_setting-up-and-configuring-your-first-rhdh-instance"><div class="titlepage"><div><div><h4 class="title">5.2.2. Authenticating with the Guest user on a Helm-based installation</h4></div></div></div><p>
					For trial or non-production environments installed by using the Red Hat Developer Hub Helm chart, you can enable guest access to skip configuring authentication and authorization and explore Developer Hub features.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">added a custom Developer Hub application configuration</a>, and have enough permissions to change it.
						</li><li class="listitem">
							You <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index#using-the-helm-chart-to-run-rhdh-with-your-custom-configuration">use the Red Hat Developer Hub Helm chart to run Developer Hub</a>.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Add following content to your Red Hat Developer Hub Helm Chart:
						</p><pre class="programlisting language-yaml">upstream:
  backstage:
    appConfig:
      app:
        baseUrl: 'https://{{- include "janus-idp.hostname" . }}'
      auth:
        environment: development
        providers:
          guest:
            dangerouslyAllowOutsideDevelopment: true</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Go to the Developer Hub login page.
						</li><li class="listitem">
							To log in with the Guest user account, click <span class="strong strong"><strong>Enter</strong></span> in the <span class="strong strong"><strong>Guest</strong></span> tile.
						</li><li class="listitem">
							In the Developer Hub <span class="strong strong"><strong>Settings</strong></span> page, your profile name is <span class="strong strong"><strong>Guest</strong></span>.
						</li><li class="listitem">
							You can use Developer Hub features.
						</li></ol></div></section></section><section class="section" id="enabling-user-authentication-with-rhbk-with-mandatory-steps"><div class="titlepage"><div><div><h3 class="title">5.3. Enabling user authentication with Red Hat Build of Keycloak (RHBK)</h3></div></div></div><p>
				Authenticate users with Red Hat Build of Keycloak (RHBK), by provisioning the users and groups from RHBK to the Developer Hub software catalog, and configuring the OpenID Connect (OIDC) authentication provider in Red Hat Developer Hub.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">added a custom Developer Hub application configuration</a>, and have enough permissions to change it.
					</li><li class="listitem"><p class="simpara">
						You have enough permissions in RHSSO to create and manage a realm and a client.
					</p><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						Alternatively, ask your RHBK administrator to prepare in RHBK the required realm and client.
					</p></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Register your Developer Hub app in RHBK:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Use an existing realm, or <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_build_of_keycloak/26.0/html/getting_started_guide/getting-started-zip-#getting-started-zip-create-a-realm">create a realm</a>, with a distinctive <span class="strong strong"><strong>Name</strong></span> such as <span class="emphasis"><em>&lt;my_realm&gt;</em></span>. Save the value for the next step:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>RHBK realm base URL</strong></span>, such as: <span class="emphasis"><em>&lt;your_rhbk_URL&gt;</em></span>/realms/<span class="emphasis"><em>&lt;your_realm&gt;</em></span>.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								To register your Developer Hub in RHBK, in the created realm, <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_build_of_keycloak/26.0/html-single/getting_started_guide/index#getting-started-zip-secure-the-first-application">secure the first application</a>, with:
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem">
										<span class="strong strong"><strong>Client ID</strong></span>: A distinctive client ID, such as <span class="emphasis"><em>&lt;RHDH&gt;</em></span>.
									</li><li class="listitem">
										<span class="strong strong"><strong>Valid redirect URIs</strong></span>: Set to the OIDC handler URL: <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span>/api/auth/oidc/handler/frame</code>.
									</li><li class="listitem">
										Go to the <span class="strong strong"><strong>Credentials</strong></span> tab and copy the <span class="strong strong"><strong>Client secret</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Save the values for the next step:
									</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
												<span class="strong strong"><strong>Client ID</strong></span>
											</li><li class="listitem">
												<span class="strong strong"><strong>Client Secret</strong></span>
											</li></ul></div></li></ol></div></li><li class="listitem">
								To prepare for the verification steps, in the same realm, get the credential information for an existing user or <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_build_of_keycloak/26.0/html-single/getting_started_guide/index#getting-started-zip-create-a-user">create a user</a>. Save the user credential information for the verification steps.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Add your RHSSO credentials to Developer Hub, by adding the following key/value pairs to <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_dynamic_plugins/index#provisioning-your-custom-configuration">your Developer Hub secrets</a>. You can use these secrets in the Developer Hub configuration files by using their environment variable name.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">KEYCLOAK_CLIENT_ID</code></span></dt><dd>
									Enter the saved <span class="strong strong"><strong>Client ID</strong></span>.
								</dd><dt><span class="term"><code class="literal">KEYCLOAK_CLIENT_SECRET</code></span></dt><dd>
									Enter the saved <span class="strong strong"><strong>Client Secret</strong></span>.
								</dd><dt><span class="term"><code class="literal">KEYCLOAK_BASE_URL</code></span></dt><dd>
									Enter the saved <span class="strong strong"><strong>RHBK realm base URL</strong></span>.
								</dd></dl></div></li><li class="listitem"><p class="simpara">
						Enable the Keycloak catalog provider plugin in your <code class="literal">dynamic-plugins.yaml</code> file.
					</p><p class="simpara">
						The plugin is named after RHBK upstream project.
					</p><p class="simpara">
						This plugin imports RHBK users and groups to the Developer Hub software catalog.
					</p><pre class="programlisting language-yaml">plugins:
  - package: './dynamic-plugins/dist/backstage-community-plugin-catalog-backend-module-keycloak-dynamic'
    disabled: false</pre></li><li class="listitem"><p class="simpara">
						Enable provisioning RHBK users and groups to the Developer Hub software catalog, by adding the <code class="literal">catalog.providers.keycloakOrg</code> section to your <code class="literal">app-config.yaml</code> file:
					</p><pre class="programlisting language-yaml" id="keycloakOrgProviderId">catalog:
  providers:
    keycloakOrg:
      default:
        baseUrl: ${KEYCLOAK_BASE_URL}
        clientId: ${KEYCLOAK_CLIENT_ID}
        clientSecret: ${KEYCLOAK_CLIENT_SECRET}
        realm: master
        loginRealm: master</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">baseUrl</code></span></dt><dd>
									Enter your RHBK server URL, defined earlier.
								</dd><dt><span class="term"><code class="literal">clientId</code></span></dt><dd>
									Enter your Developer Hub application client ID in RHBK, defined earlier.
								</dd><dt><span class="term"><code class="literal">clientSecret</code></span></dt><dd>
									Enter your Developer Hub application client secret in RHBK, defined earlier.
								</dd><dt><span class="term"><code class="literal">realm</code></span></dt><dd>
									Enter the realm name to provision users, such as <code class="literal">master</code>.
								</dd><dt><span class="term"><code class="literal">loginRealm</code></span></dt><dd><p class="simpara">
									Enter the realm name to authenticate users, such as <code class="literal">master</code>.
								</p><p class="simpara">
									Optional: To configure optional fields, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">Configuring Red Hat Developer Hub</a>.
								</p></dd></dl></div></li><li class="listitem"><p class="simpara">
					</p><p class="simpara">
						Enable the RHBK authentication provider, by adding the OIDC provider section in your <code class="literal">app-config.yaml</code> file:
					</p><pre class="programlisting language-yaml">auth:
  environment: production
  providers:
    oidc:
      production:
        metadataUrl: ${KEYCLOAK_BASE_URL}
        clientId: ${KEYCLOAK_CLIENT_ID}
        clientSecret: ${KEYCLOAK_CLIENT_SECRET}
        prompt: auto
signInPage: oidc</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">environment: production</code></span></dt><dd>
									Mark the environment as <code class="literal">production</code> to hide the Guest login in the Developer Hub home page.
								</dd><dt><span class="term"><code class="literal">metadataUrl</code>, <code class="literal">clientId</code>, <code class="literal">clientSecret</code></span></dt><dd>
									Configure the OIDC provider with your secrets.
								</dd><dt><span class="term"><code class="literal">prompt</code></span></dt><dd><p class="simpara">
									Enter <code class="literal">auto</code> to allow the identity provider to automatically determine whether to prompt for credentials or bypass the login redirect if an active RHSSO session exists.
								</p><p class="simpara">
									The identity provider defaults to <code class="literal">none</code>, which assumes that you are already logged in. Sign-in requests without an active session are rejected.
								</p></dd><dt><span class="term"><code class="literal">signInPage</code></span></dt><dd><p class="simpara">
									Enter <code class="literal">oidc</code> to enable the OIDC provider as default sign-in provider.
								</p><p class="simpara">
									Optional: To configure optional fields, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">Configuring Red Hat Developer Hub</a>.
								</p></dd></dl></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To verify user and group provisioning, check the console logs.
					</p><p class="simpara">
						Successful synchronization example:
					</p><pre class="screen">2025-06-27T16:02:34.647Z catalog info Read 5 Keycloak users and 3 Keycloak groups in 0.4 seconds. Committing... class="KeycloakOrgEntityProvider" taskId="KeycloakOrgEntityProvider:default:refresh" taskInstanceId="db55c34b-46b3-402b-b12f-2fbc48498e82" trace_id="606f80a9ce00d1c86800718c4522f7c6" span_id="7ebc2a254a546e90" trace_flags="01"

2025-06-27T16:02:34.650Z catalog info Committed 5 Keycloak users and 3 Keycloak groups in 0.0 seconds. class="KeycloakOrgEntityProvider" taskId="KeycloakOrgEntityProvider:default:refresh" taskInstanceId="db55c34b-46b3-402b-b12f-2fbc48498e82" trace_id="606f80a9ce00d1c86800718c4522f7c6" span_id="7ebc2a254a546e90" trace_flags="01"</pre></li><li class="listitem"><p class="simpara">
						To verify RHBK user authentication:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Go to the Developer Hub login page.
							</li><li class="listitem">
								Your Developer Hub sign-in page displays <span class="strong strong"><strong>Sign in using OIDC</strong></span> and the Guest user sign-in is disabled.
							</li><li class="listitem">
								Log in with OIDC by using the saved <span class="strong strong"><strong>Username</strong></span> and <span class="strong strong"><strong>Password</strong></span> values.
							</li></ol></div></li></ol></div></section><section class="section" id="enabling-user-authentication-with-github-with-mandatory-steps"><div class="titlepage"><div><div><h3 class="title">5.4. Enabling user authentication with GitHub</h3></div></div></div><p>
				Authenticate users with GitHub by provisioning the users and groups from GitHub to the Developer Hub software catalog, and configuring the GitHub authentication provider in Red Hat Developer Hub.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have enough permissions in GitHub to create and manage a <a class="link" href="https://docs.github.com/en/apps/overview">GitHub App</a>.
					</p><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						Alternatively, ask your GitHub administrator to prepare the required GitHub App.
					</p></div></div></li><li class="listitem">
						You have <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">added a custom Developer Hub application configuration</a>, and have enough permissions to change it.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Allow Developer Hub to authenticate with GitHub, by creating a GitHub App.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Use a GitHub App instead of an OAuth app to use fine-grained permissions, use short-lived tokens, scale with the number of installations by avoiding rate limits, and have a more transparent integration by avoiding to request user input.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								<a class="link" href="https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app">Register a GitHub App</a> with the following configuration:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">GitHub App name</span></dt><dd>
											Enter a unique name identifying your GitHub App, such as <code class="literal">authenticating-with-rhdh-<span class="emphasis"><em>&lt;GUID&gt;</em></span></code>.
										</dd><dt><span class="term">Homepage URL</span></dt><dd>
											Enter your Developer Hub URL: <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span></code>.
										</dd><dt><span class="term">Authorization callback URL</span></dt><dd>
											Enter your Developer Hub authentication backend URL: <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span>/api/auth/github/handler/frame</code>.
										</dd><dt><span class="term">Webhook</span></dt><dd>
											Clear "Active".
										</dd><dt><span class="term">Organization permissions</span></dt><dd>
											Enable <code class="literal">Read-only</code> access to <span class="strong strong"><strong>Members</strong></span>.
										</dd><dt><span class="term">Where can this GitHub App be installed?</span></dt><dd>
											Select <code class="literal">Only on this account</code>.
										</dd></dl></div></li><li class="listitem">
								In the <span class="strong strong"><strong>General</strong></span> → <span class="strong strong"><strong>Clients secrets</strong></span> section, click <span class="strong strong"><strong>Generate a new client secret</strong></span>.
							</li><li class="listitem">
								In the <span class="strong strong"><strong>Install App</strong></span> tab, choose an account to install your GitHub App on.
							</li><li class="listitem"><p class="simpara">
								Save the following values for the next step:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>Client ID</strong></span>
									</li><li class="listitem">
										<span class="strong strong"><strong>Client secret</strong></span>
									</li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Add your GitHub credentials to Developer Hub by adding the following key/value pairs to <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index#provisioning-your-custom-configuration">your Developer Hub secrets</a>. You can use these secrets in the Developer Hub configuration files by using their environment variable name.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">GITHUB_CLIENT_ID</code></span></dt><dd>
									Enter the saved <span class="strong strong"><strong>Client ID</strong></span>.
								</dd><dt><span class="term"><code class="literal">GITHUB_CLIENT_SECRET</code></span></dt><dd>
									Enter the saved <span class="strong strong"><strong>Client Secret</strong></span>.
								</dd><dt><span class="term"><code class="literal">GITHUB_URL</code></span></dt><dd>
									Enter the GitHub host domain: <code class="literal">github.com</code>.
								</dd><dt><span class="term"><code class="literal">GITHUB_ORG</code></span></dt><dd>
									Enter your GitHub organization name, such as <code class="literal"><span class="emphasis"><em>&lt;your_github_organization_name&gt;</em></span></code>.
								</dd></dl></div></li><li class="listitem"><p class="simpara">
						Enable the GitHub catalog provider plugin in your <code class="literal">dynamic-plugins.yaml</code> file to import GitHub users and groups to the Developer Hub software catalog.
					</p><pre class="programlisting language-yaml">plugins:
  - package: './dynamic-plugins/dist/backstage-plugin-catalog-backend-module-github-org'
    disabled: false</pre></li><li class="listitem"><p class="simpara">
						Enable provisioning GitHub users and groups to the Developer Hub software catalog by adding the GitHub catalog provider section to your <code class="literal">app-config.yaml</code> file:
					</p><pre class="programlisting language-yaml" id="githubProviderId">catalog:
  providers:
    githubOrg:
      id: githuborg
      githubUrl: "${GITHUB_URL}"
      orgs: [ "${GITHUB_ORG}" ]
      schedule:
        frequency:
          minutes: 30
        initialDelay:
          seconds: 15
        timeout:
          minutes: 15</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">id</code></span></dt><dd>
									Enter a stable identifier for this provider, such as <code class="literal">githuborg</code>.
								</dd></dl></div></li></ol></div><div class="informalexample"><p>
				Entities from this provider are associated with this identifier. Therefore, do not to change the identifier over time since that might lead to orphaned entities or conflicts.
			</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">githubUrl</code></span></dt><dd>
							Enter the configured secret variable name: <code class="literal">${GITHUB_URL}</code>.
						</dd><dt><span class="term"><code class="literal">orgs</code></span></dt><dd>
							Enter the configured secret variable name: <code class="literal">${GITHUB_ORG}</code>.
						</dd><dt><span class="term"><code class="literal">schedule.frequency</code></span></dt><dd>
							Enter your schedule frequency, in the cron, ISO duration, or "human duration" format.
						</dd><dt><span class="term"><code class="literal">schedule.timeout</code></span></dt><dd>
							Enter your schedule timeout, in the ISO duration or "human duration" format.
						</dd><dt><span class="term"><code class="literal">schedule.initialDelay</code></span></dt><dd><p class="simpara">
							Enter your schedule initial delay, in the ISO duration or "human duration" format.
						</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									Enable the GitHub authentication provider, by adding the GitHub authentication provider section to your <code class="literal">app-config.yaml</code> file:
								</p><pre class="programlisting language-yaml">auth:
  environment: production
  providers:
    github:
      production:
        clientId: ${GITHUB_CLIENT_ID}
        clientSecret: ${GITHUB_CLIENT_SECRET}
signInPage: github</pre></li></ol></div></dd><dt><span class="term"><code class="literal">environment</code></span></dt><dd>
							Enter <code class="literal">production</code> to disable the Guest login option in the Developer Hub login page.
						</dd><dt><span class="term"><code class="literal">clientId</code></span></dt><dd>
							Enter the configured secret variable name: <code class="literal">${GITHUB_CLIENT_ID}</code>.
						</dd><dt><span class="term"><code class="literal">clientSecret</code></span></dt><dd>
							Enter the configured secret variable name: <code class="literal">${GITHUB_CLIENT_SECRET}</code>.
						</dd><dt><span class="term"><code class="literal">signInPage</code></span></dt><dd><p class="simpara">
							Enter <code class="literal">github</code> to enable the GitHub provider as your Developer Hub sign-in provider.
						</p><p class="simpara">
							Optional: To configure optional fields, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">Configuring Red Hat Developer Hub</a>.
						</p></dd></dl></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Verify user and group provisioning by checking the console logs.
					</p><p class="simpara">
						Successful synchronization example:
					</p><pre class="programlisting language-json">{"class":"GithubMultiOrgEntityProvider","level":"info","message":"Reading GitHub users and teams for org: rhdh-dast","plugin":"catalog","service":"backstage","target":"https://github.com","taskId":"GithubMultiOrgEntityProvider:githuborg:refresh","taskInstanceId":"801b3c6c-167f-473b-b43e-e0b4b780c384","timestamp":"2024-09-09 23:55:58"}
{"class":"GithubMultiOrgEntityProvider","level":"info","message":"Read 7 GitHub users and 2 GitHub groups in 0.4 seconds. Committing...","plugin":"catalog","service":"backstage","target":"https://github.com","taskId":"GithubMultiOrgEntityProvider:githuborg:refresh","taskInstanceId":"801b3c6c-167f-473b-b43e-e0b4b780c384","timestamp":"2024-09-09 23:55:59"}</pre></li><li class="listitem"><p class="simpara">
						To verify GitHub authentication:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Go to the Developer Hub login page.
							</li><li class="listitem">
								Your Developer Hub sign-in page displays <span class="strong strong"><strong>Sign in using GitHub</strong></span> and the Guest user sign-in is disabled.
							</li><li class="listitem">
								Log in with a GitHub account.
							</li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/integrating_red_hat_developer_hub_with_github/index">Integrating Red Hat Developer Hub with GitHub</a>
					</li></ul></div></section><section class="section" id="enabling-user-authentication-with-microsoft-azure-with-mandatory-steps"><div class="titlepage"><div><div><h3 class="title">5.5. Enabling user authentication with Microsoft Azure</h3></div></div></div><p>
				Authenticate users with Microsoft Azure by provisioning the users and groups from Azure to the Developer Hub software catalog, and configuring the Azure authentication provider in Red Hat Developer Hub.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						You have the permission to register an application in Azure.
					</p><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
						Alternatively, ask your Azure administrator to prepare the required Azure application.
					</p></div></div></li><li class="listitem">
						You <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">added a custom Developer Hub application configuration</a>, and have enough permissions to change it.
					</li><li class="listitem"><p class="simpara">
						Your Developer Hub backend can access the following hosts:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">login.microsoftonline.com</code></span></dt><dd>
									The Microsoft Azure authorization server, which enables the authentication flow.
								</dd><dt><span class="term"><code class="literal">graph.microsoft.com</code></span></dt><dd>
									The server for retrieving organization data, including user and group data, to import into the Developer Hub catalog.
								</dd></dl></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Register your Developer Hub app in Azure, <a class="link" href="https://learn.microsoft.com/en-us/entra/identity-platform/scenario-web-app-sign-user-app-registration?tabs=aspnetcore#register-an-app-by-using-the-azure-portal">by using the Azure portal</a>.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Sign in to the <a class="link" href="https://entra.microsoft.com/">Microsoft Entra admin center</a>.
							</li><li class="listitem">
								Optional: If you have access to multiple tenants, use the <span class="strong strong"><strong>Settings</strong></span> icon in the top menu to switch to the tenant in which you want to register the application from the <span class="strong strong"><strong>Directories + subscriptions</strong></span> menu.
							</li><li class="listitem"><p class="simpara">
								Browse to <span class="strong strong"><strong>Applications &gt; App registrations</strong></span>, and create a <span class="strong strong"><strong>New registration</strong></span> with the configuration:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Name</span></dt><dd>
											Enter a name to identify your application in Azure, such as <span class="emphasis"><em>&lt;Authenticating with Developer Hub&gt;</em></span>.
										</dd><dt><span class="term">Supported account types</span></dt><dd>
											Select <span class="strong strong"><strong>Accounts in this organizational directory only</strong></span>.
										</dd><dt><span class="term">Redirect URI</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Select a platform</span></dt><dd>
														Select <span class="strong strong"><strong>Web</strong></span>.
													</dd><dt><span class="term">URL</span></dt><dd>
														Enter the backend authentication URI set in Developer Hub: <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span>/api/auth/microsoft/handler/frame</code>
													</dd></dl></div></dd></dl></div></li><li class="listitem"><p class="simpara">
								On the <span class="strong strong"><strong>Applications &gt; App registrations &gt; <span class="emphasis"><em>&lt;Authenticating with Developer Hub&gt;</em></span> &gt; Manage &gt; API permissions</strong></span> page, <span class="strong strong"><strong>Add a Permission</strong></span>, <span class="strong strong"><strong>Microsoft Graph</strong></span>, select the following permissions:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Application Permissions</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">GroupMember.Read.All</code>, </span><span class="term"><code class="literal">User.Read.All</code></span></dt><dd><p class="simpara">
														Enter permissions that enable provisioning user and groups to the Developer Hub software catalog.
													</p><p class="simpara">
														Optional: <span class="strong strong"><strong>Grant admin consent</strong></span> for these permissions. Even if your company does not require admin consent, consider doing so as it means users do not need to individually consent the first time they access Developer Hub.
													</p></dd></dl></div></dd><dt><span class="term">Delegated Permissions</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">User.Read</code>, </span><span class="term"><code class="literal">email</code>, </span><span class="term"><code class="literal">offline_access</code>, </span><span class="term"><code class="literal">openid</code>, </span><span class="term"><code class="literal">profile</code></span></dt><dd><p class="simpara">
														Enter permissions that enable authenticating users.
													</p><p class="simpara">
														Optional: Enter optional custom scopes for the Microsoft Graph API that you define both here and in your <code class="literal">app-config.yaml</code> Developer Hub configuration file.
													</p></dd></dl></div></dd></dl></div></li><li class="listitem">
								On the <span class="strong strong"><strong>Applications &gt; App registrations &gt; <span class="emphasis"><em>&lt;Authenticating with Developer Hub&gt;</em></span> &gt; Manage &gt; Certificates &amp; secrets</strong></span> page, in the <span class="strong strong"><strong>Client secrets</strong></span> tab, create a <span class="strong strong"><strong>New client secret</strong></span>.
							</li><li class="listitem"><p class="simpara">
								Save the following values for the next step:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<span class="strong strong"><strong>Directory (tenant) ID</strong></span>
									</li><li class="listitem">
										<span class="strong strong"><strong>Application (client) ID</strong></span>
									</li><li class="listitem">
										<span class="strong strong"><strong>Application (client) Secret ID</strong></span>
									</li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Add your Azure credentials to Developer Hub, by adding the following key/value pairs to <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index#provisioning-your-custom-configuration">your Developer Hub secrets</a>:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">AUTHENTICATION_AZURE_TENANT_ID</code></span></dt><dd>
									Enter your saved <span class="strong strong"><strong>Directory (tenant) ID</strong></span>.
								</dd><dt><span class="term"><code class="literal">AUTHENTICATION_AZURE_CLIENT_ID</code></span></dt><dd>
									Enter your saved <span class="strong strong"><strong>Application (client) ID</strong></span>.
								</dd><dt><span class="term"><code class="literal">AUTHENTICATION_AZURE_CLIENT_SECRET</code></span></dt><dd>
									Enter your saved <span class="strong strong"><strong>Application (client) secret</strong></span>.
								</dd></dl></div></li><li class="listitem"><p class="simpara">
						Enable the Microsoft Graph catalog provider plugin in your <code class="literal">dynamic-plugins.yaml</code> file. This plugin imports Azure users and groups to the Developer Hub software catalog.
					</p><pre class="programlisting language-yaml">plugins:
  - package: './dynamic-plugins/dist/backstage-plugin-catalog-backend-module-msgraph-dynamic'
    disabled: false</pre></li><li class="listitem"><p class="simpara">
						Enable provisioning Azure users and groups to the Developer Hub software catalog, by adding the Microsoft Graph catalog provider section in your <code class="literal">app-config.yaml</code> file:
					</p><pre class="programlisting language-yaml" id="microsoftGraphOrgProviderId">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        target: https://graph.microsoft.com/v1.0
        tenantId: ${AUTHENTICATION_AZURE_TENANT_ID}
        clientId: ${AUTHENTICATION_AZURE_CLIENT_ID}
        clientSecret: ${AUTHENTICATION_AZURE_CLIENT_SECRET}
        schedule:
          frequency:
            hours: 1
          timeout:
            minutes: 50
          initialDelay:
            minutes: 50</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">target</code></span></dt><dd>
									Enter <code class="literal">https://graph.microsoft.com/v1.0</code> to define the MSGraph API endpoint the provider is connecting to. You might change this parameter to use a different version, such as the <a class="link" href="https://learn.microsoft.com/en-us/graph/api/overview?view=graph-rest-beta#call-the-beta-endpoint">beta endpoint</a>.
								</dd><dt><span class="term"><code class="literal">tenandId</code></span></dt><dd>
									Enter the configured secret variable name: <code class="literal">${AUTHENTICATION_AZURE_TENANT_ID}</code>.
								</dd><dt><span class="term"><code class="literal">clientId</code></span></dt><dd>
									Enter the configured secret variable name: <code class="literal">${AUTHENTICATION_AZURE_CLIENT_ID}</code>.
								</dd><dt><span class="term"><code class="literal">clientSecret</code></span></dt><dd>
									Enter the configured secret variable name: <code class="literal">${AUTHENTICATION_AZURE_CLIENT_SECRET}</code>.
								</dd><dt><span class="term"><code class="literal">schedule</code></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">frequency</code></span></dt><dd>
												Enter the schedule frequency in the cron, ISO duration, or human duration format. In a large organization, user provisioning might take a long time, therefore avoid using a low value.
											</dd><dt><span class="term"><code class="literal">timeout</code></span></dt><dd>
												Enter the schedule timeout in the ISO duration or human duration format. In a large organization, user provisioning might take a long time, therefore avoid using a low value.
											</dd><dt><span class="term"><code class="literal">initialDelay</code></span></dt><dd><p class="simpara">
												Enter the schedule initial delay in the ISO duration or human duration format.
											</p><p class="simpara">
												Optional: To configure optional fields, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">Configuring Red Hat Developer Hub</a>.
											</p></dd></dl></div></dd></dl></div></li></ol></div><p>
				Enable Azure authentication, by adding the Microsoft authentication provider to your <code class="literal">app-config.yaml</code> file content:
			</p><pre class="programlisting language-yaml">auth:
  environment: production
  providers:
    microsoft:
      production:
        clientId: ${AUTHENTICATION_AZURE_CLIENT_ID}
        clientSecret: ${AUTHENTICATION_AZURE_CLIENT_SECRET}
        tenantId: ${AUTHENTICATION_AZURE_TENANT_ID}
signInPage: microsoft</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">environment</code></span></dt><dd>
							Enter <code class="literal">production</code> to disable the <span class="strong strong"><strong>Guest</strong></span> login option in the Developer Hub login page.
						</dd><dt><span class="term"><code class="literal">clientId</code></span></dt><dd>
							Enter the configured secret variable name: <code class="literal">${AUTHENTICATION_AZURE_CLIENT_ID}</code>.
						</dd><dt><span class="term"><code class="literal">clientSecret</code></span></dt><dd>
							Enter the configured secret variable name: <code class="literal">${AUTHENTICATION_AZURE_CLIENT_SECRET}</code>.
						</dd><dt><span class="term"><code class="literal">tenantId</code></span></dt><dd>
							Enter the configured secret variable name: <code class="literal">${AUTHENTICATION_AZURE_TENANT_ID}</code>.
						</dd><dt><span class="term"><code class="literal">signInPage</code></span></dt><dd><p class="simpara">
							Enter <code class="literal">microsoft</code> to set the Azure provider as your Developer Hub sign-in provider.
						</p><p class="simpara">
							Optional: To configure optional fields, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">Configuring Red Hat Developer Hub</a>.
						</p></dd></dl></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						To verify user and group provisioning, check the console logs for <code class="literal">MicrosoftGraphOrgEntityProvider</code> events.
					</p><p class="simpara">
						Successful synchronization example:
					</p><pre class="screen">2025-06-23T13:37:55.804Z catalog info Read 9 msgraph users and 3 msgraph groups in 1.5 seconds. Committing... class="MicrosoftGraphOrgEntityProvider" taskId="MicrosoftGraphOrgEntityProvider:providerId:refresh" taskInstanceId="e104a116-6481-4ceb-9bc4-0f8f9581f959" trace_id="e4c633659cffd6b1529afa55a5bfbad7" span_id="76affd0420e8baa6" trace_flags="01"

2025-06-23T13:37:55.811Z catalog info Committed 9 msgraph users and 3 msgraph groups in 0.0 seconds. class="MicrosoftGraphOrgEntityProvider" taskId="MicrosoftGraphOrgEntityProvider:providerId:refresh" taskInstanceId="e104a116-6481-4ceb-9bc4-0f8f9581f959" trace_id="e4c633659cffd6b1529afa55a5bfbad7" span_id="76affd0420e8baa6" trace_flags="01"</pre></li><li class="listitem"><p class="simpara">
						To verify Azure user authentication:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Go to the Developer Hub login page.
							</li><li class="listitem">
								Your Developer Hub sign-in page displays <span class="strong strong"><strong>Sign in using Microsoft</strong></span> and the Guest user sign-in is disabled.
							</li><li class="listitem">
								Log in with an Azure account.
							</li></ol></div></li></ol></div></section></section><section class="section" id="using-the-operator-to-run-rhdh-with-your-custom-configuration"><div class="titlepage"><div><div><h2 class="title">6. Using the Red Hat Developer Hub Operator to run Developer Hub with your custom configuration</h2></div></div></div><p>
			Use the Developer Hub Operator to run Red Hat Developer Hub with your custom configuration by creating your Backstage custom resource (CR) that can perform the following actions:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					Mount files provisioned in your custom config maps.
				</li><li class="listitem">
					Inject environment variables provisioned in your custom secrets.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					By using the <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.19/html-single/cli_tools/index#cli-about-cli_cli-developer-commands">OpenShift CLI (<code class="literal">oc</code>)</a>, you have access, with developer permissions, to the OpenShift Container Platform cluster aimed at containing your Developer Hub instance.
				</li><li class="listitem">
					<a class="xref" href="#proc-install-operator_setting-up-and-configuring-your-first-rhdh-instance" title="2. Installing the Red Hat Developer Hub Operator">Section 2, “Installing the Red Hat Developer Hub Operator”</a>
				</li><li class="listitem">
					<a class="xref" href="#provisioning-your-custom-configuration" title="4. Provisioning your custom Red Hat Developer Hub configuration">Section 4, “Provisioning your custom Red Hat Developer Hub configuration”</a>
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Author your Backstage CR in a <code class="literal">my-rhdh-custom-resource.yaml</code> file to use your custom config maps and secrets.
				</p><div class="formalpara"><p class="title"><strong><code class="literal">my-rhdh-custom-resource.yaml</code> custom resource example with dynamic plugins and RBAC policies config maps, and external PostgreSQL database secrets.</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: rhdh.redhat.com/v1alpha3
kind: Backstage
metadata:
  name: <span class="emphasis"><em>&lt;my-rhdh-custom-resource&gt;</em></span>
spec:
  application:
    appConfig:
      mountPath: /opt/app-root/src
      configMaps:
         - name: my-rhdh-app-config
         - name: rbac-policies
    dynamicPluginsConfigMapName: dynamic-plugins-rhdh
    extraEnvs:
      envs:
        - name: HTTP_PROXY
          value: 'http://10.10.10.105:3128'
        - name: HTTPS_PROXY
          value: 'http://10.10.10.106:3128'
        - name: NO_PROXY
          value: 'localhost,example.org'
      secrets:
         - name: my-rhdh-secrets
    extraFiles:
      mountPath: /opt/app-root/src
      secrets:
        - name: my-rhdh-database-certificates-secrets
          key: postgres-crt.pem, postgres-ca.pem, postgres-key.key
    replicas: 2
  database:
    enableLocalDb: false</pre>
					</p></div><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">application</code></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">appConfig</code></span></dt><dd>
											Register your <code class="literal">my-rhdh-app-config</code> and <code class="literal">rbac-policies</code> config maps.
										</dd><dt><span class="term"><code class="literal">dynamicPluginsConfigMapName</code></span></dt><dd>
											Register your <code class="literal">dynamic-plugins-rhdh</code> config map.
										</dd><dt><span class="term"><code class="literal">extraEnvs</code></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">env</code></span></dt><dd>
														Enter your proxy environment variables.
													</dd><dt><span class="term"><code class="literal">secrets</code></span></dt><dd>
														Register your <code class="literal">&lt;my_product_secrets&gt;</code> and <code class="literal">my-rhdh-database-secrets</code> secrets.
													</dd></dl></div></dd><dt><span class="term"><code class="literal">extraFiles</code></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">secrets</code></span></dt><dd>
														Register the <code class="literal">postgres-crt.pem</code>, <code class="literal">postgres-ca.pem</code>, and <code class="literal">postgres-key.key</code> files contained in the <code class="literal">my-rhdh-database-certificates-secrets</code> secret.
													</dd></dl></div></dd><dt><span class="term"><code class="literal">replicas</code></span></dt><dd>
											Enable high availability (HA) by increasing the replicas count to a value higher or equal to 2.
										</dd></dl></div></dd><dt><span class="term"><code class="literal">database</code></span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">enableLocalDb</code></span></dt><dd>
											Use your external PostgreSQL database rather than the internal PostgreSQL database.
										</dd></dl></div></dd></dl></div></li><li class="listitem"><p class="simpara">
					Apply your Backstage CR to start or update your Developer Hub instance.
				</p><pre class="programlisting language-terminal">$ oc apply --filename=my-rhdh-custom-resource.yaml --namespace=my-rhdh-project</pre></li></ol></div></section><section class="section" id="proc-customizing-rhdh-theme-mode_setting-up-and-configuring-your-first-rhdh-instance"><div class="titlepage"><div><div><h2 class="title">7. Customizing the theme mode for your Developer Hub instance</h2></div></div></div><p>
			You can choose one of the following theme modes for your Developer Hub instance:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					<span class="strong strong"><strong>Light</strong></span>
				</li><li class="listitem">
					<span class="strong strong"><strong>Dark</strong></span>
				</li><li class="listitem">
					<span class="strong strong"><strong>Auto</strong></span>
				</li></ul></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
				In Developer Hub, theme configurations are used to change the look and feel of different UI components. So, you might notice changes in different UI components, such as buttons, tabs, sidebars, cards, and tables along with some changes in background color and font used on the RHDH pages.
			</p></div></div><p>
			The default theme mode is <span class="strong strong"><strong>Auto</strong></span>, which automatically sets the light or dark theme based on your system preferences.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You are logged in to the Developer Hub web console.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
					From the Developer Hub web console, click <span class="strong strong"><strong>Settings</strong></span>.
				</li><li class="listitem"><p class="simpara">
					From the <span class="strong strong"><strong>Appearance</strong></span> panel, click <span class="strong strong"><strong>Light</strong></span>, <span class="strong strong"><strong>Dark</strong></span>, or <span class="strong strong"><strong>Auto</strong></span> to change the theme mode.
				</p><div class="informalfigure"><div class="mediaobject"><img src="images/user-guide/custom-theme-mode-1.png" alt="custom theme mode 1"/></div></div></li></ol></div></section><section class="section" id="managing-authorizations-by-using-the-web-ui"><div class="titlepage"><div><div><h2 class="title">8. Managing role-based access controls (RBAC) using the Red Hat Developer Hub Web UI</h2></div></div></div><p>
			Policy administrators can use the Developer Hub web interface (Web UI) to allocate specific roles and permissions to individual users or groups. Allocating roles ensures that access to resources and functionalities is regulated across the Developer Hub.
		</p><p>
			With the policy administrator role in Developer Hub, you can assign permissions to users and groups. This role allows you to view, create, modify, and delete the roles using Developer Hub Web UI.
		</p><section class="section" id="proc-rbac-ui-create-role_setting-up-and-configuring-your-first-rhdh-instance"><div class="titlepage"><div><div><h3 class="title">8.1. Creating a role in the Red Hat Developer Hub Web UI</h3></div></div></div><p>
				You can create a role in the Red Hat Developer Hub using the Web UI.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You <a class="link" href="#enabling-and-giving-access-to-rbac">have enabled RBAC, have a policy administrator role in Developer Hub, and have added plugins with permission</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Administration</strong></span> at the bottom of the sidebar in the Developer Hub.
					</p><p class="simpara">
						The <span class="strong strong"><strong>RBAC</strong></span> tab appears, displaying all the created roles in the Developer Hub.
					</p></li><li class="listitem">
						(Optional) Click any role to view the role information on the <span class="strong strong"><strong>OVERVIEW</strong></span> page.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>CREATE</strong></span> to create a role.
					</li><li class="listitem">
						Enter the name and description of the role in the given fields and click <span class="strong strong"><strong>NEXT</strong></span>.
					</li><li class="listitem">
						Add users and groups using the search field, and click <span class="strong strong"><strong>NEXT</strong></span>.
					</li><li class="listitem">
						Select <span class="strong strong"><strong>Plugin</strong></span> and <span class="strong strong"><strong>Permission</strong></span> from the drop-downs in the <span class="strong strong"><strong>Add permission policies</strong></span> section.
					</li><li class="listitem">
						Select or clear the <span class="strong strong"><strong>Policy</strong></span> that you want to set in the <span class="strong strong"><strong>Add permission policies</strong></span> section, and click <span class="strong strong"><strong>NEXT</strong></span>.
					</li><li class="listitem">
						Review the added information in the <span class="strong strong"><strong>Review and create</strong></span> section.
					</li><li class="listitem">
						Click <span class="strong strong"><strong>CREATE</strong></span>.
					</li></ol></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					The created role appears in the list available in the <span class="strong strong"><strong>RBAC</strong></span> tab.
				</p></div></section><section class="section" id="proc-rbac-ui-edit-role_setting-up-and-configuring-your-first-rhdh-instance"><div class="titlepage"><div><div><h3 class="title">8.2. Editing a role in the Red Hat Developer Hub Web UI</h3></div></div></div><p>
				You can edit a role in the Red Hat Developer Hub using the Web UI.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The policies generated from a <code class="literal">policy.csv</code> or ConfigMap file cannot be edited or deleted using the Developer Hub Web UI.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You <a class="link" href="#enabling-and-giving-access-to-rbac">have enabled RBAC, have a policy administrator role in Developer Hub, and have added plugins with permission</a>.
					</li><li class="listitem">
						The role that you want to edit is created in the Developer Hub.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Administration</strong></span> at the bottom of the sidebar in the Developer Hub.
					</p><p class="simpara">
						The <span class="strong strong"><strong>RBAC</strong></span> tab appears, displaying all the created roles in the Developer Hub.
					</p></li><li class="listitem">
						(Optional) Click any role to view the role information on the <span class="strong strong"><strong>OVERVIEW</strong></span> page.
					</li><li class="listitem">
						Select the edit icon for the role that you want to edit.
					</li><li class="listitem">
						Edit the details of the role, such as name, description, users and groups, and permission policies, and click <span class="strong strong"><strong>NEXT</strong></span>.
					</li><li class="listitem">
						Review the edited details of the role and click <span class="strong strong"><strong>SAVE</strong></span>.
					</li></ol></div><p>
				After editing a role, you can view the edited details of a role on the <span class="strong strong"><strong>OVERVIEW</strong></span> page of a role. You can also edit a role’s users and groups or permissions by using the edit icon on the respective cards on the <span class="strong strong"><strong>OVERVIEW</strong></span> page.
			</p></section><section class="section" id="proc-rbac-ui-delete-role_setting-up-and-configuring-your-first-rhdh-instance"><div class="titlepage"><div><div><h3 class="title">8.3. Deleting a role in the Red Hat Developer Hub Web UI</h3></div></div></div><p>
				You can delete a role in the Red Hat Developer Hub using the Web UI.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					The policies generated from a <code class="literal">policy.csv</code> or ConfigMap file cannot be edited or deleted using the Developer Hub Web UI.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You <a class="link" href="#enabling-and-giving-access-to-rbac">have enabled RBAC and have a policy administrator role in Developer Hub</a>.
					</li><li class="listitem">
						The role that you want to delete is created in the Developer Hub.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Go to <span class="strong strong"><strong>Administration</strong></span> at the bottom of the sidebar in the Developer Hub.
					</p><p class="simpara">
						The <span class="strong strong"><strong>RBAC</strong></span> tab appears, displaying all the created roles in the Developer Hub.
					</p></li><li class="listitem">
						(Optional) Click any role to view the role information on the <span class="strong strong"><strong>OVERVIEW</strong></span> page.
					</li><li class="listitem"><p class="simpara">
						Select the delete icon from the <span class="strong strong"><strong>Actions</strong></span> column for the role that you want to delete.
					</p><p class="simpara">
						<span class="strong strong"><strong>Delete this role?</strong></span> pop-up appears on the screen.
					</p></li><li class="listitem">
						Click <span class="strong strong"><strong>DELETE</strong></span>.
					</li></ol></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm46816527586016"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2025 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></section></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>