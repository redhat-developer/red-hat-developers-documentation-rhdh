<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.16">
<title>Monitoring and logging</title>
<style>
/* Red Hat Fonts */
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}

/* Positioning toc and content */
@media screen and (min-width: 768px) {
  body.toc2 {
    padding-left: 400px;
    padding-right: 0;
  }
}
@media screen and (min-width: 768px) {
  #toc.toc2 {
    margin-top: 0 !important;
    position: fixed;
    width: 319px;
    left: 0;
    top: 0;
    border-right: 1px solid #e7e7e9;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
  }
}

/* Style borrowed from docs.redhat.com and adapted to the HTML structure */

#toc.toc2 {
  background:#f2f2f2;
  justify-content:space-between;
  margin:1rem 0 2rem;
  padding:1rem
}
#toctitle {
  font-size:1.25rem;
  font-weight:400;
  line-height:1.6667;
  margin-top:0;
  text-transform:none
}
#toc li {
  margin-bottom:.25em;
  padding-left:0;
  list-style:none;
}
#toc a,
#toc a:visited {
  color:black;
  display:inline-block;
  text-decoration:none;
}

.sectlevel1 {
  padding-left:0;
}

.sectlevel2,
.sectlevel3,
.sectlevel4,
.sectlevel5 {
  padding-left:1em;
}

h3 {
  color:#464646;
  font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);
  font-size:var(--rh-font-size-body-text-lg,1.125rem)
}

li {
  display:list-item;
  margin:0;
  padding:0;
  text-align:-webkit-match-parent
}

*,
:after,
:before,
:after,
:before {
  box-sizing:border-box
}
img,
object,
svg,
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
hr {
  border:0;
  border-top:.0625rem solid #d2d2d2;
  clear:both;
  margin:1rem 0
}
a {
  color:#06c;
  text-decoration:underline
}
a:focus,
a:hover {
  color:#036
}
p {
  margin:1.49963rem 0
}
li>p {
  margin:0
}
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-weight:400;
  margin:0 0 .625rem;
  color:#464646;
}
h1 {
  font-size:2rem;
  margin:2rem 0
}
h2 {
  font-size:2rem;
  margin:2rem 0
}
h3 {
  font-size:1.65rem;
  font-weight:400
}
h4 {
  font-size:1.5rem
}
h5 {
  font-size:1.25rem
  font-weight:400
}
h6 {
  font-size:1.125rem;
  font-weight:500;
  line-height:1.6667
}
ol ::marker,
ul ::marker {
  font:inherit
}
li {
  margin:0 0 .5em;
  padding:0
}
li>p {
  margin:.5rem 0
}
li>ol,
li>ul {
  margin:0
}
dl dd {
  margin:.5rem 0 .5rem 1rem
}
dl dd>p {
  margin:.5rem 0
}
.informaltable,
.table-contents,
.table-wrapper {
  max-height:var(--rh-table--maxHeight);
  overflow:auto
}
table {
  border:0;
  font-size:1rem;
  line-height:1.6667;
  /* commented out as it breaks on Safari on Mac // table-layout:fixed */
}
table caption {
  color:#585858;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:left
}
table td,
table th {
  border:0;
  border-bottom:.0625rem solid #d2d2d2;
  border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);
  padding:.5em 1rem
}
table td.halign-left,
table th.halign-left {
  text-align:left
}
table td.halign-center,
table th.halign-center,
table td.halign-center,
table th.halign-center {
  text-align:center
}
table td.halign-right,
table th.halign-right {
  text-align:right
}
table td.valign-top,
table th.valign-top {
  vertical-align:top
}
table td.valign-middle,
table th.valign-middle {
  vertical-align:middle
}
table td.valign-bottom,
table th.valign-bottom {
  vertical-align:bottom
}
table thead td,
table thead th {
  background:#f5f5f5;
  font-weight:600
}
rh-table table,
rh-table.rh-table--expanded-vertically {
  max-height:-moz-max-content;
  max-height:max-content
}
pre.nowrap {
  overflow:auto;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
.listingblock pre {
  background:transparent
}

[class] pre code {
  background:inherit;
  color:inherit;
  font-family:inherit;
  font-size:inherit;
  font-weight:inherit;
  line-height:inherit;
  padding:0
}
.keycap,
kbd {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
.keycap strong,
.keycap strong {
  font-weight:inherit
}
kbd.keyseq,
kbd.keyseq {
  background:transparent;
  border:0;
  box-shadow:none;
  padding:0
}
kbd.keyseq kbd,
kbd.keyseq kbd {
  display:inline-block;
  margin:0 .375rem
}
kbd.keyseq kbd:first-child,
kbd.keyseq kbd:first-child {
  margin-left:0
}
b.button {
  font-size:90%;
  font-weight:700;
  padding:.1875rem
}
b.button:before {
  content:"["
}
b.button:after {
  content:"]"
}
html {
  font-family:sans-serif;
  -ms-text-size-adjust:100%;
  -webkit-text-size-adjust:100%
}
body {
  margin:0
}
audio,
canvas,
progress,
video {
  display:inline-block;
  vertical-align:baseline
}
audio:not([controls]) {
  display:none;
  height:0
}
[hidden],
template {
  display:none
}
a {
  background:transparent
}
a:active,
a:hover {
  outline:0
}
abbr[title] {
  border-bottom:.0625rem dotted
}
dfn {
  font-style:italic
}

mark {
  background:#ff0;
  color:#000
}
small {
  font-size:80%
}
sub,
sup {
  font-size:75%;
  line-height:0;
  position:relative;
  vertical-align:baseline
}
sup {
  top:-.5em
}
sub {
  bottom:-.25em
}
img {
  border:0
}
svg:not(:root) {
  overflow:hidden
}
figure {
  margin:1em 2.5rem
}
hr {
  box-sizing:content-box;
  height:0
}
code,
kbd,
pre,
samp {
  font-family:monospace,monospace;
  font-size:1em
}
button,
optgroup,
select,
textarea,
.rhdocsinput {
  color:inherit;
  font:inherit;
  margin:0
}
button {
  overflow:visible
}
button,
select {
  text-transform:none
}
button,
html input[type=button],
input[type=reset],
input[type=submit] {
  -moz-appearance:button;
  appearance:button;
  -webkit-appearance:button;
  cursor:pointer
}
button[disabled],
html input[disabled] {
  cursor:default
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border:0;
  padding:0
}
input {
  line-height:normal
}
input[type=checkbox],
input[type=radio] {
  box-sizing:border-box;
  padding:0
}
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  height:auto
}
input[type=search] {
  -moz-appearance:textfield;
  appearance:textfield;
  -webkit-appearance:textfield;
  box-sizing:content-box
}
input[type=search]::-webkit-search-cancel-button,
input[type=search]::-webkit-search-decoration {
  -webkit-appearance:none
}
fieldset {
  border:.0625rem solid silver;
  margin:0 .125rem;
  padding:.35em .625em .75em
}
legend {
  border:0;
  padding:0
}
textarea {
  overflow:auto
}
optgroup {
  font-weight:700
}
table {
  border-collapse:collapse;
  border-spacing:0
}
td,
th {
  padding:0
}

.admonitionblock>div:nth-child(2),
.caution>div:nth-child(2),
.important>div:nth-child(2),
.note>div:nth-child(2),
.tip>div:nth-child(2),
.warning>div:nth-child(2) {
  margin:.5rem 0
}
.admonitionblock>div:nth-child(2)>:first-child,
.caution>div:nth-child(2)>:first-child,
.important>div:nth-child(2)>:first-child,
.note>div:nth-child(2)>:first-child,
.tip>div:nth-child(2)>:first-child,
.warning>div:nth-child(2)>:first-child {
  margin-top:0
}
.admonitionblock>div:nth-child(2)>:last-child,
.caution>div:nth-child(2)>:last-child,
.important>div:nth-child(2)>:last-child,
.note>div:nth-child(2)>:last-child,
.tip>div:nth-child(2)>:last-child,
.warning>div:nth-child(2)>:last-child {
  margin-bottom:0
}
.listingblock+.listingblock,
pre+pre,
pre[class]+pre[class] {
  margin-top:2rem
}
.listingblock {
  background:#f8f8f8;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0;
  border: 1px solid grey;
  border-radius:.1rem;
}
.listingblock:before {
  background-repeat:no-repeat;
  background-size:6.25rem 100%;
  bottom:var(--scrollbar__height,1px);
  content:"";
  display:block;
  height:7.125rem;
  max-height:100%;
  max-height:calc(100% - var(--scrollbar__height, 2px));
  position:absolute;
  right:var(--scrollbar__width,6px);
  top:.0625rem;
  width:4.0625rem;
  z-index:1
}

.colist>ol {
  counter-reset:colist;
  list-style:none;
  margin:1rem 0 2rem;
  padding:0
}
.colist>ol>li {
  counter-increment:colist;
  margin:.5rem 0;
  padding-left:1.75rem;
  position:relative;
}
.colist>ol>li:before {
  content:counter(colist);
  left:0;
  position:absolute;
  top:.1875rem
}
.colist>ol>li:before,
.conum {
  background:#06c;
  border-radius:50%;
  color:#fff;
  display:inline-block;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-style:normal;
  font-weight:600;
  height:1.25rem;
  line-height:1.35rem;
  padding:0;
  text-align:center;
  top:-.125em;
  vertical-align:middle;
  width:1.25rem
}
.colist div.paragraph {
  margin:0
}

rh-table {
  display:block
}
::-webkit-scrollbar,
:host ::-webkit-scrollbar {
  height:.625rem;
  width:.625rem
}
::-webkit-scrollbar,
::-webkit-scrollbar-track,
:host ::-webkit-scrollbar,
:host ::-webkit-scrollbar-track {
  background-color:#d6d6d6
}
::-webkit-scrollbar-thumb,
:host ::-webkit-scrollbar-thumb {
  background-color:#8e8e8e
}
*,
:host * {
  scrollbar-color:#8e8e8e #d6d6d6
}
p:empty,
p:empty {
  display:none
}
.book {
  font-size: var(--rh-font-size-body-text-lg,1.125rem);
  font-weight: var(--rh-font-weight-body-text-regular,400);
  line-height: 1.6667;
  padding-left: 6rem;
  padding-right: 6rem;
  padding-top: var(--rh-space-3xl,4rem);
  max-width: 1400px;
}

.book[class] h1 code,
.book[class] h2 code,
.book[class] h3 code,
.book[class] h4 code,
.book[class] h5 code,
.book[class] h6 code,
[class] h1 code,
[class] h2 code,
[class] h3 code,
[class] h4 code,
[class] h5 code,
[class] h6 code {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
details[class] {
  list-style:none;
  margin:1rem 0 3rem;
  padding:0
}

.preamble {
  margin:0 0 2rem
}
.sect1 {
  margin:2rem 0 1rem
}
:host .sect1,
cp-documentation .sect1 {
  margin:0 0 2rem;
  padding:.0625rem 0 0
}
:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,
:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child {
  margin-top:0
}
.listingblock,
.literalblock {
  margin:1rem 0
}
.quoteblock,
.verseblock {
  border-left:.25rem solid #d2d2d2;
  margin:1rem 0;
  padding:1rem 1rem 1rem 2rem
}
.quoteblock.pullleft,
.verseblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .quoteblock.pullleft,
  .verseblock.pullleft {
    margin-left:-1rem
  }
}
.quoteblock.pullright,
.verseblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-10rem
  }
}
.quoteblock>:first-child,
.verseblock>:first-child {
  margin-top:0
}
.quoteblock .content,
.verseblock .content {
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.25rem;
  line-height:1.6667
}
.quoteblock .attribution,
.verseblock .attribution {
  font-size:.875rem;
  font-style:italic;
  font-weight:600;
  line-height:1.6667;
  text-transform:uppercase
}
.quoteblock .attribution .citetitle,
.verseblock .attribution .citetitle {
  color:#585858
}
.quoteblock .attribution cite,
.verseblock .attribution cite {
  font-size:1em
}
.quoteblock blockquote {
  font-style:italic;
  margin:0;
  padding:0
}
.quoteblock blockquote .content>:first-child {
  margin-top:0
}
.quoteblock blockquote .content>:first-child:before {
  color:#e00;
  content:"â€œ";
  display:block;
  float:left;
  font-size:2.75rem;
  font-style:normal;
  line-height:1.125em;
  margin-right:.5rem
}
.quoteblock blockquote .content>:first-child .content>:first-child:before {
  content:none
}
.imageblock {
  margin:1rem 0
}
.imageblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .imageblock.pullleft {
    margin-left:-1rem
  }
}
.imageblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .imageblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .imageblock.pullright {
    margin-right:-10rem
  }
}
.imageblock.interrupter {
  margin:2rem 0
}
@media (min-width:768px) {
  .imageblock.interrupter {
    margin-left:-1rem;
    margin-right:-2rem
  }
  .imageblock.interrupter .caption {
    margin-left:1rem;
    margin-right:2rem
  }
}
@media (min-width:1100px) {
  .imageblock.interrupter {
    margin-right:-10rem
  }
  .imageblock.interrupter .caption {
    margin-right:10rem
  }
}
.imageblock.interrupter img {
  max-width:100%
}
.imageblock .caption {
  color:#585858;
  display:block;
  font-size:.875rem;
  line-height:1.6667;
  margin:.5rem 0 0
}
.rhdocs-footnotes {
  border-top:.0625rem solid #d2d2d2;
  margin:3rem 0 1rem;
  padding:1rem 0 0
}
.rhdocs-footnotes>ol {
  margin:0;
  padding:0 0 0 1.5rem
}
@supports (counter-reset:footnotenum) {
  .rhdocs-footnotes>ol {
    counter-reset:footnotenum;
    list-style:none;
    padding:0
  }
  .rhdocs-footnotes>ol>li {
    counter-increment:footnotenum
  }
  .rhdocs-footnotes>ol>li:before {
    color:#585858;
    content:"[" counter(footnotenum) "]";
    display:inline-block;
    margin-right:.25rem
  }
}
#footer {
  background:#ededed;
  color:#151515;
  font-size:.875rem;
  line-height:1.6667;
  margin:3rem 0 0;
  padding:1rem
}
.center {
  margin-left:auto;
  margin-right:auto
}
.stretch {
  width:100%
}

pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.language-none,
code.language-text,
code.language-txt,
pre.language-none,
pre.language-text,
pre.language-txt {
  color:#151515
}
code[class*=language-] ::-moz-selection,
code[class*=language-]::-moz-selection,
pre[class*=language-] ::-moz-selection,
pre[class*=language-]::-moz-selection {
  background:#cceae7;
  color:#263238
}
code[class*=language-] ::selection,
code[class*=language-]::selection,
pre[class*=language-] ::selection,
pre[class*=language-]::selection {
  background:#cceae7;
  color:#263238
}
:not(pre)>code[class*=language-] {
  border-radius:.2em;
  padding:.1em;
  white-space:normal
}
.token.atrule {
  color:#40199a
}
.token.attr-name {
  color:#06c
}
.token.attr-value,
.token.attribute {
  color:#b300b3
}
.token.boolean {
  color:#40199a
}
.token.builtin,
.token.cdata,
.token.char,
.token.class,
.token.class-name {
  color:#06c
}
.token.comment {
  color:#6a6e73
}
.token.constant {
  color:#40199a
}
.token.deleted {
  color:#c9190b
}
.token.doctype {
  color:#6a6e73
}
.token.entity {
  color:#c9190b
}
.token.function {
  color:#40199a
}
.token.hexcode {
  color:#b300b3
}
.token.id,
.token.important {
  color:#40199a;
  font-weight:700
}
.token.inserted {
  color:#06c
}
.token.keyword {
  color:#40199a
}
.token.number {
  color:#b300b3
}
.token.operator {
  color:#06c
}
.token.prolog {
  color:#6a6e73
}
.token.property {
  color:#06c
}
.token.pseudo-class,
.token.pseudo-element {
  color:#b300b3
}
.token.punctuation,
.token.regex {
  color:#06c
}
.token.selector {
  color:#c9190b
}
.token.string {
  color:#b300b3
}
.token.symbol {
  color:#40199a
}
.token.unit {
  color:#b300b3
}
.token.url,
.token.variable {
  color:#c9190b
}

@media print {
  .field code,
  .field pre,
  code[class*=language-],
  pre,
  pre[class*=language-] {
    white-space:pre-wrap!important;
    word-wrap:break-word!important;
    overflow-wrap:break-word!important;
    word-break:break-word!important
  }
}

.book>.titlepage:not(:last-child),
.chapter,
section[id] {
  padding-bottom:3.75rem
}
.book>.titlepage .chapter:last-child,
.book>.titlepage section[id]:last-child,
.chapter .chapter:last-child,
.chapter section[id]:last-child,
section[id] .chapter:last-child,
section[id] section[id]:last-child {
  margin-bottom:-3.75rem
}
.listingblock+section[id],
pre+section[id] {
  padding-top:3.75rem
}
.cta-link {
  font-size:inherit
}
a {
  word-wrap:break-word;
  overflow-wrap:break-word
}
.caution,
.important,
.note,
.tip,
.warning {
  padding:.8888888889em;
  position:relative
}
.caution {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.important {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.note {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.tip {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.warning {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.book>.titlepage,
.chapter,
section[id] {
  padding-bottom:var(--rh-space-4xl,64px)
}

.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.paragraph {
  margin:1.49963rem 0
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
dd {
  margin-bottom:2.5rem
}

.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}

.annotator-outer[class][class] {
  display:none;
  flex-direction:column;
  flex-grow:1;
  height:auto;
  margin:0;
  position:static;
  width:auto
}
@media (min-width:1400px) {
  .annotator-outer[class][class] {
    display:flex
  }
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
.title {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0;
  text-transform:none
}
.paragraph>.title[class]+.content>:first-child,
.paragraph>.title[class]+p,
p.title[class]+.content>:first-child,
p.title[class]+p {
  margin-top:0
}
[class] pre .caution,
[class] pre .important,
[class] pre .note,
[class] pre .tip,
[class] pre .warning {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
[class] pre .caution:after,
[class] pre .important:after,
[class] pre .note:after,
[class] pre .tip:after,
[class] pre .warning:after {
  content:none
}
[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}
[class] .author {
  margin-bottom:1.5rem
}
[class] .author .author {
  margin-bottom:0
}
table {
  margin:2rem 0
}
[class] table {
  width:auto
}
table .table-contents table {
  max-width:100%;
  overflow:auto
}
rh-table table {
  margin:0;
  max-width:9999em;
  overflow:visible
}
td,
th {
  border-left:0;
  padding:.5em 1rem;
  transition:background .25s ease-out
}
td.content--md[class][class],
th.content--md[class][class] {
  min-width:13em
}
td.content--lg[class][class],
th.content--lg[class][class] {
  min-width:20em
}
thead th {
  padding-top:1.5em
}
caption {
  color:currentColor;
  color:var(--pfe-table__caption--Color,currentColor);
  font-weight:700;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:center
}
.revhistory table td,
.revhistory table th {
  border-color:transparent
}
.revhistory table td {
  padding:.625rem .875rem
}
.revhistory table.simplelist {
  margin:0
}
@media print {
  #masthead {
    display:none!important
  }
}
.rh-table--is-full-screen #to-top {
  display:none
}
body {
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  background-color:white;
  font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);
  font-size:var(--rh-body-copy-lage,1.125rem);
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
rh-codeblock::slotted(#content) {
  border-radius:.25rem;
  padding:var (--rh-space-lg,16px)
}
rh-codeblock .screen {
  display:grid;
  grid-template-columns:1fr 4.375rem
}
rh-codeblock[class][class][class][class][class] {
  max-width:99999em
}
pre {
  border:0;
  max-height:-moz-max-content;
  max-height:max-content
}
pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
rh-code-block>div.codeblock__inner-wrapper>pre,
rh-code-block>div.codeblock__inner-wrapper>pre[class] {
  margin:0;
  padding:0;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.literal {
  background:#eee;
  border-radius:.25rem;
  color:#000;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
code.literal,
kbd,
span.keycap {
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace
}
kbd,
span.keycap {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
ol,
ul {
  margin:1rem 0;
  padding:0 0 0 1.5rem
}
._additional-resources[class][class],
._additional-resources[class][class][id]:last-child {
  background:#fff;
  border:.0625rem solid #d2d2d2;
  border-radius:.1875rem;
  margin:2em 0 4em;
  padding:2rem 2rem 1rem
}
._additional-resources[class][class] ul {
  border:0;
  list-style:none;
  margin:0;
  padding:0;
  position:relative
}
._additional-resources[class][class] li {
  border-bottom:.0625rem solid #d2d2d2;
  box-sizing:content-box;
  margin:0;
  padding:1rem 1.5rem 1rem 0;
  -moz-column-break-inside:avoid;
  break-inside:avoid
}
._additional-resources[class][class] li:last-child {
  border:0
}
section.section#additional_resource .additional-resources__heading,
section.section#additional_resource .heading,
section.section#additional_resource h1,
section.section#additional_resource h2,
section.section#additional_resource h3,
section.section#additional_resource h4,
section.section#additional_resource h5,
section.section#additional_resource h6,
section.section#additional_resource p.title {
  display:block;
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  font-weight:700;
  line-height:1.5rem;
  margin:0 0 .5rem;
  padding:0;
  text-transform:uppercase
}
section.section:first-of-type {
  margin-top:var(--rh-space-4xl,64px)
}
section.section p {
  margin-bottom:var(--rh-space-lg,16px);
  margin-top:0
}


dl {
  display:block;
  margin-block-end:1em;
  margin-block-start:1em;
  margin-inline-end:0;
  margin-inline-start:0
}
.paragraph {
  margin:1.49963rem 0
}
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.book[class] .author {
  margin-bottom:1.5rem
}
.book[class] .author .author {
  margin-bottom:0
}
.paragraph>.title[class],
p.title[class] {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0
}
.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}
code {
  background:#eee;
  color:#000;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
.book[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
dl {
  margin:1rem 0
}
dl dt {
  font-weight:600;
  margin:.5rem 0
}
ol ol {
  list-style:lower-roman
}
.codeblock--processed pf-clipboard-copy::part(input),
.codeblock--processed pf-clipboard-copy::part(span) {
  display:none
}
.token.tag {
  color:#c9190b
}

.admonitionblock {
  margin-bottom:var(--rh-space-lg,1rem)
}
.guibutton,
.guimenu,
.guimenuitem {
  font-weight:700
}
.guibutton {
  font-size:90%;
  padding:.1875rem
}
.guibutton:before {
  content:"["
}
.guibutton:after {
  content:"]"
}
.book,
{
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
pre[hidden] {
  display:none
}
.listingblock {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  margin:1rem 0;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0
}
nopre {
  display:block;
  font-size:.8125rem;
  line-height:1.42857;
  margin:0 0 .625rem;
  word-break:break-all;
  word-wrap:break-word;
  background-color:var(--rh-color-surface-lighter,#f2f2f2);
  border:.0625rem solid #ccc;
  border-radius:.25rem;
  color:#333
}
.book pre,
pre {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  color:#151515;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
pre[class] {
  line-height:1.6667;
  overflow-x:auto
}
*,
:after,
:before {
  box-sizing:border-box
}
:root {
  --rh-space-xs:4px;
  --rh-space-sm:6px;
  --rh-space-md:8px;
  --rh-space-lg:16px;
  --rh-space-xl:24px;
  --rh-space-2xl:32px;
  --rh-space-3xl:48px;
  --rh-space-4xl:64px;
  --rh-space-5xl:80px;
  --rh-space-6xl:96px;
  --rh-space-7xl:128px;
  --rh-font-size-body-text-xs:.75rem;
  --rh-font-size-body-text-sm:.875rem;
  --rh-font-size-body-text-md:1rem;
  --rh-font-size-body-text-lg:1.125rem;
  --rh-font-size-body-text-xl:1.25rem;
  --rh-font-size-body-text-2xl:1.5rem;
  --rh-font-size-heading-xs:1.25rem;
  --rh-font-size-heading-sm:1.5rem;
  --rh-font-size-heading-md:1.75rem;
  --rh-font-size-heading-lg:2.25rem;
  --rh-font-size-heading-xl:2.5rem;
  --rh-font-size-heading-2xl:3rem;
  --pfe-navigation--logo--maxWidth:200px;
  --pfe-navigation__logo--height:40px;
  --pfe-navigation--fade-transition-delay:.5s;
  --pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);
  --pf-global--icon--FontSize--sm:.75rem
}
body,
html {
  font-family:Red Hat Text,sans-serif;
  font-size:var(--rh-font-size-body-text-md,1rem);
  line-height:var(--rh-line-height-body-text,1.5);
}

main {
  line-height:30px
}
section {
  padding-bottom:3rem;
  padding-top:3rem
}
img {
  max-width:100%
}
a {
  color:var(--rh-color-interactive-blue-darker,#06c);
  text-decoration:underline
}
a:hover {
  color:var(--rh-color-interactive-blue-darkest,#004080)
}

@media (min-width:576px) {
  .book {
    max-width:540px
  }
}
@media (min-width:768px) {
  .book {
    max-width:720px
  }
}
@media (min-width:992px) {
  .book {
    max-width:1250px
  }
}
section {
  padding:0
}
.list-unstyled {
  list-style:none;
  padding-left:0
}
.doc-image-link {
  display:inline-block;
  text-decoration:none
}
.admonitionblock{
  margin-bottom:var(--rh-space-lg,1rem)
  font-size:var(--rh-font-size-body-text-md,1rem)
}
.admonitionblock table {
  margin:0;
  border:none;
  width:fit-content
}
.admonitionblock td {
  margin:0;
  border:none;
  display:block
}
.admonitionblock .title {
  margin:0;
  color:#002952;
  font-weight:700
}


</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Monitoring and logging</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#assembly-rhdh-observability">1. Enabling observability for Red Hat Developer Hub on OpenShift Container Platform</a>
<ul class="sectlevel2">
<li><a href="#proc-admin-enabling-metrics-ocp-operator_assembly-rhdh-observability">1.1. Enabling metrics monitoring in a Red Hat Developer Hub Operator installation on an OpenShift Container Platform cluster</a></li>
<li><a href="#proc-admin-enabling-metrics-ocp-helm_assembly-rhdh-observability">1.2. Enabling metrics monitoring in a Helm chart installation on an OpenShift Container Platform cluster</a></li>
</ul>
</li>
<li><a href="#proc-rhdh-monitoring-logging-aws_assembly-rhdh-observability">2. Monitoring and logging with Amazon Web Services (AWS) in Red Hat Developer Hub</a>
<ul class="sectlevel2">
<li><a href="#_monitoring-with-amazon-prometheus">2.1. Monitoring with Amazon Prometheus</a>
<ul class="sectlevel3">
<li><a href="#_configuring-annotations-for-monitoring">2.1.1. Configuring annotations for monitoring</a></li>
</ul>
</li>
<li><a href="#_logging-with-amazon-cloudwatch-logs">2.2. Logging with Amazon CloudWatch logs</a>
<ul class="sectlevel3">
<li><a href="#_configuring-the-application-log-level">2.2.1. Configuring the application log level</a></li>
<li><a href="#_retrieving-logs-from-amazon-cloudwatch">2.2.2. Retrieving logs from Amazon CloudWatch</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#proc-rhdh-monitoring-logging-aks_assembly-rhdh-observability">3. Monitoring and logging with Azure Kubernetes Services (AKS) in Red Hat Developer Hub</a>
<ul class="sectlevel2">
<li><a href="#_viewing-logs-with-azure-kubernetes-services-aks">3.1. Viewing logs with Azure Kubernetes Services (AKS)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="assembly-rhdh-observability">1. Enabling observability for Red Hat Developer Hub on OpenShift Container Platform</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In OpenShift Container Platform, metrics are exposed through an HTTP service endpoint under the <code>/metrics</code> canonical name. You can create a <code>ServiceMonitor</code> custom resource (CR) to scrape metrics from a service endpoint in a user-defined project.</p>
</div>
<div class="sect2">
<h3 id="proc-admin-enabling-metrics-ocp-operator_assembly-rhdh-observability">1.1. Enabling metrics monitoring in a Red Hat Developer Hub Operator installation on an OpenShift Container Platform cluster</h3>
<div class="paragraph">
<p>You can enable and view metrics for an Operator-installed Red Hat Developer Hub instance from the <strong>Developer</strong> perspective of the OpenShift Container Platform web console.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Your OpenShift Container Platform cluster has <a href="https://docs.openshift.com/container-platform/latest/observability/monitoring/enabling-monitoring-for-user-defined-projects.html">monitoring for user-defined projects</a> enabled.</p>
</li>
<li>
<p>You have installed Red Hat Developer Hub on OpenShift Container Platform using the Red Hat Developer Hub Operator.</p>
</li>
<li>
<p>You have installed the OpenShift CLI (<code>oc</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<div class="title">Procedure</div>
<p>Currently, the Red Hat Developer Hub Operator does not support creating a <code>ServiceMonitor</code> custom resource (CR) by default. You must complete the following steps to create a <code>ServiceMonitor</code> CR to scrape metrics from the endpoint.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code>ServiceMonitor</code> CR as a YAML file:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: &lt;custom_resource_name&gt; # <b class="conum">(1)</b>
  namespace: &lt;project_name&gt; # <b class="conum">(2)</b>
  labels:
    app.kubernetes.io/instance: &lt;custom_resource_name&gt;
    app.kubernetes.io/name: backstage
spec:
  namespaceSelector:
    matchNames:
      - &lt;project_name&gt;
  selector:
    matchLabels:
      rhdh.redhat.com/app: backstage-&lt;custom_resource_name&gt;
  endpoints:
  - port: backend
    path: '/metrics'</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Replace <code>&lt;custom_resource_name&gt;</code> with the name of your Red Hat Developer Hub CR.</p>
</li>
<li>
<p>Replace <code>&lt;project_name&gt;</code> with the name of the OpenShift Container Platform project where your Red Hat Developer Hub instance is running.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Apply the <code>ServiceMonitor</code> CR by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">oc apply -f &lt;filename&gt;</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>From the <strong>Developer</strong> perspective in the OpenShift Container Platform web console, select the <strong>Observe</strong> view.</p>
</li>
<li>
<p>Click the <strong>Metrics</strong> tab to view metrics for Red Hat Developer Hub pods.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc-admin-enabling-metrics-ocp-helm_assembly-rhdh-observability">1.2. Enabling metrics monitoring in a Helm chart installation on an OpenShift Container Platform cluster</h3>
<div class="paragraph">
<p>You can enable and view metrics for a Red Hat Developer Hub Helm deployment from the <strong>Developer</strong> perspective of the OpenShift Container Platform web console.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>Your OpenShift Container Platform cluster has <a href="https://docs.openshift.com/container-platform/latest/observability/monitoring/enabling-monitoring-for-user-defined-projects.html">monitoring for user-defined projects</a> enabled.</p>
</li>
<li>
<p>You have installed Red Hat Developer Hub on OpenShift Container Platform using the Helm chart.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From the <strong>Developer</strong> perspective in the OpenShift Container Platform web console, select the <strong>Topology</strong> view.</p>
</li>
<li>
<p>Click the overflow menu of the Red Hat Developer Hub Helm chart, and select <strong>Upgrade</strong>.</p>
<div class="imageblock">
<div class="content">
<img src="images/rhdh/helm-upgrade.png" alt="helm upgrade">
</div>
</div>
</li>
<li>
<p>On the <strong>Upgrade Helm Release</strong> page, select the <strong>YAML view</strong> option in <strong>Configure via</strong>, then configure the <code>metrics</code> section in the YAML, as shown in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">upstream:
# ...
  metrics:
    serviceMonitor:
      enabled: true
      path: /metrics
# ...</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/rhdh/upgrade-helm-metrics.png" alt="upgrade helm metrics">
</div>
</div>
</li>
<li>
<p>Click <strong>Upgrade</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>From the <strong>Developer</strong> perspective in the OpenShift Container Platform web console, select the <strong>Observe</strong> view.</p>
</li>
<li>
<p>Click the <strong>Metrics</strong> tab to view metrics for Red Hat Developer Hub pods.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.openshift.com/container-platform/latest/observability/monitoring/managing-metrics.html">OpenShift Container Platform - Managing metrics</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proc-rhdh-monitoring-logging-aws_assembly-rhdh-observability">2. Monitoring and logging with Amazon Web Services (AWS) in Red Hat Developer Hub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the Red Hat Developer Hub, monitoring and logging are facilitated through Amazon Web Services (AWS) integration. With features like Amazon CloudWatch for real-time monitoring and Amazon Prometheus for comprehensive logging, you can ensure the reliability, scalability, and compliance of your Developer Hub application hosted on AWS infrastructure.</p>
</div>
<div class="paragraph">
<p>This integration enables you to oversee, diagnose, and refine your applications in the Red Hat ecosystem, leading to an improved development and operational journey.</p>
</div>
<div class="sect2">
<h3 id="_monitoring-with-amazon-prometheus">2.1. Monitoring with Amazon Prometheus</h3>
<div class="paragraph">
<p>Red Hat Developer Hub provides Prometheus metrics related to the running application. For more information about enabling or deploying Prometheus for EKS clusters, see <a href="https://docs.aws.amazon.com/eks/latest/userguide/prometheus.html">Prometheus metrics</a> in the Amazon documentation.</p>
</div>
<div class="paragraph">
<p>To monitor Developer Hub using <a href="https://aws.amazon.com/prometheus/">Amazon Prometheus</a>, you need to create an Amazon managed service for the Prometheus workspace and configure the ingestion of the Developer Hub Prometheus metrics. For more information, see <a href="https://docs.aws.amazon.com/prometheus/latest/userguide/AMP-onboard-create-workspace.html">Create a workspace</a> and <a href="https://docs.aws.amazon.com/prometheus/latest/userguide/AMP-onboard-ingest-metrics.html">Ingest Prometheus metrics to the workspace</a> sections in the Amazon documentation.</p>
</div>
<div class="paragraph">
<p>After ingesting Prometheus metrics into the created workspace, you can configure the metrics scraping to extract data from pods based on specific pod annotations.</p>
</div>
<div class="sect3">
<h4 id="_configuring-annotations-for-monitoring">2.1.1. Configuring annotations for monitoring</h4>
<div class="paragraph">
<p>You can configure the annotations for monitoring in both Helm deployment and Operator-backed deployment.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Helm deployment</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To annotate the backstage pod for monitoring, update your <code>values.yaml</code> file as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">upstream:
  backstage:
    # --- TRUNCATED ---
    podAnnotations:
      prometheus.io/scrape: 'true'
      prometheus.io/path: '/metrics'
      prometheus.io/port: '7007'
      prometheus.io/scheme: 'http'</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Operator-backed deployment</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>As an administrator of the operator, edit the default configuration to add Prometheus annotations as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash"># Update OPERATOR_NS accordingly
OPERATOR_NS=rhdh-operator
kubectl edit configmap backstage-default-config -n "${OPERATOR_NS}"</code></pre>
</div>
</div>
</li>
<li>
<p>Find the <code>deployment.yaml</code> key in the ConfigMap and add the annotations to the <code>spec.template.metadata.annotations</code> field as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">deployment.yaml: |-
  apiVersion: apps/v1
  kind: Deployment
  # --- truncated ---
  spec:
    template:
      # --- truncated ---
      metadata:
        labels:
         rhdh.redhat.com/app:  # placeholder for 'backstage-&lt;cr-name&gt;'
        # --- truncated ---
        annotations:
          prometheus.io/scrape: 'true'
          prometheus.io/path: '/metrics'
          prometheus.io/port: '7007'
          prometheus.io/scheme: 'http'
  # --- truncated ---</code></pre>
</div>
</div>
</li>
<li>
<p>Save your changes.</p>
</li>
</ol>
</div>
</div>
</div>
</dd>
</dl>
</div>
<div class="paragraph">
<div class="title">Verification</div>
<p>To verify if the scraping works:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use <code>kubectl</code> to port-forward the Prometheus console to your local machine as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">kubectl --namespace=prometheus port-forward deploy/prometheus-server 9090</code></pre>
</div>
</div>
</li>
<li>
<p>Open your web browser and navigate to <code>http://localhost:9090</code> to access the Prometheus console.</p>
</li>
<li>
<p>Monitor relevant metrics, such as <code>process_cpu_user_seconds_total</code>.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_logging-with-amazon-cloudwatch-logs">2.2. Logging with Amazon CloudWatch logs</h3>
<div class="paragraph">
<p>Logging within the Red Hat Developer Hub relies on the <a href="https://github.com/winstonjs/winston">winston library</a>. By default, logs at the debug level are not recorded. To activate debug logs, you must set the environment variable <code>LOG_LEVEL</code> to debug in your Red Hat Developer Hub instance.</p>
</div>
<div class="sect3">
<h4 id="_configuring-the-application-log-level">2.2.1. Configuring the application log level</h4>
<div class="paragraph">
<p>You can configure the application log level in both Helm deployment and Operator-backed deployment.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Helm deployment</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>To update the logging level, add the environment variable <code>LOG_LEVEL</code> to your Helm chart&#8217;s <code>values.yaml</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">upstream:
  backstage:
    # --- Truncated ---
    extraEnvVars:
      - name: LOG_LEVEL
        value: debug</code></pre>
</div>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">Operator-backed deployment</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="paragraph">
<p>You can modify the logging level by including the environment variable <code>LOG_LEVEL</code> in your custom resource as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">spec:
  # Other fields omitted
  application:
    extraEnvs:
      envs:
        - name: LOG_LEVEL
          value: debug</code></pre>
</div>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
<div class="sect3">
<h4 id="_retrieving-logs-from-amazon-cloudwatch">2.2.2. Retrieving logs from Amazon CloudWatch</h4>
<div class="paragraph">
<p>The CloudWatch Container Insights are used to capture logs and metrics for Amazon EKS. For more information, see <a href="https://docs.aws.amazon.com/prescriptive-guidance/latest/implementing-logging-monitoring-cloudwatch/kubernetes-eks-logging.html">Logging for Amazon EKS</a> documentation.</p>
</div>
<div class="paragraph">
<p>To capture the logs and metrics, <a href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Container-Insights-setup-EKS-addon.html">install the Amazon CloudWatch Observability EKS add-on</a> in your cluster. Following the setup of Container Insights, you can access container logs using Logs Insights or Live Tail views.</p>
</div>
<div class="paragraph">
<p>CloudWatch names the log group where all container logs are consolidated in the following manner:</p>
</div>
<div class="paragraph">
<p><code>/aws/containerinsights/&lt;ClusterName&gt;/application</code></p>
</div>
<div class="paragraph">
<p>Following is an example query to retrieve logs from the Developer Hub instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="sql">fields @timestamp, @message, kubernetes.container_name
| filter kubernetes.container_name in ["install-dynamic-plugins", "backstage-backend"]</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proc-rhdh-monitoring-logging-aks_assembly-rhdh-observability">3. Monitoring and logging with Azure Kubernetes Services (AKS) in Red Hat Developer Hub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Monitoring and logging are integral aspects of managing and maintaining Azure Kubernetes Services (AKS) in Red Hat Developer Hub. With features like Managed Prometheus Monitoring and Azure Monitor integration, administrators can efficiently monitor resource utilization, diagnose issues, and ensure the reliability of their containerized workloads.</p>
</div>
<div class="paragraph">
<p>To enable Managed Prometheus Monitoring, use the <code>-enable-azure-monitor-metrics</code> option within either the <code>az aks create</code> or <code>az aks update</code> command, depending on whether you&#8217;re creating a new cluster or updating an existing one, such as:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">az aks create/update --resource-group &lt;your-ResourceGroup&gt; --name &lt;your-Cluster&gt; --enable-azure-monitor-metrics</code></pre>
</div>
</div>
<div class="paragraph">
<p>The previous command installs the metrics add-on, which gathers <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/prometheus-metrics-overview">Prometheus metrics</a>. Using the previous command, you can enable monitoring of Azure resources through both native Azure Monitor metrics and Prometheus metrics. You can also view the results in the portal under <strong>Monitoring &#8594; Insights</strong>. For more information, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/monitor-azure-resource">Monitor Azure resources with Azure Monitor</a>.</p>
</div>
<div class="paragraph">
<p>Furthermore, metrics from both the Managed Prometheus service and Azure Monitor can be accessed through Azure Managed Grafana service. For more information, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/azure-monitor-workspace-manage?tabs=azure-portal#link-a-grafana-workspace">Link a Grafana workspace</a> section.</p>
</div>
<div class="paragraph">
<p>By default, Prometheus uses the minimum ingesting profile, which optimizes ingestion volume and sets default configurations for scrape frequency, targets, and metrics collected. The default settings can be customized through custom configuration. Azure offers various methods, including using different ConfigMaps, to provide scrape configuration and other metric add-on settings. For more information about default configuration, see <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/containers/prometheus-metrics-scrape-default">Default Prometheus metrics configuration in Azure Monitor</a> and <a href="https://learn.microsoft.com/en-us/azure/azure-monitor/containers/prometheus-metrics-scrape-configuration?tabs=CRDConfig%2CCRDScrapeConfig">Customize scraping of Prometheus metrics in Azure Monitor managed service for Prometheus</a> documentation.</p>
</div>
<div class="sect2">
<h3 id="_viewing-logs-with-azure-kubernetes-services-aks">3.1. Viewing logs with Azure Kubernetes Services (AKS)</h3>
<div class="paragraph">
<p>You can access live data logs generated by Kubernetes objects and collect log data in Container Insights within AKS.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have deployed Developer Hub on AKS.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html/installing_red_hat_developer_hub_on_microsoft_azure_kubernetes_service/index.html#assembly-install-rhdh-aks">Installing Red Hat Developer Hub on Microsoft Azure Kubernetes Service</a>.</p>
</div>
<div class="dlist">
<div class="title">Procedure</div>
<dl>
<dt class="hdlist1">View live logs from your Developer Hub instance</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the Azure Portal.</p>
</li>
<li>
<p>Search for the resource group <code>&lt;your-ResourceGroup&gt;</code> and locate your AKS cluster <code>&lt;your-Cluster&gt;</code>.</p>
</li>
<li>
<p>Select <strong>Kubernetes resources &#8594; Workloads</strong> from the menu.</p>
</li>
<li>
<p>Select the <code>&lt;your-rhdh-cr&gt;-developer-hub</code> (in case of Helm Chart installation) or <code>&lt;your-rhdh-cr&gt;-backstage</code> (in case of Operator-backed installation) deployment.</p>
</li>
<li>
<p>Click <strong>Live Logs</strong> in the left menu.</p>
</li>
<li>
<p>Select the pod.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There must be only single pod.
</td>
</tr>
</table>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Live log data is collected and displayed.</p>
</div>
</div>
</div>
</dd>
<dt class="hdlist1">View real-time log data from the Container Engine</dt>
<dd>
<div class="openblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate to the Azure Portal.</p>
</li>
<li>
<p>Search for the resource group <code>&lt;your-ResourceGroup&gt;</code> and locate your AKS cluster <code>&lt;your-Cluster&gt;</code>.</p>
</li>
<li>
<p>Select <strong>Monitoring</strong> &#8594; <strong>Insights</strong> from the menu.</p>
</li>
<li>
<p>Go to the <strong>Containers</strong> tab.</p>
</li>
<li>
<p>Find the backend-backstage container and click it to view real-time log data as it&#8217;s generated by the Container Engine.</p>
</li>
</ol>
</div>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-12-12 13:42:56 UTC
</div>
</div>
</body>
</html>