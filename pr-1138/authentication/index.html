<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Authentication</title>
<style>
/* Red Hat Fonts */
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}

/* Positioning toc and content */
@media screen and (min-width: 768px) {
  body.toc2 {
    padding-left: 400px;
    padding-right: 0;
  }
}
@media screen and (min-width: 768px) {
  #toc.toc2 {
    margin-top: 0 !important;
    position: fixed;
    width: 319px;
    left: 0;
    top: 0;
    border-right: 1px solid #e7e7e9;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
  }
}

/* Style borrowed from docs.redhat.com and adapted to the HTML structure */

#toc.toc2 {
  background:#f2f2f2;
  justify-content:space-between;
  margin:1rem 0 2rem;
  padding:1rem
}
#toctitle {
  font-size:1.25rem;
  font-weight:400;
  line-height:1.6667;
  margin-top:0;
  text-transform:none
}
#toc li {
  margin-bottom:.25em;
  padding-left:0;
  list-style:none;
}
#toc a,
#toc a:visited {
  color:black;
  display:inline-block;
  text-decoration:none;
}

.sectlevel1 {
  padding-left:0;
}

.sectlevel2,
.sectlevel3,
.sectlevel4,
.sectlevel5 {
  padding-left:1em;
}

h3 {
  color:#464646;
  font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);
  font-size:var(--rh-font-size-body-text-lg,1.125rem)
}

li {
  display:list-item;
  margin:0;
  padding:0;
  text-align:-webkit-match-parent
}

*,
:after,
:before,
:after,
:before {
  box-sizing:border-box
}
img,
object,
svg,
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
hr {
  border:0;
  border-top:.0625rem solid #d2d2d2;
  clear:both;
  margin:1rem 0
}
a {
  color:#06c;
  text-decoration:underline
}
a:focus,
a:hover {
  color:#036
}
p {
  margin:1.49963rem 0
}
li>p {
  margin:0
}
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-weight:400;
  margin:0 0 .625rem;
  color:#464646;
}
h1 {
  font-size:2rem;
  margin:2rem 0
}
h2 {
  font-size:2rem;
  margin:2rem 0
}
h3 {
  font-size:1.65rem;
  font-weight:400
}
h4 {
  font-size:1.5rem
}
h5 {
  font-size:1.25rem
  font-weight:400
}
h6 {
  font-size:1.125rem;
  font-weight:500;
  line-height:1.6667
}
ol ::marker,
ul ::marker {
  font:inherit
}
li {
  margin:0 0 .5em;
  padding:0
}
li>p {
  margin:.5rem 0
}
li>ol,
li>ul {
  margin:0
}
dl dd {
  margin:.5rem 0 .5rem 1rem
}
dl dd>p {
  margin:.5rem 0
}
.informaltable,
.table-contents,
.table-wrapper {
  max-height:var(--rh-table--maxHeight);
  overflow:auto
}
table {
  border:0;
  font-size:1rem;
  line-height:1.6667;
  /* commented out as it breaks on Safari on Mac // table-layout:fixed */
}
table caption {
  color:#585858;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:left
}
table td,
table th {
  border:0;
  border-bottom:.0625rem solid #d2d2d2;
  border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);
  padding:.5em 1rem
}
table td.halign-left,
table th.halign-left {
  text-align:left
}
table td.halign-center,
table th.halign-center,
table td.halign-center,
table th.halign-center {
  text-align:center
}
table td.halign-right,
table th.halign-right {
  text-align:right
}
table td.valign-top,
table th.valign-top {
  vertical-align:top
}
table td.valign-middle,
table th.valign-middle {
  vertical-align:middle
}
table td.valign-bottom,
table th.valign-bottom {
  vertical-align:bottom
}
table thead td,
table thead th {
  background:#f5f5f5;
  font-weight:600
}
rh-table table,
rh-table.rh-table--expanded-vertically {
  max-height:-moz-max-content;
  max-height:max-content
}
pre.nowrap {
  overflow:auto;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
.listingblock pre {
  background:transparent
}

[class] pre code {
  background:inherit;
  color:inherit;
  font-family:inherit;
  font-size:inherit;
  font-weight:inherit;
  line-height:inherit;
  padding:0
}
.keycap,
kbd {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
.keycap strong,
.keycap strong {
  font-weight:inherit
}
kbd.keyseq,
kbd.keyseq {
  background:transparent;
  border:0;
  box-shadow:none;
  padding:0
}
kbd.keyseq kbd,
kbd.keyseq kbd {
  display:inline-block;
  margin:0 .375rem
}
kbd.keyseq kbd:first-child,
kbd.keyseq kbd:first-child {
  margin-left:0
}
b.button {
  font-size:90%;
  font-weight:700;
  padding:.1875rem
}
b.button:before {
  content:"["
}
b.button:after {
  content:"]"
}
html {
  font-family:sans-serif;
  -ms-text-size-adjust:100%;
  -webkit-text-size-adjust:100%
}
body {
  margin:0
}
audio,
canvas,
progress,
video {
  display:inline-block;
  vertical-align:baseline
}
audio:not([controls]) {
  display:none;
  height:0
}
[hidden],
template {
  display:none
}
a {
  background:transparent
}
a:active,
a:hover {
  outline:0
}
abbr[title] {
  border-bottom:.0625rem dotted
}
dfn {
  font-style:italic
}

mark {
  background:#ff0;
  color:#000
}
small {
  font-size:80%
}
sub,
sup {
  font-size:75%;
  line-height:0;
  position:relative;
  vertical-align:baseline
}
sup {
  top:-.5em
}
sub {
  bottom:-.25em
}
img {
  border:0
}
svg:not(:root) {
  overflow:hidden
}
figure {
  margin:1em 2.5rem
}
hr {
  box-sizing:content-box;
  height:0
}
code,
kbd,
pre,
samp {
  font-family:monospace,monospace;
  font-size:1em
}
button,
optgroup,
select,
textarea,
.rhdocsinput {
  color:inherit;
  font:inherit;
  margin:0
}
button {
  overflow:visible
}
button,
select {
  text-transform:none
}
button,
html input[type=button],
input[type=reset],
input[type=submit] {
  -moz-appearance:button;
  appearance:button;
  -webkit-appearance:button;
  cursor:pointer
}
button[disabled],
html input[disabled] {
  cursor:default
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border:0;
  padding:0
}
input {
  line-height:normal
}
input[type=checkbox],
input[type=radio] {
  box-sizing:border-box;
  padding:0
}
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  height:auto
}
input[type=search] {
  -moz-appearance:textfield;
  appearance:textfield;
  -webkit-appearance:textfield;
  box-sizing:content-box
}
input[type=search]::-webkit-search-cancel-button,
input[type=search]::-webkit-search-decoration {
  -webkit-appearance:none
}
fieldset {
  border:.0625rem solid silver;
  margin:0 .125rem;
  padding:.35em .625em .75em
}
legend {
  border:0;
  padding:0
}
textarea {
  overflow:auto
}
optgroup {
  font-weight:700
}
table {
  border-collapse:collapse;
  border-spacing:0
}
td,
th {
  padding:0
}

.admonitionblock>div:nth-child(2),
.caution>div:nth-child(2),
.important>div:nth-child(2),
.note>div:nth-child(2),
.tip>div:nth-child(2),
.warning>div:nth-child(2) {
  margin:.5rem 0
}
.admonitionblock>div:nth-child(2)>:first-child,
.caution>div:nth-child(2)>:first-child,
.important>div:nth-child(2)>:first-child,
.note>div:nth-child(2)>:first-child,
.tip>div:nth-child(2)>:first-child,
.warning>div:nth-child(2)>:first-child {
  margin-top:0
}
.admonitionblock>div:nth-child(2)>:last-child,
.caution>div:nth-child(2)>:last-child,
.important>div:nth-child(2)>:last-child,
.note>div:nth-child(2)>:last-child,
.tip>div:nth-child(2)>:last-child,
.warning>div:nth-child(2)>:last-child {
  margin-bottom:0
}
.listingblock+.listingblock,
pre+pre,
pre[class]+pre[class] {
  margin-top:2rem
}
.listingblock {
  background:#f8f8f8;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0;
  border: 1px solid grey;
  border-radius:.1rem;
}
.listingblock:before {
  background-repeat:no-repeat;
  background-size:6.25rem 100%;
  bottom:var(--scrollbar__height,1px);
  content:"";
  display:block;
  height:7.125rem;
  max-height:100%;
  max-height:calc(100% - var(--scrollbar__height, 2px));
  position:absolute;
  right:var(--scrollbar__width,6px);
  top:.0625rem;
  width:4.0625rem;
  z-index:1
}

.colist>ol {
  counter-reset:colist;
  list-style:none;
  margin:1rem 0 2rem;
  padding:0
}
.colist>ol>li {
  counter-increment:colist;
  margin:.5rem 0;
  padding-left:1.75rem;
  position:relative;
}
.colist>ol>li:before {
  content:counter(colist);
  left:0;
  position:absolute;
  top:.1875rem
}
.colist>ol>li:before,
.conum {
  background:#06c;
  border-radius:50%;
  color:#fff;
  display:inline-block;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-style:normal;
  font-weight:600;
  height:1.25rem;
  line-height:1.35rem;
  padding:0;
  text-align:center;
  top:-.125em;
  vertical-align:middle;
  width:1.25rem
}
.colist div.paragraph {
  margin:0
}

rh-table {
  display:block
}
::-webkit-scrollbar,
:host ::-webkit-scrollbar {
  height:.625rem;
  width:.625rem
}
::-webkit-scrollbar,
::-webkit-scrollbar-track,
:host ::-webkit-scrollbar,
:host ::-webkit-scrollbar-track {
  background-color:#d6d6d6
}
::-webkit-scrollbar-thumb,
:host ::-webkit-scrollbar-thumb {
  background-color:#8e8e8e
}
*,
:host * {
  scrollbar-color:#8e8e8e #d6d6d6
}
p:empty,
p:empty {
  display:none
}
.book {
  font-size: var(--rh-font-size-body-text-lg,1.125rem);
  font-weight: var(--rh-font-weight-body-text-regular,400);
  line-height: 1.6667;
  padding-left: 6rem;
  padding-right: 6rem;
  padding-top: var(--rh-space-3xl,4rem);
  max-width: 1400px;
}

.book[class] h1 code,
.book[class] h2 code,
.book[class] h3 code,
.book[class] h4 code,
.book[class] h5 code,
.book[class] h6 code,
[class] h1 code,
[class] h2 code,
[class] h3 code,
[class] h4 code,
[class] h5 code,
[class] h6 code {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
details[class] {
  list-style:none;
  margin:1rem 0 3rem;
  padding:0
}

.preamble {
  margin:0 0 2rem
}
.sect1 {
  margin:2rem 0 1rem
}
:host .sect1,
cp-documentation .sect1 {
  margin:0 0 2rem;
  padding:.0625rem 0 0
}
:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,
:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child {
  margin-top:0
}
.listingblock,
.literalblock {
  margin:1rem 0
}
.quoteblock,
.verseblock {
  border-left:.25rem solid #d2d2d2;
  margin:1rem 0;
  padding:1rem 1rem 1rem 2rem
}
.quoteblock.pullleft,
.verseblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .quoteblock.pullleft,
  .verseblock.pullleft {
    margin-left:-1rem
  }
}
.quoteblock.pullright,
.verseblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-10rem
  }
}
.quoteblock>:first-child,
.verseblock>:first-child {
  margin-top:0
}
.quoteblock .content,
.verseblock .content {
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.25rem;
  line-height:1.6667
}
.quoteblock .attribution,
.verseblock .attribution {
  font-size:.875rem;
  font-style:italic;
  font-weight:600;
  line-height:1.6667;
  text-transform:uppercase
}
.quoteblock .attribution .citetitle,
.verseblock .attribution .citetitle {
  color:#585858
}
.quoteblock .attribution cite,
.verseblock .attribution cite {
  font-size:1em
}
.quoteblock blockquote {
  font-style:italic;
  margin:0;
  padding:0
}
.quoteblock blockquote .content>:first-child {
  margin-top:0
}
.quoteblock blockquote .content>:first-child:before {
  color:#e00;
  content:"â€œ";
  display:block;
  float:left;
  font-size:2.75rem;
  font-style:normal;
  line-height:1.125em;
  margin-right:.5rem
}
.quoteblock blockquote .content>:first-child .content>:first-child:before {
  content:none
}
.imageblock {
  margin:1rem 0
}
.imageblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .imageblock.pullleft {
    margin-left:-1rem
  }
}
.imageblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .imageblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .imageblock.pullright {
    margin-right:-10rem
  }
}
.imageblock.interrupter {
  margin:2rem 0
}
@media (min-width:768px) {
  .imageblock.interrupter {
    margin-left:-1rem;
    margin-right:-2rem
  }
  .imageblock.interrupter .caption {
    margin-left:1rem;
    margin-right:2rem
  }
}
@media (min-width:1100px) {
  .imageblock.interrupter {
    margin-right:-10rem
  }
  .imageblock.interrupter .caption {
    margin-right:10rem
  }
}
.imageblock.interrupter img {
  max-width:100%
}
.imageblock .caption {
  color:#585858;
  display:block;
  font-size:.875rem;
  line-height:1.6667;
  margin:.5rem 0 0
}
.rhdocs-footnotes {
  border-top:.0625rem solid #d2d2d2;
  margin:3rem 0 1rem;
  padding:1rem 0 0
}
.rhdocs-footnotes>ol {
  margin:0;
  padding:0 0 0 1.5rem
}
@supports (counter-reset:footnotenum) {
  .rhdocs-footnotes>ol {
    counter-reset:footnotenum;
    list-style:none;
    padding:0
  }
  .rhdocs-footnotes>ol>li {
    counter-increment:footnotenum
  }
  .rhdocs-footnotes>ol>li:before {
    color:#585858;
    content:"[" counter(footnotenum) "]";
    display:inline-block;
    margin-right:.25rem
  }
}
#footer {
  background:#ededed;
  color:#151515;
  font-size:.875rem;
  line-height:1.6667;
  margin:3rem 0 0;
  padding:1rem
}
.center {
  margin-left:auto;
  margin-right:auto
}
.stretch {
  width:100%
}

pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.language-none,
code.language-text,
code.language-txt,
pre.language-none,
pre.language-text,
pre.language-txt {
  color:#151515
}
code[class*=language-] ::-moz-selection,
code[class*=language-]::-moz-selection,
pre[class*=language-] ::-moz-selection,
pre[class*=language-]::-moz-selection {
  background:#cceae7;
  color:#263238
}
code[class*=language-] ::selection,
code[class*=language-]::selection,
pre[class*=language-] ::selection,
pre[class*=language-]::selection {
  background:#cceae7;
  color:#263238
}
:not(pre)>code[class*=language-] {
  border-radius:.2em;
  padding:.1em;
  white-space:normal
}
.token.atrule {
  color:#40199a
}
.token.attr-name {
  color:#06c
}
.token.attr-value,
.token.attribute {
  color:#b300b3
}
.token.boolean {
  color:#40199a
}
.token.builtin,
.token.cdata,
.token.char,
.token.class,
.token.class-name {
  color:#06c
}
.token.comment {
  color:#6a6e73
}
.token.constant {
  color:#40199a
}
.token.deleted {
  color:#c9190b
}
.token.doctype {
  color:#6a6e73
}
.token.entity {
  color:#c9190b
}
.token.function {
  color:#40199a
}
.token.hexcode {
  color:#b300b3
}
.token.id,
.token.important {
  color:#40199a;
  font-weight:700
}
.token.inserted {
  color:#06c
}
.token.keyword {
  color:#40199a
}
.token.number {
  color:#b300b3
}
.token.operator {
  color:#06c
}
.token.prolog {
  color:#6a6e73
}
.token.property {
  color:#06c
}
.token.pseudo-class,
.token.pseudo-element {
  color:#b300b3
}
.token.punctuation,
.token.regex {
  color:#06c
}
.token.selector {
  color:#c9190b
}
.token.string {
  color:#b300b3
}
.token.symbol {
  color:#40199a
}
.token.unit {
  color:#b300b3
}
.token.url,
.token.variable {
  color:#c9190b
}

@media print {
  .field code,
  .field pre,
  code[class*=language-],
  pre,
  pre[class*=language-] {
    white-space:pre-wrap!important;
    word-wrap:break-word!important;
    overflow-wrap:break-word!important;
    word-break:break-word!important
  }
}

.book>.titlepage:not(:last-child),
.chapter,
section[id] {
  padding-bottom:3.75rem
}
.book>.titlepage .chapter:last-child,
.book>.titlepage section[id]:last-child,
.chapter .chapter:last-child,
.chapter section[id]:last-child,
section[id] .chapter:last-child,
section[id] section[id]:last-child {
  margin-bottom:-3.75rem
}
.listingblock+section[id],
pre+section[id] {
  padding-top:3.75rem
}
.cta-link {
  font-size:inherit
}
a {
  word-wrap:break-word;
  overflow-wrap:break-word
}
.caution,
.important,
.note,
.tip,
.warning {
  padding:.8888888889em;
  position:relative
}
.caution {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.important {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.note {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.tip {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.warning {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.book>.titlepage,
.chapter,
section[id] {
  padding-bottom:var(--rh-space-4xl,64px)
}

.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.paragraph {
  margin:1.49963rem 0
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
dd {
  margin-bottom:2.5rem
}

.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}

.annotator-outer[class][class] {
  display:none;
  flex-direction:column;
  flex-grow:1;
  height:auto;
  margin:0;
  position:static;
  width:auto
}
@media (min-width:1400px) {
  .annotator-outer[class][class] {
    display:flex
  }
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
.title {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0;
  text-transform:none
}
.paragraph>.title[class]+.content>:first-child,
.paragraph>.title[class]+p,
p.title[class]+.content>:first-child,
p.title[class]+p {
  margin-top:0
}
[class] pre .caution,
[class] pre .important,
[class] pre .note,
[class] pre .tip,
[class] pre .warning {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
[class] pre .caution:after,
[class] pre .important:after,
[class] pre .note:after,
[class] pre .tip:after,
[class] pre .warning:after {
  content:none
}
[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}
[class] .author {
  margin-bottom:1.5rem
}
[class] .author .author {
  margin-bottom:0
}
table {
  margin:2rem 0
}
[class] table {
  width:auto
}
table .table-contents table {
  max-width:100%;
  overflow:auto
}
rh-table table {
  margin:0;
  max-width:9999em;
  overflow:visible
}
td,
th {
  border-left:0;
  padding:.5em 1rem;
  transition:background .25s ease-out
}
td.content--md[class][class],
th.content--md[class][class] {
  min-width:13em
}
td.content--lg[class][class],
th.content--lg[class][class] {
  min-width:20em
}
thead th {
  padding-top:1.5em
}
caption {
  color:currentColor;
  color:var(--pfe-table__caption--Color,currentColor);
  font-weight:700;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:center
}
.revhistory table td,
.revhistory table th {
  border-color:transparent
}
.revhistory table td {
  padding:.625rem .875rem
}
.revhistory table.simplelist {
  margin:0
}
@media print {
  #masthead {
    display:none!important
  }
}
.rh-table--is-full-screen #to-top {
  display:none
}
body {
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  background-color:white;
  font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);
  font-size:var(--rh-body-copy-lage,1.125rem);
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
rh-codeblock::slotted(#content) {
  border-radius:.25rem;
  padding:var (--rh-space-lg,16px)
}
rh-codeblock .screen {
  display:grid;
  grid-template-columns:1fr 4.375rem
}
rh-codeblock[class][class][class][class][class] {
  max-width:99999em
}
pre {
  border:0;
  max-height:-moz-max-content;
  max-height:max-content
}
pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
rh-code-block>div.codeblock__inner-wrapper>pre,
rh-code-block>div.codeblock__inner-wrapper>pre[class] {
  margin:0;
  padding:0;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.literal {
  background:#eee;
  border-radius:.25rem;
  color:#000;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
code.literal,
kbd,
span.keycap {
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace
}
kbd,
span.keycap {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
ol,
ul {
  margin:1rem 0;
  padding:0 0 0 1.5rem
}
._additional-resources[class][class],
._additional-resources[class][class][id]:last-child {
  background:#fff;
  border:.0625rem solid #d2d2d2;
  border-radius:.1875rem;
  margin:2em 0 4em;
  padding:2rem 2rem 1rem
}
._additional-resources[class][class] ul {
  border:0;
  list-style:none;
  margin:0;
  padding:0;
  position:relative
}
._additional-resources[class][class] li {
  border-bottom:.0625rem solid #d2d2d2;
  box-sizing:content-box;
  margin:0;
  padding:1rem 1.5rem 1rem 0;
  -moz-column-break-inside:avoid;
  break-inside:avoid
}
._additional-resources[class][class] li:last-child {
  border:0
}
section.section#additional_resource .additional-resources__heading,
section.section#additional_resource .heading,
section.section#additional_resource h1,
section.section#additional_resource h2,
section.section#additional_resource h3,
section.section#additional_resource h4,
section.section#additional_resource h5,
section.section#additional_resource h6,
section.section#additional_resource p.title {
  display:block;
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  font-weight:700;
  line-height:1.5rem;
  margin:0 0 .5rem;
  padding:0;
  text-transform:uppercase
}
section.section:first-of-type {
  margin-top:var(--rh-space-4xl,64px)
}
section.section p {
  margin-bottom:var(--rh-space-lg,16px);
  margin-top:0
}


dl {
  display:block;
  margin-block-end:1em;
  margin-block-start:1em;
  margin-inline-end:0;
  margin-inline-start:0
}
.paragraph {
  margin:1.49963rem 0
}
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.book[class] .author {
  margin-bottom:1.5rem
}
.book[class] .author .author {
  margin-bottom:0
}
.paragraph>.title[class],
p.title[class] {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0
}
.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}
code {
  background:#eee;
  color:#000;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
.book[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
dl {
  margin:1rem 0
}
dl dt {
  font-weight:600;
  margin:.5rem 0
}
ol ol {
  list-style:lower-roman
}
.codeblock--processed pf-clipboard-copy::part(input),
.codeblock--processed pf-clipboard-copy::part(span) {
  display:none
}
.token.tag {
  color:#c9190b
}

.admonitionblock {
  margin-bottom:var(--rh-space-lg,1rem)
}
.guibutton,
.guimenu,
.guimenuitem {
  font-weight:700
}
.guibutton {
  font-size:90%;
  padding:.1875rem
}
.guibutton:before {
  content:"["
}
.guibutton:after {
  content:"]"
}
.book,
{
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
pre[hidden] {
  display:none
}
.listingblock {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  margin:1rem 0;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0
}
nopre {
  display:block;
  font-size:.8125rem;
  line-height:1.42857;
  margin:0 0 .625rem;
  word-break:break-all;
  word-wrap:break-word;
  background-color:var(--rh-color-surface-lighter,#f2f2f2);
  border:.0625rem solid #ccc;
  border-radius:.25rem;
  color:#333
}
.book pre,
pre {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  color:#151515;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
pre[class] {
  line-height:1.6667;
  overflow-x:auto
}
*,
:after,
:before {
  box-sizing:border-box
}
:root {
  --rh-space-xs:4px;
  --rh-space-sm:6px;
  --rh-space-md:8px;
  --rh-space-lg:16px;
  --rh-space-xl:24px;
  --rh-space-2xl:32px;
  --rh-space-3xl:48px;
  --rh-space-4xl:64px;
  --rh-space-5xl:80px;
  --rh-space-6xl:96px;
  --rh-space-7xl:128px;
  --rh-font-size-body-text-xs:.75rem;
  --rh-font-size-body-text-sm:.875rem;
  --rh-font-size-body-text-md:1rem;
  --rh-font-size-body-text-lg:1.125rem;
  --rh-font-size-body-text-xl:1.25rem;
  --rh-font-size-body-text-2xl:1.5rem;
  --rh-font-size-heading-xs:1.25rem;
  --rh-font-size-heading-sm:1.5rem;
  --rh-font-size-heading-md:1.75rem;
  --rh-font-size-heading-lg:2.25rem;
  --rh-font-size-heading-xl:2.5rem;
  --rh-font-size-heading-2xl:3rem;
  --pfe-navigation--logo--maxWidth:200px;
  --pfe-navigation__logo--height:40px;
  --pfe-navigation--fade-transition-delay:.5s;
  --pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);
  --pf-global--icon--FontSize--sm:.75rem
}
body,
html {
  font-family:Red Hat Text,sans-serif;
  font-size:var(--rh-font-size-body-text-md,1rem);
  line-height:var(--rh-line-height-body-text,1.5);
}

main {
  line-height:30px
}
section {
  padding-bottom:3rem;
  padding-top:3rem
}
img {
  max-width:100%
}
a {
  color:var(--rh-color-interactive-blue-darker,#06c);
  text-decoration:underline
}
a:hover {
  color:var(--rh-color-interactive-blue-darkest,#004080)
}

@media (min-width:576px) {
  .book {
    max-width:540px
  }
}
@media (min-width:768px) {
  .book {
    max-width:720px
  }
}
@media (min-width:992px) {
  .book {
    max-width:1250px
  }
}
section {
  padding:0
}
.list-unstyled {
  list-style:none;
  padding-left:0
}
.doc-image-link {
  display:inline-block;
  text-decoration:none
}
.admonitionblock{
  margin-bottom:var(--rh-space-lg,1rem)
  font-size:var(--rh-font-size-body-text-md,1rem)
}
.admonitionblock table {
  margin:0;
  border:none;
  width:fit-content
}
.admonitionblock td {
  margin:0;
  border:none;
  display:block
}
.admonitionblock .title {
  margin:0;
  color:#002952;
  font-weight:700
}


</style>
</head>
<body id="enabling-authentication" class="article toc2 toc-left">
<div id="header">
<h1>Enabling authentication in Red Hat Developer Hub</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#authenticating-with-the-guest-user_title-authentication">1. Authenticating with the Guest user</a>
<ul class="sectlevel2">
<li><a href="#authenticating-with-the-guest-user-on-an-operator-based-installation_title-authentication">1.1. Authenticating with the Guest user on an Operator-based installation</a></li>
<li><a href="#authenticating-with-the-guest-user-on-a-helm-based-installation_title-authentication">1.2. Authenticating with the Guest user on a Helm-based installation</a></li>
</ul>
</li>
<li><a href="#assembly-authenticating-with-rhsso">2. Authenticating with Red Hat Single Sign-On (RHSSO)</a>
<ul class="sectlevel2">
<li><a href="#enabling-authentication-with-rhsso">2.1. Enabling authentication with Red Hat Single-Sign On (RHSSO)</a></li>
<li><a href="#provisioning-users-from-rhsso-to-the-software-catalog">2.2. Provisioning users from Red Hat Single-Sign On (RHSSO) to the software catalog</a></li>
<li><a href="#creating-a-custom-transformer-to-provision-users-from-rhsso-to-the-software-catalog">2.3. Creating a custom transformer to provision users from Red Hat Single-Sign On (RHSSO) to the software catalog</a></li>
</ul>
</li>
<li><a href="#authenticating-with-github">3. Authenticating with GitHub</a>
<ul class="sectlevel2">
<li><a href="#enabling-authentication-with-github">3.1. Enabling authentication with GitHub</a></li>
<li><a href="#provisioning-users-from-github-to-the-software-catalog">3.2. Provisioning users from GitHub to the software catalog</a></li>
</ul>
</li>
<li><a href="#assembly-authenticating-with-microsoft-azure">4. Authentication with Microsoft Azure</a>
<ul class="sectlevel2">
<li><a href="#enabling-authentication-with-microsoft-azure">4.1. Enabling authentication with Microsoft Azure</a></li>
<li><a href="#provisioning-users-from-microsoft-azure-to-the-software-catalog">4.2. Provisioning users from Microsoft Azure to the software catalog</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Depending on your organization&#8217;s security policies, you might require to identify and authorize users before giving them access to resources, such as Red Hat Developer Hub.</p>
</div>
<div class="paragraph">
<p>In Developer Hub, authentication and authorization are two separate processes:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Authentication defines the user identity, and passes on this information to Developer Hub.
Read the following chapters to configure authentication in Developer Hub.</p>
</li>
<li>
<p>Authorization defines what the authenticated identity can access or do in Developer Hub.
See <a href="https://docs.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/authorization/index">Authorization</a>.</p>
</li>
</ol>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">Not recommended for production</div>
<div class="paragraph">
<p>To explore Developer Hub features, you can enable the guest user to skip configuring authentication and authorization, log in as the guest user, and access all the features.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The authentication system in Developer Hub is handled by external authentication providers.</p>
</div>
<div class="paragraph">
<p>Developer Hub supports following authentication providers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Red Hat Single-Sign On (RHSSO)</p>
</li>
<li>
<p>GitHub</p>
</li>
<li>
<p>Microsoft Azure</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To identify users in Developer Hub, configure:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>One (and only one) authentication provider for sign-in and identification.</p>
</li>
<li>
<p>Optionally, additional authentication providers for identification, to add more information to the user identity, or enable access to additional external resources.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For each authentication provider, set up the shared secret that the authentication provider and Developer Hub require to communicate, first in the authentication provider, then in Developer Hub.</p>
</div>
<div class="paragraph">
<p>Developer Hub stores user identity information in the Developer Hub software catalog.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="title">Not recommended for production</div>
<div class="paragraph">
<p>To explore the authentication system and use Developer Hub without authorization policies, you can bypass the Developer Hub software catalog and start using Developer Hub without provisioning the Developer Hub software catalog.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>To get, store, and update additional user information, such as group or team ownership, with the intention to use this data to define authorization policies, provision users and groups in the Developer Hub software catalog.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Developer Hub uses a one-way synchronization system to provision users and groups from your authentication system to the Developer Hub software catalog.
Therefore, deleting users and groups by using Developer Hub Web UI or REST API might have unintended consequences.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authenticating-with-the-guest-user_title-authentication">1. Authenticating with the Guest user</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To explore Developer Hub features, you can skip configuring authentication and authorization.
You can configure Developer Hub to log in as a Guest user and access Developer Hub features.</p>
</div>
<div class="sect2">
<h3 id="authenticating-with-the-guest-user-on-an-operator-based-installation_title-authentication">1.1. Authenticating with the Guest user on an Operator-based installation</h3>
<div class="paragraph">
<p>After an Operator-based installation, you can configure Developer Hub to log in as a Guest user and access Developer Hub features.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You <a href="">installed Developer Hub by using the Operator</a>.</p>
</li>
<li>
<p>You <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#proc-add-custom-app-config-file-ocp-operator_admin-rhdh">added a custom Developer Hub application configuration</a>, and have sufficient permissions to modify it.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable the guest user in your Developer Hub custom configuration, <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#proc-add-custom-app-config-file-ocp-operator_admin-rhdh">edit your Developer Hub application configuration</a> with following content:</p>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: development
  providers:
    guest:
      dangerouslyAllowOutsideDevelopment: true</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Go to the Developer Hub login page.</p>
</li>
<li>
<p>To log in with the Guest user account, click <strong>Enter</strong> in the <strong>Guest</strong> tile.</p>
</li>
<li>
<p>In the Developer Hub <strong>Settings</strong> page, your profile name is <strong>Guest</strong>.</p>
</li>
<li>
<p>You can use Developer Hub features.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="authenticating-with-the-guest-user-on-a-helm-based-installation_title-authentication">1.2. Authenticating with the Guest user on a Helm-based installation</h3>
<div class="paragraph">
<p>On a Helm-based installation, you can configure Developer Hub to log in as a Guest user and access Developer Hub features.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3#Install%20and%20Upgrade">Installed Developer Hub by using the Helm Chart</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable the guest user in your Developer Hub custom configuration, <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#proc-add-custom-app-file-openshift-helm_admin-rhdh">configure your Red Hat Developer Hub Helm Chart</a> with following content:</p>
<div class="listingblock">
<div class="title">Red Hat Developer Hub Helm Chart configuration fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">upstream:
  backstage:
    appConfig:
      app:
        baseUrl: 'https://{{- include "janus-idp.hostname" . }}'
      auth:
        environment: development
        providers:
          guest:
            dangerouslyAllowOutsideDevelopment: true</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Go to the Developer Hub login page.</p>
</li>
<li>
<p>To log in with the Guest user account, click <strong>Enter</strong> in the <strong>Guest</strong> tile.</p>
</li>
<li>
<p>In the Developer Hub <strong>Settings</strong> page, your profile name is <strong>Guest</strong>.</p>
</li>
<li>
<p>You can use Developer Hub features.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-authenticating-with-rhsso">2. Authenticating with Red Hat Single Sign-On (RHSSO)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To authenticate users with Red Hat Single Sign-On (RHSSO):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#enabling-authentication-with-rhsso">Enable the OpenID Connect (OIDC) authentication provider in RHDH</a>.</p>
</li>
<li>
<p><a href="#provisioning-users-from-rhsso-to-the-software-catalog">Provision users from Red Hat Single-Sign On (RHSSO) to the software catalog</a>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="enabling-authentication-with-rhsso">2.1. Enabling authentication with Red Hat Single-Sign On (RHSSO)</h3>
<div class="paragraph">
<p>To authenticate users with Red Hat Single Sign-On (RHSSO), enable the OpenID Connect (OIDC) authentication provider in Red Hat Developer Hub.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html/administration_guide_for_red_hat_developer_hub/assembly-add-custom-app-file-openshift_admin-rhdh">added a custom Developer Hub application configuration</a>, and have sufficient permissions to modify it.</p>
</li>
<li>
<p>You have sufficient permissions in RHSSO to create and manage a realm.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To allow Developer Hub to authenticate with RHSSO, complete the steps in RHSSO, to <a href="https://docs.redhat.com/en/documentation/red_hat_single_sign-on/7.6/html-single/getting_started_guide/index#realms-apps_">create a realm and a user</a> and <a href="https://docs.redhat.com/en/documentation/red_hat_single_sign-on/7.6/html-single/getting_started_guide/index#registering-app_">register the Developer Hub application</a>:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Use an existing realm, or <a href="https://docs.redhat.com/en/documentation/red_hat_single_sign-on/7.6/html-single/getting_started_guide/index#create-realm_">create a realm</a>, with a distinctive <strong>Name</strong> such as <em>&lt;my_realm&gt;</em>.
Save the value for the next step:</p>
<div class="ulist">
<ul>
<li>
<p><strong>RHSSO realm base URL</strong>, such as: <em>&lt;your_rhsso_URL&gt;</em>/auth/realms/<em>&lt;your_realm&gt;</em>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>To register your Developer Hub in RHSSO, in the created realm, <a href="https://docs.redhat.com/en/documentation/red_hat_single_sign-on/7.6/html-single/getting_started_guide/index#registering-app_">create a Client ID</a>, with:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>Client ID</strong>: A distinctive client ID, such as <em>&lt;RHDH&gt;</em>.</p>
</li>
<li>
<p><strong>Valid redirect URIs</strong>: Set to the OIDC handler URL: <code>https://<em>&lt;RHDH_URL&gt;</em>/api/auth/oidc/handler/frame</code>.</p>
</li>
<li>
<p>Navigate to the <strong>Credentials</strong> tab and copy the <strong>Client secret</strong>.</p>
</li>
<li>
<p>Save the values for the next step:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Client ID</strong></p>
</li>
<li>
<p><strong>Client Secret</strong></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To prepare for the verification steps, in the same realm, get the credential information for an existing user or <a href="https://docs.redhat.com/en/documentation/red_hat_single_sign-on/7.6/html-single/getting_started_guide/index#create-user_">create a user</a>. Save the user credential information for the verification steps.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To add your RHSSO credentials to your Developer Hub secrets, edit your Developer Hub secrets, such as <code>secrets-rhdh</code>, and add the following key/value pairs:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>AUTH_OIDC_CLIENT_ID</code></dt>
<dd>
<p>Enter the saved <strong>Client ID</strong>.</p>
</dd>
<dt class="hdlist1"><code>AUTH_OIDC_CLIENT_SECRET</code></dt>
<dd>
<p>Enter the saved <strong>Client Secret</strong>.</p>
</dd>
<dt class="hdlist1"><code>AUTH_OIDC_METADATA_URL</code></dt>
<dd>
<p>Enter the saved <strong>RHSSO realm base URL</strong>.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>To set up the RHSSO authentication provider in your Developer Hub custom configuration, edit your custom Developer Hub ConfigMap such as <code>app-config-rhdh</code>, and add the following lines to the <code>app-config-rhdh.yaml</code> content:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with mandatory fields to enable authentication with RHSSO</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    oidc:
      production:
        metadataUrl: ${AUTH_OIDC_METADATA_URL}
        clientId: ${AUTH_OIDC_CLIENT_ID}
        clientSecret: ${AUTH_OIDC_CLIENT_SECRET}
signInPage: oidc</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>environment: production</code></dt>
<dd>
<p>Mark the environment as <code>production</code> to hide the Guest login in the Developer Hub home page.</p>
</dd>
<dt class="hdlist1"><code>metadataUrl</code>, <code>clientId</code>, <code>clientSecret</code></dt>
<dd>
<p>To configure the OIDC provider with your secrets.</p>
</dd>
<dt class="hdlist1"><code>sigInPage: oidc</code></dt>
<dd>
<p>To enable the OIDC provider as default sign-in provider.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Optional: Consider adding the following optional fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dangerouslyAllowSignInWithoutUserInCatalog: true</code></dt>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>To enable authentication without requiring to provision users in the Developer Hub software catalog.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Use this option to explore Developer Hub features, but do not use it in production.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional field to allow authenticating users absent from the software catalog</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    oidc:
      production:
        metadataUrl: ${AUTH_OIDC_METADATA_URL}
        clientId: ${AUTH_OIDC_CLIENT_ID}
        clientSecret: ${AUTH_OIDC_CLIENT_SECRET}
signInPage: oidc
dangerouslyAllowSignInWithoutUserInCatalog: true</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>callbackUrl</code></dt>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>RHSSO callback URL.</p>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>callbackURL</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  providers:
    oidc:
      production:
        callbackUrl: ${AUTH_OIDC_CALLBACK_URL}</code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>tokenEndpointAuthMethod</code></dt>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Token endpoint authentication method.</p>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>tokenEndpointAuthMethod</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  providers:
    oidc:
      production:
        tokenEndpointAuthMethod: ${AUTH_OIDC_TOKEN_ENDPOINT_METHOD}</code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>tokenSignedResponseAlg</code></dt>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Token signed response algorithm.</p>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>tokenSignedResponseAlg</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  providers:
    oidc:
      production:
        tokenSignedResponseAlg: ${AUTH_OIDC_SIGNED_RESPONSE_ALG}</code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>scope</code></dt>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>RHSSO scope.</p>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>scope</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  providers:
    oidc:
      production:
        scope: ${AUTH_OIDC_SCOPE}</code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>signIn.resolvers</code></dt>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>Declarative resolvers to override the default resolver: <code>emailLocalPartMatchingUserEntityName</code>.
The authentication provider tries each sign-in resolver until it succeeds, and fails if none succeed.</p>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>callbackURL</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  providers:
    oidc:
      production:
        signIn:
          resolvers:
            - resolver: preferredUsernameMatchingUserEntityName
            - resolver: emailMatchingUserEntityProfileEmail
            - resolver: emailLocalPartMatchingUserEntityName</code></pre>
</div>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>auth.backstageTokenExpiration</code></dt>
</dl>
</div>
</div>
</div>
<div class="paragraph">
<p>To modify the Developer Hub token expiration from its default value of one hour, note that this refers to the validity of short-term cryptographic tokens, not the session duration. The expiration value must be set between 10 minutes and 24 hours.</p>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>auth.backstageTokenExpiration</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  backstageTokenExpiration: { minutes: <em>&lt;user_defined_value&gt;</em> }</code></pre>
</div>
</div>
<div class="openblock">
<div class="content">

</div>
</div>
<div class="paragraph">
<div class="title">Security consideration</div>
<p>If multiple valid refresh tokens are issued due to frequent refresh token requests, older tokens will remain valid until they expire. To enhance security and prevent potential misuse of older tokens, enable a refresh token rotation strategy in your RHBK realm.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the <strong>Configure</strong> section of the navigation menu, click <strong>Realm Settings</strong>.</p>
</li>
<li>
<p>From the <strong>Realm Settings</strong> page, click the <strong>Tokens</strong> tab.</p>
</li>
<li>
<p>From the <strong>Refresh tokens</strong> section of the <strong>Tokens</strong> tab, toggle the <strong>Revoke Refresh Token</strong> to the <strong>Enabled</strong> position.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Go to the Developer Hub login page.</p>
</li>
<li>
<p>Your Developer Hub sign-in page displays <strong>Sign in using OIDC</strong> and the Guest user sign-in is disabled.</p>
</li>
<li>
<p>Log in with OIDC by using the saved <strong>Username</strong> and <strong>Password</strong> values.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="provisioning-users-from-rhsso-to-the-software-catalog">2.2. Provisioning users from Red Hat Single-Sign On (RHSSO) to the software catalog</h3>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You <a href="#enabling-authentication-with-rhsso">enabled authentication with RHSSO</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable RHSSO member discovery, edit your custom Developer Hub ConfigMap, such as <code>app-config-rhdh</code>, and add the following lines to the <code>app-config-rhdh.yaml</code> content:</p>
<div class="openblock">
<div class="content">
<div id="keycloakOrgProviderId" class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with mandatory <code>keycloakOrg</code> fields</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">dangerouslyAllowSignInWithoutUserInCatalog: false
catalog:
  providers:
    keycloakOrg:
      default:
        baseUrl: ${AUTH_OIDC_METADATA_URL}
        clientId: ${AUTH_OIDC_CLIENT_ID}
        clientSecret: ${AUTH_OIDC_CLIENT_SECRET}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dangerouslyAllowSignInWithoutUserInCatalog: false</code></dt>
<dd>
<p>Allow authentication only for users present in the Developer Hub software catalog.</p>
</dd>
<dt class="hdlist1"><code>baseUrl</code></dt>
<dd>
<p>Your RHSSO server URL, defined when <a href="#enabling-authentication-with-rhsso">enabling authentication with RHSSO</a>.</p>
</dd>
<dt class="hdlist1"><code>clientId</code></dt>
<dd>
<p>Your Developer Hub application client ID in RHSSO, defined when <a href="#enabling-authentication-with-rhsso">enabling authentication with RHSSO</a>.</p>
</dd>
<dt class="hdlist1"><code>clientSecret</code></dt>
<dd>
<p>Your Developer Hub application client secret in RHSSO, defined when <a href="#enabling-authentication-with-rhsso">enabling authentication with RHSSO</a>.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Optional: Consider adding the following optional fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>realm</code></dt>
<dd>
<p>Realm to synchronize.
Default value: <code>master</code>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>realm</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    keycloakOrg:
      default:
        realm: master</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>loginRealm</code></dt>
<dd>
<p>Realm used to authenticate.
Default value: <code>master</code>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>loginRealm</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    keycloakOrg:
      default:
        loginRealm: master</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>userQuerySize</code></dt>
<dd>
<p>User number to query simultaneously.
Default value: <code>100</code>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>userQuerySize</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    keycloakOrg:
      default:
        userQuerySize: 100</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>groupQuerySize</code></dt>
<dd>
<p>Group number to query simultaneously.
Default value: <code>100</code>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>groupQuerySize</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    keycloakOrg:
      default:
        groupQuerySize: 100</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>schedule.frequency</code></dt>
<dd>
<p>To specify custom schedule frequency.
Supports cron, ISO duration, and "human duration" as used in code.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>schedule.frequency</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    keycloakOrg:
      default:
        schedule:
          frequency: { hours: 1 }</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>schedule.timeout</code></dt>
<dd>
<p>To specify custom timeout.
Supports ISO duration and "human duration" as used in code.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>schedule.timeout</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    keycloakOrg:
      default:
        schedule:
          timeout: { minutes: 50 }</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>schedule.initialDelay</code></dt>
<dd>
<p>To specify custom initial delay.
Supports ISO duration and "human duration" as used in code.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>schedule.initialDelay</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    keycloakOrg:
      default:
        schedule:
          initialDelay: { seconds: 15}</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Check the console logs to verify that the synchronization is completed.</p>
<div class="listingblock">
<div class="title">Successful synchronization example:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{"class":"KeycloakOrgEntityProvider","level":"info","message":"Read 3 Keycloak users and 2 Keycloak groups in 1.5 seconds. Committing...","plugin":"catalog","service":"backstage","taskId":"KeycloakOrgEntityProvider:default:refresh","taskInstanceId":"bf0467ff-8ac4-4702-911c-380270e44dea","timestamp":"2024-09-25 13:58:04"}
{"class":"KeycloakOrgEntityProvider","level":"info","message":"Committed 3 Keycloak users and 2 Keycloak groups in 0.0 seconds.","plugin":"catalog","service":"backstage","taskId":"KeycloakOrgEntityProvider:default:refresh","taskInstanceId":"bf0467ff-8ac4-4702-911c-380270e44dea","timestamp":"2024-09-25 13:58:04"}</code></pre>
</div>
</div>
</li>
<li>
<p>Log in with an RHSSO account.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="creating-a-custom-transformer-to-provision-users-from-rhsso-to-the-software-catalog">2.3. Creating a custom transformer to provision users from Red Hat Single-Sign On (RHSSO) to the software catalog</h3>
<div class="paragraph">
<p>To customize how RHSSO users and groups are mapped to Red Hat Developer Hub entities, you can create a backend module that uses the <code>keycloakTransformerExtensionPoint</code> to provide custom user and group transformers for the Keycloak backend.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have <a href="#provisioning-users-from-rhsso-to-the-software-catalog">enabled provisioning users from Red Hat Single-Sign On (RHSSO) to the software catalog</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a new backend module with the <code>yarn new</code> command.</p>
</li>
<li>
<p>Add your custom user and group transformers to the <code>keycloakTransformerExtensionPoint</code>.</p>
<div class="paragraph">
<p>The following is an example of how the backend module can be defined:</p>
</div>
<div class="listingblock">
<div class="title"><code>plugins/<em>&lt;module-name&gt;</em>/src/module.ts</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">import {
  GroupTransformer,
  keycloakTransformerExtensionPoint,
  UserTransformer,
} from '@janus-idp/backstage-plugin-keycloak-backend';

const customGroupTransformer: GroupTransformer = async (
  entity, // entity output from default parser
  realm, // Keycloak realm name
  groups, // Keycloak group representation
) =&gt; {
  /* apply transformations */
  return entity;
};
const customUserTransformer: UserTransformer = async (
  entity, // entity output from default parser
  user, // Keycloak user representation
  realm, // Keycloak realm name
  groups, // Keycloak group representation
) =&gt; {
  /* apply transformations */
  return entity;
};

export const keycloakBackendModuleTransformer = createBackendModule({
  pluginId: 'catalog',
  moduleId: 'keycloak-transformer',
  register(reg) {
    reg.registerInit({
      deps: {
        keycloak: keycloakTransformerExtensionPoint,
      },
      async init({ keycloak }) {
        keycloak.setUserTransformer(customUserTransformer);
        keycloak.setGroupTransformer(customGroupTransformer);
        /* highlight-add-end */
      },
    });
  },
});</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>The module&#8217;s <code>pluginId</code> must be set to <code>catalog</code> to match the <code>pluginId</code> of the <code>keycloak-backend</code>; otherwise, the module fails to initialize.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Install this new backend module into your Developer Hub backend.</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="javascript">backend.add(import(backstage-plugin-catalog-backend-module-keycloak-transformer))</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Verification</div>
<ul>
<li>
<p>Developer Hub imports the users and groups each time when started.
Check the console logs to verify that the synchronization is completed.</p>
<div class="listingblock">
<div class="title">Successful synchronization example:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{"class":"KeycloakOrgEntityProvider","level":"info","message":"Read 3 Keycloak users and 2 Keycloak groups in 1.5 seconds. Committing...","plugin":"catalog","service":"backstage","taskId":"KeycloakOrgEntityProvider:default:refresh","taskInstanceId":"bf0467ff-8ac4-4702-911c-380270e44dea","timestamp":"2024-09-25 13:58:04"}
{"class":"KeycloakOrgEntityProvider","level":"info","message":"Committed 3 Keycloak users and 2 Keycloak groups in 0.0 seconds.","plugin":"catalog","service":"backstage","taskId":"KeycloakOrgEntityProvider:default:refresh","taskInstanceId":"bf0467ff-8ac4-4702-911c-380270e44dea","timestamp":"2024-09-25 13:58:04"}</code></pre>
</div>
</div>
</li>
<li>
<p>After the first import is complete, navigate to the <strong>Catalog</strong> page and select <strong>User</strong> to view the list of users.</p>
</li>
<li>
<p>When you select a user, you see the information imported from RHSSO.</p>
</li>
<li>
<p>You can select a group, view the list, and access or review the information imported from RHSSO.</p>
</li>
<li>
<p>You can log in with an RHSSO account.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="authenticating-with-github">3. Authenticating with GitHub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To authenticate users with GitHub or GitHub Enterprise:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#enabling-authentication-with-github">Enable the GitHub authentication provider in Developer Hub</a>.</p>
</li>
<li>
<p><a href="#provisioning-users-from-github-to-the-software-catalog">Provision users from GitHub to the software catalog</a>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="enabling-authentication-with-github">3.1. Enabling authentication with GitHub</h3>
<div class="paragraph">
<p>To authenticate users with GitHub, enable the GitHub authentication provider in Red Hat Developer Hub.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html/administration_guide_for_red_hat_developer_hub/assembly-add-custom-app-file-openshift_admin-rhdh">added a custom Developer Hub application configuration</a>, and have sufficient permissions to modify it.</p>
</li>
<li>
<p>You have sufficient permissions in GitHub to create and manage a <a href="https://docs.github.com/en/apps/overview">GitHub App</a>.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To allow Developer Hub to authenticate with GitHub, create a GitHub App.
Opt for a GitHub App instead of an OAuth app to use fine-grained permissions, gain more control over which repositories the application can access, and use short-lived tokens.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><a href="https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app">Register a GitHub App</a> with the following configuration:</p>
<div class="ulist">
<ul>
<li>
<p><strong>GitHub App name</strong>: Enter a unique name identifying your GitHub App, such as <em>&lt;Red Hat Developer Hub&gt;</em>-<em>&lt;GUID&gt;</em>.</p>
</li>
<li>
<p><strong>Homepage URL</strong>: Your Developer Hub URL: <code>https://<em>&lt;my_developer_hub_url&gt;</em></code>.</p>
</li>
<li>
<p><strong>Authorization callback URL</strong>: Your Developer Hub authentication backend URL: <code>https://<em>&lt;my_developer_hub_url&gt;</em>/api/auth/github/handler/frame</code>.</p>
</li>
<li>
<p><strong>Webhook URL</strong>: Your Developer Hub URL: <code>https://<em>&lt;my_developer_hub_url&gt;</em></code>.</p>
</li>
<li>
<p><strong>Webhook secret</strong>: Provide a strong secret.</p>
</li>
<li>
<p><strong>Repository permissions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Enable <code>Read-only</code> access to:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Administration</strong></p>
</li>
<li>
<p><strong>Commit statuses</strong></p>
</li>
<li>
<p><strong>Contents</strong></p>
</li>
<li>
<p><strong>Dependabot alerts</strong></p>
</li>
<li>
<p><strong>Deployments</strong></p>
</li>
<li>
<p><strong>Pull Requests</strong></p>
</li>
<li>
<p><strong>Webhooks</strong></p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
If you plan to make changes using the GitHub API, ensure that <code>Read and write</code> permissions are enabled instead of <code>Read-only</code>.
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Toggle other permissions as per your needs.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Organization permissions</strong>:</p>
<div class="ulist">
<ul>
<li>
<p>Enable <code>Read-only</code> access to <strong>Members</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>For <strong>Where can this GitHub App be installed?</strong>, select <code>Only on this account</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>In the <strong>General</strong> &#8594; <strong>Clients secrets</strong> section, click <strong>Generate a new client secret</strong>.</p>
</li>
<li>
<p>In the <strong>General</strong> &#8594; <strong>Private keys</strong> section, click <strong>Generate a private key</strong>.</p>
</li>
<li>
<p>In the <strong>Install App</strong> tab, choose an account to install your GitHub App on.</p>
</li>
<li>
<p>Save the following values for the next step:</p>
<div class="ulist">
<ul>
<li>
<p><strong>App ID</strong></p>
</li>
<li>
<p><strong>Client ID</strong></p>
</li>
<li>
<p><strong>Client secret</strong></p>
</li>
<li>
<p><strong>Private key</strong></p>
</li>
<li>
<p><strong>Webhook secret</strong></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To add your GitHub credentials to your Developer Hub secrets, edit your Developer Hub secrets, such as <code>secrets-rhdh</code>, and add the following key/value pairs:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>AUTH_GITHUB_APP_ID</code></dt>
<dd>
<p>Enter the saved <strong>App ID</strong>.</p>
</dd>
<dt class="hdlist1"><code>AUTH_GITHUB_CLIENT_ID</code></dt>
<dd>
<p>Enter the saved <strong>Client ID</strong>.</p>
</dd>
<dt class="hdlist1"><code>GITHUB_HOST_DOMAIN</code></dt>
<dd>
<p>Enter your GitHub host domain: <code>github.com</code> unless you are using GitHub Enterprise.</p>
</dd>
<dt class="hdlist1"><code>GITHUB_ORGANIZATION</code></dt>
<dd>
<p>Enter your GitHub organization name, such as `<em>&lt;your_github_organization_name&gt;</em>'.</p>
</dd>
<dt class="hdlist1"><code>GITHUB_ORG_URL</code></dt>
<dd>
<p>Enter <code>$GITHUB_HOST_DOMAIN/$GITHUB_ORGANIZATION</code>.</p>
</dd>
<dt class="hdlist1"><code>GITHUB_CLIENT_SECRET</code></dt>
<dd>
<p>Enter the saved <strong>Client Secret</strong>.</p>
</dd>
<dt class="hdlist1"><code>GITHUB_PRIVATE_KEY_FILE</code></dt>
<dd>
<p>Enter the saved <strong>Private key</strong>.</p>
</dd>
<dt class="hdlist1"><code>GITHUB_WEBHOOK_URL</code></dt>
<dd>
<p>Enter your Developer Hub URL: <code>https://<em>&lt;my_developer_hub_url&gt;</em></code>.</p>
</dd>
<dt class="hdlist1"><code>GITHUB_WEBHOOK_SECRET</code></dt>
<dd>
<p>Enter the saved <strong>Webhook secret</strong>.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>To set up the GitHub authentication provider and enable integration with the GitHub API in your Developer Hub custom configuration, edit your custom Developer Hub ConfigMap such as <code>app-config-rhdh</code>, and add the following lines to the <code>app-config-rhdh.yaml</code> content:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with mandatory fields to enable authentication with GitHub</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    github:
      production:
        clientId: ${AUTH_GITHUB_CLIENT_ID}
        clientSecret: ${AUTH_GITHUB_CLIENT_SECRET}
integrations:
  github:
    - host: ${GITHUB_HOST_DOMAIN}
      apps:
        - appId: ${AUTH_GITHUB_APP_ID}
          clientId: ${AUTH_GITHUB_CLIENT_ID}
          clientSecret: ${GITHUB_CLIENT_SECRET}
          webhookUrl: ${GITHUB_WEBHOOK_URL}
          webhookSecret: ${GITHUB_WEBHOOK_SECRET}
          privateKey: |
            ${GITHUB_PRIVATE_KEY_FILE}
signInPage: github</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>environment: production</code></dt>
<dd>
<p>Mark the environment as <code>production</code> to hide the Guest login in the Developer Hub home page.</p>
</dd>
<dt class="hdlist1"><code>clientId</code>, <code>clientSecret</code>, <code>host</code>, <code>appId</code>, <code>webhookUrl</code>, <code>webhookSecret</code>, <code>privateKey</code></dt>
<dd>
<p>Use the Developer Hub application information that you have created in GitHub and configured in OpenShift as secrets.</p>
</dd>
<dt class="hdlist1"><code>sigInPage: github</code></dt>
<dd>
<p>To enable the GitHub provider as default sign-in provider.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Optional: Consider adding the following optional fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dangerouslyAllowSignInWithoutUserInCatalog: true</code></dt>
<dd>
<p>To enable authentication without requiring to provision users in the Developer Hub software catalog.</p>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Use <code>dangerouslyAllowSignInWithoutUserInCatalog</code> to explore Developer Hub features, but do not use it in production.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional field to allow authenticating users absent from the software catalog</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    github:
      production:
        clientId: ${AUTH_GITHUB_CLIENT_ID}
        clientSecret: ${AUTH_GITHUB_CLIENT_SECRET}
integrations:
  github:
    - host: ${GITHUB_HOST_DOMAIN}
      apps:
        - appId: ${AUTH_GITHUB_APP_ID}
          clientId: ${AUTH_GITHUB_CLIENT_ID}
          clientSecret: ${GITHUB_CLIENT_SECRET}
          webhookUrl: ${GITHUB_WEBHOOK_URL}
          webhookSecret: ${GITHUB_WEBHOOK_SECRET}
          privateKey: |
            ${GITHUB_PRIVATE_KEY_FILE}
signInPage: github
dangerouslyAllowSignInWithoutUserInCatalog: true</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>callbackUrl</code></dt>
<dd>
<p>The callback URL that GitHub uses when initiating an OAuth flow, such as: <em>&lt;your_intermediate_service_url/handler&gt;</em>.
Define it when Developer Hub is not the immediate receiver, such as in cases when you use one OAuth app for many Developer Hub instances.</p>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>enterpriseInstanceUrl</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  providers:
    github:
      production:
        callbackUrl: <em>&lt;your_intermediate_service_url/handler&gt;</em></code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>enterpriseInstanceUrl</code></dt>
<dd>
<p>Your GitHub Enterprise URL.
Requires you defined the <code>GITHUB_HOST_DOMAIN</code> secret in the previous step.</p>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>enterpriseInstanceUrl</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  providers:
    github:
      production:
        enterpriseInstanceUrl: ${GITHUB_HOST_DOMAIN}</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
<div class="paragraph">
<p>To enable GitHub integration with a different authentication provider, complete the following configurations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Add the GitHub provider to the existing <code>auth</code> section.</p>
</li>
<li>
<p>Keep the <code>signInPage</code> section from your authentication provider configuration.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with mandatory fields to enable GitHub integration and use a different authentication provider</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    github:
      production:
        clientId: ${AUTH_GITHUB_CLIENT_ID}
        clientSecret: ${AUTH_GITHUB_CLIENT_SECRET}
    <em>&lt;your_other_authentication_providers_configuration&gt;</em>
integrations:
  github:
    - host: ${GITHUB_HOST_DOMAIN}
      apps:
        - appId: ${AUTH_GITHUB_APP_ID}
          clientId: ${AUTH_GITHUB_CLIENT_ID}
          clientSecret: ${GITHUB_CLIENT_SECRET}
          webhookUrl: ${GITHUB_WEBHOOK_URL}
          webhookSecret: ${GITHUB_WEBHOOK_SECRET}
          privateKey: |
            ${GITHUB_PRIVATE_KEY_FILE}
signInPage: <em>&lt;your_main_authentication_provider&gt;</em></code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Go to the Developer Hub login page.</p>
</li>
<li>
<p>Your Developer Hub sign-in page displays <strong>Sign in using GitHub</strong> and the Guest user sign-in is disabled.</p>
</li>
<li>
<p>Log in with GitHub.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="provisioning-users-from-github-to-the-software-catalog">3.2. Provisioning users from GitHub to the software catalog</h3>
<div class="paragraph">
<p>To authenticate users, Red Hat Developer Hub requires their presence in the software catalog.
Consider configuring Developer Hub to provision users from GitHub to the software catalog on schedule, rather than provisioning the users manually.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have <a href="#enabling-authentication-with-github">enabled authentication with GitHub</a>, including the following secrets:</p>
<div class="ulist">
<ul>
<li>
<p><code>GITHUB_HOST_DOMAIN</code></p>
</li>
<li>
<p><code>GITHUB_ORGANIZATION</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable GitHub member discovery, edit your custom Developer Hub ConfigMap, such as <code>app-config-rhdh</code>, and add the following lines to the <code>app-config-rhdh.yaml</code> content:</p>
<div class="openblock">
<div class="content">
<div id="githubProviderId" class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with mandatory <code>github</code> fields</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">dangerouslyAllowSignInWithoutUserInCatalog: false
catalog:
  providers:
    github:
      providerId:
        organization: "${GITHUB_ORGANIZATION}"
        schedule:
          frequency:
            minutes: 30
          initialDelay:
            seconds: 15
          timeout:
            minutes: 15
    githubOrg:
      githubUrl: "${GITHUB_HOST_DOMAIN}"
      orgs: [ "${GITHUB_ORGANIZATION}" ]
      schedule:
        frequency:
          minutes: 30
        initialDelay:
          seconds: 15
        timeout:
          minutes: 15</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dangerouslyAllowSignInWithoutUserInCatalog: false</code></dt>
<dd>
<p>Allow authentication only for users present in the Developer Hub software catalog.</p>
</dd>
<dt class="hdlist1"><code>organization</code>, <code>githubUrl</code>, and <code>orgs</code></dt>
<dd>
<p>Use the Developer Hub application information that you have created in GitHub and configured in OpenShift as secrets.</p>
</dd>
<dt class="hdlist1"><code>schedule.frequency</code></dt>
<dd>
<p>To specify custom schedule frequency.
Supports cron, ISO duration, and "human duration" as used in code.</p>
</dd>
<dt class="hdlist1"><code>schedule.timeout</code></dt>
<dd>
<p>To specify custom timeout.
Supports ISO duration and "human duration" as used in code.</p>
</dd>
<dt class="hdlist1"><code>schedule.initialDelay</code></dt>
<dd>
<p>To specify custom initial delay.
Supports ISO duration and "human duration" as used in code.</p>
</dd>
</dl>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Check the console logs to verify that the synchronization is completed.</p>
<div class="listingblock">
<div class="title">Successful synchronization example:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">{"class":"GithubMultiOrgEntityProvider","level":"info","message":"Reading GitHub users and teams for org: rhdh-dast","plugin":"catalog","service":"backstage","target":"https://github.com","taskId":"GithubMultiOrgEntityProvider:production:refresh","taskInstanceId":"801b3c6c-167f-473b-b43e-e0b4b780c384","timestamp":"2024-09-09 23:55:58"}
{"class":"GithubMultiOrgEntityProvider","level":"info","message":"Read 7 GitHub users and 2 GitHub groups in 0.4 seconds. Committing...","plugin":"catalog","service":"backstage","target":"https://github.com","taskId":"GithubMultiOrgEntityProvider:production:refresh","taskInstanceId":"801b3c6c-167f-473b-b43e-e0b4b780c384","timestamp":"2024-09-09 23:55:59"}</code></pre>
</div>
</div>
</li>
<li>
<p>Log in with a GitHub account.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-authenticating-with-microsoft-azure">4. Authentication with Microsoft Azure</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To authenticate users with Microsoft Azure:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><a href="#enabling-authentication-with-microsoft-azure">Enable authentication with Microsoft Azure</a>.</p>
</li>
<li>
<p><a href="#provisioning-users-from-microsoft-azure-to-the-software-catalog">Provision users from Microsoft Azure to the software catalog</a>.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="enabling-authentication-with-microsoft-azure">4.1. Enabling authentication with Microsoft Azure</h3>
<div class="paragraph">
<p>Red Hat Developer Hub includes a Microsoft Azure authentication provider that can authenticate users by using OAuth.</p>
</div>
<div class="olist arabic">
<div class="title">Prerequisites</div>
<ol class="arabic">
<li>
<p>You have the permission to register an application in Microsoft Azure.</p>
</li>
<li>
<p>You <a href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#assembly-add-custom-app-file-openshift_admin-rhdh">added a custom Developer Hub application configuration</a>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>To allow Developer Hub to authenticate with Microsoft Azure, <a href="https://learn.microsoft.com/en-us/entra/identity-platform/scenario-web-app-sign-user-app-registration?tabs=aspnetcore#register-an-app-by-using-the-azure-portal">create an OAuth application in Microsoft Azure</a>.</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>In the Azure portal go to <a href="https://portal.azure.com/#view/Microsoft_AAD_RegisteredApps/ApplicationsListBlade"><strong>App registrations</strong></a>, create a <strong>New registration</strong> with the configuration:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Name</strong></dt>
<dd>
<p>The application name in Azure, such as <em>&lt;My Developer Hub&gt;</em>.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>On the <strong>Home &gt; App registrations &gt; <em>&lt;My Developer Hub&gt;</em> &gt; Manage &gt; Authentication</strong> page, <strong>Add a platform</strong>, with the following configuration:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>Redirect URI</strong></dt>
<dd>
<p>Enter the backend authentication URI set in Developer Hub: <code>https://<em>&lt;my_developer_hub_url&gt;</em>/api/auth/microsoft/handler/frame</code></p>
</dd>
<dt class="hdlist1"><strong>Front-channel logout URL</strong></dt>
<dd>
<p>Leave blank.</p>
</dd>
<dt class="hdlist1"><strong>Implicit grant and hybrid flows</strong></dt>
<dd>
<p>Leave all checkboxes cleared.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>On the <strong>Home &gt; App registrations &gt; <em>&lt;My Developer Hub&gt;</em> &gt; Manage &gt; API permissions</strong> page, <strong>Add a Permission</strong>, then add the following <strong>Delegated permission</strong> for the <strong>Microsoft Graph API</strong>:</p>
<div class="ulist">
<ul>
<li>
<p><code>email</code></p>
</li>
<li>
<p><code>offline_access</code></p>
</li>
<li>
<p><code>openid</code></p>
</li>
<li>
<p><code>profile</code></p>
</li>
<li>
<p><code>User.Read</code></p>
</li>
<li>
<p>Optional custom scopes for the Microsoft Graph API that you define both in this section and in the Developer Hub configuration (<code>app-config-rhdh.yaml</code>).</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Your company might require you to grant admin consent for these permissions.
Even if your company does not require admin consent, you might do so as it means users do not need to individually consent the first time they access backstage.
To grant administrator consent, a directory administrator must go to the <a href="https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/user-admin-consent-overview">admin consent</a> page and click <strong>Grant admin consent for COMPANY NAME</strong>.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>On the <strong>Home &gt; App registrations &gt; <em>&lt;My Developer Hub&gt;</em> &gt; Manage &gt; Certificates &amp; Secrets</strong> page, in the <strong>Client secrets</strong> tab, create a <strong>New client secret</strong>.</p>
</li>
<li>
<p>Save for the next step:</p>
<div class="ulist">
<ul>
<li>
<p><strong>Directory (tenant) ID</strong></p>
</li>
<li>
<p><strong>Application (client) ID</strong></p>
</li>
<li>
<p><strong>Application (client) secret</strong></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To add your Microsoft Azure credentials to Developer Hub, add the following key/value pairs to your Developer Hub secrets, such as <code>secrets-rhdh</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>AUTH_AZURE_TENANT_ID</code></dt>
<dd>
<p>Enter your saved <strong>Directory (tenant) ID</strong>.</p>
</dd>
<dt class="hdlist1"><code>AUTH_AZURE_CLIENT_ID</code></dt>
<dd>
<p>Enter your saved <strong>Application (client) ID</strong>.</p>
</dd>
<dt class="hdlist1"><code>AUTH_AZURE_CLIENT_SECRET</code></dt>
<dd>
<p>Enter your saved <strong>Application (client) secret</strong>.</p>
</dd>
</dl>
</div>
</li>
<li>
<p>Set up the Microsoft Azure authentication provider in your Developer Hub custom configuration, such as <code>app-config-rhdh</code>:</p>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    microsoft:
      production:
        clientId: ${AUTH_AZURE_CLIENT_ID}
        clientSecret: ${AUTH_AZURE_CLIENT_SECRET}
        tenantId: ${AUTH_AZURE_TENANT_ID}
signInPage: microsoft</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>environment: production</code></dt>
<dd>
<p>Mark the environment as production to hide the <strong>Guest</strong> login in the Developer Hub home page.</p>
</dd>
<dt class="hdlist1"><code>clientId</code>, <code>clientSecret</code> and <code>tenantId</code></dt>
<dd>
<p>Use the Developer Hub application information that you have created in Microsoft Azure and configured in OpenShift as secrets.</p>
</dd>
<dt class="hdlist1"><code>signInPage: microsoft</code></dt>
<dd>
<p>Enable the Microsoft Azure provider as default sign-in provider.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Optional: Consider adding following optional fields:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dangerouslyAllowSignInWithoutUserInCatalog: true</code></dt>
<dd>
<div class="paragraph">
<p>To enable authentication without requiring to provision users in the Developer Hub software catalog.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
Use <code>dangerouslyAllowSignInWithoutUserInCatalog</code> to explore Developer Hub features, but do not use it in production.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional field to allow authenticating users absent from the software catalog</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    microsoft:
      production:
        clientId: ${AUTH_AZURE_CLIENT_ID}
        clientSecret: ${AUTH_AZURE_CLIENT_SECRET}
        tenantId: ${AUTH_AZURE_TENANT_ID}
signInPage: microsoft
dangerouslyAllowSignInWithoutUserInCatalog: true</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>domainHint</code></dt>
<dd>
<p>Optional for single-tenant applications.
You can reduce login friction for users with accounts in multiple tenants by automatically filtering out accounts from other tenants.
If you want to use this parameter for a single-tenant application, uncomment and enter the tenant ID.
If your application registration is multi-tenant, leave this parameter blank.
For more information, see <a href="https://learn.microsoft.com/en-us/azure/active-directory/manage-apps/home-realm-discovery-policy">Home Realm Discovery</a>.</p>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>domainHint</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    microsoft:
      production:
        domainHint: ${AUTH_AZURE_TENANT_ID}</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>additionalScopes</code></dt>
<dd>
<p>Optional for additional scopes.
To add scopes for the application registration, uncomment and enter the list of scopes that you want to add.
The default and mandatory value lists: <code>'openid', 'offline_access', 'profile', 'email', 'User.Read'</code>.</p>
<div class="listingblock">
<div class="title"><code>app-config-rhdh.yaml</code> fragment with optional <code>additionalScopes</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">auth:
  environment: production
  providers:
    microsoft:
      production:
        additionalScopes:
           - Mail.Send</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>This step is optional for environments with outgoing access restrictions, such as firewall rules.
 If your environment has such restrictions, ensure that your RHDH backend can access the following hosts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>login.microsoftonline.com</code>: For obtaining and exchanging authorization codes and access tokens.</p>
</li>
<li>
<p><code>graph.microsoft.com</code>: For retrieving user profile information (as referenced in the source code).
If this host is unreachable, you might see an <em>Authentication failed, failed to fetch user profile</em> error when attempting to log in.</p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="provisioning-users-from-microsoft-azure-to-the-software-catalog">4.2. Provisioning users from Microsoft Azure to the software catalog</h3>
<div class="paragraph">
<p>To authenticate users with Microsoft Azure, after <a href="#enabling-authentication-with-microsoft-azure">Enabling authentication with Microsoft Azure</a>, provision users from Microsoft Azure to the Developer Hub software catalog.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have <a href="#enabling-authentication-with-microsoft-azure">enabled authentication with Microsoft Azure</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To enable Microsoft Azure member discovery, edit your custom Developer Hub ConfigMap, such as <code>app-config-rhdh</code>, and add following lines to the <code>app-config-rhdh.yaml</code> content:</p>
<div class="openblock">
<div class="content">
<div id="microsoftGraphOrgProviderId" class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with mandatory <code>microsoftGraphOrg</code> fields</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">dangerouslyAllowSignInWithoutUserInCatalog: false
catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        target: https://graph.microsoft.com/v1.0
        tenantId: ${AUTH_AZURE_TENANT_ID}
        clientId: ${AUTH_AZURE_CLIENT_ID}
        clientSecret: ${AUTH_AZURE_CLIENT_SECRET}</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dangerouslyAllowSignInWithoutUserInCatalog: false</code></dt>
<dd>
<p>Allow authentication only for users in the Developer Hub software catalog.</p>
</dd>
<dt class="hdlist1"><code>target: <a href="https://graph.microsoft.com/v1.0" class="bare">https://graph.microsoft.com/v1.0</a></code></dt>
<dd>
<p>Defines the MSGraph API endpoint the provider is connecting to.
You might change this parameter to use a different version, such as the <a href="https://learn.microsoft.com/en-us/graph/api/overview?view=graph-rest-beta#call-the-beta-endpoint">beta endpoint</a>.</p>
</dd>
<dt class="hdlist1"><code>tenandId</code>, <code>clientId</code> and <code>clientSecret</code></dt>
<dd>
<p>Use the Developer Hub application information you created in Microsoft Azure and configured in OpenShift as secrets.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Optional: Consider adding the following optional <code>microsoftGraphOrg.providerId</code> fields:</p>
</div>
<div id="authority" class="dlist">
<dl>
<dt class="hdlist1"><code>authority: <a href="https://login.microsoftonline.com" class="bare">https://login.microsoftonline.com</a></code></dt>
<dd>
<p>Defines the authority used.
Change the value to use a different <a href="https://learn.microsoft.com/en-us/graph/deployments#app-registration-and-token-service-root-endpoints">authority</a>, such as Azure US government.
Default value: <code><a href="https://login.microsoftonline.com" class="bare">https://login.microsoftonline.com</a></code>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>queryMode</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        authority: https://login.microsoftonline.com/</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="queryMode" class="dlist">
<dl>
<dt class="hdlist1"><code>queryMode: basic | advanced</code></dt>
<dd>
<p>By default, the Microsoft Graph API only provides the <code>basic</code> feature set for querying.
Certain features require <code>advanced</code> querying capabilities.
See <a href="https://docs.microsoft.com/en-us/graph/aad-advanced-queries">Microsoft Azure Advanced queries</a>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>queryMode</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        queryMode: advanced</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="userExpand" class="dlist">
<dl>
<dt class="hdlist1"><code>user.expand</code></dt>
<dd>
<p>To include the expanded resource or collection referenced by a single relationship (navigation property) in your results.
Only one relationship can be expanded in a single request.
See <a href="https://docs.microsoft.com/en-us/graph/query-parameters#expand-parameter">Microsoft Graph query expand parameter</a>.
This parameter can be combined with <a href="#userGroupMemberFilter">[userGroupMemberFilter]</a> or <a href="#userFilter">[userFilter]</a>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>user.expand</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        user:
          expand: manager</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="userFilter" class="dlist">
<dl>
<dt class="hdlist1"><code>user.filter</code></dt>
<dd>
<p>To filter users.
See <a href="https://docs.microsoft.com/en-us/graph/api/resources/user?view=graph-rest-1.0#properties">Microsoft Graph API</a> and <a href="https://docs.microsoft.com/en-us/graph/query-parameters#filter-parameter">Microsoft Graph API query filter parameters syntax</a>.
This parameter and <a href="#userGroupMemberFilter">[userGroupMemberFilter]</a> are mutually exclusive, only one can be specified.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>user.filter</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        user:
          filter: accountEnabled eq true and userType eq 'member'</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="userLoadPhotos" class="dlist">
<dl>
<dt class="hdlist1"><code>user.loadPhotos: true | false</code></dt>
<dd>
<p>Load photos by default.
Set to <code>false</code> to not load user photos.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>user.loadPhotos</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        user:
          loadPhotos: true</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="userSelect" class="dlist">
<dl>
<dt class="hdlist1"><code>user.select</code></dt>
<dd>
<p>Define the <a href="https://docs.microsoft.com/en-us/graph/api/resources/schemaextension?view=graph-rest-1.0">Microsoft Graph resource types</a> to retrieve.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>user.select</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        user:
          select: ['id', 'displayName', 'description']</code></pre>
</div>
</div>
<div id="userGroupMemberFilter" class="dlist">
<dl>
<dt class="hdlist1"><code>userGroupMember.filter</code></dt>
<dd>
<p>To use group membership to get users.
To filter groups and fetch their members.
This parameter and <a href="#userFilter">[userFilter]</a> are mutually exclusive, only one can be specified.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>userGroupMember.filter</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        userGroupMember:
          filter: "displayName eq 'Backstage Users'"</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div id="userGroupMemberSearch" class="dlist">
<dl>
<dt class="hdlist1"><code>userGroupMember.search</code></dt>
<dd>
<p>To use group membership to get users.
To search for groups and fetch their members.
This parameter and <a href="#userFilter">[userFilter]</a> are mutually exclusive, only one can be specified.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>userGroupMember.search</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        userGroupMember:
          search: '"description:One" AND ("displayName:Video" OR "displayName:Drive")'</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="groupExpand" class="dlist">
<dl>
<dt class="hdlist1"><code>group.expand</code></dt>
<dd>
<p>Optional parameter to include the expanded resource or collection referenced by a single relationship (navigation property) in your results.
Only one relationship can be expanded in a single request.
See <a href="https://docs.microsoft.com/en-us/graph/query-parameters#expand-parameter" class="bare">https://docs.microsoft.com/en-us/graph/query-parameters#expand-parameter</a>
This parameter can be combined with <a href="#userGroupMemberFilter">[userGroupMemberFilter]</a> instead of <a href="#userFilter">[userFilter]</a>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>group.expand</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        group:
          expand: member</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="groupFilter" class="dlist">
<dl>
<dt class="hdlist1"><code>group.filter</code></dt>
<dd>
<p>To filter groups.
See <a href="https://docs.microsoft.com/en-us/graph/api/resources/group?view=graph-rest-1.0#properties">Microsoft Graph API query group syntax</a>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>group.filter</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        group:
          filter: securityEnabled eq false and mailEnabled eq true and groupTypes/any(c:c+eq+'Unified')</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="groupSearch" class="dlist">
<dl>
<dt class="hdlist1"><code>group.search</code></dt>
<dd>
<p>To search for groups.
See <a href="https://docs.microsoft.com/en-us/graph/search-query-parameter">Microsoft Graph API query search parameter</a>.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>group.search</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        group:
          search: '"description:One" AND ("displayName:Video" OR "displayName:Drive")'</code></pre>
</div>
</div>
</dd>
</dl>
</div>
<div id="groupSelect" class="dlist">
<dl>
<dt class="hdlist1"><code>group.select</code></dt>
<dd>
<p>To define the <a href="https://docs.microsoft.com/en-us/graph/api/resources/schemaextension?view=graph-rest-1.0">Microsoft Graph resource types</a> to retrieve.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>group.select</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        group:
          select: ['id', 'displayName', 'description']</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>schedule.frequency</code></dt>
<dd>
<p>To specify custom schedule frequency.
Supports cron, ISO duration, and "human duration" as used in code.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>schedule.frequency</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        schedule:
          frequency: { hours: 1 }</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>schedule.timeout</code></dt>
<dd>
<p>To specify custom timeout.
Supports ISO duration and "human duration" as used in code.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>schedule.timeout</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        schedule:
          timeout: { minutes: 50 }</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>schedule.initialDelay</code></dt>
<dd>
<p>To specify custom initial delay.
Supports ISO duration and "human duration" as used in code.</p>
<div class="listingblock">
<div class="title"><code>app-config.yaml</code> fragment with optional <code>schedule.initialDelay</code> field</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">catalog:
  providers:
    microsoftGraphOrg:
      providerId:
        schedule:
          initialDelay: { seconds: 15}</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Check the console logs to verify that the synchronization is completed.</p>
<div class="listingblock">
<div class="title">Successful synchronization example:</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="json">backend:start: {"class":"MicrosoftGraphOrgEntityProvider$1","level":"info","message":"Read 1 msgraph users and 1 msgraph groups in 2.2 seconds. Committing...","plugin":"catalog","service":"backstage","taskId":"MicrosoftGraphOrgEntityProvider:default:refresh","taskInstanceId":"88a67ce1-c466-41a4-9760-825e16b946be","timestamp":"2024-06-26 12:23:42"}
backend:start: {"class":"MicrosoftGraphOrgEntityProvider$1","level":"info","message":"Committed 1 msgraph users and 1 msgraph groups in 0.0 seconds.","plugin":"catalog","service":"backstage","taskId":"MicrosoftGraphOrgEntityProvider:default:refresh","taskInstanceId":"88a67ce1-c466-41a4-9760-825e16b946be","timestamp":"2024-06-26 12:23:42"}</code></pre>
</div>
</div>
</li>
<li>
<p>Log in with a Microsoft Azure account.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-05-05 15:51:58 UTC
</div>
</div>
</body>
</html>