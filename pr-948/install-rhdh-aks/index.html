<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Installing Red Hat Developer Hub on Microsoft Azure Kubernetes Service</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="Red Hat Developer Hub is an enterprise-grade platform for building developer portals. Administrative users can configure roles, permissions, and other settings to enable other authorized users to deploy a Developer Hub instance on Microsoft Azure Kubernetes Service (AKS) using either the Operator or Helm chart."/><link rel="next" href="#proc-rhdh-deploy-aks-operator_title-install-rhdh-aks" title="1. Deploying Developer Hub on AKS with the Operator"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><section xml:lang="en-US" class="article" id="idm46362915371856"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.5</span></div><div><h1 class="title">Installing Red Hat Developer Hub on Microsoft Azure Kubernetes Service</h1></div><div><h3 class="subtitle"><em>Running Red Hat Developer Hub on Microsoft Azure Kubernetes Service (AKS) by using either the Operator or Helm chart. </em></h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm46362900329360">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Red Hat Developer Hub is an enterprise-grade platform for building developer portals. Administrative users can configure roles, permissions, and other settings to enable other authorized users to deploy a Developer Hub instance on Microsoft Azure Kubernetes Service (AKS) using either the Operator or Helm chart.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#proc-rhdh-deploy-aks-operator_title-install-rhdh-aks">1. Deploying Developer Hub on AKS with the Operator</a></span></li><li><span class="section"><a href="#proc-rhdh-deploy-aks-helm_title-install-rhdh-aks">2. Deploying Developer Hub on AKS with the Helm chart</a></span></li></ul></div><p>
		You can install Red Hat Developer Hub on Microsoft Azure Kubernetes Service (AKS) using one of the following methods:
	</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
				The Red Hat Developer Hub Operator
			</li><li class="listitem">
				The Red Hat Developer Hub Helm chart
			</li></ul></div><section class="section" id="proc-rhdh-deploy-aks-operator_title-install-rhdh-aks"><div class="titlepage"><div><div><h2 class="title">1. Deploying Developer Hub on AKS with the Operator</h2></div></div></div><p>
			You can deploy your Developer Hub on AKS using the Red Hat Developer Hub Operator.
		</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Obtain the Red Hat Developer Hub Operator manifest file, named <code class="literal">rhdh-operator-&lt;VERSION&gt;.yaml</code>, and modify the default configuration of <code class="literal">db-statefulset.yaml</code> and <code class="literal">deployment.yaml</code> by adding the following fragment:
				</p><pre class="programlisting language-yaml">securityContext:
  fsGroup: 300</pre><p class="simpara">
					Following is the specified locations in the manifests:
				</p><pre class="programlisting language-yaml">db-statefulset.yaml: | spec.template.spec
deployment.yaml: | spec.template.spec</pre></li><li class="listitem"><p class="simpara">
					Apply the modified Operator manifest to your Kubernetes cluster:
				</p><pre class="programlisting language-bash">kubectl apply -f rhdh-operator-&lt;VERSION&gt;.yaml</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Execution of the previous command is cluster-scoped and requires appropriate cluster privileges.
					</p></div></div></li><li class="listitem"><p class="simpara">
					Create an <code class="literal">ImagePull Secret</code> named <code class="literal">rhdh-pull-secret</code> using your Red Hat credentials to access images from the protected <code class="literal">registry.redhat.io</code> as shown in the following example:
				</p><pre class="programlisting language-bash">kubectl -n &lt;your_namespace&gt; create secret docker-registry rhdh-pull-secret \
    --docker-server=registry.redhat.io \
    --docker-username=&lt;redhat_user_name&gt; \
    --docker-password=&lt;redhat_password&gt; \
    --docker-email=&lt;email&gt;</pre></li><li class="listitem"><p class="simpara">
					Create an Ingress manifest file, named <code class="literal">rhdh-ingress.yaml</code>, specifying your Developer Hub service name as follows:
				</p><pre class="programlisting language-yaml">apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: rhdh-ingress
  namespace: my-rhdh-project
spec:
  ingressClassName: webapprouting.kubernetes.azure.com
  rules:
    - http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: backstage-&lt;your-CR-name&gt;
                port:
                  name: http-backend</pre></li><li class="listitem"><p class="simpara">
					To deploy the created Ingress, run the following command:
				</p><pre class="programlisting language-terminal">kubectl -n &lt;your_namespace&gt; apply -f rhdh-ingress.yaml</pre></li><li class="listitem"><p class="simpara">
					Create a ConfigMap named <code class="literal">app-config-rhdh</code> containing the Developer Hub configuration using the following example:
				</p><pre class="programlisting language-yaml">apiVersion: v1
kind: ConfigMap
metadata:
  name: app-config-rhdh
data:
  "app-config-rhdh.yaml": |
    app:
      title: Red Hat Developer Hub
      baseUrl: https://&lt;app_address&gt;
    backend:
      auth:
        externalAccess:
            - type: legacy
              options:
                subject: legacy-default-config
                secret: "${BACKEND_SECRET}"
      baseUrl: https://&lt;app_address&gt;
      cors:
        origin: https://&lt;app_address&gt;</pre></li><li class="listitem"><p class="simpara">
					Create a Secret named my-rhdh-secrets and add a key named <code class="literal">BACKEND_SECRET</code> with a <code class="literal">Base64-encoded</code> string value as shown in the following example:
				</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
  name: {my-product-secret}
stringData:
  BACKEND_SECRET: "xxx"</pre></li><li class="listitem"><p class="simpara">
					Create your <code class="literal">Backstage</code> custom resource (CR) manifest file named <code class="literal">rhdh.yaml</code> and include the previously created <code class="literal">rhdh-pull-secret</code> as follows:
				</p><pre class="programlisting language-yaml">apiVersion: rhdh.redhat.com/v1alpha3
kind: Backstage
metadata:
  name: &lt;your-rhdh-cr&gt;
spec:
  application:
    imagePullSecrets:
      - rhdh-pull-secret
    appConfig:
      configMaps:
        - name: "app-config-rhdh"
    extraEnvs:
      secrets:
        - name: {my-product-secret}</pre></li><li class="listitem"><p class="simpara">
					Apply the CR manifest to your namespace:
				</p><pre class="programlisting language-terminal">kubectl -n my-rhdh-project apply -f rhdh.yaml</pre></li><li class="listitem">
					Access the deployed Developer Hub using the URL: <code class="literal"><a class="link" href="https://&lt;app_address&gt;">https://&lt;app_address&gt;</a></code>, where &lt;app_address&gt; is the Ingress address obtained earlier (for example, <code class="literal"><a class="link" href="https://108.141.70.228">https://108.141.70.228</a></code>).
				</li><li class="listitem"><p class="simpara">
					Optional: To delete the CR, run the following command:
				</p><pre class="programlisting language-terminal">kubectl -n my-rhdh-project delete -f rhdh.yaml</pre></li></ol></div></section><section class="section" id="proc-rhdh-deploy-aks-helm_title-install-rhdh-aks"><div class="titlepage"><div><div><h2 class="title">2. Deploying Developer Hub on AKS with the Helm chart</h2></div></div></div><p>
			You can deploy your Developer Hub application on Azure Kubernetes Service (AKS) to access a comprehensive solution for building, testing, and deploying applications.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have a Microsoft Azure account with active subscription.
				</li><li class="listitem">
					You have installed the <a class="link" href="https://learn.microsoft.com/en-us/cli/azure/install-azure-cli">Azure CLI</a>.
				</li><li class="listitem">
					You have installed the <a class="link" href="https://kubernetes.io/docs/reference/kubectl/"><code class="literal">kubectl</code> CLI</a>.
				</li><li class="listitem">
					You are logged into your cluster using <code class="literal">kubectl</code>, and have <code class="literal">developer</code> or <code class="literal">admin</code> permissions.
				</li><li class="listitem">
					You have installed Helm 3 or the latest.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Comparison of AKS specifics with the base Developer Hub deployment</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					<span class="strong strong"><strong>Permissions issue</strong></span>: Developer Hub containers might encounter permission-related errors, such as <code class="literal">Permission denied</code> when attempting certain operations. This error can be addressed by adjusting the <code class="literal">fsGroup</code> in the <code class="literal">PodSpec.securityContext</code>.
				</li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>Ingress configuration</strong></span>: In AKS, configuring ingress is essential for accessing the installed Developer Hub instance. Accessing the Developer Hub instance requires enabling the Routing add-on, an NGINX-based Ingress Controller, using the following command:
				</p><pre class="programlisting language-terminal">az aks approuting enable --resource-group &lt;your_ResourceGroup&gt; --name &lt;your_ClusterName&gt;</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					You might need to install the Azure CLI extension <code class="literal">aks-preview</code>. If the extension is not installed automatically, you might need to install it manually using the following command:
				</p><pre class="programlisting language-terminal">az extension add --upgrade -n aks-preview --allow-preview true</pre></div></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						After you install the Ingress Controller, the <code class="literal">app-routing-system</code> namespace with the Ingress Controller will be deployed in your cluster. Note the address of your Developer Hub application from the installed Ingress Controller (for example, 108.141.70.228) for later access to the Developer Hub application, later referenced as <code class="literal">&lt;app_address&gt;</code>.
					</p><pre class="programlisting language-terminal">kubectl get svc nginx --namespace app-routing-system -o jsonpath='{.status.loadBalancer.ingress[0].ip}'</pre></div></div></li><li class="listitem"><p class="simpara">
					<span class="strong strong"><strong>Namespace management</strong></span>: You can create a dedicated namespace for Developer Hub deployment in AKS using the following command:
				</p><pre class="programlisting language-terminal">kubectl create namespace &lt;your_namespace&gt;</pre></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Log in to AKS by running the following command:
				</p><pre class="programlisting language-terminal">az login [--tenant=&lt;optional_directory_name&gt;]</pre></li><li class="listitem"><p class="simpara">
					Create a resource group by running the following command:
				</p><pre class="programlisting language-terminal">az group create --name &lt;resource_group_name&gt; --location &lt;location&gt;</pre><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
					You can list available regions by running the following command:
				</p><pre class="programlisting language-terminal">az account list-locations -o table</pre></div></div></li><li class="listitem"><p class="simpara">
					Create an AKS cluster by running the following command:
				</p><pre class="programlisting language-terminal">az aks create \
--resource-group &lt;resource_group_name&gt; \
--name &lt;cluster_name&gt; \
--enable-managed-identity \
--generate-ssh-keys</pre><p class="simpara">
					You can refer to <code class="literal">--help</code> for additional options.
				</p></li><li class="listitem"><p class="simpara">
					Connect to your cluster by running the following command:
				</p><pre class="programlisting language-terminal">az aks get-credentials --resource-group &lt;resource_group_name&gt; --name &lt;cluster_name&gt;</pre><p class="simpara">
					The previous command configures the Kubernetes client and sets the current context in the <code class="literal">kubeconfig</code> to point to your AKS cluster.
				</p></li><li class="listitem"><p class="simpara">
					Open terminal and run the following command to add the Helm chart repository:
				</p><pre class="programlisting language-terminal">helm repo add openshift-helm-charts https://charts.openshift.io/</pre></li><li class="listitem"><p class="simpara">
					Create and activate the <span class="emphasis"><em>&lt;my-rhdh-project&gt;</em></span> namespace:
				</p><pre class="programlisting language-terminal">DEPLOYMENT_NAME=&lt;redhat-developer-hub&gt;
NAMESPACE=&lt;rhdh&gt;
kubectl create namespace ${NAMESPACE}
kubectl config set-context --current --namespace=${NAMESPACE}</pre></li><li class="listitem"><p class="simpara">
					Create a pull secret, which is used to pull the Developer Hub images from the Red Hat Ecosystem, by running the following command:
				</p><pre class="programlisting language-terminal">kubectl -n $NAMESPACE create secret docker-registry rhdh-pull-secret \
    --docker-server=registry.redhat.io \
    --docker-username=&lt;redhat_user_name&gt; \
    --docker-password=&lt;redhat_password&gt; \
    --docker-email=&lt;email&gt;</pre></li><li class="listitem"><p class="simpara">
					Create a file named <code class="literal">values.yaml</code> using the following template:
				</p><pre class="programlisting language-yaml">global:
  host: &lt;app_address&gt;
route:
  enabled: false
upstream:
  ingress:
    enabled: true
    className: webapprouting.kubernetes.azure.com
    host:
  backstage:
    image:
      pullSecrets:
        - rhdh-pull-secret
    podSecurityContext:
      fsGroup: 3000
  postgresql:
    image:
      pullSecrets:
        - rhdh-pull-secret
    primary:
      podSecurityContext:
        enabled: true
        fsGroup: 3000
  volumePermissions:
    enabled: true</pre></li><li class="listitem"><p class="simpara">
					To install Developer Hub by using the Helm chart, run the following command:
				</p><pre class="programlisting language-terminal">helm -n $NAMESPACE install -f values.yaml $DEPLOYMENT_NAME openshift-helm-charts/redhat-developer-hub --version 1.5.0</pre></li><li class="listitem"><p class="simpara">
					Verify the deployment status:
				</p><pre class="programlisting language-terminal">kubectl get deploy $DEPLOYMENT_NAME -n $NAMESPACE</pre></li><li class="listitem"><p class="simpara">
					Configure your Developer Hub Helm chart instance with the Developer Hub database password and router base URL values from your cluster:
				</p><pre class="programlisting language-terminal">PASSWORD=$(kubectl get secret redhat-developer-hub-postgresql -o jsonpath="{.data.password}" | base64 -d)
CLUSTER_ROUTER_BASE=$(kubectl get route console -n openshift-console -o=jsonpath='{.spec.host}' | sed 's/^[^.]*\.//')
helm upgrade $DEPLOYMENT_NAME -i "https://github.com/openshift-helm-charts/charts/releases/download/redhat-redhat-developer-hub-1.5.0/redhat-developer-hub-1.5.0.tgz" \
    --set global.clusterRouterBase="$CLUSTER_ROUTER_BASE" \
    --set global.postgresql.auth.password="$PASSWORD"</pre></li><li class="listitem"><p class="simpara">
					Display the running Developer Hub instance URL, by running the following command:
				</p><pre class="programlisting language-terminal">echo "https://$DEPLOYMENT_NAME-$NAMESPACE.$CLUSTER_ROUTER_BASE"</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					Open the running Developer Hub instance URL in your browser to use Developer Hub.
				</li></ul></div><div class="itemizedlist"><p class="title"><strong>Upgrade</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					To upgrade the deployment, run the following command:
				</p><pre class="programlisting language-terminal">helm upgrade $DEPLOYMENT_NAME -i https://github.com/openshift-helm-charts/charts/releases/download/redhat-redhat-developer-hub-1.5.0/redhat-developer-hub-1.5.0.tgz</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Delete</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					To delete the deployment, run the following command:
				</p><pre class="programlisting language-terminal">helm -n $NAMESPACE delete $DEPLOYMENT_NAME</pre></li></ul></div></section><div><div xml:lang="en-US" class="legalnotice" id="idm46362900329360"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2025 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></section></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>