<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Interacting with Red Hat Developer Lightspeed for Red Hat Developer Hub</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="Leverage Artificial Intelligence (AI)-driven expertise of the Red Hat Developer Lightspeed for Red Hat Developer Hub (Developer Lightspeed for RHDH) virtual assistant to help you use Red Hat Developer Hub (RHDH)"/><link rel="next" href="#developer-lightspeed" title="1. Interacting with Red Hat Developer Lightspeed for Red Hat Developer Hub"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><section xml:lang="en-US" class="article" id="idm46158449237856"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.8</span></div><div><h1 class="title">Interacting with Red Hat Developer Lightspeed for Red Hat Developer Hub</h1></div><div><h3 class="subtitle"><em>Leverage Artificial Intelligence (AI)-driven expertise of the Red Hat Developer Lightspeed for Red Hat Developer Hub (Developer Lightspeed for RHDH) virtual assistant to help you use Red Hat Developer Hub (RHDH)</em></h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm46158433043568">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Leverage Artificial Intelligence (AI)-driven expertise of the Red Hat Developer Lightspeed for Red Hat Developer Hub (Developer Lightspeed for RHDH) virtual assistant to help you use Red Hat Developer Hub (RHDH)
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#developer-lightspeed">1. Interacting with Red Hat Developer Lightspeed for Red Hat Developer Hub</a></span><ul><li><span class="section"><a href="#con-about-developer-lightspeed_developer-lightspeed">1.1. About Developer Lightspeed for RHDH</a></span></li><li><span class="section"><a href="#con-supported-architecture_developer-lightspeed">1.2. Supported architecture for Red Hat Developer Lightspeed for Red Hat Developer Hub</a></span></li><li><span class="section"><a href="#con-rag-embeddings_developer-lightspeed">1.3. Retrieval Augmented Generation embeddings</a></span></li><li><span class="section"><a href="#proc-installing-and-configuring-lightspeed_developer-lightspeed">1.4. Installing and configuring Red Hat Developer Lightspeed for Red Hat Developer Hub</a></span></li><li><span class="section"><a href="#customizing-developer-lightspeed">1.5. Customizing Developer Lightspeed for RHDH</a></span></li><li><span class="section"><a href="#using-developer-lightspeed_customizing-developer-lightspeed">1.6. Using Developer Lightspeed for RHDH</a></span></li><li><span class="section"><a href="#appendix-llm-requirements">1.7. Appendix: LLM requirements</a></span></li><li><span class="section"><a href="#appendix-about-user-data-security">1.8. Appendix About user data security</a></span></li></ul></li></ul></div><section class="section" id="developer-lightspeed"><div class="titlepage"><div><div><h2 class="title">1. Interacting with Red Hat Developer Lightspeed for Red Hat Developer Hub</h2></div></div></div><section class="section" id="con-about-developer-lightspeed_developer-lightspeed"><div class="titlepage"><div><div><h3 class="title">1.1. About Developer Lightspeed for RHDH</h3></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
					This section describes Developer Preview features in the Red Hat Developer Lightspeed for Red Hat Developer Hub plugin. Developer Preview features are not supported by Red Hat in any way and are not functionally complete or production-ready. Do not use Developer Preview features for production or business-critical workloads. Developer Preview features provide early access to functionality in advance of possible inclusion in a Red Hat product offering. Customers can use these features to test functionality and provide feedback during the development process. Developer Preview features might not have any documentation, are subject to change or removal at any time, and have received limited testing. Red Hat might provide ways to submit feedback on Developer Preview features without an associated SLA.
				</p><p>
					For more information about the support scope of Red Hat Developer Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/devpreview/">Developer Preview Support Scope</a>.
				</p></div></div><p>
				This early access program enables customers to share feedback on the user experience, features, capabilities, and any issues encountered. Your input helps ensure that Developer Lightspeed for RHDH better meets your needs when it is officially released and made generally available.
			</p><p>
				Red Hat Developer Lightspeed for Red Hat Developer Hub (Developer Lightspeed for RHDH) is a virtual assistant powered by generative Artificial Intelligence (AI) designed for Red Hat Developer Hub(RHDH). The assistant offers in-depth insights into RHDH, including its wide range of capabilities. You can interact with this assistant to explore and learn more about RHDH in greater detail.
			</p><p>
				Developer Lightspeed for RHDH provides a natural language interface within the RHDH console, helping you easily find information about the product, understand its features, and get answers to your questions.
			</p><p>
				You can experience Developer Lightspeed for RHDH Developer Preview by installing the Developer Lightspeed for Red Hat Developer Hub plugin within an existing RHDH instance. Alternatively, if you prefer to test it locally first, you can try Developer Lightspeed for RHDH using RHDH Local.
			</p><div class="informalfigure"><div class="mediaobject"><img src="images/rhdh-plugins-reference/developer-lightspeed.png" alt="developer lightspeed"/></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://github.com/redhat-developer/rhdh-local/blob/main/README.md">RHDH Local</a>
					</li></ul></div></section><section class="section" id="con-supported-architecture_developer-lightspeed"><div class="titlepage"><div><div><h3 class="title">1.2. Supported architecture for Red Hat Developer Lightspeed for Red Hat Developer Hub</h3></div></div></div><p>
				Developer Lightspeed for RHDH is available as a plugin on all platforms that host RHDH. It requires the use of Lightspeed Core Service, which runs as a sidecar container. LCS acts as the intermediary layer for interfacing with Large Language Model (LLM) providers.
			</p><p>
				Developer Lightspeed for RHDH handles functionalities like question validation, feedback, and Retrieval-Augmented Generation (RAG) by leveraging components often built with Llama Stack.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					Currently, the provided LCS image is built for x86 platforms. To use other platforms (for example, arm64), you must ensure that you enable emulation.
				</p></div></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						<a class="link" href="https://access.redhat.com/support/policy/updates/developerhub">Red Hat Developer Hub Life Cycle and supported platforms</a>
					</li></ul></div><section class="section" id="con-about-lightspeed-stack-and-llama-stack_developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.2.1. About Lightspeed Core Service and Llama Stack</h4></div></div></div><p>
					The <span class="strong strong"><strong>Lightspeed Core Service (LCS)</strong></span> and Llama Stack deploy together as sidecar containers to augment {rhdh-short} functionality.
				</p><p>
					LCS acts as an intermediary service layer for interfacing with Large Language Model (LLM) providers. LCS handles LLM provider setup, authentication, and includes key functionalities such as question validation, user feedback collection, and Retrieval Augmented Generation (RAG).
				</p><p>
					Llama Stack provides the model server functionality that LCS uses to process requests. This service requires a Kubernetes Secret to securely store environment variables for the chosen LLM provider.
				</p><p>
					The Red Hat Developer Lightspeed for Red Hat Developer Hub plugin within {rhdh-short} communicates with the LCS sidecar to send prompts and receives responses from the configured LLM service. The LCS sidecar centralizes the LLM interaction logic and configuration alongside your {rhdh-short} instance.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Red Hat Developer Lightspeed for Red Hat Developer Hub is a Developer Preview release. You must manually deploy the Lightspeed Core Service and Llama Stack sidecar containers, and then install the Red Hat Developer Lightspeed for Red Hat Developer Hub plugin on your {rhdh-short} instance.
					</p></div></div></section></section><section class="section" id="con-rag-embeddings_developer-lightspeed"><div class="titlepage"><div><div><h3 class="title">1.3. Retrieval Augmented Generation embeddings</h3></div></div></div><p>
				The Red Hat Developer Hub documentation set has been added as a Retrieval-Augmented Generation (RAG) data source.
			</p><p>
				The Lightspeed Core Service (LCS) sidecar handles the RAG process, using specialized Llama Stack components to manage the documentation data and generate vector embeddings.
			</p></section><section class="section" id="proc-installing-and-configuring-lightspeed_developer-lightspeed"><div class="titlepage"><div><div><h3 class="title">1.4. Installing and configuring Red Hat Developer Lightspeed for Red Hat Developer Hub</h3></div></div></div><p>
				You must install and configure the Developer Lightspeed for RHDH, LCS, and Llama Stack container manually.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You are logged into your OpenShift Container Platform account.
					</li><li class="listitem"><p class="simpara">
						You have an RHDH instance installed either of the following ways:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/installing_red_hat_developer_hub_on_openshift_container_platform/index#assembly-install-rhdh-ocp-operator">Using the Operator</a>
							</li><li class="listitem">
								<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/installing_red_hat_developer_hub_on_openshift_container_platform/index#assembly-install-rhdh-ocp-helm">Using the Helm chart</a>
							</li></ul></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the LCS ConfigMap (<code class="literal">lightspeed-stack.yaml</code>).
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the OpenShift Container Platform web console, go to your RHDH instance and select the <span class="strong strong"><strong>ConfigMaps</strong></span> tab.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create ConfigMaps</strong></span>.
							</li><li class="listitem"><p class="simpara">
								From the <span class="strong strong"><strong>Create ConfigMap</strong></span> page, select the <span class="strong strong"><strong>YAML view</strong></span> option in <span class="strong strong"><strong>Configure via</strong></span>, and edit the file as shown in the following example:
							</p><pre class="programlisting language-yaml">kind: ConfigMap
apiVersion: v1
metadata:
 name: Lightspeed Core Service (LCS)
service:
  host: 0.0.0.0
  port: 8080
  auth_enabled: false
  workers: 1
  color_log: true
  access_log: true
llama_stack:
  use_as_library_client: false
  url: http://localhost:8321
user_data_collection:
  feedback_enabled: true
  feedback_storage: "/tmp/data/feedback"
  transcripts_enabled: true
  transcripts_storage: "/tmp/data/transcripts"
authentication:
  module: "noop"
conversation_cache:
  type: "sqlite"
  sqlite:
    db_path: "./lcs_cache.db"
mcp_servers:
  - name: mcp::backstage
    provider_id: model-context-protocol
    url: https://rhdh-mcp-proxy-apicast-production.apps.rosa.redhat-ai-dev.m6no.p3.openshiftapps.com:443/api/mcp-actions/v1</pre><p class="simpara">
								where:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">mcp_servers:name</code></span></dt><dd>
											This value must match the entry in the Developer Lightspeed for RHDH app config file for MCP servers.
										</dd></dl></div></li><li class="listitem">
								Click <span class="strong strong"><strong>Create</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Create a Llama Stack ConfigMap.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the OpenShift Container Platform web console, go to your RHDH instance and select the <span class="strong strong"><strong>ConfigMaps</strong></span> tab.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create ConfigMaps</strong></span>.
							</li><li class="listitem"><p class="simpara">
								From the <span class="strong strong"><strong>Create ConfigMap</strong></span> page, select the <span class="strong strong"><strong>YAML view</strong></span> option in <span class="strong strong"><strong>Configure via</strong></span>, and edit the file as shown in the following example:
							</p><pre class="programlisting language-yaml">models:
  - model_id: sentence-transformers/all-mpnet-base-v2
    metadata:
      embedding_dimension: 768
    model_type: embedding
    provider_id: sentence-transformers
    provider_model_id: "/app-root/embeddings_model"
providers:
  inference:
  - provider_id: team-cluster
    provider_type: remote::vllm
    config:
      url: _&lt;llm-server&gt;_/v1
      api-token: &lt;token&gt;
  - provider_id: openai
    provider_type: remote::openai
    config:
      api_key: _&lt;openai_api_key&gt;_</pre><p class="simpara">
								where:
							</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal"><span class="emphasis"><em>&lt;llm_server&gt;</em></span></code></span></dt><dd>
											Enter your LLM server details.
										</dd><dt><span class="term"><code class="literal"><span class="emphasis"><em>&lt;openai_api_key&gt;</em></span></code></span></dt><dd>
											Enter your OpenAI API key.
										</dd></dl></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Create the Developer Lightspeed for RHDH ConfigMap.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							Create a dedicated Developer Lightspeed for RHDH ConfigMap instead of adding an additional section to your existing RHDH custom application configuration file (for example, <code class="literal">lightspeed-app-config.yaml</code>). Creating two files prevents the entire RHDH ConfigMap from being loaded into LCS.
						</p></div></div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the OpenShift Container Platform web console, go to your RHDH instance and select the <span class="strong strong"><strong>ConfigMaps</strong></span> tab.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create ConfigMap</strong></span>.
							</li><li class="listitem"><p class="simpara">
								From the <span class="strong strong"><strong>Create ConfigMap</strong></span> page, select the <span class="strong strong"><strong>YAML view</strong></span> option in <span class="strong strong"><strong>Configure via</strong></span>, and add the following example:
							</p><pre class="programlisting language-yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: lightspeed-app-config
  namespace: &lt;__namespace__&gt; # Enter your RHDH instance namespace
data:
  app-config.yaml: |-
    backend:
      csp:
         upgrade-insecure-requests: false
       img-src:
          - "'self'"
          - "data:"
          - https://img.freepik.com
          - https://cdn.dribbble.com
          - https://avatars.githubusercontent.com # This is to load GitHub avatars in the UI
       script-src:
           - "'self'"
           - https://cdn.jsdelivr.net

    lightspeed:
      mcpServers:
      - name: mcp::backstage
        token: ${MCP_TOKEN}

      # OPTIONAL: Enable/disable question validation (default: true)
      # When enabled, restricts questions to RHDH-related topics for better security
      questionValidation: true

      # OPTIONAL: Custom users prompts displayed to users
      # If not provided, the plugin uses built-in default prompts
      prompts:
        - title: 'Getting Started with Red Hat Developer Hub'
          message: Can you guide me through the first steps to start using Developer Hub as a developer, like exploring the Software Catalog and adding my service?

      # OPTIONAL: Port for lightspeed service (default: 8080)
      # servicePort: ${LIGHTSPEED_SERVICE_PORT}

      # OPTIONAL: Override default RHDH system prompt
      # systemPrompt: "You are a helpful assistant focused on Red Hat Developer Hub development."</pre></li></ol></div></li><li class="listitem"><p class="simpara">
						Create Developer Lightspeed for RHDH secret file.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the OpenShift Container Platform web console, go to <span class="strong strong"><strong>Secrets</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create &gt; Key/value secret</strong></span>.
							</li><li class="listitem"><p class="simpara">
								In the <span class="strong strong"><strong>Create key/value secret</strong></span> page, select the <span class="strong strong"><strong>YAML view</strong></span> option in <span class="strong strong"><strong>Configure via</strong></span>, and add the following example:
							</p><pre class="programlisting language-yaml">kind: Secret
apiVersion: v1
metadata:
  name: lightspeed-secrets
  namespace: _&lt;namespace&gt;_ # Enter your rhdh instance namespace
stringData:
  LLM_SERVER_ID: _&lt;server_id&gt;_ # Enter your server ID (for example, `ollama` or `granite`)
  LLM_SERVER_TOKEN: _&lt;token&gt;_ # Enter your server token value
  LLM_SERVER_URL: _&lt;server_url&gt;_ # Enter your server URL
type: Opaque</pre></li><li class="listitem">
								Click <span class="strong strong"><strong>Create</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Create the Llama Stack secret file.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								In the OpenShift Container Platform web console, go to <span class="strong strong"><strong>Secrets</strong></span>.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Create &gt; Key/value secret</strong></span>.
							</li><li class="listitem"><p class="simpara">
								In the <span class="strong strong"><strong>Create key/value secret</strong></span> page, select the <span class="strong strong"><strong>YAML view</strong></span> option in <span class="strong strong"><strong>Configure via</strong></span>, and add the following example:
							</p><pre class="programlisting language-yaml">apiVersion: v1
kind: Secret
metadata:
    name: llama-stack-secrets
type: Opaque
stringData:
    VLLM_URL: "" # Set this if you are using redhat-ai-dev Llama Stack image
    VLLM_API_KEY: "" # Set this if you are using redhat-ai-dev Llama Stack
    VLLM_MAX_TOKENS: "" # Optional
    VLLM_TLS_VERIFY: "" # Optional
    OLLAMA_URL: "" # Set if you altered the run.yaml to use it
    OPENAI_API_KEY: "" # Set if you altered the run.yaml to use it
    VALIDATION_PROVIDER: "" # One of vllm, ollama, openai depending on above
    VALIDATION_MODEL_NAME: "" # Name of model you want used for validation</pre></li><li class="listitem">
								Click <span class="strong strong"><strong>Create</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						To your existing dynamic plugins ConfigMap (for example, <code class="literal">dynamic-plugins-rhdh.yaml</code>), add the Developer Lightspeed for RHDH plugin image as shown in the following example:
					</p><pre class="programlisting language-yaml">includes:
  - dynamic-plugins.default.yaml
 plugins:
  - package: oci://ghcr.io/redhat-developer/rhdh-plugin-export-overlays/red-hat-developer-hub-backstage-plugin-lightspeed:bs_1.39.1__0.5.7!red-hat-developer-hub-backstage-plugin-lightspeed
    disabled: false
    pluginConfig:
      lightspeed:
        # OPTIONAL: Custom users prompts displayed to users
        # If not provided, the plugin uses built-in default prompts
        prompts:
          - title: 'Getting Started with Red Hat Developer Hub'
            message: Can you guide me through the first steps to start using Developer Hub
              as a developer, like exploring the Software Catalog and adding my
              service?
      dynamicPlugins:
        frontend:
          red-hat-developer-hub.backstage-plugin-lightspeed:
            appIcons:
              - name: LightspeedIcon
                module: LightspeedPlugin
                importName: LightspeedIcon
            dynamicRoutes:
              - path: /lightspeed
                importName: LightspeedPage
                module: LightspeedPlugin
                menuItem:
                  icon: LightspeedIcon
                  text: Lightspeed
  - package: oci://ghcr.io/redhat-developer/rhdh-plugin-export-overlays/red-hat-developer-hub-backstage-plugin-lightspeed-backend:bs_1.39.1__0.5.7!red-hat-developer-hub-backstage-plugin-lightspeed-backend
    disabled: false
    pluginConfig:
      lightspeed:
        # REQUIRED: Configure LLM servers with OpenAI API compatibility
        servers:
          - id: ${LLM_SERVER_ID}
            url: ${LLM_SERVER_URL}
            token: ${LLM_SERVER_TOKEN}

        # OPTIONAL: Port for lightspeed service (default: 8080)
        # servicePort: ${LIGHTSPEED_SERVICE_PORT}</pre></li><li class="listitem"><p class="simpara">
						Update your deployment configuration based on your installation method:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								For an Operator-installed RHDH instance, update your Backstage custom resource (CR).
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										In the <code class="literal">spec.application.appConfig.configMaps</code> section, add the Developer Lightspeed for RHDH and Llama Stack custom app configurations as shown in the following example:
									</p><pre class="programlisting language-yaml">      appConfig:
        configMaps:
          - name: lightspeed-app-config
        mountPath: /opt/app-root/src
        configMaps:
          - name: llama-stack
        mountPath: /opt/app-root/src</pre></li><li class="listitem"><p class="simpara">
										Update the <code class="literal">extraVolumes</code> specification to include the LCS and Llama Stack ConfigMaps as shown in the following example:
									</p><pre class="programlisting language-yaml">            volumes:
              - configMap:
                  name: lightspeed-stack
              - configMap:
                  name: llama-stack</pre></li><li class="listitem"><p class="simpara">
										Update the <code class="literal">volumeMounts</code> specification to mount the LCS and Llama Stack ConfigMaps as shown in the following example:
									</p><pre class="programlisting language-yaml">        volumeMounts:
          - mountPath: /app-root/config/lightspeed-stack.yaml
            name: lightspeed-stack
            subPath: lightspeed-stack.yaml
          - mountPath: /app-root/config/app-config-rhdh.yaml
            name: lightspeed-app-config
            subPath: app-config.yaml
          - mountPath: /app-root-config/llama-stack/run.yaml
            subPath: llama-stack/run.yaml</pre></li><li class="listitem"><p class="simpara">
										Add the Developer Lightspeed for RHDH and Llama Stack Secret file as shown in the following example:
									</p><pre class="programlisting language-yaml">        envFrom:
          - secretRef:
              name: lightspeed-secrets
          - secretRef:
              name: llama-stack-secrets</pre></li><li class="listitem"><p class="simpara">
										In your <code class="literal">deployment.patch.spec.template.spec.containers.env</code> section, set the LCS and Llama Stack environment variables as shown in the following example:
									</p><pre class="programlisting language-yaml">    - name: PROJECT
      value: rhdh
    - name: LCS_CONFIG_FILE
      value: /app-root/config/lightspeed-stack.yaml
    - name: RHDH_CONFIG_FILE
      value: /app-root/config/app-config-rhdh.yaml
    - name: LLAMA_CONFIG_FILE
      value: /app-root/config/llama-stack/run.yaml</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Your RHDH container is typically already present in your CR. You are adding the two additional container definitions for LCS and Llama Stack as the LCS sidecar.
										</p></div></div></li><li class="listitem"><p class="simpara">
										Click <span class="strong strong"><strong>Save</strong></span>. The Pods are automatically restarted.
									</p><div class="formalpara"><p class="title"><strong>Example of a Backstage CR with the LCS container</strong></p><p>
											
<pre class="programlisting language-yaml">kind: Backstage
metadata:
...
name: name
namespace: namespace
spec:
 deployment:
   patch:
     spec:
       template:
         spec:
           initContainers:
             - name: init-rag-data
               image: 'quay.io/redhat-ai-dev/rag-content:release-1.7-lcs'
               command:
                 - "sh"
                 - "-c"
                 - "echo 'Copying RAG data...'; cp -r /rag/vector_db/rhdh_product_docs /data/ &amp;&amp; cp -r /rag/embeddings_model /data/ &amp;&amp; echo 'Copy complete.'"
               volumeMounts:
                 - mountPath: /data
                   name: rag-data-volume
           containers:
             - envFrom:
               - secretRef:
                   name: llama-stack-secrets
               image: 'quay.io/redhat-ai-dev/llama-stack:latest'
               name: llama-stack
               volumeMounts:
                 - mountPath: /app-root/.llama
                   name: shared-storage
                 - mountPath: /app-root/embeddings_model
                   name: rag-data-volume
                   subPath: embeddings_model
                 - mountPath: /app-root/vector_db/rhdh_product_docs
                   name: rag-data-volume
                   subPath: rhdh_product_docs
             - image: &lt;your-lcs-image&gt;
               name: lightspeed-core
               volumeMounts:
                 - mountPath: /app-root/lightspeed-stack.yaml
                   name: lightspeed-stack
                   subPath: lightspeed-stack.yaml
                 - mountPath: /tmp/data/feedback
                   name: shared-storage
           volumes:
             - configMap:
                 name: lightspeed-stack
               name: lightspeed-stack
             - emptyDir: {}
               name: shared-storage
             - emptyDir: {}
               name: rag-data-volume</pre>
										</p></div></li></ol></div></li><li class="listitem"><p class="simpara">
								For a Helm-installed RHDH instance, update your Helm chart.
							</p><div class="orderedlist"><ol class="orderedlist" type="i"><li class="listitem"><p class="simpara">
										Add your dynamic plugins configuration in the`global.dynamic` property as shown in the following example:
									</p><pre class="programlisting language-yaml">global:
dynamic:
  includes:
  - dynamic-plugins.default.yaml
  plugins:
  - package: oci://ghcr.io/redhat-developer/rhdh-plugin-export-overlays/red-hat-developer-hub-backstage-plugin-lightspeed:bs_1.39.1__0.5.7!red-hat-developer-hub-backstage-plugin-lightspeed
    disabled: false
    pluginConfig:
      lightspeed:
        # OPTIONAL: Custom users prompts displayed to users
        # If not provided, the plugin uses built-in default prompts
        prompts:
          - title: 'Getting Started with Red Hat Developer Hub'
            message: Can you guide me through the first steps to start using Developer Hub
              as a developer, like exploring the Software Catalog and adding my
              service?
      dynamicPlugins:
        frontend:
          red-hat-developer-hub.backstage-plugin-lightspeed:
            appIcons:
              - name: LightspeedIcon
                module: LightspeedPlugin
                importName: LightspeedIcon
            dynamicRoutes:
              - path: /lightspeed
                importName: LightspeedPage
                module: LightspeedPlugin
                menuItem:
                  icon: LightspeedIcon
                  text: Lightspeed
  - package: oci://ghcr.io/redhat-developer/rhdh-plugin-export-overlays/red-hat-developer-hub-backstage-plugin-lightspeed-backend:bs_1.39.1__0.5.7!red-hat-developer-hub-backstage-plugin-lightspeed-backend
    disabled: false
    pluginConfig:
      lightspeed:
        # REQUIRED: Configure LLM servers with OpenAI API compatibility
        servers:
          - id: ${LLM_SERVER_ID}
            url: ${LLM_SERVER_URL}
            token: ${LLM_SERVER_TOKEN}
        # OPTIONAL: Port for lightspeed service (default: 8080)
        # servicePort: ${LIGHTSPEED_SERVICE_PORT}</pre></li><li class="listitem"><p class="simpara">
										Add your Developer Lightspeed for RHDH custom app config file as shown in the following example:
									</p><pre class="programlisting language-yaml"> extraAppConfig:
      - configMapRef: lightspeed-app-config
        filename: app-config.yaml</pre></li><li class="listitem"><p class="simpara">
										Update the <code class="literal">extraVolumes</code> section to include the LCS ConfigMap as shown in the following example:
									</p><pre class="programlisting language-yaml">extraVolumes:
      - configMap:
          name: /app-root/config/lightspeed-stack.yaml
        name: lightspeed-stack</pre></li><li class="listitem"><p class="simpara">
										Update the <code class="literal">extraVolumeMounts</code> section to mount the LCS and Llama Stack ConfigMap as shown in the following example:
									</p><pre class="programlisting language-yaml"> extraVolumeMounts:
      - mountPath: /app-root/config/lightspeed-stack.yaml
        name: lightspeed-stack</pre></li><li class="listitem"><p class="simpara">
										Add the Developer Lightspeed for RHDH and Llama Stack Secret file as shown in the following example:
									</p><pre class="programlisting language-yaml"> extraEnvVarsSecrets:
      - lightspeed-secrets</pre></li><li class="listitem"><p class="simpara">
										Add the LCS image as shown in the following example:
									</p><pre class="programlisting language-yaml">   extraContainers:
      - env:
          - name: PROJECT
            value: rhdh
          - name: LCS_CONFIG_FILE
            value: /app-root/config/lightspeed-stack.yaml
          - name: RHDH_CONFIG_FILE
            value: /app-root/config/lightspeed-app-config.yaml
        envFrom:
          - secretRef:
              name: lightspeed-secrets
        image: 'quay.io/redhat-ai-dev/llama-stack:latest'
        name: road-core-sidecar
        ports:
          - containerPort: 8080
            name: lcs-backend
            protocol: TCP
        volumeMounts:
          - mountPath: /app-root/config/lightspeed-stack.yaml
            name: lightspeed-stack
            subPath: lightspeed-stack.yaml
          - mountPath: /app-root/config/lightspeed-app-config.yaml
            name: lightspeed-app-config
            subPath: app-config.yaml
          - mountPath: /app-root/run.yaml
            name: llama-stack-config
            subPath: run.yaml</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
											Your RHDH container is typically already present in your Helm chart. You are adding the two additional container definitions for LCS and Llama Stack as the LCS sidecar.
										</p></div></div></li><li class="listitem">
										Click <span class="strong strong"><strong>Save</strong></span>.
									</li><li class="listitem"><p class="simpara">
										Click <span class="strong strong"><strong>Helm upgrade</strong></span>.
									</p><div class="formalpara"><p class="title"><strong>Example of a Helm chart with the LCS and Llama Stack container</strong></p><p>
											
<pre class="programlisting language-yaml">global:
 ...
upstream:
 backstage:
   appConfig:
     ...
   args:
     ...
   extraAppConfig:
     - configMapRef: lightspeed-app-config
       filename: app-config.yaml
     - configMapRef: llama-stack-config
       filename: run.yaml
   extraContainers:
     - env:
         - name: PROJECT
           value: rhdh
         - name: LCS_CONFIG_FILE
           value: /app-root/config/lcsconfig.yaml
         - name: LLAMA_STACK_CONFIG_FILE
           value: /app-root/run.yaml
         - name: RHDH_CONFIG_FILE
           value: /app-root/config/lightspeed-app-config.yaml
       envFrom:
         - secretRef:
             name: lightspeed-secrets
       image: 'quay.io/redhat-ai-dev/llama-stack:latest'
       name: lightspeed-core-sidecar
       ports:
         - containerPort: 8080
           name: lcs-backend
           protocol: TCP
       volumeMounts:
         - mountPath: /app-root/config/lightspeed-stack.yaml
           name: lightspeed-stack
           subPath: lightspeed-stack.yaml
         - mountPath: /app-root/run.yaml
           name: llama-stack-config
           subPath: run.yaml
         - mountPath: /app-root/config/lightspeed-app-config.yaml
           name: lightspeed-app-config
           subPath: lightspeed-app-config.yaml
   extraEnvVars:
     ...
   extraEnvVarsSecrets:
     - lightspeed-secrets
   extraVolumeMounts:
     - mountPath: /app-root/config/lightspeed-stack.yaml
       name: lightspeed-stack
     - mountPath: /app-root/run.yaml
       name: llama-stack-config
   extraVolumes:
     - configMap:
         name: lightspeed-stack
       name: lightspeed-stack
     ...
   image:
     ...
   initContainers:
     ...</pre>
										</p></div></li></ol></div></li></ol></div></li><li class="listitem"><p class="simpara">
						Define permissions and roles for your users who are not administrators by completing the following steps:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Configure the required RBAC permission by defining an <code class="literal">rbac-policies.csv</code> file as shown in the following example:
							</p><pre class="programlisting language-yaml">p, role:default/_&lt;your_team&gt;_, lightspeed.chat.read, read, allow
p, role:default/_&lt;your_team&gt;_, lightspeed.chat.create, create, allow
p, role:default/_&lt;your_team&gt;_, lightspeed.chat.delete, delete, allow

g, user:default/_&lt;your_user&gt;_, role:default/_&lt;your_team&gt;_</pre></li><li class="listitem">
								Upload your <code class="literal">rbac-policies.csv</code> and <code class="literal">rbac-conditional-policies.yaml</code> files to an <code class="literal">rbac-policies</code> config map in your OpenShift Container Platform project containing RHDH.
							</li><li class="listitem"><p class="simpara">
								Update your Backstage custom resource to mount in the RHDH filesystem your files from the <code class="literal">rbac-policies</code> ConfigMap:
							</p><pre class="programlisting language-yaml">apiVersion: rhdh.redhat.com/v1alpha3
kind: Backstage
spec:
  application:
    extraFiles:
      mountPath: /opt/app-root/src
      configMaps:
        - name: rbac-policies</pre><p class="simpara">
								For detailed information, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/authorization_in_red_hat_developer_hub/indexmanaging-authorizations-by-using-external-files">Managing authorizations by using external files</a>.
							</p></li></ol></div></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Log in to your RHDH instance.
					</li><li class="listitem">
						In your Red Hat Developer Hub navigation menu, you are able to see and access the <span class="strong strong"><strong>Lightspeed</strong></span> menu item. Clicking this menu takes you to the Developer Lightspeed for RHDH screen.
					</li></ol></div><div class="informalfigure"><div class="mediaobject"><img src="images/rhdh-plugins-reference/developer-lightspeed.png" alt="developer lightspeed"/></div></div></section><section class="section" id="customizing-developer-lightspeed"><div class="titlepage"><div><div><h3 class="title">1.5. Customizing Developer Lightspeed for RHDH</h3></div></div></div><p>
				You can customize Developer Lightspeed for RHDH functionalities, such as, question validation, gathering feedback, and storing chat history in PostgreSQL.
			</p><section class="section" id="proc-using-question-validation_customizing-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.5.1. Using Question Validation in Developer Lightspeed for RHDH</h4></div></div></div><p>
					Question Validation is a feature utilized by Developer Lightspeed for RHDH to validate user queries, making sure they relate specifically to RHDH and related topics. When enabled, this feature restricts questions to RHDH-related topics for enhanced security.
				</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Prerequisites
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									The Developer Lightspeed for RHDH plugin must be configured in your RHDH instance.
								</li><li class="listitem">
									The LCS and Llama Stack sidecars must be deployed, as LCS handles question validation by implementing it as a safety shield on the Llama Stack side.
								</li></ul></div></li></ol></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						The Question Validation feature is controlled through configuration settings in both the frontend plugin configuration and the Llama Stack backend.
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Make sure the feature is configured in the Developer Lightspeed for RHDH plugin.
						</li></ol></div><p>
					To make sure the feature is explicitly enabled or to confirm its state, verify the setting in the Developer Lightspeed for RHDH application configuration file (<code class="literal">lightspeed-app-config.yaml</code>) as showin the following code:
				</p><p>
					+
				</p><pre class="programlisting language-yaml">lightspeed:
# OPTIONAL: Enable/disable question validation (default: true)
# When enabled, restricts questions to RHDH-related topics for better security
  questionValidation: true</pre><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								By default, <code class="literal">Question Validation</code> is typically enabled, restricting queries to RHDH-related topics.
							</li><li class="listitem">
								The configuration of the LLM servers must also be present in this file, referencing the appropriate environment variables sourced from a Kubernetes Secret.
							</li></ul></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
							Verify backend safety shield configuration.
						</li></ol></div><p>
					For <code class="literal">Question Validation</code> to function, the Llama Stack sidecar (which handles the AI logic) must have the <code class="literal">lightspeed_question_validity</code> provider configured as a safety shield in its <code class="literal">run.yaml</code>. This shield defines the allowed topics (Backstage, RHDH, Kubernetes, Openshift, CI/CD, and GitOps Pipelines).
				</p><p>
					+ .Llama Stack Safety Shield Definition (Example Snippet from run.yaml)
				</p><pre class="programlisting language-yaml">shields:
  - shield_id: lightspeed_question_validity-shield
    provider_id: lightspeed_question_validity</pre></section><section class="section" id="proc-gathering-feedback_customizing-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.5.2. Gathering feedback in Developer Lightspeed for RHDH</h4></div></div></div><p>
					Feedback collection is an optional feature configured on the LCS. This feature gathers user feedback by providing thumbs-up/down ratings and text comments directly from the chat window. LCS gathers the feedback, along with the user’s query and the response of the model, and stores it as a JSON file within the local file system of the Pod for later collection and analysis by the platform administrator. This can be useful for assessing model performance and improving your users' experience. The collected feedback is stored in the cluster where RHDH and LCS are deployed, and as such, is only accessible by the platform administrators for that cluster. For users that intend to have their data removed, they must request their respective platform administrator to perform that action as Red Hat does not collect (or have access to) any of this data.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To enable or disable feedback, in your LCS configuration file, add the following settings:
						</p><pre class="programlisting language-yaml">llm_providers:
   .......
lightspeed_stack:
   ......
  user_data_collection:
    feedback_disabled: &lt;true/false&gt;
    feedback_storage: "/app-root/tmp/data/feedback"</pre></li></ul></div></section><section class="section" id="proc-updating-the-system-prompt_customizing-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.5.3. Updating the system prompt in Developer Lightspeed for RHDH</h4></div></div></div><p>
					You can override the default system prompt that Developer Lightspeed for RHDH uses to better frame queries to your LLM. Customizing the system prompt allows you to refine the context, personality, and instructions that the LLM receives, improving the relevance and accuracy of the responses it creates for your specific environment.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To set a custom system prompt, in your Developer Lightspeed for RHDH app config file, add or modify the <code class="literal">lightspeed.systemPrompt</code> key and set its value to your preferred prompt string as shown in the following example:
						</p><pre class="programlisting language-yaml">lightspeed:
  # ... other lightspeed configurations
  systemPrompt: "You are a helpful assistant focused on {product} development."</pre></li></ul></div><p>
					Set <code class="literal">systemPrompt</code> to prefix all queries sent by Developer Lightspeed for RHDH to the LLM with this instruction, guiding the model to generate more tailored responses.
				</p></section><section class="section" id="proc-customizing-the-chat-history-storage_customizing-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.5.4. Customizing the chat history storage in Developer Lightspeed for RHDH</h4></div></div></div><p>
					By default, the {rcs-short} service stores chat history using an in-memory database. This means that if you restart the Pod containing the server, the chat history is lost. You can manually configure Developer Lightspeed for RHDH to store the chat history persistently as a long-term backup with PostgreSQL by any of the following methods:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							RHDH Operator
						</li><li class="listitem"><p class="simpara">
							RHDH Helm chart
						</p><div class="admonition warning"><div class="admonition_header">Warning</div><div><p>
								If you configure Developer Lightspeed for RHDH to store chat history using PostgreSQL, prompts and responses are recorded and can be reviewed by your platform administrators. If any of your user’s chat history contains any private, sensitive, or confidential information, this might have data privacy and security implications that you need to assess. For users that wish to have their chat data removed, they must request their respective platform administrator to perform this action. Red Hat does not collect (or have access to) any of this chat history data.
							</p></div></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							When you are using Developer Lightspeed for RHDH on an Operator-installed RHDH instance, in your RHDH instance ConfigMap, update the <code class="literal">conversation-cache</code> field as shown in the following example:
						</p><pre class="programlisting language-yaml"> conversation_cache:
    type: postgres
    postgres:
      host: _&lt;your_database_host&gt;_
      port: _&lt;your_database_port&gt;_
      dbname: _&lt;your_database_name&gt;_
   	  user: _&lt;your_user_name&gt;_
	    password_path: postgres_password.txt
	    ca_cert_path: postgres_cert.crt
      ssl_mode: "require"</pre></li><li class="listitem"><p class="simpara">
							When you are using Developer Lightspeed for RHDH on a Helm-installed RHDH instance, in your RHDH instance <code class="literal">values.yaml</code> file, update the <code class="literal">conversation-cache</code> field as shown in the following example:
						</p><pre class="programlisting language-yaml"> conversation_cache:
    type: postgres
    postgres:
      host: _&lt;your_database_host&gt;_
      port: _&lt;your_database_port&gt;_
      dbname: _&lt;your_database_name&gt;_
   	  user: _&lt;your_user_name&gt;_
	    password_path: postgres_password.txt
	    ca_cert_path: postgres_cert.crt</pre></li></ul></div></section><section class="section" id="proc-changing-your-llm-provider_customizing-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.5.5. Changing your LLM provider in Developer Lightspeed for RHDH</h4></div></div></div><p>
					Developer Lightspeed for RHDH operates on a <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/interacting_with_red_hat_developer_lightspeed_for_red_hat_developer_hub/index#con-about-bring-your-own-model_appendix-about-user-data-security"><span class="emphasis"><em>Bring Your Own Model</em></span></a> approach, meaning you must provide and configure access to your preferred Large Language Model (LLM) provider for the service to function. The Road-Core Service (RCS) acts as an intermediary layer that handles the configuration and setup of these LLM providers.
				</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
						The LLM provider configuration section includes a mandatory dummy provider block. Due to limitations of Road Core, this dummy provider must remain present when working with Lightspeed. This block is typically marked with comments (# Start: Do not remove this block and # End: Do not remove this block) and must not be removed from the configuration file.
					</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							The path to the file containing your API token must be accessible by the RCS container, requiring the file to be mounted to the RCS container.
						</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						You can define additional LLM providers using either of following methods:
					</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Recommended: In your Developer Lightspeed plugin configuration (the <code class="literal">lightspeed</code> section within the <code class="literal">lightspeed-app-config.yaml</code> file), define the new provider or providers under the <code class="literal">lightspeed.servers</code> key as shown in the following code:
						</p><pre class="programlisting language-yaml">lightspeed:
  servers:
    - id: _&lt;my_new_provider&gt;_
      url: _&lt;my_new_url&gt;_
      token: _&lt;my_new_token&gt;_</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
								In Developer preview, only one LLM server is supported at a time.
							</p></div></div><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									Optional: You can set the <code class="literal">id</code>, <code class="literal">url</code>, and <code class="literal">token</code> values in a Kubernetes Secret and reference them as environment variables using the <code class="literal">envFrom</code> section.
								</li></ul></div></li></ul></div><pre class="screen">containers:
    - name: my-container
      image: my-image
      envFrom:
        - secretRef:
            name: my-secret</pre><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							You can add new LLM providers by updating the <code class="literal">rcsconfig.yaml</code> file.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									In the <code class="literal">llm_providers</code> section within your <code class="literal">rcsconfig.yaml</code> file, add your new provider configuration below the mandatory dummy provider block as shown in the following code:
								</p><pre class="programlisting language-yaml">llm_providers:
   # Start: Do not remove this block
    - name: dummy
      type: openai
      url: https://dummy.com
      models:
        - name: dummymodel
   # END: Do not remove this block
    - name: _&lt;my_new_providers&gt;_
      type: openai
      url: _&lt;my_provider_url&gt;_
      credentials_path: path/to/token
      disable_model_check: true</pre></li><li class="listitem"><p class="simpara">
									If you need to define a new provider in <code class="literal">rcsconfig.yaml</code>, you must configure the following critical parameters:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											<code class="literal">credentials_path</code>: Specifies the path to a <code class="literal">.txt</code> file that contains your API token. This file must be mounted and accessible by the RCS container.
										</li><li class="listitem">
											<code class="literal">disable_model_check</code>: Set this field to <code class="literal">true</code> to allow the RCS to locate models through the <code class="literal">/v1/models</code> endpoint of the provider. When you set this field to <code class="literal">true</code>, you avoid the need to define model names explicitly in the configuration.
										</li></ul></div></li></ol></div></li></ul></div></section><section class="section" id="proc-configure-mcp-components_customizing-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.5.6. Configuring the Model Context Protocol (MCP)</h4></div></div></div><p>
					You can configure the Model Context Protocol (MCP) to leverage Developer Lightspeed for RHDH. With MCP configuration, the deployed LCS and Llama Stack server utilize external tools and retrieve real-time data. This allows the virtual assistant to execute complex actions and incorporate current operational context into its responses. You must synchronize settings across three components: the Llama Stack tool definition, the LCS server endpoint definition, and the Red Hat Developer Lightspeed for Red Hat Developer Hub Plugin authorization token.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the {llama-name} tool definition. Define the MCP provider in the <code class="literal">tool_runtime</code> section of the Llama Stack configuration file (<code class="literal">run.yaml</code>).
						</p><pre class="programlisting language-yaml">providers:
  tool_runtime:
    - provider_id: model-context-protocol
      provider_type: remote::model-context-protocol
      config: {}</pre></li><li class="listitem">
							Configure the LCS server endpoint. In the LCS configuration file (<code class="literal">lightspeed-stack.yaml</code>), define the MCP server endpoints. The <code class="literal">provider_id</code> must** match the Llama Stack definition (<code class="literal">model-context-protocol</code>).
						</li></ol></div><pre class="programlisting language-yaml">mcp_servers:
  - name: mcp::backstage
    provider_id: model-context-protocol
    url: https://rhdh-mcp-proxy-apicast-production.apps.rosa.redhat-ai-dev.m6no.p3.openshiftapps.com:443/api/mcp-actions/v1</pre><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Configure the Red Hat Developer Lightspeed for Red Hat Developer Hub plugin authorization token. In the Red Hat Developer Lightspeed for Red Hat Developer Hub plugin configuration file (<code class="literal">lightspeed-app-config.yaml</code>), specify the MCP servers and provide the token for authorization. This token is used when the plugin makes requests to the LCS <code class="literal">/v1/streaming_query</code> endpoint.
						</p><pre class="programlisting language-yaml">lightspeed:
  mcpServers:
  - name: mcp::backstage
    token: ${MCP_TOKEN}</pre></li></ol></div></section></section><section class="section" id="using-developer-lightspeed_customizing-developer-lightspeed"><div class="titlepage"><div><div><h3 class="title">1.6. Using Developer Lightspeed for RHDH</h3></div></div></div><p>
				Red Hat Developer Lightspeed for Red Hat Developer Hub is designed to support you when performing various tasks during your development workflow.
			</p><p>
				With <code class="literal">Question Validation</code> enabled, you can ask Developer Lightspeed for RHDH the following types of questions:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						“Tell me about Red Hat Developer Hub.”
					</li><li class="listitem">
						“What are the benefits of RHDH?”
					</li><li class="listitem">
						“Can I use RHDH on an OpenShift Container Platform?”
					</li><li class="listitem">
						“How do I install plugins on Red Hat Developer Hub?”
					</li></ul></div><p>
				With <code class="literal">Question Validation</code> disabled, the scope of prompts you can put to Developer Lightspeed for RHDH is much broader. This allows Developer Lightspeed for RHDH to support you in a much more varied range of work situations as described in the following examples:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						“Analyze this log for me…”
					</li><li class="listitem">
						“Suggest libraries and frameworks I can use to build Event Driven Architecture microservices.”
					</li><li class="listitem">
						“I’m not familiar with this language, so explain to me what this code snippet is doing…”
					</li><li class="listitem">
						“Create a Kubernetes deployment for this service…”
					</li><li class="listitem">
						“Create a test plan for the following scenarios and conditions…”
					</li><li class="listitem">
						“Create a Jira record that describes the following feature…”
					</li><li class="listitem">
						“Draft the end-user documentation describing how to use the following cli command…”
					</li></ul></div><section class="section" id="proc-using-developer-lightspeed-to-start-a-chat-for-the-first-time_Using-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.6.1. Using Developer Lightspeed for RHDH to start a chat for the first time</h4></div></div></div><p>
					You can start a chat with Developer Lightspeed for RHDH for quick answers on a number of topics depending on your settings. You can manually start a chat with the Developer Lightspeed for RHDH or use the following sample prompts we have provided to help you get started:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							<span class="strong strong"><strong>Getting Started with Backstage</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>Deploy with Tekton</strong></span>
						</li><li class="listitem">
							<span class="strong strong"><strong>Create an OpenShift Deployment</strong></span>
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have the Developer Lightspeed for RHDH plugin configured in your RHDH instance.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In your RHDH navigation menu, click <span class="strong strong"><strong>Lightspeed</strong></span>.
						</li><li class="listitem"><p class="simpara">
							You can start a chat in either of the following ways:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									To manually start a chat, in the <span class="strong strong"><strong>Send a message</strong></span> text box, you can do any of the following tasks:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
											Type your query and press <span class="strong strong"><strong>Enter</strong></span>.
										</li><li class="listitem"><p class="simpara">
											To attach a file in the chat, click the <span class="strong strong"><strong>Attach</strong></span> icon or drag and drop the file in your chat.
										</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
												The following file types are supported: <code class="literal">yaml</code>, <code class="literal">json</code>, <code class="literal">txt</code>, and <code class="literal">xml</code>.
											</p></div></div></li><li class="listitem">
											Click <span class="strong strong"><strong>Open</strong></span>.
										</li></ul></div></li><li class="listitem">
									To start a chat using the existing prompts, in the Developer Lightspeed for RHDH virtual assistant interface, click any of the relevant prompt tiles.
								</li></ul></div></li></ol></div></section><section class="section" id="proc-using-developer-lightspeed-to-create-new-chats-after-the-first-time_Using-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.6.2. Using Developer Lightspeed for RHDH to create new chats after the first chat</h4></div></div></div><p>
					After you have started an initial chat with the Developer Lightspeed for RHDH, you can begin a chat on a new topic at any time. Even if you log out and log back in, your previous chats are still available in your chat history for you to view.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have the Developer Lightspeed for RHDH plugin configured in your RHDH instance.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In your RHDH navigation menu, click <span class="strong strong"><strong>Lightspeed</strong></span>.
						</li><li class="listitem">
							In the Developer Lightspeed for RHDH virtual assistant interface, click <span class="strong strong"><strong>New chat</strong></span>.
						</li></ol></div></section><section class="section" id="proc-using-developer-lightspeed-to-view-chat-history_Using-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.6.3. Using Developer Lightspeed for RHDH to view chat history</h4></div></div></div><p>
					Your chats with Developer Lightspeed for RHDH are automatically saved in your RHDH instance. You can easily revisit your chat history at any time, switch between chats, and revisit any previous chats. Each chat remains active, enabling you to go back to any of your previous chats and continue from where you left off.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have the Developer Lightspeed for RHDH plugin configured in your RHDH instance.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In your RHDH navigation menu, click <span class="strong strong"><strong>Lightspeed</strong></span>. Developer Lightspeed for RHDH opens with your previous chat.
						</li><li class="listitem"><p class="simpara">
							In the Developer Lightspeed for RHDH virtual assistant interface, do any of the following tasks:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									Select a chat title to open and view the full chat.
								</li><li class="listitem">
									In <span class="strong strong"><strong>Search previous chats…​</strong></span>, enter the text that you want to find from the earlier chats.
								</li></ul></div></li></ol></div></section><section class="section" id="proc-using-developer-lightspeed-to-delete-a-chat_Using-developer-lightspeed"><div class="titlepage"><div><div><h4 class="title">1.6.4. Using Developer Lightspeed for RHDH to delete a chat</h4></div></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You have the Developer Lightspeed for RHDH plugin configured in your RHDH instance.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							In your RHDH navigation menu, click <span class="strong strong"><strong>Lightspeed</strong></span>. Developer Lightspeed for RHDH opens with your previous chat.
						</li><li class="listitem">
							In Developer Lightspeed for RHDH, select the vertical ellipsis for the chat title of the chat that you want to delete.
						</li><li class="listitem">
							Select <span class="strong strong"><strong>Delete</strong></span>.
						</li></ol></div></section></section><section class="section" id="appendix-llm-requirements"><div class="titlepage"><div><div><h3 class="title">1.7. Appendix: LLM requirements</h3></div></div></div><section class="section" id="con-llm-requirements_appendix-llm-requirements"><div class="titlepage"><div><div><h4 class="title">1.7.1. Large language model (LLM) requirements</h4></div></div></div><p>
					Developer Lightspeed for RHDH follows a <span class="emphasis"><em>Bring Your Own Model</em></span> approach. This model means that to function, Developer Lightspeed for RHDH requires access to a large language model (LLM) which you must provide. An LLM is a type of generative AI that interprets natural language and generates human-like text or audio responses. When an LLM is used as a virtual assistant, the LLM can interpret questions and provide answers in a conversational manner.
				</p><p>
					LLMs are usually provided by a service or server. Since Developer Lightspeed for RHDH does not provide an LLM for you, you must configure your preferred LLM provider during installation. You can use Developer Lightspeed for RHDH with a number of LLM providers that offer the OpenAI API interface including the following LLMS:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							OpenAI (cloud-based inference service)
						</li><li class="listitem">
							Red Hat OpenShift AI (enterprise model builder &amp; inference server)
						</li><li class="listitem">
							Red Hat Enterprise Linux AI (enterprise inference server)
						</li><li class="listitem">
							Ollama (popular desktop inference server)
						</li><li class="listitem">
							vLLM (popular enterprise inference server)
						</li></ul></div></section><section class="section" id="con-openai_appendix-llm-requirements"><div class="titlepage"><div><div><h4 class="title">1.7.2. OpenAI</h4></div></div></div><p>
					OpenAI offers a range of generative AI models, such as GPT 5, which can be used to provide inference services for applications like Developer Lightspeed for RHDH.
				</p><p>
					To use OpenAI with Developer Lightspeed for RHDH, you need access to the OpenAI <a class="link" href="https://openai.com/api/">API platform</a>. For more information, see the <a class="link" href="https://platform.openai.com/docs/overview">OpenAI developer platform documentation</a>.
				</p></section><section class="section" id="con-ollama_appendix-llm-requirements"><div class="titlepage"><div><div><h4 class="title">1.7.3. Ollama</h4></div></div></div><p>
					Ollama is a powerful and easy-to-use open-source project that simplifies the process of running large language models (LLMs) locally on your computer. It provides a simple command-line interface for downloading, managing, and running a wide variety of open-source models, such as Llama 3, Mistral, and many others, all without requiring a dedicated server or cloud service. By abstracting away the complex setup and dependencies, Ollama makes it accessible for developers, researchers, and enthusiasts to experiment with, build on, and integrate state-of-the-art LLMs into their applications directly from their personal machines.
				</p><p>
					The open source Ollama server in container form provides a convenient local testbed for LLM models that is very accessible and easily controlled.
				</p><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://ollama.com">Ollama</a>
						</li><li class="listitem">
							<a class="link" href="https://hub.docker.com/r/ollama/ollama">Ollama server container</a>
						</li></ul></div></section><section class="section" id="con-vllm_appendix-llm-requirements"><div class="titlepage"><div><div><h4 class="title">1.7.4. vLLM</h4></div></div></div><p>
					<a class="link" href="https://docs.vllm.ai/en/stable/">vLLM</a> is an open-source, high-throughput serving engine for large language models (LLMs) that significantly improves upon traditional serving systems. It achieves this by introducing several key optimizations to reduce memory usage and eliminate redundant computations. vLLM prominently increases the number of concurrent requests an LLM can handle, making it a powerful tool for deploying and scaling LLM-based applications.
				</p></section></section><section class="section" id="appendix-about-user-data-security"><div class="titlepage"><div><div><h3 class="title">1.8. Appendix About user data security</h3></div></div></div><section class="section" id="con-about-data-use_appendix-about-user-data-security"><div class="titlepage"><div><div><h4 class="title">1.8.1. About data use</h4></div></div></div><p>
					Developer Lightspeed for RHDH is a virtual assistant you interact with using natural language. Using the Developer Lightspeed for RHDH interface, you send chat messages that Developer Lightspeed for RHDH transforms and sends to the large language model (LLM) provider you have configured for your environment. These messages could potentially contain information provided by your users about themselves, your cluster, cluster resources, or other aspects of your business or working environment.
				</p><p>
					Developer Lightspeed for RHDH has limited capabilities to filter or redact the information you provide to the LLM. Do not enter information into Developer Lightspeed for RHDH that you do not want to send to the LLM provider. To remind end users not to share private or confidential information, Developer Lightspeed for RHDH begins each new chat with an 'Important' message asking them not to “include personal or sensitive information” in their chat messages.
				</p></section><section class="section" id="con-about-feedback-collection_appendix-about-user-data-security"><div class="titlepage"><div><div><h4 class="title">1.8.2. About feedback collection</h4></div></div></div><p>
					Developer Lightspeed for RHDH collects feedback from users who engage with the feedback feature in the virtual assistant interface. If a user submits feedback, the feedback score (thumbs up or down), text feedback (if entered), the user query, and the LLM provider response are stored locally in the file system of the Pod. Red Hat does not have access to the collected feedback data.
				</p></section><section class="section" id="con-about-bring-your-own-model_appendix-about-user-data-security"><div class="titlepage"><div><div><h4 class="title">1.8.3. About Bring Your Own Model</h4></div></div></div><p>
					Developer Lightspeed for RHDH does not provide its own inference services, but uses a <span class="emphasis"><em>Bring Your Own Model</em></span> approach. This means that you can configure the {rcs-name} to talk to the inference server or service of your choice. This also means that you are responsible for ensuring that the configured service meets your particular company policies and legal requirements, including any applicable terms with the third-party model provider. The only technical requirements for inference services are:
				</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							The service must conform to the OpenAI API specification.
						</li><li class="listitem">
							The service must be configured correctly following the installation and configuration instructions. There are many commercial and open source inference services that support the OpenAI API specification for chat completions. The cost, performance, and security of these services can differ and it is up to you to choose, through evaluation and testing, the inference service that best meets your company’s needs.
						</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							<a class="link" href="https://github.com/openai/openai-openapi/tree/manual_spec">OpenAI API specification</a>
						</li></ul></div></section><section class="section" id="con-your-responsibility_appendix-about-user-data-security"><div class="titlepage"><div><div><h4 class="title">1.8.4. Your responsibility</h4></div></div></div><p>
					All of the information your users share in their questions and responses with Developer Lightspeed for RHDH are shared with the LLM inference service you configured. You are responsible for ensuring compliance with your company’s policies regarding the sharing of data with your chosen inference service.
				</p></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm46158433043568"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2025 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></section></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>