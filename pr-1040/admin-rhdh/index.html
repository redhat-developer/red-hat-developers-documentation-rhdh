<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<title>Administration guide for Red Hat Developer Hub</title>
<style>
/* Red Hat Fonts */
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Display';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatDisplay/RedHatDisplayVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 900;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Text';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatText/RedHatTextVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: normal;
  font-display: fallback;
}
@font-face {
  font-family: 'Red Hat Mono';
  src: url("https://redhatofficial.github.io/RedHatFont/RedHatMono/RedHatMonoVF-Italic.woff2") format('woff2-variations');
  font-weight: 300 700;
  font-style: italic;
  font-display: fallback;
}

/* Positioning toc and content */
@media screen and (min-width: 768px) {
  body.toc2 {
    padding-left: 400px;
    padding-right: 0;
  }
}
@media screen and (min-width: 768px) {
  #toc.toc2 {
    margin-top: 0 !important;
    position: fixed;
    width: 319px;
    left: 0;
    top: 0;
    border-right: 1px solid #e7e7e9;
    border-top-width: 0 !important;
    border-bottom-width: 0 !important;
    z-index: 1000;
    padding: 1.25em 1em;
    height: 100%;
    overflow: auto;
  }
}

/* Style borrowed from docs.redhat.com and adapted to the HTML structure */

#toc.toc2 {
  background:#f2f2f2;
  justify-content:space-between;
  margin:1rem 0 2rem;
  padding:1rem
}
#toctitle {
  font-size:1.25rem;
  font-weight:400;
  line-height:1.6667;
  margin-top:0;
  text-transform:none
}
#toc li {
  margin-bottom:.25em;
  padding-left:0;
  list-style:none;
}
#toc a,
#toc a:visited {
  color:black;
  display:inline-block;
  text-decoration:none;
}

.sectlevel1 {
  padding-left:0;
}

.sectlevel2,
.sectlevel3,
.sectlevel4,
.sectlevel5 {
  padding-left:1em;
}

h3 {
  color:#464646;
  font-family:var(--rh-font-family-heading,"Red Hat Display",Helvetica,Arial,sans-serif);
  font-size:var(--rh-font-size-body-text-lg,1.125rem)
}

li {
  display:list-item;
  margin:0;
  padding:0;
  text-align:-webkit-match-parent
}

*,
:after,
:before,
:after,
:before {
  box-sizing:border-box
}
img,
object,
svg,
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
hr {
  border:0;
  border-top:.0625rem solid #d2d2d2;
  clear:both;
  margin:1rem 0
}
a {
  color:#06c;
  text-decoration:underline
}
a:focus,
a:hover {
  color:#036
}
p {
  margin:1.49963rem 0
}
li>p {
  margin:0
}
h1,
h2,
h3,
h4,
h5,
h6 {
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-weight:400;
  margin:0 0 .625rem;
  color:#464646;
}
h1 {
  font-size:2rem;
  margin:2rem 0
}
h2 {
  font-size:2rem;
  margin:2rem 0
}
h3 {
  font-size:1.65rem;
  font-weight:400
}
h4 {
  font-size:1.5rem
}
h5 {
  font-size:1.25rem
  font-weight:400
}
h6 {
  font-size:1.125rem;
  font-weight:500;
  line-height:1.6667
}
ol ::marker,
ul ::marker {
  font:inherit
}
li {
  margin:0 0 .5em;
  padding:0
}
li>p {
  margin:.5rem 0
}
li>ol,
li>ul {
  margin:0
}
dl dd {
  margin:.5rem 0 .5rem 1rem
}
dl dd>p {
  margin:.5rem 0
}
.informaltable,
.table-contents,
.table-wrapper {
  max-height:var(--rh-table--maxHeight);
  overflow:auto
}
table {
  border:0;
  font-size:1rem;
  line-height:1.6667;
  /* commented out as it breaks on Safari on Mac // table-layout:fixed */
}
table caption {
  color:#585858;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:left
}
table td,
table th {
  border:0;
  border-bottom:.0625rem solid #d2d2d2;
  border-bottom:.0625rem solid var(--pfe-table--Border,#d2d2d2);
  padding:.5em 1rem
}
table td.halign-left,
table th.halign-left {
  text-align:left
}
table td.halign-center,
table th.halign-center,
table td.halign-center,
table th.halign-center {
  text-align:center
}
table td.halign-right,
table th.halign-right {
  text-align:right
}
table td.valign-top,
table th.valign-top {
  vertical-align:top
}
table td.valign-middle,
table th.valign-middle {
  vertical-align:middle
}
table td.valign-bottom,
table th.valign-bottom {
  vertical-align:bottom
}
table thead td,
table thead th {
  background:#f5f5f5;
  font-weight:600
}
rh-table table,
rh-table.rh-table--expanded-vertically {
  max-height:-moz-max-content;
  max-height:max-content
}
pre.nowrap {
  overflow:auto;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
.listingblock pre {
  background:transparent
}

[class] pre code {
  background:inherit;
  color:inherit;
  font-family:inherit;
  font-size:inherit;
  font-weight:inherit;
  line-height:inherit;
  padding:0
}
.keycap,
kbd {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
.keycap strong,
.keycap strong {
  font-weight:inherit
}
kbd.keyseq,
kbd.keyseq {
  background:transparent;
  border:0;
  box-shadow:none;
  padding:0
}
kbd.keyseq kbd,
kbd.keyseq kbd {
  display:inline-block;
  margin:0 .375rem
}
kbd.keyseq kbd:first-child,
kbd.keyseq kbd:first-child {
  margin-left:0
}
b.button {
  font-size:90%;
  font-weight:700;
  padding:.1875rem
}
b.button:before {
  content:"["
}
b.button:after {
  content:"]"
}
html {
  font-family:sans-serif;
  -ms-text-size-adjust:100%;
  -webkit-text-size-adjust:100%
}
body {
  margin:0
}
audio,
canvas,
progress,
video {
  display:inline-block;
  vertical-align:baseline
}
audio:not([controls]) {
  display:none;
  height:0
}
[hidden],
template {
  display:none
}
a {
  background:transparent
}
a:active,
a:hover {
  outline:0
}
abbr[title] {
  border-bottom:.0625rem dotted
}
dfn {
  font-style:italic
}

mark {
  background:#ff0;
  color:#000
}
small {
  font-size:80%
}
sub,
sup {
  font-size:75%;
  line-height:0;
  position:relative;
  vertical-align:baseline
}
sup {
  top:-.5em
}
sub {
  bottom:-.25em
}
img {
  border:0
}
svg:not(:root) {
  overflow:hidden
}
figure {
  margin:1em 2.5rem
}
hr {
  box-sizing:content-box;
  height:0
}
code,
kbd,
pre,
samp {
  font-family:monospace,monospace;
  font-size:1em
}
button,
optgroup,
select,
textarea,
.rhdocsinput {
  color:inherit;
  font:inherit;
  margin:0
}
button {
  overflow:visible
}
button,
select {
  text-transform:none
}
button,
html input[type=button],
input[type=reset],
input[type=submit] {
  -moz-appearance:button;
  appearance:button;
  -webkit-appearance:button;
  cursor:pointer
}
button[disabled],
html input[disabled] {
  cursor:default
}
button::-moz-focus-inner,
input::-moz-focus-inner {
  border:0;
  padding:0
}
input {
  line-height:normal
}
input[type=checkbox],
input[type=radio] {
  box-sizing:border-box;
  padding:0
}
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button {
  height:auto
}
input[type=search] {
  -moz-appearance:textfield;
  appearance:textfield;
  -webkit-appearance:textfield;
  box-sizing:content-box
}
input[type=search]::-webkit-search-cancel-button,
input[type=search]::-webkit-search-decoration {
  -webkit-appearance:none
}
fieldset {
  border:.0625rem solid silver;
  margin:0 .125rem;
  padding:.35em .625em .75em
}
legend {
  border:0;
  padding:0
}
textarea {
  overflow:auto
}
optgroup {
  font-weight:700
}
table {
  border-collapse:collapse;
  border-spacing:0
}
td,
th {
  padding:0
}

.admonitionblock>div:nth-child(2),
.caution>div:nth-child(2),
.important>div:nth-child(2),
.note>div:nth-child(2),
.tip>div:nth-child(2),
.warning>div:nth-child(2) {
  margin:.5rem 0
}
.admonitionblock>div:nth-child(2)>:first-child,
.caution>div:nth-child(2)>:first-child,
.important>div:nth-child(2)>:first-child,
.note>div:nth-child(2)>:first-child,
.tip>div:nth-child(2)>:first-child,
.warning>div:nth-child(2)>:first-child {
  margin-top:0
}
.admonitionblock>div:nth-child(2)>:last-child,
.caution>div:nth-child(2)>:last-child,
.important>div:nth-child(2)>:last-child,
.note>div:nth-child(2)>:last-child,
.tip>div:nth-child(2)>:last-child,
.warning>div:nth-child(2)>:last-child {
  margin-bottom:0
}
.listingblock+.listingblock,
pre+pre,
pre[class]+pre[class] {
  margin-top:2rem
}
.listingblock {
  background:#f8f8f8;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0;
  border: 1px solid grey;
  border-radius:.1rem;
}
.listingblock:before {
  background-repeat:no-repeat;
  background-size:6.25rem 100%;
  bottom:var(--scrollbar__height,1px);
  content:"";
  display:block;
  height:7.125rem;
  max-height:100%;
  max-height:calc(100% - var(--scrollbar__height, 2px));
  position:absolute;
  right:var(--scrollbar__width,6px);
  top:.0625rem;
  width:4.0625rem;
  z-index:1
}

.colist>ol {
  counter-reset:colist;
  list-style:none;
  margin:1rem 0 2rem;
  padding:0
}
.colist>ol>li {
  counter-increment:colist;
  margin:.5rem 0;
  padding-left:1.75rem;
  position:relative;
}
.colist>ol>li:before {
  content:counter(colist);
  left:0;
  position:absolute;
  top:.1875rem
}
.colist>ol>li:before,
.conum {
  background:#06c;
  border-radius:50%;
  color:#fff;
  display:inline-block;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-style:normal;
  font-weight:600;
  height:1.25rem;
  line-height:1.35rem;
  padding:0;
  text-align:center;
  top:-.125em;
  vertical-align:middle;
  width:1.25rem
}
.colist div.paragraph {
  margin:0
}

rh-table {
  display:block
}
::-webkit-scrollbar,
:host ::-webkit-scrollbar {
  height:.625rem;
  width:.625rem
}
::-webkit-scrollbar,
::-webkit-scrollbar-track,
:host ::-webkit-scrollbar,
:host ::-webkit-scrollbar-track {
  background-color:#d6d6d6
}
::-webkit-scrollbar-thumb,
:host ::-webkit-scrollbar-thumb {
  background-color:#8e8e8e
}
*,
:host * {
  scrollbar-color:#8e8e8e #d6d6d6
}
p:empty,
p:empty {
  display:none
}
.book {
  font-size: var(--rh-font-size-body-text-lg,1.125rem);
  font-weight: var(--rh-font-weight-body-text-regular,400);
  line-height: 1.6667;
  padding-left: 6rem;
  padding-right: 6rem;
  padding-top: var(--rh-space-3xl,4rem);
  max-width: 1400px;
}

.book[class] h1 code,
.book[class] h2 code,
.book[class] h3 code,
.book[class] h4 code,
.book[class] h5 code,
.book[class] h6 code,
[class] h1 code,
[class] h2 code,
[class] h3 code,
[class] h4 code,
[class] h5 code,
[class] h6 code {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
details[class] {
  list-style:none;
  margin:1rem 0 3rem;
  padding:0
}

.preamble {
  margin:0 0 2rem
}
.sect1 {
  margin:2rem 0 1rem
}
:host .sect1,
cp-documentation .sect1 {
  margin:0 0 2rem;
  padding:.0625rem 0 0
}
:host(.cp-documentation--has-external-header) .sect1:first-child>h2:first-child,
:host(.cp-documentation--has-external-header) .sect1:first-child>h3:first-child {
  margin-top:0
}
.listingblock,
.literalblock {
  margin:1rem 0
}
.quoteblock,
.verseblock {
  border-left:.25rem solid #d2d2d2;
  margin:1rem 0;
  padding:1rem 1rem 1rem 2rem
}
.quoteblock.pullleft,
.verseblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .quoteblock.pullleft,
  .verseblock.pullleft {
    margin-left:-1rem
  }
}
.quoteblock.pullright,
.verseblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .quoteblock.pullright,
  .verseblock.pullright {
    margin-right:-10rem
  }
}
.quoteblock>:first-child,
.verseblock>:first-child {
  margin-top:0
}
.quoteblock .content,
.verseblock .content {
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.25rem;
  line-height:1.6667
}
.quoteblock .attribution,
.verseblock .attribution {
  font-size:.875rem;
  font-style:italic;
  font-weight:600;
  line-height:1.6667;
  text-transform:uppercase
}
.quoteblock .attribution .citetitle,
.verseblock .attribution .citetitle {
  color:#585858
}
.quoteblock .attribution cite,
.verseblock .attribution cite {
  font-size:1em
}
.quoteblock blockquote {
  font-style:italic;
  margin:0;
  padding:0
}
.quoteblock blockquote .content>:first-child {
  margin-top:0
}
.quoteblock blockquote .content>:first-child:before {
  color:#e00;
  content:"â€œ";
  display:block;
  float:left;
  font-size:2.75rem;
  font-style:normal;
  line-height:1.125em;
  margin-right:.5rem
}
.quoteblock blockquote .content>:first-child .content>:first-child:before {
  content:none
}
.imageblock {
  margin:1rem 0
}
.imageblock.pullleft {
  float:left;
  margin-right:3rem;
  width:25rem
}
@media (min-width:768px) {
  .imageblock.pullleft {
    margin-left:-1rem
  }
}
.imageblock.pullright {
  float:right;
  margin-left:3rem;
  width:25rem
}
@media (min-width:768) {
  .imageblock.pullright {
    margin-right:-2rem
  }
}
@media (min-width:1100px) {
  .imageblock.pullright {
    margin-right:-10rem
  }
}
.imageblock.interrupter {
  margin:2rem 0
}
@media (min-width:768px) {
  .imageblock.interrupter {
    margin-left:-1rem;
    margin-right:-2rem
  }
  .imageblock.interrupter .caption {
    margin-left:1rem;
    margin-right:2rem
  }
}
@media (min-width:1100px) {
  .imageblock.interrupter {
    margin-right:-10rem
  }
  .imageblock.interrupter .caption {
    margin-right:10rem
  }
}
.imageblock.interrupter img {
  max-width:100%
}
.imageblock .caption {
  color:#585858;
  display:block;
  font-size:.875rem;
  line-height:1.6667;
  margin:.5rem 0 0
}
.rhdocs-footnotes {
  border-top:.0625rem solid #d2d2d2;
  margin:3rem 0 1rem;
  padding:1rem 0 0
}
.rhdocs-footnotes>ol {
  margin:0;
  padding:0 0 0 1.5rem
}
@supports (counter-reset:footnotenum) {
  .rhdocs-footnotes>ol {
    counter-reset:footnotenum;
    list-style:none;
    padding:0
  }
  .rhdocs-footnotes>ol>li {
    counter-increment:footnotenum
  }
  .rhdocs-footnotes>ol>li:before {
    color:#585858;
    content:"[" counter(footnotenum) "]";
    display:inline-block;
    margin-right:.25rem
  }
}
#footer {
  background:#ededed;
  color:#151515;
  font-size:.875rem;
  line-height:1.6667;
  margin:3rem 0 0;
  padding:1rem
}
.center {
  margin-left:auto;
  margin-right:auto
}
.stretch {
  width:100%
}

pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.language-none,
code.language-text,
code.language-txt,
pre.language-none,
pre.language-text,
pre.language-txt {
  color:#151515
}
code[class*=language-] ::-moz-selection,
code[class*=language-]::-moz-selection,
pre[class*=language-] ::-moz-selection,
pre[class*=language-]::-moz-selection {
  background:#cceae7;
  color:#263238
}
code[class*=language-] ::selection,
code[class*=language-]::selection,
pre[class*=language-] ::selection,
pre[class*=language-]::selection {
  background:#cceae7;
  color:#263238
}
:not(pre)>code[class*=language-] {
  border-radius:.2em;
  padding:.1em;
  white-space:normal
}
.token.atrule {
  color:#40199a
}
.token.attr-name {
  color:#06c
}
.token.attr-value,
.token.attribute {
  color:#b300b3
}
.token.boolean {
  color:#40199a
}
.token.builtin,
.token.cdata,
.token.char,
.token.class,
.token.class-name {
  color:#06c
}
.token.comment {
  color:#6a6e73
}
.token.constant {
  color:#40199a
}
.token.deleted {
  color:#c9190b
}
.token.doctype {
  color:#6a6e73
}
.token.entity {
  color:#c9190b
}
.token.function {
  color:#40199a
}
.token.hexcode {
  color:#b300b3
}
.token.id,
.token.important {
  color:#40199a;
  font-weight:700
}
.token.inserted {
  color:#06c
}
.token.keyword {
  color:#40199a
}
.token.number {
  color:#b300b3
}
.token.operator {
  color:#06c
}
.token.prolog {
  color:#6a6e73
}
.token.property {
  color:#06c
}
.token.pseudo-class,
.token.pseudo-element {
  color:#b300b3
}
.token.punctuation,
.token.regex {
  color:#06c
}
.token.selector {
  color:#c9190b
}
.token.string {
  color:#b300b3
}
.token.symbol {
  color:#40199a
}
.token.unit {
  color:#b300b3
}
.token.url,
.token.variable {
  color:#c9190b
}

@media print {
  .field code,
  .field pre,
  code[class*=language-],
  pre,
  pre[class*=language-] {
    white-space:pre-wrap!important;
    word-wrap:break-word!important;
    overflow-wrap:break-word!important;
    word-break:break-word!important
  }
}

.book>.titlepage:not(:last-child),
.chapter,
section[id] {
  padding-bottom:3.75rem
}
.book>.titlepage .chapter:last-child,
.book>.titlepage section[id]:last-child,
.chapter .chapter:last-child,
.chapter section[id]:last-child,
section[id] .chapter:last-child,
section[id] section[id]:last-child {
  margin-bottom:-3.75rem
}
.listingblock+section[id],
pre+section[id] {
  padding-top:3.75rem
}
.cta-link {
  font-size:inherit
}
a {
  word-wrap:break-word;
  overflow-wrap:break-word
}
.caution,
.important,
.note,
.tip,
.warning {
  padding:.8888888889em;
  position:relative
}
.caution {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.important {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.note {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.tip {
  background-color:#e0f0ff;
  border-top:2px solid #4394e5
}
.warning {
  background-color:#fff4cc;
  border-top:2px solid #dca614
}
.book>.titlepage,
.chapter,
section[id] {
  padding-bottom:var(--rh-space-4xl,64px)
}

.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.paragraph {
  margin:1.49963rem 0
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
dd {
  margin-bottom:2.5rem
}

.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}

.annotator-outer[class][class] {
  display:none;
  flex-direction:column;
  flex-grow:1;
  height:auto;
  margin:0;
  position:static;
  width:auto
}
@media (min-width:1400px) {
  .annotator-outer[class][class] {
    display:flex
  }
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
.title {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0;
  text-transform:none
}
.paragraph>.title[class]+.content>:first-child,
.paragraph>.title[class]+p,
p.title[class]+.content>:first-child,
p.title[class]+p {
  margin-top:0
}
[class] pre .caution,
[class] pre .important,
[class] pre .note,
[class] pre .tip,
[class] pre .warning {
  background:transparent;
  border:0;
  color:inherit;
  font:inherit;
  margin:0;
  padding:0
}
[class] pre .caution:after,
[class] pre .important:after,
[class] pre .note:after,
[class] pre .tip:after,
[class] pre .warning:after {
  content:none
}
[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}
[class] .author {
  margin-bottom:1.5rem
}
[class] .author .author {
  margin-bottom:0
}
table {
  margin:2rem 0
}
[class] table {
  width:auto
}
table .table-contents table {
  max-width:100%;
  overflow:auto
}
rh-table table {
  margin:0;
  max-width:9999em;
  overflow:visible
}
td,
th {
  border-left:0;
  padding:.5em 1rem;
  transition:background .25s ease-out
}
td.content--md[class][class],
th.content--md[class][class] {
  min-width:13em
}
td.content--lg[class][class],
th.content--lg[class][class] {
  min-width:20em
}
thead th {
  padding-top:1.5em
}
caption {
  color:currentColor;
  color:var(--pfe-table__caption--Color,currentColor);
  font-weight:700;
  margin-bottom:.5rem;
  margin-top:.5rem;
  text-align:center
}
.revhistory table td,
.revhistory table th {
  border-color:transparent
}
.revhistory table td {
  padding:.625rem .875rem
}
.revhistory table.simplelist {
  margin:0
}
@media print {
  #masthead {
    display:none!important
  }
}
.rh-table--is-full-screen #to-top {
  display:none
}
body {
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  background-color:white;
  font-family:var(--rh-font-family-body-text,RedHatText,"Red Hat Text","Noto Sans Arabic","Noto Sans Hebrew","Noto Sans JP","Noto Sans KR","Noto Sans Malayalam","Noto Sans SC","Noto Sans TC","Noto Sans Thai",Helvetica,Arial,sans-serif);
  font-size:var(--rh-body-copy-lage,1.125rem);
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
rh-codeblock::slotted(#content) {
  border-radius:.25rem;
  padding:var (--rh-space-lg,16px)
}
rh-codeblock .screen {
  display:grid;
  grid-template-columns:1fr 4.375rem
}
rh-codeblock[class][class][class][class][class] {
  max-width:99999em
}
pre {
  border:0;
  max-height:-moz-max-content;
  max-height:max-content
}
pre,
pre[class] {
  margin:0;
  padding:1.25em 1em;
  position:relative
}
rh-code-block>div.codeblock__inner-wrapper>pre,
rh-code-block>div.codeblock__inner-wrapper>pre[class] {
  margin:0;
  padding:0;
  position:relative
}
code[class*=language-],
pre[class*=language-] {
  color:#151515;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
code.literal {
  background:#eee;
  border-radius:.25rem;
  color:#000;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
code.literal,
kbd,
span.keycap {
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace
}
kbd,
span.keycap {
  background-color:#eee;
  background-image:linear-gradient(180deg,#ddd,#eee,#fff);
  border-radius:.1875rem;
  box-shadow:0 -.0625rem #fff,0 .0625rem 0 .1875rem #aaa;
  font-size:90%;
  font-weight:400;
  margin:0 .25rem;
  padding:.125rem .375rem
}
ol,
ul {
  margin:1rem 0;
  padding:0 0 0 1.5rem
}
._additional-resources[class][class],
._additional-resources[class][class][id]:last-child {
  background:#fff;
  border:.0625rem solid #d2d2d2;
  border-radius:.1875rem;
  margin:2em 0 4em;
  padding:2rem 2rem 1rem
}
._additional-resources[class][class] ul {
  border:0;
  list-style:none;
  margin:0;
  padding:0;
  position:relative
}
._additional-resources[class][class] li {
  border-bottom:.0625rem solid #d2d2d2;
  box-sizing:content-box;
  margin:0;
  padding:1rem 1.5rem 1rem 0;
  -moz-column-break-inside:avoid;
  break-inside:avoid
}
._additional-resources[class][class] li:last-child {
  border:0
}
section.section#additional_resource .additional-resources__heading,
section.section#additional_resource .heading,
section.section#additional_resource h1,
section.section#additional_resource h2,
section.section#additional_resource h3,
section.section#additional_resource h4,
section.section#additional_resource h5,
section.section#additional_resource h6,
section.section#additional_resource p.title {
  display:block;
  font-family:RedHatDisplay,Red Hat Display,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  font-weight:700;
  line-height:1.5rem;
  margin:0 0 .5rem;
  padding:0;
  text-transform:uppercase
}
section.section:first-of-type {
  margin-top:var(--rh-space-4xl,64px)
}
section.section p {
  margin-bottom:var(--rh-space-lg,16px);
  margin-top:0
}


dl {
  display:block;
  margin-block-end:1em;
  margin-block-start:1em;
  margin-inline-end:0;
  margin-inline-start:0
}
.paragraph {
  margin:1.49963rem 0
}
img,
object,
svg {
  display:inline-block;
  max-width:100%;
  vertical-align:middle
}
.titlepage .svg-img[data*="title_logo.svg"] {
  margin:1.5rem 0;
  width:15rem
}
.book[class] .author {
  margin-bottom:1.5rem
}
.book[class] .author .author {
  margin-bottom:0
}
.paragraph>.title[class],
p.title[class] {
  font-size:1rem;
  font-style:normal;
  font-weight:700;
  line-height:1.6667;
  margin:1.25rem 0 0
}
.example {
  border-left:.3125rem solid #ccc;
  margin-bottom:2rem;
  padding:1rem 0 1rem 1rem
}
code {
  background:#eee;
  color:#000;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:break-word;
  padding:.125em .5em;
  word-break:break-word
}
.paragraph[class] {
  margin-bottom:1.49963rem
}
.book[class] code.email {
  background-color:transparent;
  font:inherit;
  padding:0
}

.producttitle {
  color:#000;
  font-size:1.25rem;
  text-transform:uppercase
}
dl {
  margin:1rem 0
}
dl dt {
  font-weight:600;
  margin:.5rem 0
}
ol ol {
  list-style:lower-roman
}
.codeblock--processed pf-clipboard-copy::part(input),
.codeblock--processed pf-clipboard-copy::part(span) {
  display:none
}
.token.tag {
  color:#c9190b
}

.admonitionblock {
  margin-bottom:var(--rh-space-lg,1rem)
}
.guibutton,
.guimenu,
.guimenuitem {
  font-weight:700
}
.guibutton {
  font-size:90%;
  padding:.1875rem
}
.guibutton:before {
  content:"["
}
.guibutton:after {
  content:"]"
}
.book,
{
  --rh-table--maxHeight: calc(100vh - 6.25rem) ;
  color:#151515;
  font-family:RedHatText,Red Hat Text,Helvetica Neue,Arial,sans-serif;
  font-size:1.125rem;
  line-height:1.6667;
  -moz-tab-size:4;
  -o-tab-size:4;
  tab-size:4
}
pre[hidden] {
  display:none
}
.listingblock {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  margin:1rem 0;
  overflow:visible;
  position:relative;
  transform:translate(0);
  z-index:0
}
nopre {
  display:block;
  font-size:.8125rem;
  line-height:1.42857;
  margin:0 0 .625rem;
  word-break:break-all;
  word-wrap:break-word;
  background-color:var(--rh-color-surface-lighter,#f2f2f2);
  border:.0625rem solid #ccc;
  border-radius:.25rem;
  color:#333
}
.book pre,
pre {
  background:var(--rh-color-surface-lighter,#f2f2f2);
  color:#151515;
  font-family:RedHatMono,Red Hat Mono,Consolas,monospace;
  font-size:.875rem;
  line-height:1.6667;
  overflow-wrap:normal;
  white-space:pre;
  word-break:normal
}
pre[class] {
  line-height:1.6667;
  overflow-x:auto
}
*,
:after,
:before {
  box-sizing:border-box
}
:root {
  --rh-space-xs:4px;
  --rh-space-sm:6px;
  --rh-space-md:8px;
  --rh-space-lg:16px;
  --rh-space-xl:24px;
  --rh-space-2xl:32px;
  --rh-space-3xl:48px;
  --rh-space-4xl:64px;
  --rh-space-5xl:80px;
  --rh-space-6xl:96px;
  --rh-space-7xl:128px;
  --rh-font-size-body-text-xs:.75rem;
  --rh-font-size-body-text-sm:.875rem;
  --rh-font-size-body-text-md:1rem;
  --rh-font-size-body-text-lg:1.125rem;
  --rh-font-size-body-text-xl:1.25rem;
  --rh-font-size-body-text-2xl:1.5rem;
  --rh-font-size-heading-xs:1.25rem;
  --rh-font-size-heading-sm:1.5rem;
  --rh-font-size-heading-md:1.75rem;
  --rh-font-size-heading-lg:2.25rem;
  --rh-font-size-heading-xl:2.5rem;
  --rh-font-size-heading-2xl:3rem;
  --pfe-navigation--logo--maxWidth:200px;
  --pfe-navigation__logo--height:40px;
  --pfe-navigation--fade-transition-delay:.5s;
  --pfe-navigation__nav-bar--highlight-color:var(--rh-color-brand-red-on-dark,#e00);
  --pf-global--icon--FontSize--sm:.75rem
}
body,
html {
  font-family:Red Hat Text,sans-serif;
  font-size:var(--rh-font-size-body-text-md,1rem);
  line-height:var(--rh-line-height-body-text,1.5);
}

main {
  line-height:30px
}
section {
  padding-bottom:3rem;
  padding-top:3rem
}
img {
  max-width:100%
}
a {
  color:var(--rh-color-interactive-blue-darker,#06c);
  text-decoration:underline
}
a:hover {
  color:var(--rh-color-interactive-blue-darkest,#004080)
}

@media (min-width:576px) {
  .book {
    max-width:540px
  }
}
@media (min-width:768px) {
  .book {
    max-width:720px
  }
}
@media (min-width:992px) {
  .book {
    max-width:1250px
  }
}
section {
  padding:0
}
.list-unstyled {
  list-style:none;
  padding-left:0
}
.doc-image-link {
  display:inline-block;
  text-decoration:none
}
.admonitionblock{
  margin-bottom:var(--rh-space-lg,1rem)
  font-size:var(--rh-font-size-body-text-md,1rem)
}
.admonitionblock table {
  margin:0;
  border:none;
  width:fit-content
}
.admonitionblock td {
  margin:0;
  border:none;
  display:block
}
.admonitionblock .title {
  margin:0;
  color:#002952;
  font-weight:700
}


</style>
</head>
<body id="title-admin" class="article toc2 toc-left">
<div id="header">
<h1>Administration guide for Red Hat Developer Hub</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#assembly-add-custom-app-file-openshift_admin-rhdh">1. Adding a custom application configuration file to Red Hat OpenShift Container Platform</a>
<ul class="sectlevel2">
<li><a href="#proc-add-custom-app-file-openshift-helm_admin-rhdh">1.1. Adding a custom application configuration file to OpenShift Container Platform using the Helm chart</a></li>
<li><a href="#proc-add-custom-app-config-file-ocp-operator_admin-rhdh">1.2. Adding a custom application configuration file to OpenShift Container Platform using the Operator</a></li>
</ul>
</li>
<li><a href="#assembly-configuring-external-postgresql-databases">2. Configuring external PostgreSQL databases</a>
<ul class="sectlevel2">
<li><a href="#proc-configuring-postgresql-instance-using-operator_admin-rhdh">2.1. Configuring an external PostgreSQL instance using the Operator</a></li>
<li><a href="#proc-configuring-postgresql-instance-using-helm_admin-rhdh">2.2. Configuring an external PostgreSQL instance using the Helm Chart</a></li>
<li><a href="#proc-migrating-databases-to-an-external-server_admin-rhdh">2.3. Migrating local databases to an external database server using the Operator</a></li>
</ul>
</li>
<li><a href="#proc-configuring-an-rhdh-instance-with-tls-in-kubernetes_admin-rhdh">3. Configuring an RHDH instance with a TLS connection in Kubernetes</a></li>
<li><a href="#assembly-running-rhdh-behind-a-proxy">4. Running the RHDH application behind a corporate proxy</a>
<ul class="sectlevel2">
<li><a href="#proc-configuring-proxy-in-helm-deployment_admin-rhdh">4.1. Configuring proxy information in Helm deployment</a></li>
<li><a href="#proc-configuring-proxy-in-operator-deployment_admin-rhdh">4.2. Configuring proxy information in Operator deployment</a></li>
</ul>
</li>
<li><a href="#assembly-rhdh-integration-aws">5. Red Hat Developer Hub integration with Amazon Web Services (AWS)</a></li>
<li><a href="#assembly-admin-templates">6. Managing templates</a>
<ul class="sectlevel2">
<li><a href="#proc-creating-templates_assembly-admin-templates">6.1. Creating a template by using the Template Editor</a></li>
<li><a href="#ref-creating-templates_assembly-admin-templates">6.2. Creating a template as a YAML file</a></li>
<li><a href="#proc-adding-templates_assembly-admin-templates">6.3. Importing an existing template to Red Hat Developer Hub</a></li>
</ul>
</li>
<li><a href="#assembly-techdocs-plugin_assembly-admin-templates">7. Configuring the TechDocs plugin in Red Hat Developer Hub</a>
<ul class="sectlevel2">
<li><a href="#con-techdocs-configure-storage_assembly-admin-templates">7.1. Configuring storage for TechDocs files</a>
<ul class="sectlevel3">
<li><a href="#proc-techdocs-using-odf-storage_assembly-admin-templates">7.1.1. Using OpenShift Data Foundation for file storage</a></li>
<li><a href="#proc-techdocs-configure-odf-helm_assembly-admin-templates">7.1.2. Making object storage accessible to containers by using the Helm chart</a>
<ul class="sectlevel4">
<li><a href="#ref-techdocs-example-config-plugin-helm_assembly-admin-templates">Example TechDocs Plugin configuration for the Helm chart</a></li>
</ul>
</li>
<li><a href="#proc-techdocs-configure-odf-operator_assembly-admin-templates">7.1.3. Making object storage accessible to containers by using the Operator</a>
<ul class="sectlevel4">
<li><a href="#ref-techdocs-example-config-plugin-operator_assembly-admin-templates">Example TechDocs Plugin configuration for the Operator</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#con-techdocs-config-cicd_assembly-admin-templates">7.2. Configuring CI/CD to generate and publish TechDocs sites</a>
<ul class="sectlevel3">
<li><a href="#proc-techdocs-config-cicd-prep-repo_assembly-admin-templates">7.2.1. Preparing your repository for CI</a></li>
<li><a href="#proc-techdocs-generate-site_assembly-admin-templates">7.2.2. Generating the TechDocs site</a></li>
<li><a href="#proc-techdocs-publish-site_assembly-admin-templates">7.2.3. Publishing the TechDocs site</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#proc-rhdh-deployment-config_assembly-admin-templates">8. Configuring Red Hat Developer Hub deployment</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Red Hat Developer Hub is an enterprise-grade, open developer platform that you can use to build developer portals. This platform contains a supported and opinionated framework that helps reduce the friction and frustration of developers while boosting their productivity.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-add-custom-app-file-openshift_admin-rhdh">1. Adding a custom application configuration file to Red Hat OpenShift Container Platform</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To access the Red Hat Developer Hub, you must add a custom application configuration file to Red Hat OpenShift Container Platform. In OpenShift Container Platform, you can use the following content as a base template to create a ConfigMap named <code>app-config-rhdh</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: app-config-rhdh
data:
  app-config-rhdh.yaml: |
    app:
      title: Red Hat Developer Hub</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can add the custom application configuration file to OpenShift Container Platform in one of the following ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Red Hat Developer Hub Operator</p>
</li>
<li>
<p>The Red Hat Developer Hub Helm chart</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="proc-add-custom-app-file-openshift-helm_admin-rhdh">1.1. Adding a custom application configuration file to OpenShift Container Platform using the Helm chart</h3>
<div class="paragraph">
<p>You can use the Red Hat Developer Hub Helm chart to add a custom application configuration file to your OpenShift Container Platform instance.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created an Red Hat OpenShift Container Platform account.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From the OpenShift Container Platform web console, select the <strong>ConfigMaps</strong> tab.</p>
</li>
<li>
<p>Click <strong>Create ConfigMap</strong>.</p>
</li>
<li>
<p>From <strong>Create ConfigMap</strong> page, select the <strong>YAML view</strong> option in <strong>Configure via</strong> and make changes to the file, if needed.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
<li>
<p>Go to the <strong>Helm</strong> tab to see the list of Helm releases.</p>
</li>
<li>
<p>Click the overflow menu on the Helm release that you want to use and select <strong>Upgrade</strong>.</p>
</li>
<li>
<p>Use either the <strong>Form view</strong> or <strong>YAML view</strong> to edit the Helm configuration.</p>
<div class="ulist">
<ul>
<li>
<p>Using <strong>Form view</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Expand <strong>Root Schema → Backstage chart schema → Backstage parameters → Extra app configuration files to inline into command arguments</strong>.</p>
</li>
<li>
<p>Click the <strong>Add Extra app configuration files to inline into command arguments</strong> link.</p>
</li>
<li>
<p>Enter the value in the following fields:</p>
<div class="openblock">
<div class="content">
<div class="ulist">
<ul>
<li>
<p><strong>configMapRef</strong>: <code>app-config-rhdh</code></p>
</li>
<li>
<p><strong>filename</strong>: <code>app-config-rhdh.yaml</code></p>
</li>
</ul>
</div>
</div>
</div>
</li>
<li>
<p>Click <strong>Upgrade</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Using <strong>YAML view</strong></p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Set the value of the <code>upstream.backstage.extraAppConfig.configMapRef</code> and <code>upstream.backstage.extraAppConfig.filename</code> parameters as follows:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"># ... other Red Hat Developer Hub Helm Chart configurations
upstream:
  backstage:
    extraAppConfig:
      - configMapRef: app-config-rhdh
        filename: app-config-rhdh.yaml
# ... other Red Hat Developer Hub Helm Chart configurations</code></pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Upgrade</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc-add-custom-app-config-file-ocp-operator_admin-rhdh">1.2. Adding a custom application configuration file to OpenShift Container Platform using the Operator</h3>
<div class="paragraph">
<p>A custom application configuration file is a <code>ConfigMap</code> object that you can use to change the configuration of your Red Hat Developer Hub instance. If you are deploying your Developer Hub instance on Red Hat OpenShift Container Platform, you can use the Red Hat Developer Hub Operator to add a custom application configuration file to your OpenShift Container Platform instance by creating the <code>ConfigMap</code> object and referencing it in the Developer Hub custom resource (CR).</p>
</div>
<div class="paragraph">
<p>The custom application configuration file contains a sensitive environment variable, named <code>BACKEND_SECRET</code>. This variable contains a mandatory backend authentication key that Developer Hub uses to reference an environment variable defined in an OpenShift Container Platform secret. You must create a secret, named 'secrets-rhdh', and reference it in the Developer Hub CR.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You are responsible for protecting your Red Hat Developer Hub installation from external and unauthorized access. Manage the backend authentication key like any other secret. Meet strong password requirements, do not expose it in any configuration files, and only inject it into configuration files as an environment variable.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have an active Red Hat OpenShift Container Platform account.</p>
</li>
<li>
<p>Your administrator has installed the Red Hat Developer Hub Operator in OpenShift Container Platform. For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index">Installing the Red Hat Developer Hub Operator</a>.</p>
</li>
<li>
<p>You have created the Red Hat Developer Hub CR in OpenShift Container Platform.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>From the <strong>Developer</strong> perspective in the OpenShift Container Platform web console, select the <strong>Topology</strong> view, and click the <strong>Open URL</strong> icon on the Developer Hub pod to identify your Developer Hub external URL: <em>&lt;RHDH_URL&gt;</em>.</p>
</li>
<li>
<p>From the <strong>Developer</strong> perspective in the OpenShift Container Platform web console, select the <strong>ConfigMaps</strong> view.</p>
</li>
<li>
<p>Click <strong>Create ConfigMap</strong>.</p>
</li>
<li>
<p>Select the <strong>YAML view</strong> option in <strong>Configure via</strong> and use the following example as a base template to create a <code>ConfigMap</code> object, such as <code>app-config-rhdh.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: app-config-rhdh
data:
  "app-config-rhdh.yaml": |
    app:
      title: Red Hat Developer Hub
      baseUrl: &lt;RHDH_URL&gt; # <b class="conum">(1)</b>
    backend:
      auth:
        externalAccess:
            - type: legacy
              options:
                subject: legacy-default-config
                secret: "${BACKEND_SECRET}" # <b class="conum">(2)</b>
      baseUrl: &lt;RHDH_URL&gt; # <b class="conum">(3)</b>
      cors:
        origin: &lt;RHDH_URL&gt; # <b class="conum">(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Set the external URL of your Red Hat Developer Hub instance.</p>
</li>
<li>
<p>Use an environment variable exposing an OpenShift Container Platform secret to define the mandatory Developer Hub backend authentication key.</p>
</li>
<li>
<p>Set the external URL of your Red Hat Developer Hub instance.</p>
</li>
<li>
<p>Set the external URL of your Red Hat Developer Hub instance.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
<li>
<p>Select the <strong>Secrets</strong> view.</p>
</li>
<li>
<p>Click <strong>Create Key/value Secret</strong>.</p>
</li>
<li>
<p>Create a secret named <code>secrets-rhdh</code>.</p>
</li>
<li>
<p>Add a key named <code>BACKEND_SECRET</code> and a base64 encoded string as a value. Use a unique value for each Red Hat Developer Hub instance. For example, you can use the following command to generate a key from your terminal:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">node -p 'require("crypto").randomBytes(24).toString("base64")'</code></pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
<li>
<p>Select the <strong>Topology</strong> view.</p>
</li>
<li>
<p>Click the overflow menu for the Red Hat Developer Hub instance that you want to use and select <strong>Edit Backstage</strong> to load the YAML view of the Red Hat Developer Hub instance.</p>
<div class="imageblock">
<div class="content">
<img src="images/rhdh/operator-install-2.png" alt="operator install 2">
</div>
</div>
</li>
<li>
<p>In the CR, enter the name of the custom application configuration config map as the value for the <code>spec.application.appConfig.configMaps</code> field, and enter the name of your secret as the value for the <code>spec.application.extraEnvs.secrets</code> field. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: rhdh.redhat.com/v1alpha1
kind: Backstage
metadata:
  name: developer-hub
spec:
  application:
    appConfig:
      mountPath: /opt/app-root/src
      configMaps:
         - name: app-config-rhdh
    extraEnvs:
      secrets:
         - name: secrets-rhdh
    extraFiles:
      mountPath: /opt/app-root/src
    replicas: 1
    route:
      enabled: true
  database:
    enableLocalDb: true</code></pre>
</div>
</div>
</li>
<li>
<p>Click <strong>Save</strong>.</p>
</li>
<li>
<p>Navigate back to the <strong>Topology</strong> view and wait for the Red Hat Developer Hub pod to start.</p>
</li>
<li>
<p>Click the <strong>Open URL</strong> icon to use the Red Hat Developer Hub platform with the configuration changes.</p>
</li>
</ol>
</div>
<div class="ulist">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information about roles and responsibilities in Developer Hub, see <a href="https://access.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index">Role-Based Access Control (RBAC) in Red Hat Developer Hub</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-configuring-external-postgresql-databases">2. Configuring external PostgreSQL databases</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As an administrator, you can configure and use external PostgreSQL databases in Red Hat Developer Hub. You can use a PostgreSQL certificate file to configure an external PostgreSQL instance using the Operator or Helm Chart.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Developer Hub supports the configuration of external PostgreSQL databases. You can perform maintenance activities, such as backing up your data or configuring high availability (HA) for the external PostgreSQL databases.</p>
</div>
<div class="paragraph">
<p>By default, the Red Hat Developer Hub operator or Helm Chart creates a local PostgreSQL database. However, this configuration is not suitable for the production environments. For production deployments, disable the creation of local database and configure Developer Hub to connect to an external PostgreSQL instance instead.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="proc-configuring-postgresql-instance-using-operator_admin-rhdh">2.1. Configuring an external PostgreSQL instance using the Operator</h3>
<div class="paragraph">
<p>You can configure an external PostgreSQL instance using the Red Hat Developer Hub Operator. By default, the Operator creates and manages a local instance of PostgreSQL in the same namespace where you have deployed the RHDH instance. However, you can change this default setting to configure an external PostgreSQL database server, for example, Amazon Web Services (AWS) Relational Database Service (RDS) or Azure database.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You are using a supported version of PostgreSQL. For more information, see the <a href="https://access.redhat.com/support/policy/updates/developerhub">Product life cycle page</a>.</p>
</li>
<li>
<p>You have the following details:</p>
<div class="ulist">
<ul>
<li>
<p><code>db-host</code>: Denotes your PostgreSQL instance Domain Name System (DNS) or IP address</p>
</li>
<li>
<p><code>db-port</code>: Denotes your PostgreSQL instance port number, such as <code>5432</code></p>
</li>
<li>
<p><code>username</code>: Denotes the user name to connect to your PostgreSQL instance</p>
</li>
<li>
<p><code>password</code>: Denotes the password to connect to your PostgreSQL instance</p>
</li>
</ul>
</div>
</li>
<li>
<p>You have installed the Red Hat Developer Hub Operator.</p>
</li>
<li>
<p>Optional: You have a CA certificate, Transport Layer Security (TLS) private key, and TLS certificate so that you can secure your database connection by using the TLS protocol. For more information, refer to your PostgreSQL vendor documentation.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>By default, Developer Hub uses a database for each plugin and automatically creates it if none is found. You might need the <code>Create Database</code> privilege in addition to <code>PSQL Database</code> privileges for configuring an external PostgreSQL instance.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Optional: Create a certificate secret to configure your PostgreSQL instance with a TLS connection:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">cat &lt;&lt;EOF | oc -n &lt;your-namespace&gt; create -f -
apiVersion: v1
kind: Secret
metadata:
 name: &lt;crt-secret&gt; <b class="conum">(1)</b>
type: Opaque
stringData:
 postgres-ca.pem: |-
  -----BEGIN CERTIFICATE-----
  &lt;ca-certificate-key&gt; <b class="conum">(2)</b>
 postgres-key.key: |-
  -----BEGIN CERTIFICATE-----
  &lt;tls-private-key&gt; <b class="conum">(3)</b>
 postgres-crt.pem: |-
  -----BEGIN CERTIFICATE-----
  &lt;tls-certificate-key&gt; <b class="conum">(4)</b>
  # ...
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Provide the name of the certificate secret.</p>
</li>
<li>
<p>Provide the CA certificate key.</p>
</li>
<li>
<p>Optional: Provide the TLS private key.</p>
</li>
<li>
<p>Optional: Provide the TLS certificate key.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create a credential secret to connect with the PostgreSQL instance:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">cat &lt;&lt;EOF | oc -n &lt;your-namespace&gt; create -f -
apiVersion: v1
kind: Secret
metadata:
 name: &lt;cred-secret&gt; <b class="conum">(1)</b>
type: Opaque
stringData: <b class="conum">(2)</b>
 POSTGRES_PASSWORD: &lt;password&gt;
 POSTGRES_PORT: "&lt;db-port&gt;"
 POSTGRES_USER: &lt;username&gt;
 POSTGRES_HOST: &lt;db-host&gt;
 PGSSLMODE: &lt;ssl-mode&gt; # for TLS connection <b class="conum">(3)</b>
 NODE_EXTRA_CA_CERTS: &lt;abs-path-to-pem-file&gt; # for TLS connection, e.g. /opt/app-root/src/postgres-crt.pem <b class="conum">(4)</b>
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Provide the name of the credential secret.</p>
</li>
<li>
<p>Provide credential data to connect with your PostgreSQL instance.</p>
</li>
<li>
<p>Optional: Provide the value based on the required <a href="https://www.postgresql.org/docs/15/libpq-connect.html#LIBPQ-CONNECT-SSLMODE">Secure Sockets Layer (SSL) mode</a>.</p>
</li>
<li>
<p>Optional: Provide the value only if you need a TLS connection for your PostgreSQL instance.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create a <code>Backstage</code> custom resource (CR):</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">cat &lt;&lt;EOF | oc -n &lt;your-namespace&gt; create -f -
apiVersion: rhdh.redhat.com/v1alpha1
kind: Backstage
metadata:
  name: &lt;backstage-instance-name&gt;
spec:
  database:
    enableLocalDb: false <b class="conum">(1)</b>
  application:
    extraFiles:
      mountPath: &lt;path&gt; # e g /opt/app-root/src
      secrets:
        - name: &lt;crt-secret&gt; <b class="conum">(2)</b>
          key: postgres-crt.pem, postgres-ca.pem, postgres-key.key # key name as in &lt;crt-secret&gt; Secret
    extraEnvs:
      secrets:
        - name: &lt;cred-secret&gt; <b class="conum">(3)</b>
        # ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Set the value of the <code>enableLocalDb</code> parameter to <code>false</code> to disable creating local PostgreSQL instances.</p>
</li>
<li>
<p>Provide the name of the certificate secret if you have configured a TLS connection.</p>
</li>
<li>
<p>Provide the name of the credential secret that you created.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The environment variables listed in the <code>Backstage</code> CR work with the Operator default configuration. If you have changed the Operator default configuration, you must reconfigure the <code>Backstage</code> CR accordingly.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Apply the <code>Backstage</code> CR to the namespace where you have deployed the RHDH instance.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc-configuring-postgresql-instance-using-helm_admin-rhdh">2.2. Configuring an external PostgreSQL instance using the Helm Chart</h3>
<div class="paragraph">
<p>You can configure an external PostgreSQL instance by using the Helm Chart. By default, the Helm Chart creates and manages a local instance of PostgreSQL in the same namespace where you have deployed the RHDH instance. However, you can change this default setting to configure an external PostgreSQL database server, for example, Amazon Web Services (AWS) Relational Database Service (RDS) or Azure database.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You are using a supported version of PostgreSQL. For more information, see the <a href="https://access.redhat.com/support/policy/updates/developerhub">Product life cycle page</a>.</p>
</li>
<li>
<p>You have the following details:</p>
<div class="ulist">
<ul>
<li>
<p><code>db-host</code>: Denotes your PostgreSQL instance Domain Name System (DNS) or IP address</p>
</li>
<li>
<p><code>db-port</code>: Denotes your PostgreSQL instance port number, such as <code>5432</code></p>
</li>
<li>
<p><code>username</code>: Denotes the user name to connect to your PostgreSQL instance</p>
</li>
<li>
<p><code>password</code>: Denotes the password to connect to your PostgreSQL instance</p>
</li>
</ul>
</div>
</li>
<li>
<p>You have installed the RHDH application by using the Helm Chart.</p>
</li>
<li>
<p>Optional: You have a CA certificate, Transport Layer Security (TLS) private key, and TLS certificate so that you can secure your database connection by using the TLS protocol. For more information, refer to your PostgreSQL vendor documentation.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>By default, Developer Hub uses a database for each plugin and automatically creates it if none is found. You might need the <code>Create Database</code> privilege in addition to <code>PSQL Database</code> privileges for configuring an external PostgreSQL instance.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Optional: Create a certificate secret to configure your PostgreSQL instance with a TLS connection:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">cat &lt;&lt;EOF | oc -n &lt;your-namespace&gt; create -f -
apiVersion: v1
kind: Secret
metadata:
 name: &lt;crt-secret&gt; <b class="conum">(1)</b>
type: Opaque
stringData:
 postgres-ca.pem: |-
  -----BEGIN CERTIFICATE-----
  &lt;ca-certificate-key&gt; <b class="conum">(2)</b>
 postgres-key.key: |-
  -----BEGIN CERTIFICATE-----
  &lt;tls-private-key&gt; <b class="conum">(3)</b>
 postgres-crt.pem: |-
  -----BEGIN CERTIFICATE-----
  &lt;tls-certificate-key&gt; <b class="conum">(4)</b>
  # ...
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Provide the name of the certificate secret.</p>
</li>
<li>
<p>Provide the CA certificate key.</p>
</li>
<li>
<p>Optional: Provide the TLS private key.</p>
</li>
<li>
<p>Optional: Provide the TLS certificate key.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create a credential secret to connect with the PostgreSQL instance:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">cat &lt;&lt;EOF | oc -n &lt;your-namespace&gt; create -f -
apiVersion: v1
kind: Secret
metadata:
 name: &lt;cred-secret&gt; <b class="conum">(1)</b>
type: Opaque
stringData: <b class="conum">(2)</b>
 POSTGRES_PASSWORD: &lt;password&gt;
 POSTGRES_PORT: "&lt;db-port&gt;"
 POSTGRES_USER: &lt;username&gt;
 POSTGRES_HOST: &lt;db-host&gt;
 PGSSLMODE: &lt;ssl-mode&gt; # for TLS connection <b class="conum">(3)</b>
 NODE_EXTRA_CA_CERTS: &lt;abs-path-to-pem-file&gt; # for TLS connection, e.g. /opt/app-root/src/postgres-crt.pem <b class="conum">(4)</b>
EOF</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Provide the name of the credential secret.</p>
</li>
<li>
<p>Provide credential data to connect with your PostgreSQL instance.</p>
</li>
<li>
<p>Optional: Provide the value based on the required <a href="https://www.postgresql.org/docs/15/libpq-connect.html#LIBPQ-CONNECT-SSLMODE">Secure Sockets Layer (SSL) mode</a>.</p>
</li>
<li>
<p>Optional: Provide the value only if you need a TLS connection for your PostgreSQL instance.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Configure your PostgreSQL instance in the Helm configuration file named <code>values.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"># ...
upstream:
  postgresql:
    enabled: false  # disable PostgreSQL instance creation <b class="conum">(1)</b>
    auth:
      existingSecret: &lt;cred-secret&gt; # inject credentials secret to Backstage <b class="conum">(2)</b>
  backstage:
    appConfig:
      backend:
        database:
          connection:  # configure Backstage DB connection parameters
            host: ${POSTGRES_HOST}
            port: ${POSTGRES_PORT}
            user: ${POSTGRES_USER}
            password: ${POSTGRES_PASSWORD}
            ssl:
              rejectUnauthorized: true,
              ca:
                $file: /opt/app-root/src/postgres-ca.pem
              key:
                $file: /opt/app-root/src/postgres-key.key
              cert:
                $file: /opt/app-root/src/postgres-crt.pem
  extraEnvVarsSecrets:
    - &lt;cred-secret&gt; # inject credentials secret to Backstage <b class="conum">(3)</b>
  extraEnvVars:
    - name: BACKEND_SECRET
      valueFrom:
        secretKeyRef:
          key: backend-secret
          name: '{{ include "janus-idp.backend-secret-name" $ }}'
  extraVolumeMounts:
    - mountPath: /opt/app-root/src/dynamic-plugins-root
      name: dynamic-plugins-root
    - mountPath: /opt/app-root/src/postgres-crt.pem
      name: postgres-crt # inject TLS certificate to Backstage cont. <b class="conum">(4)</b>
      subPath: postgres-crt.pem
    - mountPath: /opt/app-root/src/postgres-ca.pem
      name: postgres-ca # inject CA certificate to Backstage cont. <b class="conum">(5)</b>
      subPath: postgres-ca.pem
    - mountPath: /opt/app-root/src/postgres-key.key
      name: postgres-key # inject TLS private key to Backstage cont. <b class="conum">(6)</b>
      subPath: postgres-key.key
  extraVolumes:
    - ephemeral:
        volumeClaimTemplate:
          spec:
            accessModes:
              - ReadWriteOnce
            resources:
              requests:
                storage: 1Gi
      name: dynamic-plugins-root
    - configMap:
        defaultMode: 420
        name: dynamic-plugins
        optional: true
      name: dynamic-plugins
    - name: dynamic-plugins-npmrc
      secret:
        defaultMode: 420
        optional: true
        secretName: dynamic-plugins-npmrc
    - name: postgres-crt
      secret:
        secretName: &lt;crt-secret&gt; <b class="conum">(7)</b>
        # ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Set the value of the <code>upstream.postgresql.enabled</code> parameter to <code>false</code> to disable creating local PostgreSQL instances.</p>
</li>
<li>
<p>Provide the name of the credential secret.</p>
</li>
<li>
<p>Provide the name of the credential secret.</p>
</li>
<li>
<p>Optional: Provide the name of the TLS certificate only for a TLS connection.</p>
</li>
<li>
<p>Optional: Provide the name of the CA certificate only for a TLS connection.</p>
</li>
<li>
<p>Optional: Provide the name of the TLS private key only if your TLS connection requires a private key.</p>
</li>
<li>
<p>Provide the name of the certificate secret if you have configured a TLS connection.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Apply the configuration changes in your Helm configuration file named <code>values.yaml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">helm upgrade -n &lt;your-namespace&gt; &lt;your-deploy-name&gt; openshift-helm-charts/redhat-developer-hub -f values.yaml --version 1.3.5</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc-migrating-databases-to-an-external-server_admin-rhdh">2.3. Migrating local databases to an external database server using the Operator</h3>
<div class="paragraph">
<p>By default, Red Hat Developer Hub hosts the data for each plugin in a PostgreSQL database. When you fetch the list of databases, you might see multiple databases based on the number of plugins configured in Developer Hub. You can migrate the data from an RHDH instance hosted on a local PostgreSQL server to an external PostgreSQL service, such as AWS RDS, Azure database, or Crunchy database. To migrate the data from each RHDH instance, you can use PostgreSQL utilities, such as <a href="https://www.postgresql.org/docs/current/app-pgdump.html"><code>pg_dump</code></a> with <a href="https://www.postgresql.org/docs/current/app-psql.html"><code>psql</code></a> or <a href="https://www.pgadmin.org/"><code>pgAdmin</code></a>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The following procedure uses a database copy script to do a quick migration.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the <a href="https://www.postgresql.org/docs/current/app-pgdump.html"><code>pg_dump</code></a> and <a href="https://www.postgresql.org/docs/current/app-psql.html"><code>psql</code></a> utilities on your local machine.</p>
</li>
<li>
<p>For data export, you have the PGSQL user privileges to make a full dump of local databases.</p>
</li>
<li>
<p>For data import, you have the PGSQL admin privileges to create an external database and populate it with database dumps.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Configure port forwarding for the local PostgreSQL database pod by running the following command on a terminal:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">oc port-forward -n &lt;your-namespace&gt; &lt;pgsql-pod-name&gt; &lt;forward-to-port&gt;:&lt;forward-from-port&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>&lt;pgsql-pod-name&gt;</code> variable denotes the name of a PostgreSQL pod with the format <code>backstage-psql-&lt;deployment-name&gt;-&lt;_index&gt;</code>.</p>
</li>
<li>
<p>The <code>&lt;forward-to-port&gt;</code> variable denotes the port of your choice to forward PostgreSQL data to.</p>
</li>
<li>
<p>The <code>&lt;forward-from-port&gt;</code> variable denotes the local PostgreSQL instance port, such as <code>5432</code>.</p>
<div class="listingblock">
<div class="title">Example: Configuring port forwarding</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">oc port-forward -n developer-hub backstage-psql-developer-hub-0 15432:5432</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Make a copy of the following <code>db_copy.sh</code> script and edit the details based on your configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">#!/bin/bash

to_host=&lt;db-service-host&gt; <b class="conum">(1)</b>
to_port=5432 <b class="conum">(2)</b>
to_user=postgres <b class="conum">(3)</b>

from_host=127.0.0.1 <b class="conum">(4)</b>
from_port=15432 <b class="conum">(5)</b>
from_user=postgres <b class="conum">(6)</b>

allDB=("backstage_plugin_app" "backstage_plugin_auth" "backstage_plugin_catalog" "backstage_plugin_permission" "backstage_plugin_scaffolder" "backstage_plugin_search") <b class="conum">(7)</b>

for db in ${!allDB[@]};
do
  db=${allDB[$db]}
  echo Copying database: $db
  PGPASSWORD=$TO_PSW psql -h $to_host -p $to_port -U $to_user -c "create database $db;"
  pg_dump -h $from_host -p $from_port -U $from_user -d $db | PGPASSWORD=$TO_PSW psql -h $to_host -p $to_port -U $to_user -d $db
done</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The destination host name, for example, <code>&lt;db-instance-name&gt;.rds.amazonaws.com</code>.</p>
</li>
<li>
<p>The destination port, such as <code>5432</code>.</p>
</li>
<li>
<p>The destination server username, for example, <code>postgres</code>.</p>
</li>
<li>
<p>The source host name, such as <code>127.0.0.1</code>.</p>
</li>
<li>
<p>The source port number, such as the <code>&lt;forward-to-port&gt;</code> variable.</p>
</li>
<li>
<p>The source server username, for example, <code>postgres</code>.</p>
</li>
<li>
<p>The name of databases to import in double quotes separated by spaces, for example, <code>("backstage_plugin_app" "backstage_plugin_auth" "backstage_plugin_catalog" "backstage_plugin_permission" "backstage_plugin_scaffolder" "backstage_plugin_search")</code>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Create a destination database for copying the data:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">/bin/bash TO_PSW=&lt;destination-db-password&gt; /path/to/db_copy.sh <b class="conum">(1)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The <code>&lt;destination-db-password&gt;</code> variable denotes the password to connect to the destination database.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>You can stop port forwarding when the copying of the data is complete. For more information about handling large databases and using the compression tools, see the <a href="https://www.postgresql.org/docs/current/backup-dump.html#BACKUP-DUMP-LARGE">Handling Large Databases</a> section on the PostgreSQL website.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Reconfigure your <code>Backstage</code> custom resource (CR). For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/administration_guide_for_red_hat_developer_hub/index#proc-configuring-postgresql-instance-using-operator_admin-rhdh">Configuring an external PostgreSQL instance using the Operator</a>.</p>
</li>
<li>
<p>Check that the following code is present at the end of your <code>Backstage</code> CR after reconfiguration:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"># ...
spec:
  database:
    enableLocalDb: false
  application:
  # ...
    extraFiles:
      secrets:
        - name: &lt;crt-secret&gt;
          key: postgres-crt.pem # key name as in &lt;crt-secret&gt; Secret
    extraEnvs:
      secrets:
        - name: &lt;cred-secret&gt;
# ...</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Reconfiguring the <code>Backstage</code> CR deletes the corresponding <code>StatefulSet</code> and <code>Pod</code> objects, but does not delete the <code>PersistenceVolumeClaim</code> object. Use the following command to delete the local <code>PersistenceVolumeClaim</code> object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">oc -n developer-hub delete pvc &lt;local-psql-pvc-name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>where, the <code>&lt;local-psql-pvc-name&gt;</code> variable is in the <code>data-&lt;psql-pod-name&gt;</code> format.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Apply the configuration changes.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Verify that your RHDH instance is running with the migrated data and does not contain the local PostgreSQL database by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">oc get pods -n &lt;your-namespace&gt;</code></pre>
</div>
</div>
</li>
<li>
<p>Check the output for the following details:</p>
<div class="ulist">
<ul>
<li>
<p>The <code>backstage-developer-hub-xxx</code> pod is in running state.</p>
</li>
<li>
<p>The <code>backstage-psql-developer-hub-0</code> pod is not available.</p>
<div class="paragraph">
<p>You can also verify these details using the <strong>Topology</strong> view in the OpenShift Container Platform web console.</p>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proc-configuring-an-rhdh-instance-with-tls-in-kubernetes_admin-rhdh">3. Configuring an RHDH instance with a TLS connection in Kubernetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can configure a RHDH instance with a Transport Layer Security (TLS) connection in a Kubernetes cluster, such as an Azure Red Hat OpenShift (ARO) cluster, any cluster from a supported cloud provider, or your own cluster with proper configuration. Transport Layer Security (TLS) ensures a secure connection for the RHDH instance with other entities, such as third-party applications, or external databases. However, you must use a public Certificate Authority (CA)-signed certificate to configure your Kubernetes cluster.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have set up an Azure Red Hat OpenShift (ARO) cluster with a public CA-signed certificate. For more information about obtaining CA certificates, refer to your vendor documentation.</p>
</li>
<li>
<p>You have created a namespace and setup a service account with proper read permissions on resources.</p>
<div class="listingblock">
<div class="title">Example: Kubernetes manifest for role-based access control</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  name: backstage-read-only
rules:
  - apiGroups:
      - '*'
    resources:
      - pods
      - configmaps
      - services
      - deployments
      - replicasets
      - horizontalpodautoscalers
      - ingresses
      - statefulsets
      - limitranges
      - resourcequotas
      - daemonsets
    verbs:
      - get
      - list
      - watch
#...</code></pre>
</div>
</div>
</li>
<li>
<p>You have obtained the secret and the service CA certificate associated with your service account.</p>
</li>
<li>
<p>You have created some resources and added annotations to them so they can be discovered by the Kubernetes plugin. You can apply these Kubernetes annotations:</p>
<div class="ulist">
<ul>
<li>
<p><code>backstage.io/kubernetes-id</code> to label components</p>
</li>
<li>
<p><code>backstage.io/kubernetes-namespace</code> to label namespaces</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Enable the Kubernetes plugins in the <code>dynamic-plugins-rhdh.yaml</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: dynamic-plugins-rhdh
data:
  dynamic-plugins.yaml: |
    includes:
      - dynamic-plugins.default.yaml
    plugins:
      - package: ./dynamic-plugins/dist/backstage-plugin-kubernetes-backend-dynamic
        disabled: false <b class="conum">(1)</b>
      - package: ./dynamic-plugins/dist/backstage-plugin-kubernetes
        disabled: false <b class="conum">(2)</b>
        # ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Set the value to <code>false</code> to enable the <code>backstage-plugin-kubernetes-backend-dynamic</code> plugin.</p>
</li>
<li>
<p>Set the value to <code>false</code> to enable the <code>backstage-plugin-kubernetes</code> plugin.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>backstage-plugin-kubernetes</code> plugin is currently in <a href="https://access.redhat.com/support/offerings/techpreview">Technology Preview</a>. As an alternative, you can use the <code>./dynamic-plugins/dist/backstage-plugin-topology-dynamic</code> plugin, which is Generally Available (GA).</p>
</div>
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Set the kubernetes cluster details and configure the catalog sync options in the <code>app-config-rhdh.yaml</code> file:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: app-config-rhdh
data:
  "app-config-rhdh.yaml": |
  # ...
  catalog:
    rules:
      - allow: [Component, System, API, Resource, Location]
    providers:
      kubernetes:
        openshift:
          cluster: openshift
          processor:
            namespaceOverride: default
            defaultOwner: guests
          schedule:
            frequency:
              seconds: 30
            timeout:
              seconds: 5
  kubernetes:
    serviceLocatorMethod:
      type: 'multiTenant'
    clusterLocatorMethods:
      - type: 'config'
        clusters:
          - url: &lt;target-cluster-api-server-url&gt; <b class="conum">(1)</b>
            name: openshift
            authProvider: 'serviceAccount'
            skipTLSVerify: false <b class="conum">(2)</b>
            skipMetricsLookup: true
            dashboardUrl: &lt;target-cluster-console-url&gt; <b class="conum">(3)</b>
            dashboardApp: openshift
            serviceAccountToken: ${K8S_SERVICE_ACCOUNT_TOKEN} <b class="conum">(4)</b>
            caData: ${K8S_CONFIG_CA_DATA} <b class="conum">(5)</b>
            # ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The base URL to the Kubernetes control plane. You can run the <code>kubectl cluster-info</code> command to get the base URL.</p>
</li>
<li>
<p>Set the value of this parameter to <code>false</code> to enable the verification of the TLS certificate.</p>
</li>
<li>
<p>Optional: The link to the Kubernetes dashboard managing the ARO cluster.</p>
</li>
<li>
<p>Optional: Pass the service account token using a <code>K8S_SERVICE_ACCOUNT_TOKEN</code> environment variable that you can define in your <code>secrets-rhdh</code> secret.</p>
</li>
<li>
<p>Pass the CA data using a <code>K8S_CONFIG_CA_DATA</code> environment variable that you can define in your <code>secrets-rhdh</code> secret.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Save the configuration changes.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Run the RHDH application to import your catalog:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">kubectl -n rhdh-operator get pods -w</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that the pod log shows no errors for your configuration.</p>
</li>
<li>
<p>Go to <strong>Catalog</strong> and check the component page in the Developer Hub instance to verify the cluster connection and the presence of your created resources.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>If you encounter connection errors, such as certificate issues or permissions, check the message box in the component page or view the logs of the pod.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-running-rhdh-behind-a-proxy">4. Running the RHDH application behind a corporate proxy</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can run the RHDH application behind a corporate proxy by setting any of the following environment variables before starting the application:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>HTTP_PROXY</code>: Denotes the proxy to use for HTTP requests.</p>
</li>
<li>
<p><code>HTTPS_PROXY</code>: Denotes the proxy to use for HTTPS requests.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Additionally, you can set the <code>NO_PROXY</code> environment variable to exclude certain domains from proxying. The variable value is a comma-separated list of hostnames that do not require a proxy to get reached, even if one is specified.</p>
</div>
<div class="sect2">
<h3 id="proc-configuring-proxy-in-helm-deployment_admin-rhdh">4.1. Configuring proxy information in Helm deployment</h3>
<div class="paragraph">
<p>For Helm-based deployment, either a developer or a cluster administrator with permissions to create resources in the cluster can configure the proxy variables in a <code>values.yaml</code> Helm configuration file.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the Red Hat Developer Hub application.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Set the proxy information in your Helm configuration file:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">upstream:
  backstage:
    extraEnvVars:
      - name: HTTP_PROXY
        value: '&lt;http_proxy_url&gt;'
      - name: HTTPS_PROXY
        value: '&lt;https_proxy_url&gt;'
      - name: NO_PROXY
        value: '&lt;no_proxy_settings&gt;'</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where,</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>&lt;http_proxy_url&gt;</code></dt>
<dd>
<p>Denotes a variable that you must replace with the HTTP proxy URL.</p>
</dd>
<dt class="hdlist1"><code>&lt;https_proxy_url&gt;</code></dt>
<dd>
<p>Denotes a variable that you must replace with the HTTPS proxy URL.</p>
</dd>
<dt class="hdlist1"><code>&lt;no_proxy_settings&gt;</code></dt>
<dd>
<p>Denotes a variable that you must replace with comma-separated URLs, which you want to exclude from proxying, for example, <code>foo.com,baz.com</code>.</p>
<div class="listingblock">
<div class="title">Example: Setting proxy variables using Helm Chart</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">upstream:
  backstage:
    extraEnvVars:
      - name: HTTP_PROXY
        value: 'http://10.10.10.105:3128'
      - name: HTTPS_PROXY
        value: 'http://10.10.10.106:3128'
      - name: NO_PROXY
        value: 'localhost,example.org'</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</li>
<li>
<p>Save the configuration changes.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="proc-configuring-proxy-in-operator-deployment_admin-rhdh">4.2. Configuring proxy information in Operator deployment</h3>
<div class="paragraph">
<p>For Operator-based deployment, the approach you use for proxy configuration is based on your role:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>As a cluster administrator with access to the Operator namespace, you can configure the proxy variables in the Operator&#8217;s default ConfigMap file. This configuration applies the proxy settings to all the users of the Operator.</p>
</li>
<li>
<p>As a developer, you can configure the proxy variables in a custom resource (CR) file. This configuration applies the proxy settings to the RHDH application created from that CR.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed the Red Hat Developer Hub application.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Perform one of the following steps based on your role:</p>
<div class="ulist">
<ul>
<li>
<p>As an administrator, set the proxy information in the Operator&#8217;s default ConfigMap file:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Search for a ConfigMap file named <code>backstage-default-config</code> in the default namespace <code>rhdh-operator</code> and open it.</p>
</li>
<li>
<p>Find the <code>deployment.yaml</code> key.</p>
</li>
<li>
<p>Set the value of the <code>HTTP_PROXY</code>, <code>HTTPS_PROXY</code>, and <code>NO_PROXY</code> environment variables in the <code>Deployment</code> spec as shown in the following example:</p>
<div class="listingblock">
<div class="title">Example: Setting proxy variables in a ConfigMap file</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"># Other fields omitted
  deployment.yaml: |-
    apiVersion: apps/v1
    kind: Deployment
    spec:
      template:
        spec:
          # Other fields omitted
          initContainers:
            - name: install-dynamic-plugins
              # command omitted
              env:
                - name: NPM_CONFIG_USERCONFIG
                  value: /opt/app-root/src/.npmrc.dynamic-plugins
                - name: HTTP_PROXY
                  value: 'http://10.10.10.105:3128'
                - name: HTTPS_PROXY
                  value: 'http://10.10.10.106:3128'
                - name: NO_PROXY
                  value: 'localhost,example.org'
              # Other fields omitted
          containers:
            - name: backstage-backend
              # Other fields omitted
              env:
                - name: APP_CONFIG_backend_listen_port
                  value: "7007"
                - name: HTTP_PROXY
                  value: 'http://10.10.10.105:3128'
                - name: HTTPS_PROXY
                  value: 'http://10.10.10.106:3128'
                - name: NO_PROXY
                  value: 'localhost,example.org'</code></pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>As a developer, set the proxy information in your custom resource (CR) file as shown in the following example:</p>
<div class="listingblock">
<div class="title">Example: Setting proxy variables in a CR file</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">spec:
  # Other fields omitted
  application:
    extraEnvs:
      envs:
        - name: HTTP_PROXY
          value: 'http://10.10.10.105:3128'
        - name: HTTPS_PROXY
          value: 'http://10.10.10.106:3128'
        - name: NO_PROXY
          value: 'localhost,example.org'</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Save the configuration changes.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-rhdh-integration-aws">5. Red Hat Developer Hub integration with Amazon Web Services (AWS)</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>You can integrate your Red Hat Developer Hub application with Amazon Web Services (AWS), which can help you streamline your workflows within the AWS ecosystem. Integrating the Developer Hub resources with AWS provides access to a comprehensive suite of tools, services, and solutions.</p>
</div>
<div class="paragraph">
<p>The integration with AWS requires the deployment of Developer Hub in Elastic Kubernetes Service (EKS) using one of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Helm chart</p>
</li>
<li>
<p>The Red Hat Developer Hub Operator</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-admin-templates">6. Managing templates</h2>
<div class="sectionbody">
<!-- toc disabled -->
<div class="paragraph">
<p>A template is a form composed of different UI fields that is defined in a YAML file. Templates include <em>actions</em>, which are steps that are executed in sequential order and can be executed conditionally.</p>
</div>
<div class="paragraph">
<p>You can use templates to easily create Red Hat Developer Hub components, and then publish these components to different locations, such as the Red Hat Developer Hub software catalog, or repositories in GitHub or GitLab.</p>
</div>
<div class="sect2">
<h3 id="proc-creating-templates_assembly-admin-templates">6.1. Creating a template by using the Template Editor</h3>
<div class="paragraph">
<p>You can create a template by using the Template Editor.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Access the Template Editor by using one of the following options:</p>
<div class="imageblock">
<div class="content">
<img src="images/rhdh/template-editor.png" alt="Template Editor">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Open the URL <code>https://&lt;rhdh_url&gt;/create/edit</code> for your Red Hat Developer Hub instance.</p>
</li>
<li>
<p>Click <strong>Create&#8230;&#8203;</strong> in the navigation menu of the Red Hat Developer Hub console, then click the overflow menu button and select <strong>Template editor</strong>.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Edit Template Form</strong>.</p>
</li>
<li>
<p>Optional: Modify the YAML definition for the parameters of your template. For more information about these parameters, see <a href="#ref-creating-templates_assembly-admin-templates">Creating a template as a YAML file</a>.</p>
</li>
<li>
<p>In the <strong>Name *</strong> field, enter a unique name for your template.</p>
</li>
<li>
<p>From the <strong>Owner</strong> drop-down menu, choose an owner for the template.</p>
</li>
<li>
<p>Click <strong>Next</strong>.</p>
</li>
<li>
<p>In the <strong>Repository Location</strong> view, enter the following information about the hosted repository that you want to publish the template to:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Select an available <strong>Host</strong> from the drop-down menu.</p>
<div class="openblock">
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Available hosts are defined in the YAML parameters by the <code>allowedHosts</code> field:</p>
</div>
<div class="listingblock">
<div class="title">Example YAML</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"># ...
        ui:options:
          allowedHosts:
            - github.com
# ...</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</li>
<li>
<p>In the <strong>Owner *</strong> field, enter an organization, user or project that the hosted repository belongs to.</p>
</li>
<li>
<p>In the <strong>Repository *</strong> field, enter the name of the hosted repository.</p>
</li>
<li>
<p>Click <strong>Review</strong>.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Review the information for accuracy, then click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Click the <strong>Catalog</strong> tab in the navigation panel.</p>
</li>
<li>
<p>In the <strong>Kind</strong> drop-down menu, select <strong>Template</strong>.</p>
</li>
<li>
<p>Confirm that your template is shown in the list of existing templates.</p>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="ref-creating-templates_assembly-admin-templates">6.2. Creating a template as a YAML file</h3>
<div class="paragraph">
<p>You can create a template by defining a <code>Template</code> object as a YAML file.</p>
</div>
<div class="paragraph">
<p>The <code>Template</code> object describes the template and its metadata. It also contains required input variables and a list of actions that are executed by the scaffolding service.</p>
</div>
<div class="listingblock">
<div class="title"><code>Template</code> object example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: scaffolder.backstage.io/v1beta3
kind: Template
metadata:
  name: template-name # <b class="conum">(1)</b>
  title: Example template # <b class="conum">(2)</b>
  description: An example template for v1beta3 scaffolder. # <b class="conum">(3)</b>
spec:
  owner: backstage/techdocs-core # <b class="conum">(4)</b>
  type: service # <b class="conum">(5)</b>
  parameters: # <b class="conum">(6)</b>
    - title: Fill in some steps
      required:
        - name
      properties:
        name:
          title: Name
          type: string
          description: Unique name of the component
        owner:
          title: Owner
          type: string
          description: Owner of the component
    - title: Choose a location
      required:
        - repoUrl
      properties:
        repoUrl:
          title: Repository Location
          type: string
  steps: # <b class="conum">(7)</b>
    - id: fetch-base
      name: Fetch Base
      action: fetch:template
      # ...
  output: # <b class="conum">(8)</b>
    links:
      - title: Repository # <b class="conum">(9)</b>
        url: ${{ steps['publish'].output.remoteUrl }}
      - title: Open in catalog # <b class="conum">(10)</b>
        icon: catalog
        entityRef: ${{ steps['register'].output.entityRef }}
# ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>Specify a name for the template.</p>
</li>
<li>
<p>Specify a title for the template. This is the title that is visible on the template tile in the <strong>Create&#8230;&#8203;</strong> view.</p>
</li>
<li>
<p>Specify a description for the template. This is the description that is visible on the template tile in the <strong>Create&#8230;&#8203;</strong> view.</p>
</li>
<li>
<p>Specify the ownership of the template. The <code>owner</code> field provides information about who is responsible for maintaining or overseeing the template within the system or organization. In the provided example, the <code>owner</code> field is set to <code>backstage/techdocs-core</code>. This means that this template belongs to the <code>techdocs-core</code> project in the <code>backstage</code> namespace.</p>
</li>
<li>
<p>Specify the component type. Any string value is accepted for this required field, but your organization should establish a proper taxonomy for these. Red Hat Developer Hub instances may read this field and behave differently depending on its value. For example, a <code>website</code> type component may present tooling in the Red Hat Developer Hub interface that is specific to just websites.</p>
<div class="paragraph">
<p>The following values are common for this field:</p>
</div>
<div class="openblock">
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>service</code></dt>
<dd>
<p>A backend service, typically exposing an API.</p>
</dd>
<dt class="hdlist1"><code>website</code></dt>
<dd>
<p>A website.</p>
</dd>
<dt class="hdlist1"><code>library</code></dt>
<dd>
<p>A software library, such as an npm module or a Java library.</p>
</dd>
</dl>
</div>
</div>
</div>
</li>
<li>
<p>Use the <code>parameters</code> section to specify parameters for user input that are shown in a form view when a user creates a component by using the template in the Red Hat Developer Hub console. Each <code>parameters</code> subsection, defined by a title and properties, creates a new form page with that definition.</p>
</li>
<li>
<p>Use the <code>steps</code> section to specify steps that are executed in the backend. These steps must be defined by using a unique step ID, a name, and an action. You can view actions that are available on your Red Hat Developer Hub instance by visiting the URL <code>https://&lt;rhdh_url&gt;/create/actions</code>.</p>
</li>
<li>
<p>Use the <code>output</code> section to specify the structure of output data that is created when the template is used. The <code>output</code> section, particularly the <code>links</code> subsection, provides valuable references and URLs that users can utilize to access and interact with components that are created from the template.</p>
</li>
<li>
<p>Provides a reference or URL to the repository associated with the generated component.</p>
</li>
<li>
<p>Provides a reference or URL that allows users to open the generated component in a catalog or directory where various components are listed.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://backstage.io/docs/features/software-templates/writing-templates">Backstage documentation - Writing Templates</a></p>
</li>
<li>
<p><a href="https://backstage.io/docs/features/software-templates/builtin-actions">Backstage documentation - Builtin actions</a></p>
</li>
<li>
<p><a href="https://backstage.io/docs/features/software-templates/writing-custom-actions">Backstage documentation - Writing Custom Actions</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="proc-adding-templates_assembly-admin-templates">6.3. Importing an existing template to Red Hat Developer Hub</h3>
<div class="paragraph">
<p>You can add an existing template to your Red Hat Developer Hub instance by using the Catalog Processor.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have created a directory or repository that contains at least one template YAML file.</p>
</li>
<li>
<p>If you want to use a template that is stored in a repository such as GitHub or GitLab, you must configure a Red Hat Developer Hub integration for your provider.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In the <code>app-config.yaml</code> configuration file, modify the <code>catalog.rules</code> section to include a rule for templates, and configure the <code>catalog.locations</code> section to point to the template that you want to add, as shown in the following example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml"># ...
catalog:
  rules:
    - allow: [Template] # <b class="conum">(1)</b>
  locations:
    - type: url # <b class="conum">(2)</b>
      target: https://&lt;repository_url&gt;/example-template.yaml # <b class="conum">(3)</b>
# ...</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>To allow new templates to be added to the catalog, you must add a <code>Template</code> rule.</p>
</li>
<li>
<p>If you are importing templates from a repository, such as GitHub or GitLab, use the <code>url</code> type.</p>
</li>
<li>
<p>Specify the URL for the template.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Verification</div>
<ol class="arabic">
<li>
<p>Click the <strong>Catalog</strong> tab in the navigation panel.</p>
</li>
<li>
<p>In the <strong>Kind</strong> drop-down menu, select <strong>Template</strong>.</p>
</li>
<li>
<p>Confirm that your template is shown in the list of existing templates.</p>
</li>
</ol>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p><a href="https://docs.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/authentication/index#assembly-auth-provider-github">Enabling the GitHub authentication provider</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assembly-techdocs-plugin_assembly-admin-templates">7. Configuring the TechDocs plugin in Red Hat Developer Hub</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Red Hat Developer Hub TechDocs plugin helps your organization create, find, and use documentation in a central location and in a standardized way. For example:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Docs-like-code approach</dt>
<dd>
<p>Write your technical documentation in Markdown files that are stored inside your project repository along with your code.</p>
</dd>
<dt class="hdlist1">Documentation site generation</dt>
<dd>
<p>Use MkDocs to create a full-featured, Markdown-based, static HTML site for your documentation that is rendered centrally in Developer Hub.</p>
</dd>
<dt class="hdlist1">Documentation site metadata and integrations</dt>
<dd>
<p>See additional metadata about the documentation site alongside the static documentation, such as the date of the last update, the site owner, top contributors, open GitHub issues, Slack support channels, and Stack Overflow Enterprise tags.</p>
</dd>
<dt class="hdlist1">Built-in navigation and search</dt>
<dd>
<p>Find the information that you want from a document more quickly and easily.</p>
</dd>
<dt class="hdlist1">Add-ons</dt>
<dd>
<p>Customize your TechDocs experience with Add-ons to address higher-order documentation needs.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>The TechDocs plugin is preinstalled and enabled on a Developer Hub instance by default. You can disable or enable the TechDocs plugin, and change other parameters, by configuring the Red Hat Developer Hub Helm chart or the Red Hat Developer Hub Operator config map.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
<div class="paragraph">
<p>Red Hat Developer Hub includes a built-in TechDocs builder that generates static HTML documentation from your codebase. However, the default basic setup of the local builder is not intended for production.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can use a CI/CD pipeline with the repository that has a dedicated job to generate docs for TechDocs. The generated static files are stored in OpenShift Data Foundation or in a cloud storage solution of your choice and published to a static HTML documentation site.</p>
</div>
<div class="paragraph">
<p>After you configure OpenShift Data Foundation to store the files that TechDocs generates, you can configure the TechDocs plugin to use the OpenShift Data Foundation for cloud storage.</p>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_developer_hub/1.3/html-single/configuring_plugins_in_red_hat_developer_hub/index">Configuring plugins in Red Hat Developer Hub</a>.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="con-techdocs-configure-storage_assembly-admin-templates">7.1. Configuring storage for TechDocs files</h3>
<div class="paragraph">
<p>The TechDocs publisher stores generated files in local storage or in cloud storage, such as OpenShift Data Foundation, Google GCS, AWS S3, or Azure Blob Storage.</p>
</div>
<div class="sect3">
<h4 id="proc-techdocs-using-odf-storage_assembly-admin-templates">7.1.1. Using OpenShift Data Foundation for file storage</h4>
<div class="paragraph">
<p>You can configure OpenShift Data Foundation to store the files that TechDocs generates instead of relying on other cloud storage solutions.</p>
</div>
<div class="paragraph">
<p>OpenShift Data Foundation provides an <code>ObjectBucketClaim</code> custom resource (CR) that you can use to request an S3 compatible bucket backend. You must install the OpenShift Data Foundation Operator to use this feature.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>An OpenShift Container Platform administrator has installed the OpenShift Data Foundation Operator in Red Hat OpenShift Container Platform. For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.15/html/deploying_openshift_data_foundation_using_amazon_web_services/deploy-using-dynamic-storage-devices-aws#installing-openshift-data-foundation-operator-using-the-operator-hub_cloud-storage">OpenShift Container Platform - Installing Red Hat OpenShift Data Foundation Operator</a>.</p>
</li>
<li>
<p>An OpenShift Container Platform administrator has created an OpenShift Data Foundation cluster and configured the <code>StorageSystem</code> schema. For more information, see <a href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/latest/html/deploying_openshift_data_foundation_using_amazon_web_services/deploy-using-dynamic-storage-devices-aws#creating-an-openshift-data-foundation-service_cloud-storage">OpenShift Container Platform - Creating an OpenShift Data Foundation cluster</a>.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>Create an <code>ObjectBucketClaim</code> CR where the generated TechDocs files are stored. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: objectbucket.io/v1alpha1
kind: ObjectBucketClaim
metadata:
  name: &lt;rhdh_bucket_claim_name&gt;
spec:
  generateBucketName: &lt;rhdh_bucket_claim_name&gt;
  storageClassName: openshift-storage.noobaa.io</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
<div class="paragraph">
<p>Creating the Developer Hub <code>ObjectBucketClaim</code> CR automatically creates both the Developer Hub <code>ObjectBucketClaim</code> config map and secret. The config map and secret have the same name as the <code>ObjetBucketClaim</code> CR.</p>
</div>
</td>
</tr>
</table>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>After you create the <code>ObjectBucketClaim</code> CR, you can use the information stored in the config map and secret to make the information accessible to the Developer Hub container as environment variables. Depending on the method that you used to install Developer Hub, you add the access information to either the Red Hat Developer Hub Helm chart or Operator configuration.</p>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>For more information about the Object Bucket Claim, see <a href="https://access.redhat.com/documentation/en-us/red_hat_openshift_data_foundation/4.12/html/managing_hybrid_and_multicloud_resources/object-bucket-claim#doc-wrapper">OpenShift Container Platform - Object Bucket Claim</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="proc-techdocs-configure-odf-helm_assembly-admin-templates">7.1.2. Making object storage accessible to containers by using the Helm chart</h4>
<div class="paragraph">
<p>Creating a <code>ObjectBucketClaim</code> custom resource (CR) automatically generates both the Developer Hub <code>ObjectBucketClaim</code> config map and secret. The config map and secret contain <code>ObjectBucket</code> access information. Adding the access information to the Helm chart configuration makes it accessible to the Developer Hub container by adding the following environment variables to the container:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BUCKET_NAME</code></p>
</li>
<li>
<p><code>BUCKET_HOST</code></p>
</li>
<li>
<p><code>BUCKET_PORT</code></p>
</li>
<li>
<p><code>BUCKET_REGION</code></p>
</li>
<li>
<p><code>BUCKET_SUBREGION</code></p>
</li>
<li>
<p><code>AWS_ACCESS_KEY_ID</code></p>
</li>
<li>
<p><code>AWS_SECRET_ACCESS_KEY</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These variables are then used in the TechDocs plugin configuration.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed Red Hat Developer Hub on OpenShift Container Platform using the Helm chart.</p>
</li>
<li>
<p>You have created an <code>ObjectBucketClaim</code> CR for storing files generated by TechDocs. For more information see <a href="#proc-techdocs-using-odf-storage_assembly-admin-templates">Using OpenShift Data Foundation for file storage</a></p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In the <code>upstream.backstage</code> key in the Helm chart values, enter the name of the Developer Hub <code>ObjectBucketClaim</code> secret as the value for the <code>extraEnvVarsSecrets</code> field and the <code>extraEnvVarsCM</code> field. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">upstream:
  backstage:
    extraEnvVarsSecrets:
      - &lt;rhdh_bucket_claim_name&gt;
    extraEnvVarsCM:
      - &lt;rhdh_bucket_claim_name&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="ref-techdocs-example-config-plugin-helm_assembly-admin-templates">Example TechDocs Plugin configuration for the Helm chart</h5>
<div class="paragraph">
<p>The following example shows a Developer Hub Helm chart configuration for the TechDocs plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">global:
  dynamic:
    includes:
      - 'dynamic-plugins.default.yaml'
  plugins:
    - disabled: false
      package: ./dynamic-plugins/dist/backstage-plugin-techdocs-backend-dynamic
      pluginConfig:
        techdocs:
          builder: external
          generator:
            runIn: local
          publisher:
            awsS3:
              bucketName: '${BUCKET_NAME}'
              credentials:
                accessKeyId: '${AWS_ACCESS_KEY_ID}'
                secretAccessKey: '${AWS_SECRET_ACCESS_KEY}'
              endpoint: 'https://${BUCKET_HOST}'
              region: '${BUCKET_REGION}'
              s3ForcePathStyle: true
            type: awsS3</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="proc-techdocs-configure-odf-operator_assembly-admin-templates">7.1.3. Making object storage accessible to containers by using the Operator</h4>
<div class="paragraph">
<p>Creating a <code>ObjectBucketClaim</code> Custom Resource (CR) automatically generates both the Developer Hub <code>ObjectBucketClaim</code> config map and secret. The config map and secret contain <code>ObjectBucket</code> access information. Adding the access information to the Operator configuration makes it accessible to the Developer Hub container by adding the following environment variables to the container:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>BUCKET_NAME</code></p>
</li>
<li>
<p><code>BUCKET_HOST</code></p>
</li>
<li>
<p><code>BUCKET_PORT</code></p>
</li>
<li>
<p><code>BUCKET_REGION</code></p>
</li>
<li>
<p><code>BUCKET_SUBREGION</code></p>
</li>
<li>
<p><code>AWS_ACCESS_KEY_ID</code></p>
</li>
<li>
<p><code>AWS_SECRET_ACCESS_KEY</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These variables are then used in the TechDocs plugin configuration.</p>
</div>
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have installed Red Hat Developer Hub on OpenShift Container Platform using the Operator.</p>
</li>
<li>
<p>You have created an <code>ObjectBucketClaim</code> CR for storing files generated by TechDocs.</p>
</li>
</ul>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>In the Developer Hub <code>Backstage</code> CR, enter the name of the Developer Hub <code>ObjectBucketClaim</code> config map as the value for the <code>spec.application.extraEnvs.configMaps</code> field and enter the Developer Hub <code>ObjectBucketClaim</code> secret name as the value for the <code>spec.application.extraEnvs.secrets</code> field. For example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: objectbucket.io/v1alpha1
kind: Backstage
metadata:
 name: &lt;name&gt;
spec:
  application:
    extraEnvs:
      configMaps:
        - name: &lt;rhdh_bucket_claim_name&gt;
      secrets:
        - name: &lt;rhdh_bucket_claim_name&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="ref-techdocs-example-config-plugin-operator_assembly-admin-templates">Example TechDocs Plugin configuration for the Operator</h5>
<div class="paragraph">
<p>The following example shows a Red Hat Developer Hub Operator config map configuration for the TechDocs plugin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">kind: ConfigMap
apiVersion: v1
metadata:
  name: dynamic-plugins-rhdh
data:
  dynamic-plugins.yaml: |
    includes:
      - dynamic-plugins.default.yaml
    plugins:
      - disabled: false
        package: ./dynamic-plugins/dist/backstage-plugin-techdocs-backend-dynamic
        pluginConfig:
          techdocs:
            builder: external
            generator:
              runIn: local
            publisher:
              awsS3:
                bucketName: '${BUCKET_NAME}'
                credentials:
                  accessKeyId: '${AWS_ACCESS_KEY_ID}'
                  secretAccessKey: '${AWS_SECRET_ACCESS_KEY}'
                endpoint: 'https://${BUCKET_HOST}'
                region: '${BUCKET_REGION}'
                s3ForcePathStyle: true
              type: awsS3</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="con-techdocs-config-cicd_assembly-admin-templates">7.2. Configuring CI/CD to generate and publish TechDocs sites</h3>
<div class="paragraph">
<p>TechDocs reads the static generated documentation files from a cloud storage bucket, such as OpenShift Data Foundation. The documentation site is generated on the CI/CD workflow associated with the repository containing the documentation files. You can generate docs on CI and publish to a cloud storage using the <code>techdocs-cli</code> CLI tool.</p>
</div>
<div class="paragraph">
<p>You can use the following example to create a script for TechDocs publication:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="shell"># Prepare
REPOSITORY_URL='https://github.com/org/repo'
git clone $REPOSITORY_URL
cd repo

# Install @techdocs/cli, mkdocs and mkdocs plugins
npm install -g @techdocs/cli
pip install "mkdocs-techdocs-core==1.*"

# Generate
techdocs-cli generate --no-docker

# Publish
techdocs-cli publish --publisher-type awsS3 --storage-name &lt;bucket/container&gt; --entity &lt;Namespace/Kind/Name&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The TechDocs workflow starts the CI when a user makes changes in the repository containing the documentation files. You can configure the workflow to start only when files inside the <code>docs/</code> directory or <code>mkdocs.yml</code> are changed.</p>
</div>
<div class="sect3">
<h4 id="proc-techdocs-config-cicd-prep-repo_assembly-admin-templates">7.2.1. Preparing your repository for CI</h4>
<div class="paragraph">
<p>The first step on the CI is to clone your documentation source repository in a working directory.</p>
</div>
<div class="ulist">
<div class="title">Procedure</div>
<ul>
<li>
<p>To clone your documentation source repository in a working directory, enter the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">git clone &lt;https://path/to/docs-repository/&gt;</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="proc-techdocs-generate-site_assembly-admin-templates">7.2.2. Generating the TechDocs site</h4>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To configure CI/CD to generate your techdocs, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Install the <code>npx</code> package to run <code>techdocs-cli</code> using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>npm install -g npx</code></pre>
</div>
</div>
</li>
<li>
<p>Install the <code>techdocs-cli</code> tool using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>npm install -g @techdocs/cli</code></pre>
</div>
</div>
</li>
<li>
<p>Install the <code>mkdocs</code> plugins using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>pip install "mkdocs-techdocs-core==1.*"</code></pre>
</div>
</div>
</li>
<li>
<p>Generate your techdocs site using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">npx @techdocs/cli generate --no-docker --source-dir &lt;path_to_repo&gt; --output-dir ./site</code></pre>
</div>
</div>
<div class="paragraph">
<p>Where <code>&lt;path_to_repo&gt;</code> is the location in the file path that you used to clone your repository.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="proc-techdocs-publish-site_assembly-admin-templates">7.2.3. Publishing the TechDocs site</h4>
<div class="paragraph">
<div class="title">Procedure</div>
<p>To publish your techdocs site, complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Set the necessary authentication environment variables for your cloud storage provider.</p>
</li>
<li>
<p>Publish your techdocs using the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="terminal">npx @techdocs/cli publish --publisher-type &lt;awsS3|googleGcs&gt; --storage-name &lt;bucket/container&gt; --entity &lt;namespace/kind/name&gt; --directory ./site</code></pre>
</div>
</div>
</li>
<li>
<p>Add a <code>.github/workflows/techdocs.yml</code> file in your Software Template(s). For example:</p>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">name: Publish TechDocs Site

on:
 push:
   branches: [main]
   # You can even set it to run only when TechDocs related files are updated.
   # paths:
   #   - "docs/**"
   #   - "mkdocs.yml"

jobs:
 publish-techdocs-site:
   runs-on: ubuntu-latest

   # The following secrets are required in your CI environment for publishing files to AWS S3.
   # e.g. You can use GitHub Organization secrets to set them for all existing and new repositories.
   env:
     TECHDOCS_S3_BUCKET_NAME: ${{ secrets.TECHDOCS_S3_BUCKET_NAME }}
     AWS_ACCESS_KEY_ID: ${{ secrets.AWS_ACCESS_KEY_ID }}
     AWS_SECRET_ACCESS_KEY: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
     AWS_REGION: ${{ secrets.AWS_REGION }}
     ENTITY_NAMESPACE: 'default'
     ENTITY_KIND: 'Component'
     ENTITY_NAME: 'my-doc-entity'
     # In a Software template, Scaffolder will replace {{cookiecutter.component_id | jsonify}}
     # with the correct entity name. This is same as metadata.name in the entity's catalog-info.yaml
     # ENTITY_NAME: '{{ cookiecutter.component_id | jsonify }}'

   steps:
     - name: Checkout code
       uses: actions/checkout@v3

     - uses: actions/setup-node@v3
     - uses: actions/setup-python@v4
       with:
         python-version: '3.9'

     - name: Install techdocs-cli
       run: sudo npm install -g @techdocs/cli

     - name: Install mkdocs and mkdocs plugins
       run: python -m pip install mkdocs-techdocs-core==1.*

     - name: Generate docs site
       run: techdocs-cli generate --no-docker --verbose

     - name: Publish docs site
       run: techdocs-cli publish --publisher-type awsS3 --storage-name $TECHDOCS_S3_BUCKET_NAME --entity $ENTITY_NAMESPACE/$ENTITY_KIND/$ENTITY_NAME</code></pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proc-rhdh-deployment-config_assembly-admin-templates">8. Configuring Red Hat Developer Hub deployment</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Red Hat Developer Hub operator exposes a <code>rhdh.redhat.com/v1alpha2</code> API Version of its Custom Resource Definition (CRD). This CRD exposes a generic <code>spec.deployment.patch</code> field, which gives you full control over the Developer Hub Deployment resource. This field can be a fragment of the standard <code>apps.Deployment</code> Kubernetes object.</p>
</div>
<div class="olist arabic">
<div class="title">Procedure</div>
<ol class="arabic">
<li>
<p>Create a Developer Hub Custom Resource Definition with the following fields:</p>
</li>
</ol>
</div>
<div class="openblock">
<div class="content">
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: rhdh.redhat.com/v1alpha2
kind: Backstage
metadata:
  name: developer-hub
spec:
  deployment:
    patch:
      spec:
        template:</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>labels</code></dt>
<dd>
<p>Add labels to the Developer Hub pod.</p>
<div class="listingblock">
<div class="title">Example adding the label <code>my=true</code></div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: rhdh.redhat.com/v1alpha2
kind: Backstage
metadata:
  name: developer-hub
spec:
  deployment:
    patch:
      spec:
        template:
          metadata:
            labels:
              my: true</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>volumes</code></dt>
<dd>
<p>Add an additional volume named <code>my-volume</code> and mount it under <code>/my/path</code> in the Developer Hub application container.</p>
<div class="listingblock">
<div class="title">Example additional volume</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: rhdh.redhat.com/v1alpha2
kind: Backstage
metadata:
  name: developer-hub
spec:
  deployment:
    patch:
      spec:
        template:
          spec:
            containers:
              - name: backstage-backend
                volumeMounts:
                  - mountPath: /my/path
                    name: my-volume
            volumes:
              - ephemeral:
                  volumeClaimTemplate:
                    spec:
                      storageClassName: "special"
                name: my-volume</code></pre>
</div>
</div>
<div class="paragraph">
<p>Replace the default <code>dynamic-plugins-root</code> volume with a persistent volume claim (PVC) named <code>dynamic-plugins-root</code>. Note the <code>$patch: replace</code> directive, otherwise a new volume will be added.</p>
</div>
<div class="listingblock">
<div class="title">Example <code>dynamic-plugins-root</code> volume replacement</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: rhdh.redhat.com/v1alpha2
kind: Backstage
metadata:
  name: developer-hub
spec:
  deployment:
    patch:
      spec:
        template:
          spec:
            volumes:
              - $patch: replace
                name: dynamic-plugins-root
                persistentVolumeClaim:
                  claimName: dynamic-plugins-root</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>cpu</code> request</dt>
<dd>
<p>Set the CPU request for the Developer Hub application container to 250m.</p>
<div class="listingblock">
<div class="title">Example CPU request</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: rhdh.redhat.com/v1alpha2
kind: Backstage
metadata:
  name: developer-hub
spec:
  deployment:
    patch:
      spec:
        template:
          spec:
            containers:
              - name: backstage-backend
                resources:
                  requests:
                    cpu: 250m</code></pre>
</div>
</div>
</dd>
<dt class="hdlist1"><code>my-sidecar</code> container</dt>
<dd>
<p>Add a new <code>my-sidecar</code> sidecar container into the Developer Hub Pod.</p>
<div class="listingblock">
<div class="title">Example side car container</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="yaml">apiVersion: rhdh.redhat.com/v1alpha2
kind: Backstage
metadata:
  name: developer-hub
spec:
  deployment:
    patch:
      spec:
        template:
          spec:
            containers:
              - name: my-sidecar
                image: quay.io/my-org/my-sidecar:latest</code></pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="ulist _additional-resources">
<div class="title">Additional resources</div>
<ul>
<li>
<p>To learn more about merging, see <a href="https://github.com/kubernetes/community/blob/master/contributors/devel/sig-api-machinery/strategic-merge-patch.md#basic-patch-format">Strategic Merge Patch</a>.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-04-01 13:04:20 UTC
</div>
</div>
</body>
</html>