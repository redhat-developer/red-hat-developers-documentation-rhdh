<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Installing Red Hat Developer Hub on Google Kubernetes Engine (GKE)</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="Red Hat Developer Hub (RHDH) is an enterprise-grade platform for building developer portals. Administrative users can configure roles, permissions, and other settings to enable other authorized users to deploy a RHDH instance on Google Kubernetes Engine (GKE) using either the Operator or Helm chart."/><link rel="next" href="#assembly-installing-rhdh-on-gke-by-using-the-operator" title="1. Installing Developer Hub on Google Kubernetes Engine (GKE) by using the Operator"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><section xml:lang="en-US" class="article" id="idm45518051538240"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.7</span></div><div><h1 class="title">Installing Red Hat Developer Hub on Google Kubernetes Engine (GKE)</h1></div><div><h3 class="subtitle"><em>Running Red Hat Developer Hub on Google Kubernetes Engine (GKE) by using either the Operator or Helm chart </em></h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm45518038418064">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				Red Hat Developer Hub (RHDH) is an enterprise-grade platform for building developer portals. Administrative users can configure roles, permissions, and other settings to enable other authorized users to deploy a RHDH instance on Google Kubernetes Engine (GKE) using either the Operator or Helm chart.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#assembly-installing-rhdh-on-gke-by-using-the-operator">1. Installing Developer Hub on Google Kubernetes Engine (GKE) by using the Operator</a></span><ul><li><span class="section"><a href="#proc-installing-the-operator-on-gke-by-using-olm_title-install-rhdh-gke">1.1. Installing the Developer Hub Operator on Google Kubernetes Engine (GKE) by using the OLM framework</a></span></li><li><span class="section"><a href="#provisioning-your-custom-configuration">1.2. Provisioning your custom Red Hat Developer Hub configuration</a></span></li><li><span class="section"><a href="#provision-your-red-hat-ecosystem-pull-secret-to-your-rhrh-instance-namespace">1.3. Provision your Red Hat Ecosystem pull secret to your Red Hat Developer Hub instance namespace</a></span></li><li><span class="section"><a href="#using-the-operator-to-run-rhdh-with-your-custom-configuration">1.4. Using the Red Hat Developer Hub Operator to run Developer Hub with your custom configuration</a></span></li><li><span class="section"><a href="#proc-exposing-your-operator-based-rhdh-instance-on-gke_title-install-rhdh-gke">1.5. Exposing your operator-based Red Hat Developer Hub instance on Google Kubernetes Engine (GKE)</a></span></li></ul></li><li><span class="section"><a href="#proc-rhdh-deploy-gke-helm_title-install-rhdh-gke">2. Installing Developer Hub on GKE with the Helm chart</a></span></li></ul></div><p>
		Red Hat Developer Hub (RHDH) is an enterprise-grade platform for building developer portals. Administrative users can configure roles, permissions, and other settings to enable other authorized users to deploy a RHDH instance on Google Kubernetes Engine (GKE) using either the Operator or Helm chart.
	</p><section class="section" id="assembly-installing-rhdh-on-gke-by-using-the-operator"><div class="titlepage"><div><div><h2 class="title">1. Installing Developer Hub on Google Kubernetes Engine (GKE) by using the Operator</h2></div></div></div><p>
			To benefit from over-the-air updates and catalogs provided by Operator-based applications distributed with the Operator Lifecycle Manager (OLM) framework, consider installing Red Hat Developer Hub by using the Red Hat Developer Hub Operator distributed in the Red Hat Ecosystem.
		</p><p>
			On GKE, the most notable differences over an OpenShift-based installation are:
		</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
					The OLM framework and the Red Hat Ecosystem are not built-in.
				</li><li class="listitem">
					The Red Hat Ecosystem pull-secret is not managed globally.
				</li><li class="listitem">
					To expose the application, Ingresses replace OpenShift Routes.
				</li></ul></div><p>
			For clarity, the content is broken down in sections highlighting these platform-specific additional steps.
		</p><section class="section" id="proc-installing-the-operator-on-gke-by-using-olm_title-install-rhdh-gke"><div class="titlepage"><div><div><h3 class="title">1.1. Installing the Developer Hub Operator on Google Kubernetes Engine (GKE) by using the OLM framework</h3></div></div></div><p>
				The Red Hat Ecosystem, based on the Operator Lifecycle Manager (OLM) framework, contains a distribution of the Red Hat Developer Hub Operator, aimed at managing your Red Hat Developer Hub instance lifecycle.
			</p><p>
				However, on Google Kubernetes Engine (GKE):
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						The Operator Lifecycle Manager (OLM) framework and the Red Hat Ecosystem are not built-in.
					</li><li class="listitem">
						The Red Hat Ecosystem pull-secret is not managed globally.
					</li></ul></div><p>
				Therefore, install the OLM framework, the Red Hat Ecosystem, and provision your Red Hat Ecosystem pull secret to install Developer Hub Operator.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have <a class="link" href="https://kubernetes.io/docs/tasks/tools/#kubectl">installed the <code class="literal">kubectl</code> CLI on your local environment</a>.
					</li><li class="listitem">
						Your system meets the <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/about_red_hat_developer_hub/index#rhdh-sizing_about-rhdh">sizing requirements for Red Hat Developer Hub</a>.
					</li><li class="listitem">
						You have <a class="link" href="https://operatorhub.io/how-to-install-an-operator#How-do-I-get-Operator-Lifecycle-Manager?">installed the Operator Lifecycle Manager (OLM)</a>.
					</li><li class="listitem"><p class="simpara">
						Your credentials to the <a class="link" href="https://access.redhat.com/articles/RegistryAuthentication">Red Hat Container Registry</a>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<span class="emphasis"><em>&lt;redhat_user_name&gt;</em></span>
							</li><li class="listitem">
								<span class="emphasis"><em>&lt;redhat_password&gt;</em></span>
							</li><li class="listitem">
								<span class="emphasis"><em>&lt;email&gt;</em></span>
							</li></ul></div></li><li class="listitem">
						You have logged in to your Google account and created a <a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/creating-an-autopilot-cluster">GKE Autopilot</a> or <a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-zonal-cluster">GKE Standard</a> cluster.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Connect to your GKE cluster:
					</p><pre class="programlisting language-terminal">$ gcloud container clusters get-credentials &lt;cluster-name&gt; --location=&lt;cluster-location&gt;</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><span class="emphasis"><em>&lt;cluster-name&gt;</em></span></span></dt><dd>
									Enter your GKE cluster name.
								</dd><dt><span class="term"><span class="emphasis"><em>&lt;cluster-location&gt;</em></span></span></dt><dd>
									Enter your GKE cluster location.
								</dd></dl></div></li><li class="listitem"><p class="simpara">
						Create the <code class="literal">rhdh-operator</code> namespace to contain the Red Hat Developer Hub Operator:
					</p><pre class="programlisting language-terminal">$ kubectl create namespace rhdh-operator</pre></li><li class="listitem"><p class="simpara">
						Create a pull secret using your Red Hat credentials to pull the container images from the protected Red Hat Ecosystem:
					</p><pre class="programlisting language-terminal">$ kubectl -n rhdh-operator create secret docker-registry rhdh-pull-secret \
    --docker-server=registry.redhat.io \
    --docker-username=&lt;redhat_user_name&gt; \
    --docker-password=&lt;redhat_password&gt; \
    --docker-email=&lt;email&gt;</pre></li><li class="listitem"><p class="simpara">
						Create a catalog source that contains the Red Hat Ecosystem Operators:
					</p><pre class="programlisting language-terminal">$ cat &lt;&lt;EOF | kubectl -n rhdh-operator apply -f -
apiVersion: operators.coreos.com/v1alpha1
kind: CatalogSource
metadata:
  name: redhat-catalog
spec:
  sourceType: grpc
  image: registry.redhat.io/redhat/redhat-operator-index:v4.18
  secrets:
  - "rhdh-pull-secret"
  displayName: Red Hat Operators
EOF</pre></li><li class="listitem"><p class="simpara">
						Create an operator group to manage your operator subscriptions:
					</p><pre class="programlisting language-terminal">$ cat &lt;&lt;EOF | kubectl apply -n rhdh-operator -f -
apiVersion: operators.coreos.com/v1
kind: OperatorGroup
metadata:
  name: rhdh-operator-group
EOF</pre></li><li class="listitem"><p class="simpara">
						Create a subscription to install the Red Hat Developer Hub Operator:
					</p><pre class="programlisting language-terminal">$ cat &lt;&lt;EOF | kubectl apply -n rhdh-operator -f -
apiVersion: operators.coreos.com/v1alpha1
kind: Subscription
metadata:
  name: rhdh
  namespace: rhdh-operator
spec:
  channel: fast
  installPlanApproval: Automatic
  name: rhdh
  source: redhat-catalog
  sourceNamespace: rhdh-operator
  startingCSV: rhdh-operator.v1.7.0
EOF</pre></li><li class="listitem"><p class="simpara">
						To wait until the Operator deployment finishes to be able to run the next step, run:
					</p><pre class="programlisting language-terminal">until kubectl -n rhdh-operator get deployment rhdh-operator &amp;&gt;/dev/null; do
  echo -n .
  sleep 3
done
echo "RHDH Operator Deployment created"</pre></li><li class="listitem"><p class="simpara">
						Include your pull secret name in the Operator deployment manifest, to avoid <code class="literal">ImagePullBackOff</code> errors:
					</p><pre class="programlisting language-terminal">$ kubectl -n rhdh-operator patch deployment \
    rhdh-operator --patch '{"spec":{"template":{"spec":{"imagePullSecrets":[{"name":"rhdh-pull-secret"}]}}}}' \
    --type=merge</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Verify the deployment name:
					</p><pre class="programlisting language-terminal">$ kubectl get deployment -n rhdh-operator</pre></li></ul></div></section><section class="section" id="provisioning-your-custom-configuration"><div class="titlepage"><div><div><h3 class="title">1.2. Provisioning your custom Red Hat Developer Hub configuration</h3></div></div></div><p>
				To configure Red Hat Developer Hub, provision your custom Red Hat Developer Hub config maps and secrets to Google Kubernetes Engine (GKE) before running Red Hat Developer Hub.
			</p><div class="admonition tip"><div class="admonition_header">Tip</div><div><p>
				On Red Hat OpenShift Container Platform, you can skip this step to run Developer Hub with the default config map and secret. Your changes on this configuration might get reverted on Developer Hub restart.
			</p></div></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						By using the <a class="link" href="https://kubernetes.io/docs/tasks/tools/#kubectl">Kubernetes CLI ('kubectl')</a>, you have access, with developer permissions, to the Kubernetes cluster aimed at containing your Developer Hub instance.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Author your custom <code class="literal"><span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span>.txt</code> file to provision your secrets as environment variables values in a Kubernetes secret, rather than in clear text in your configuration files. It contains one secret per line in <code class="literal">KEY=value</code> form.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/authentication_in_red_hat_developer_hub/index">Enter your authentication secrets</a>.
							</li></ul></div></li><li class="listitem"><p class="simpara">
						Author your custom <code class="literal">app-config.yaml</code> file. This is the main Developer Hub configuration file. You need a custom <code class="literal">app-config.yaml</code> file to avoid the Developer Hub installer to revert user edits during upgrades. When your custom <code class="literal">app-config.yaml</code> file is empty, Developer Hub is using default values.
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								To prepare a deployment with the Red Hat Developer Hub Operator on GKE, you can start with an empty file.
							</li><li class="listitem"><p class="simpara">
								To prepare a deployment with the Red Hat Developer Hub Helm chart, or on Kubernetes, enter the Developer Hub base URL in the relevant fields in your <code class="literal">app-config.yaml</code> file to ensure proper functionality of Developer Hub. The base URL is what a Developer Hub user sees in their browser when accessing Developer Hub. The relevant fields are <code class="literal">baseUrl</code> in the <code class="literal">app</code> and <code class="literal">backend</code> sections, and <code class="literal">origin</code> in the <code class="literal">backend.cors</code> subsection:
							</p><div class="example" id="idm45518051641712"><p class="title"><strong>Example 1. Configuring the <code class="literal">baseUrl</code> in <code class="literal">app-config.yaml</code></strong></p><div class="example-contents"><pre class="programlisting language-yaml">app:
  title: Red Hat Developer Hub
  baseUrl: https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span>

backend:
  auth:
    externalAccess:
      - type: legacy
        options:
          subject: legacy-default-config
          secret: "${BACKEND_SECRET}"
  baseUrl: https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span>
  cors:
    origin: https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span></pre></div></div></li><li class="listitem"><p class="simpara">
								Optionally, enter your configuration such as:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/authentication_in_red_hat_developer_hub/index">Authentication in Red Hat Developer Hub</a>.
									</li><li class="listitem">
										<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/authorization_in_red_hat_developer_hub/index">Authorization in Red Hat Developer Hub</a>.
									</li><li class="listitem">
										<a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/customizing_red_hat_developer_hub/index">Customization</a>.
									</li></ul></div></li></ul></div></li><li class="listitem"><p class="simpara">
						Provision your custom configuration files to your GKE cluster.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
								Create the <span class="emphasis"><em>&lt;my-rhdh-project&gt;</em></span> {namespace} aimed at containing your Developer Hub instance.
							</p><pre class="programlisting language-terminal">$ oc create namespace my-rhdh-project</pre></li><li class="listitem"><p class="simpara">
								Provision your <code class="literal">app-config.yaml</code> file to the <code class="literal">my-rhdh-app-config</code> config map in the <span class="emphasis"><em>&lt;my-rhdh-project&gt;</em></span> project.
							</p><pre class="programlisting language-terminal">$ oc create configmap my-rhdh-app-config --from-file=app-config.yaml --namespace=my-rhdh-project</pre></li><li class="listitem"><p class="simpara">
								Provision your <code class="literal"><span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span>.txt</code> file to the <code class="literal"><span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span></code> secret in the <span class="emphasis"><em>&lt;my-rhdh-project&gt;</em></span> project.
							</p><pre class="programlisting language-terminal">$ oc create secret generic <code class="literal"><span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span></code> --from-file=<code class="literal"><span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span>.txt</code> --namespace=my-rhdh-project</pre></li></ol></div></li></ol></div><div class="itemizedlist"><p class="title"><strong>Next steps</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						To use an external PostgreSQL database, <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/configuring_red_hat_developer_hub/indexconfiguring-external-postgresql-databases">provision your PostgreSQL database secrets</a>.
					</li><li class="listitem">
						To enable dynamic plugins, <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/installing_and_viewing_plugins_in_red_hat_developer_hub/index">provision your dynamic plugins config map</a>.
					</li><li class="listitem">
						To configure authorization by using external files, <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/authorization_in_red_hat_developer_hub/index#managing-authorizations-by-using-external-files">provision your RBAC policies config map</a>.
					</li></ul></div></section><section class="section" id="provision-your-red-hat-ecosystem-pull-secret-to-your-rhrh-instance-namespace"><div class="titlepage"><div><div><h3 class="title">1.3. Provision your Red Hat Ecosystem pull secret to your Red Hat Developer Hub instance namespace</h3></div></div></div><p>
				On Google Kubernetes Engine (GKE), the Red Hat Ecosystem pull-secret is not managed globally. Therefore add your pull-secret in your Red Hat Developer Hub instance namespace.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Your credentials to the <a class="link" href="https://access.redhat.com/articles/RegistryAuthentication">Red Hat Container Registry</a>:
					</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
								<span class="emphasis"><em>&lt;redhat_user_name&gt;</em></span>
							</li><li class="listitem">
								<span class="emphasis"><em>&lt;redhat_password&gt;</em></span>
							</li><li class="listitem">
								<span class="emphasis"><em>&lt;email&gt;</em></span>
							</li></ul></div></li><li class="listitem">
						You created the <code class="literal">{my-rhdh-project}</code> namespace on GKE to host your Developer Hub instance.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a pull secret using your Red Hat credentials to pull the container images from the protected Red Hat Ecosystem:
					</p><pre class="programlisting language-terminal">$ kubectl -n {my-rhdh-namespace} create secret docker-registry my-rhdh-pull-secret \
    --docker-server=registry.redhat.io \
    --docker-username=&lt;redhat_user_name&gt; \
    --docker-password=&lt;redhat_password&gt; \
    --docker-email=&lt;email&gt;</pre></li><li class="listitem"><p class="simpara">
						To enable pulling Developer Hub images from the Red Hat Ecosystem Catalog, add the image pull secret in the default service account within the namespace where the Developer Hub instance is being deployed:
					</p><pre class="programlisting language-terminal">$ kubectl patch serviceaccount default \
    -p '{"imagePullSecrets": [{"name": "my-rhdh-pull-secret"}]}' \
    -n {my-rhdh-namespace}</pre></li></ol></div></section><section class="section" id="using-the-operator-to-run-rhdh-with-your-custom-configuration"><div class="titlepage"><div><div><h3 class="title">1.4. Using the Red Hat Developer Hub Operator to run Developer Hub with your custom configuration</h3></div></div></div><p>
				To use the Developer Hub Operator to run Red Hat Developer Hub with your custom configuration, create your Backstage custom resource (CR) that:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Mounts files provisioned in your custom config maps.
					</li><li class="listitem">
						Injects environment variables provisioned in your custom secrets.
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						By using the <a class="link" href="https://kubernetes.io/docs/tasks/tools/#kubectl">Kubernetes CLI ('kubectl')</a>, you have access, with developer permissions, to the GKE cluster aimed at containing your Developer Hub instance.
					</li><li class="listitem">
						Your administrator has installed the Red Hat Developer Hub Operator in the cluster.
					</li><li class="listitem">
						You have provisioned your custom config maps and secrets in your <code class="literal"><span class="emphasis"><em>&lt;my-rhdh-project&gt;</em></span></code> project.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Author your Backstage CR in a <code class="literal">my-rhdh-custom-resource.yaml</code> file to use your custom config maps and secrets.
					</p><p class="simpara">
						Minimal <code class="literal">my-rhdh-custom-resource.yaml</code> custom resource example:
					</p><pre class="programlisting language-yaml">apiVersion: rhdh.redhat.com/v1alpha3
kind: Backstage
metadata:
  name: my-rhdh-custom-resource
spec:
  application:
    appConfig:
      mountPath: /opt/app-root/src
      configMaps:
         - name: my-rhdh-app-config
    extraEnvs:
      secrets:
         - name: <span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span>
    extraFiles:
      mountPath: /opt/app-root/src
    route:
      enabled: true
  database:
    enableLocalDb: true</pre><p class="simpara">
						<code class="literal">my-rhdh-custom-resource.yaml</code> custom resource example with dynamic plugins and RBAC policies config maps, and external PostgreSQL database secrets:
					</p><pre class="programlisting language-yaml">apiVersion: rhdh.redhat.com/v1alpha3
kind: Backstage
metadata:
  name: <span class="emphasis"><em>&lt;my-rhdh-custom-resource&gt;</em></span>
spec:
  application:
    appConfig:
      mountPath: /opt/app-root/src
      configMaps:
         - name: my-rhdh-app-config
         - name: rbac-policies
    dynamicPluginsConfigMapName: dynamic-plugins-rhdh
    extraEnvs:
      secrets:
         - name: <span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span>
         - name: my-rhdh-database-secrets
    extraFiles:
      mountPath: /opt/app-root/src
      secrets:
        - name: my-rhdh-database-certificates-secrets
          key: postgres-crt.pem, postgres-ca.pem, postgres-key.key
    route:
      enabled: true
  database:
    enableLocalDb: false</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">Mandatory fields</span></dt><dd>
									No fields are mandatory. You can create an empty Backstage CR and run Developer Hub with the default configuration.
								</dd><dt><span class="term">Optional fields</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">spec.application.appConfig.configMaps</code></span></dt><dd>
												Enter your config map name list.
											</dd></dl></div><p class="simpara">
									Mount files in the <code class="literal">my-rhdh-app-config</code> config map:
								</p><pre class="programlisting language-yaml">spec:
  application:
    appConfig:
      mountPath: /opt/app-root/src
      configMaps:
         - name: my-rhdh-app-config</pre><p class="simpara">
									Mount files in the <code class="literal">my-rhdh-app-config</code> and <code class="literal">rbac-policies</code> config maps:
								</p><pre class="programlisting language-yaml">spec:
  application:
    appConfig:
      mountPath: /opt/app-root/src
      configMaps:
         - name: my-rhdh-app-config
         - name: rbac-policies</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">spec.application.extraEnvs.envs</code></span></dt><dd><p class="simpara">
												Optionally, enter your additional environment variables that are not secrets, such as <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/configuring_red_hat_developer_hub/index#proc-configuring-proxy-in-operator-deployment_running-behind-a-proxy">your proxy environment variables</a>.
											</p><p class="simpara">
												Inject your <code class="literal">HTTP_PROXY</code>, <code class="literal">HTTPS_PROXY</code> and <code class="literal">NO_PROXY</code> environment variables:
											</p><pre class="programlisting language-yaml">spec:
  application:
    extraEnvs:
      envs:
        - name: HTTP_PROXY
          value: 'http://10.10.10.105:3128'
        - name: HTTPS_PROXY
          value: 'http://10.10.10.106:3128'
        - name: NO_PROXY
          value: 'localhost,example.org'</pre></dd><dt><span class="term"><code class="literal">spec.application.extraEnvs.secrets</code></span></dt><dd><p class="simpara">
												Enter your environment variables secret name list.
											</p><p class="simpara">
												Inject the environment variables in your Red Hat Developer Hub secret:
											</p><pre class="programlisting language-yaml">spec:
  application:
    extraEnvs:
      secrets:
         - name: <span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span></pre><p class="simpara">
												Inject the environment variables in the Red Hat Developer Hub and <code class="literal">my-rhdh-database-secrets</code> secrets:
											</p><pre class="programlisting language-yaml">spec:
  application:
    extraEnvs:
      secrets:
         - name: <span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span>
         - name: my-rhdh-database-secrets</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
													<code class="literal"><span class="emphasis"><em>&lt;my_product_secrets&gt;</em></span></code> is your preferred Developer Hub secret name, specifying the identifier for your secret configuration within Developer Hub.
												</p></div></div></dd><dt><span class="term"><code class="literal">spec.application.extraFiles.secrets</code></span></dt><dd><p class="simpara">
												Enter your certificates files secret name and files list.
											</p><p class="simpara">
												Mount the <code class="literal">postgres-crt.pem</code>, <code class="literal">postgres-ca.pem</code>, and <code class="literal">postgres-key.key</code> files contained in the <code class="literal">my-rhdh-database-certificates-secrets</code> secret:
											</p><pre class="programlisting language-yaml">spec:
  application:
    extraFiles:
      mountPath: /opt/app-root/src
      secrets:
        - name: my-rhdh-database-certificates-secrets
          key: postgres-crt.pem, postgres-ca.pem, postgres-key.key</pre></dd><dt><span class="term"><code class="literal">spec.database.enableLocalDb</code></span></dt><dd><p class="simpara">
												Enable or disable the local PostgreSQL database.
											</p><p class="simpara">
												Disable the local PostgreSQL database generation to use an external postgreSQL database:
											</p><pre class="programlisting language-yaml">spec:
  database:
    enableLocalDb: false</pre><p class="simpara">
												On a development environment, use the local PostgreSQL database:
											</p><pre class="programlisting language-yaml">spec:
  database:
    enableLocalDb: true</pre></dd><dt><span class="term"><code class="literal">spec.deployment</code></span></dt><dd>
												Optionally, <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/configuring_red_hat_developer_hub/index#configuring-the-deployment">enter your deployment configuration</a>.
											</dd></dl></div></dd></dl></div></li><li class="listitem"><p class="simpara">
						Apply your Backstage CR to start or update your Developer Hub instance:
					</p><pre class="programlisting language-terminal">$ oc apply --filename=my-rhdh-custom-resource.yaml --namespace=my-rhdh-project</pre></li></ol></div></section><section class="section" id="proc-exposing-your-operator-based-rhdh-instance-on-gke_title-install-rhdh-gke"><div class="titlepage"><div><div><h3 class="title">1.5. Exposing your operator-based Red Hat Developer Hub instance on Google Kubernetes Engine (GKE)</h3></div></div></div><p>
				On Google Kubernetes Engine (GKE), to expose your Red Hat Developer Hub instance, Kubernetes ingresses replace OpenShift Container Platform routes. The Red Hat Developer Hub operator does not create ingresses. Therefore, to access your Developer Hub instance via a domain name, create the required ingresses on GKE and point your domain name to it.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have installed Red Hat Developer Hub by using the Red Hat Developer Hub Operator.
					</li><li class="listitem">
						You have configured a domain name for your Developer Hub instance.
					</li><li class="listitem">
						You have reserved a static external Premium IPv4 Global IP address that is not attached to any virtual machine (VM). For more information see <a class="link" href="https://cloud.google.com/vpc/docs/reserve-static-external-ip-address#reserve_new_static">Reserve a new static external IP address</a>
					</li><li class="listitem"><p class="simpara">
						You have configured the DNS records for your domain name to point to the IP address that has been reserved.
					</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							You need to create an <code class="literal">A</code> record with the value equal to the IP address. This process can take up to one hour to propagate.
						</p></div></div></li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create a Google-managed certificate manifest file, named <code class="literal">managed-certificate.yaml</code>:
					</p><pre class="programlisting language-yaml">apiVersion: networking.gke.io/v1
kind: ManagedCertificate
metadata:
  name: my-rhdh-certificate-name
spec:
  domains:
    - <span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span></pre><p class="simpara">
						For more information about setting up a Google-managed certificate, see <a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/managed-certs?hl=en#setting_up_a_google-managed_certificate">Setting up a Google-managed certificate</a>.
					</p></li><li class="listitem"><p class="simpara">
						Deploy the managed certificate:
					</p><pre class="programlisting language-terminal">$ kubectl -n my-rhdh-project apply -f managed-certificate.yaml</pre></li><li class="listitem"><p class="simpara">
						Create a frontend config manifest file, named <code class="literal">frontend-config.yaml</code>, to set a policy for redirecting to HTTPS.
					</p><pre class="programlisting language-yaml">apiVersion: networking.gke.io/v1beta1
kind: FrontendConfig
metadata:
  name: my-ingress_security_config
spec:
  sslPolicy: gke-ingress-ssl-policy-https
  redirectToHttps:
    enabled: true</pre><p class="simpara">
						For more information about setting a policy to redirect to HTTPS, see <a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/ingress-configuration?hl=en#https_redirect">HTTP to HTTPS redirects</a>.
					</p></li><li class="listitem"><p class="simpara">
						Deploy the frontend config:
					</p><pre class="programlisting language-terminal">$ kubectl -n my-rhdh-project apply -f frontend-config.yaml</pre></li><li class="listitem"><p class="simpara">
						Create an ingress manifest file, named <code class="literal">rhdh-ingress.yaml</code>, specifying your Developer Hub service name, and using your managed certificate and your frontend config:
					</p><pre class="programlisting language-yaml">apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: my-rhdh-ingress
  annotations:
    kubernetes.io/ingress.class: "gce"
    kubernetes.io/ingress.global-static-ip-name: &lt;ADDRESS_NAME&gt;
    networking.gke.io/managed-certificates: my-rhdh-certificate-name
    networking.gke.io/v1beta1.FrontendConfig: my-ingress_security_config
spec:
  ingressClassName: gce
  rules:
    - host: <span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span>
      http:
        paths:
        - path: /
          pathType: Prefix
          backend:
            service:
              name: my-rhdh-custom-resource
              port:
                name: http-backend</pre></li><li class="listitem"><p class="simpara">
						Deploy the ingress:
					</p><pre class="programlisting language-terminal">$ kubectl -n my-rhdh-project apply -f rhdh-ingress.yaml</pre></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Wait for the <code class="literal">ManagedCertificate</code> to be provisioned. This process can take a couple of hours.
					</li><li class="listitem">
						Access RHDH with <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span></code>.
					</li></ul></div><div class="formalpara"><p class="title"><strong>Additional information</strong></p><p>
					For more information on setting up GKE using Ingress with TLS, see <a class="link" href="https://github.com/GoogleCloudPlatform/gke-networking-recipes/tree/main/ingress/single-cluster/ingress-https">Secure GKE Ingress</a>.
				</p></div></section></section><section class="section" id="proc-rhdh-deploy-gke-helm_title-install-rhdh-gke"><div class="titlepage"><div><div><h2 class="title">2. Installing Developer Hub on GKE with the Helm chart</h2></div></div></div><p>
			When you install the Developer Hub Helm chart in Google Kubernetes Engine (GKE), it orchestrates the deployment of a Developer Hub instance, which provides a robust developer platform within the GKE ecosystem.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You have subscribed to <code class="literal">registry.redhat.io</code>. For more information, see <a class="link" href="https://access.redhat.com/articles/RegistryAuthentication">Red Hat Container Registry Authentication</a>.
				</li><li class="listitem">
					You have installed <code class="literal">kubectl</code>. For more information, see <a class="link" href="https://kubernetes.io/docs/tasks/tools/#kubectl">Install kubetl</a>.
				</li><li class="listitem">
					You have installed the Google Cloud CLI. For more information, see <a class="link" href="https://cloud.google.com/sdk/docs/install">Install the gcloud CLI</a>.
				</li><li class="listitem">
					You have logged in to your Google account and created a <a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/creating-an-autopilot-cluster">GKE Autopilot</a> or <a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-zonal-cluster">GKE Standard</a> cluster.
				</li><li class="listitem">
					You have configured a domain name for your Developer Hub instance.
				</li><li class="listitem">
					You have reserved a static external Premium IPv4 Global IP address that is not attached to any VM. For more information see <a class="link" href="https://cloud.google.com/vpc/docs/reserve-static-external-ip-address#reserve_new_static">Reserve a new static external IP address</a>
				</li><li class="listitem">
					You have configured the DNS records for your domain name to point to the IP address that has been reserved.
				</li><li class="listitem"><p class="simpara">
					Make sure that your system meets the minimum sizing requirements. See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.7/html-single/about_red_hat_developer_hub/index#rhdh-sizing_about-rhdh">Sizing requirements for Red Hat Developer Hub</a>.
				</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						You need to create an <code class="literal">A</code> record with the value equal to the IP address. This process can take up to one hour to propagate.
					</p></div></div></li><li class="listitem">
					You have installed Helm 3 or the latest. For more information, see <a class="link" href="https://helm.sh/docs/intro/install/">Installing Helm</a>.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					Go to your terminal and run the following command to add the Helm chart repository containing the Developer Hub chart to your local Helm registry:
				</p><pre class="programlisting language-terminal">helm repo add openshift-helm-charts https://charts.openshift.io/</pre></li><li class="listitem"><p class="simpara">
					Create a pull secret using the following command:
				</p><pre class="programlisting language-terminal">kubectl -n &lt;your-namespace&gt; create secret docker-registry rhdh-pull-secret \ <span id="CO1-1"/><span class="callout">1</span>
    --docker-server=registry.redhat.io \
    --docker-username=&lt;user_name&gt; \ <span id="CO1-2"/><span class="callout">2</span>
    --docker-password=&lt;password&gt; \ <span id="CO1-3"/><span class="callout">3</span>
    --docker-email=&lt;email&gt; <span id="CO1-4"/><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							Enter your GKE namespace in the command.
						</div></dd><dt><a href="#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Enter your username in the command.
						</div></dd><dt><a href="#CO1-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							Enter your password in the command.
						</div></dd><dt><a href="#CO1-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							Enter your email address in the command.
						</div></dd></dl></div><p class="simpara">
					The created pull secret is used to pull the Developer Hub images from the Red Hat Ecosystem.
				</p></li><li class="listitem"><p class="simpara">
					Set up a Google-managed certificate by creating a <code class="literal">ManagedCertificate</code> object that you must attach to the ingress.
				</p><div class="formalpara"><p class="title"><strong>Example of attaching a <code class="literal">ManagedCertificate</code> object to the ingress</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: networking.gke.io/v1
kind: ManagedCertificate
metadata:
  name: &lt;rhdh_certificate_name&gt;
spec:
  domains:
    - &lt;rhdh_domain_name&gt;</pre>
					</p></div><p class="simpara">
					For more information about setting up a Google-managed certificate, see <a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/managed-certs?hl=en#setting_up_a_google-managed_certificate">Setting up a Google-managed certificate</a>.
				</p></li><li class="listitem"><p class="simpara">
					Create a <code class="literal">FrontendConfig</code> object to set a policy for redirecting to HTTPS. You must attach this policy to the ingress.
				</p><div class="formalpara"><p class="title"><strong>Example of attaching a <code class="literal">FrontendConfig</code> object to the ingress</strong></p><p>
						
<pre class="programlisting language-yaml">apiVersion: networking.gke.io/v1beta1
kind: FrontendConfig
metadata:
  name: &lt;ingress_security_config&gt;
spec:
  sslPolicy: gke-ingress-ssl-policy-https
  redirectToHttps:
    enabled: true</pre>
					</p></div><p class="simpara">
					For more information about setting a policy to redirect to HTTPS, see <a class="link" href="https://cloud.google.com/kubernetes-engine/docs/how-to/ingress-configuration?hl=en#https_redirect">HTTP to HTTPS redirects</a>.
				</p></li><li class="listitem"><p class="simpara">
					Create a file named <code class="literal">values.yaml</code> using the following template:
				</p><div class="formalpara"><p class="title"><strong>Example <code class="literal">values.yaml</code> file</strong></p><p>
						
<pre class="programlisting language-yaml">global:
  host: &lt;rhdh_domain_name&gt;
route:
  enabled: false
upstream:
  service:
    type: NodePort
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: gce
      kubernetes.io/ingress.global-static-ip-name: &lt;ADDRESS_NAME&gt;
      networking.gke.io/managed-certificates: &lt;rhdh_certificate_name&gt;
      networking.gke.io/v1beta1.FrontendConfig: &lt;ingress_security_config&gt;
    className: gce
  backstage:
    image:
      pullSecrets:
      - rhdh-pull-secret
    podSecurityContext:
      fsGroup: 2000
  postgresql:
    image:
      pullSecrets:
      - rhdh-pull-secret
    primary:
      podSecurityContext:
        enabled: true
        fsGroup: 3000
  volumePermissions:
    enabled: true</pre>
					</p></div></li><li class="listitem"><p class="simpara">
					Run the following command in your terminal to deploy Developer Hub using the latest version of Helm Chart and using the <code class="literal">values.yaml</code> file:
				</p><pre class="programlisting language-terminal">helm -n &lt;your_namespace&gt; install -f values.yaml &lt;your_deploy_name&gt; \
  openshift-helm-charts/redhat-developer-hub \
  --version 1.7.0</pre><p class="simpara">
					For the latest Helm Chart version, see this <a class="link" href="https://github.com/openshift-helm-charts/charts/tree/main/charts/redhat/redhat/redhat-developer-hub">Helm Charts</a> repository.
				</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
					Confirm that the deployment is complete.
				</p><pre class="programlisting language-terminal">kubectl get deploy &lt;your_deploy_name&gt;-developer-hub -n &lt;your_namespace&gt;</pre></li><li class="listitem"><p class="simpara">
					Verify that the service and ingress were created.
				</p><pre class="programlisting language-terminal">kubectl get service -n &lt;your_namespace&gt;
kubectl get ingress -n &lt;your_namespace&gt;</pre><div class="admonition note"><div class="admonition_header">Note</div><div><p>
						Wait for the <code class="literal">ManagedCertificate</code> to be provisioned. This process can take a couple of hours.
					</p></div></div></li><li class="listitem">
					Access RHDH with <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span></code>.
				</li><li class="listitem"><p class="simpara">
					To upgrade your deployment, use the following command:
				</p><pre class="programlisting language-terminal">helm -n &lt;your_namespace&gt; upgrade -f values.yaml &lt;your_deploy_name&gt; openshift-helm-charts/redhat-developer-hub --version &lt;UPGRADE_CHART_VERSION&gt;</pre></li><li class="listitem"><p class="simpara">
					To delete your deployment, use the following command:
				</p><pre class="programlisting language-terminal">helm -n &lt;your_namespace&gt; delete &lt;your_deploy_name&gt;</pre></li></ul></div></section><div><div xml:lang="en-US" class="legalnotice" id="idm45518038418064"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2025 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></section></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>