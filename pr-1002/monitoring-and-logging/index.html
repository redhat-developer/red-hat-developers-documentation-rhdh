<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Monitoring and logging</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="As a Red Hat Developer Hub Operations or Project Manager, you can monitor performance and gather insights using Red Hat Developer Hub's monitoring and logging tools."/><link rel="next" href="#assembly-rhdh-observability" title="1. Enabling observability for Red Hat Developer Hub on OpenShift Container Platform"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><section xml:lang="en-US" class="article" id="idm46236710833760"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.4</span></div><div><h1 class="title">Monitoring and logging</h1></div><div><h3 class="subtitle"><em>Tracking performance and capturing insights with monitoring and logging tools in Red Hat Developer Hub</em></h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm46236693888496">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				As a Red Hat Developer Hub Operations or Project Manager, you can monitor performance and gather insights using Red Hat Developer Hub's monitoring and logging tools.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#assembly-rhdh-observability">1. Enabling observability for Red Hat Developer Hub on OpenShift Container Platform</a></span><ul><li><span class="section"><a href="#proc-admin-enabling-metrics-ocp-operator_assembly-rhdh-observability">1.1. Enabling metrics monitoring in a Red Hat Developer Hub Operator installation on an OpenShift Container Platform cluster</a></span></li><li><span class="section"><a href="#proc-admin-enabling-metrics-ocp-helm_assembly-rhdh-observability">1.2. Enabling metrics monitoring in a Helm chart installation on an OpenShift Container Platform cluster</a></span></li></ul></li><li><span class="section"><a href="#proc-rhdh-monitoring-logging-aws_assembly-rhdh-observability">2. Monitoring and logging with Amazon Web Services (AWS) in Red Hat Developer Hub</a></span><ul><li><span class="section"><a href="#monitoring-with-amazon-prometheus">2.1. Monitoring with Amazon Prometheus</a></span></li><li><span class="section"><a href="#logging-with-amazon-cloudwatch-logs">2.2. Logging with Amazon CloudWatch logs</a></span></li></ul></li><li><span class="section"><a href="#assembly-monitoring-and-logging-aks">3. Monitoring and logging with Azure Kubernetes Services (AKS) in Red Hat Developer Hub</a></span><ul><li><span class="section"><a href="#proc-enabling-azure-monitor-metrics_assembly-monitoring-and-logging-aks">3.1. Enabling Azure Monitor metrics</a></span></li><li><span class="section"><a href="#proc-configure-annotations-for-aks-monitoring_assembly-monitoring-and-logging-aks">3.2. Configuring annotations for monitoring</a></span></li><li><span class="section"><a href="#proc-view-logs-aks_assembly-monitoring-and-logging-aks">3.3. Viewing logs with Azure Kubernetes Services (AKS)</a></span></li></ul></li></ul></div><section class="section" id="assembly-rhdh-observability"><div class="titlepage"><div><div><h2 class="title">1. Enabling observability for Red Hat Developer Hub on OpenShift Container Platform</h2></div></div></div><p>
			In OpenShift Container Platform, metrics are exposed through an HTTP service endpoint under the <code class="literal">/metrics</code> canonical name. You can create a <code class="literal">ServiceMonitor</code> custom resource (CR) to scrape metrics from a service endpoint in a user-defined project.
		</p><section class="section" id="proc-admin-enabling-metrics-ocp-operator_assembly-rhdh-observability"><div class="titlepage"><div><div><h3 class="title">1.1. Enabling metrics monitoring in a Red Hat Developer Hub Operator installation on an OpenShift Container Platform cluster</h3></div></div></div><p>
				You can enable and view metrics for an Operator-installed Red Hat Developer Hub instance from the <span class="strong strong"><strong>Developer</strong></span> perspective of the OpenShift Container Platform web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Your OpenShift Container Platform cluster has <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html-single/monitoring/index#enabling-monitoring-for-user-defined-projects">monitoring for user-defined projects</a> enabled.
					</li><li class="listitem">
						You have installed Red Hat Developer Hub on OpenShift Container Platform using the Red Hat Developer Hub Operator.
					</li><li class="listitem">
						You have installed the OpenShift CLI (<code class="literal">oc</code>).
					</li></ul></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
					Currently, the Red Hat Developer Hub Operator does not support creating a <code class="literal">ServiceMonitor</code> custom resource (CR) by default. You must complete the following steps to create a <code class="literal">ServiceMonitor</code> CR to scrape metrics from the endpoint.
				</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Create the <code class="literal">ServiceMonitor</code> CR as a YAML file:
					</p><pre class="programlisting language-yaml">apiVersion: monitoring.coreos.com/v1
kind: ServiceMonitor
metadata:
  name: <span class="emphasis"><em>&lt;developer_hub_service_monitor_name&gt;</em></span> <span id="CO1-1"/><span class="callout">1</span>
  namespace: <span class="emphasis"><em>&lt;rhdh_namespace_name&gt;</em></span> <span id="CO1-2"/><span class="callout">2</span>
  labels:
    app.kubernetes.io/instance: <span class="emphasis"><em>&lt;rhdh_cr_name&gt;</em></span> <span id="CO1-3"/><span class="callout">3</span>
    app.kubernetes.io/name: Backstage
spec:
  namespaceSelector:
    matchNames:
      - <span class="emphasis"><em>&lt;rhdh_namespace_name&gt;</em></span> <span id="CO1-4"/><span class="callout">4</span>
  selector:
    matchLabels:
      app.kubernetes.io/instance: <span class="emphasis"><em>&lt;deployment_name&gt;</em></span> <span id="CO1-5"/><span class="callout">5</span>
      app.kubernetes.io/name: <span class="emphasis"><em>&lt;rhdh_cr_type&gt;</em></span> <span id="CO1-6"/><span class="callout">6</span>
  endpoints:
  - port: http-metrics
    path: '/metrics'</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
								The name of your <code class="literal">ServiceMonitor</code> resource, for example, <code class="literal">developer_hub_service_monitor</code>.
							</div></dd><dt><a href="#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
								The namespace where your <code class="literal">ServiceMonitor</code> will live, for example, <code class="literal">my-rhdh-project</code>.
							</div></dd><dt><a href="#CO1-3"><span class="callout">3</span></a> </dt><dd><div class="para">
								The label name identifying the <code class="literal">ServiceMonitor</code> CR instance, for example, <code class="literal">my-rhdh-custom-resource</code>.
							</div></dd><dt><a href="#CO1-4"><span class="callout">4</span></a> </dt><dd><div class="para">
								The namespace where your RHDH instance is installed, for example, <code class="literal">my-rhdh-project</code>.
							</div></dd><dt><a href="#CO1-5"><span class="callout">5</span></a> </dt><dd><div class="para">
								The name of your RHDH deployment, for example, <code class="literal">developer-hub</code>.
							</div></dd><dt><a href="#CO1-6"><span class="callout">6</span></a> </dt><dd><div class="para">
								The name of your RHDH application, for example, <code class="literal">backstage</code>.
							</div></dd></dl></div><div class="admonition note"><div class="admonition_header">Note</div><div><p>
							<code class="literal">spec.selector.matchLabels</code> configuration must match the labels of your RHDH installation.
						</p></div></div></li><li class="listitem"><p class="simpara">
						Apply the <code class="literal">ServiceMonitor</code> CR by running the following command:
					</p><pre class="programlisting language-terminal">oc apply -f &lt;filename&gt;</pre></li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the <span class="strong strong"><strong>Developer</strong></span> perspective in the OpenShift Container Platform web console, select the <span class="strong strong"><strong>Observe</strong></span> view.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Metrics</strong></span> tab to view metrics for Red Hat Developer Hub pods.
					</li><li class="listitem">
						From the Developer perspective in the OpenShift Container Platform web console, click <span class="strong strong"><strong>Project &gt; Services</strong></span> and verify the labels for <code class="literal">backstage-developer-hub</code>.
					</li></ol></div></section><section class="section" id="proc-admin-enabling-metrics-ocp-helm_assembly-rhdh-observability"><div class="titlepage"><div><div><h3 class="title">1.2. Enabling metrics monitoring in a Helm chart installation on an OpenShift Container Platform cluster</h3></div></div></div><p>
				You can enable and view metrics for a Red Hat Developer Hub Helm deployment from the <span class="strong strong"><strong>Developer</strong></span> perspective of the OpenShift Container Platform web console.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						Your OpenShift Container Platform cluster has <a class="link" href="https://docs.redhat.com/en/documentation/openshift_container_platform/4.17/html-single/monitoring/index#enabling-monitoring-for-user-defined-projects">monitoring for user-defined projects</a> enabled.
					</li><li class="listitem">
						You have installed Red Hat Developer Hub on OpenShift Container Platform using the Helm chart.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the <span class="strong strong"><strong>Developer</strong></span> perspective in the OpenShift Container Platform web console, select the <span class="strong strong"><strong>Topology</strong></span> view.
					</li><li class="listitem"><p class="simpara">
						Click the overflow menu of the Red Hat Developer Hub Helm chart, and select <span class="strong strong"><strong>Upgrade</strong></span>.
					</p><div class="informalfigure"><div class="mediaobject"><img src="images/rhdh/helm-upgrade.png" alt="helm upgrade"/></div></div></li><li class="listitem"><p class="simpara">
						On the <span class="strong strong"><strong>Upgrade Helm Release</strong></span> page, select the <span class="strong strong"><strong>YAML view</strong></span> option in <span class="strong strong"><strong>Configure via</strong></span>, then configure the <code class="literal">metrics</code> section in the YAML, as shown in the following example:
					</p><pre class="programlisting language-yaml">upstream:
# ...
  metrics:
    serviceMonitor:
      enabled: true
      path: /metrics
      port: http-metrics
# ...</pre><div class="informalfigure"><div class="mediaobject"><img src="images/rhdh/upgrade-helm-metrics.png" alt="upgrade helm metrics"/></div></div></li><li class="listitem">
						Click <span class="strong strong"><strong>Upgrade</strong></span>.
					</li></ol></div><div class="orderedlist"><p class="title"><strong>Verification</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						From the <span class="strong strong"><strong>Developer</strong></span> perspective in the OpenShift Container Platform web console, select the <span class="strong strong"><strong>Observe</strong></span> view.
					</li><li class="listitem">
						Click the <span class="strong strong"><strong>Metrics</strong></span> tab to view metrics for Red Hat Developer Hub pods.
					</li></ol></div><div class="itemizedlist _additional-resources"><p class="title"><strong>Additional resources</strong></p><ul class="itemizedlist _additional-resources" type="disc"><li class="listitem">
						<a class="link" href="https://docs.openshift.com/container-platform/latest/observability/monitoring/managing-metrics.html">OpenShift Container Platform - Managing metrics</a>
					</li></ul></div></section></section><section class="section" id="proc-rhdh-monitoring-logging-aws_assembly-rhdh-observability"><div class="titlepage"><div><div><h2 class="title">2. Monitoring and logging with Amazon Web Services (AWS) in Red Hat Developer Hub</h2></div></div></div><p>
			In the Red Hat Developer Hub, monitoring and logging are facilitated through Amazon Web Services (AWS) integration. With features like Amazon CloudWatch for real-time monitoring and Amazon Prometheus for comprehensive logging, you can ensure the reliability, scalability, and compliance of your Developer Hub application hosted on AWS infrastructure.
		</p><p>
			This integration enables you to oversee, diagnose, and refine your applications in the Red Hat ecosystem, leading to an improved development and operational journey.
		</p><section class="section" id="monitoring-with-amazon-prometheus"><div class="titlepage"><div><div><h3 class="title">2.1. Monitoring with Amazon Prometheus</h3></div></div></div><p>
				Red Hat Developer Hub provides Prometheus metrics related to the running application. For more information about enabling or deploying Prometheus for EKS clusters, see <a class="link" href="https://docs.aws.amazon.com/eks/latest/userguide/prometheus.html">Prometheus metrics</a> in the Amazon documentation.
			</p><p>
				To monitor Developer Hub using <a class="link" href="https://aws.amazon.com/prometheus/">Amazon Prometheus</a>, you need to create an Amazon managed service for the Prometheus workspace and configure the ingestion of the Developer Hub Prometheus metrics. For more information, see <a class="link" href="https://docs.aws.amazon.com/prometheus/latest/userguide/AMP-onboard-create-workspace.html">Create a workspace</a> and <a class="link" href="https://docs.aws.amazon.com/prometheus/latest/userguide/AMP-onboard-ingest-metrics.html">Ingest Prometheus metrics to the workspace</a> sections in the Amazon documentation.
			</p><p>
				After ingesting Prometheus metrics into the created workspace, you can configure the metrics scraping to extract data from pods based on specific pod annotations.
			</p><section class="section" id="configuring-annotations-for-monitoring"><div class="titlepage"><div><div><h4 class="title">2.1.1. Configuring annotations for monitoring</h4></div></div></div><p>
					You can configure the annotations for monitoring in both Helm deployment and Operator-backed deployment.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Helm deployment</span></dt><dd><p class="simpara">
								To annotate the backstage pod for monitoring, update your <code class="literal">values.yaml</code> file as follows:
							</p><pre class="programlisting language-yaml">upstream:
  backstage:
    # --- TRUNCATED ---
    podAnnotations:
      prometheus.io/scrape: 'true'
      prometheus.io/path: '/metrics'
      prometheus.io/port: '9464'
      prometheus.io/scheme: 'http'</pre></dd><dt><span class="term">Operator-backed deployment</span></dt><dd><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
										As an administrator of the operator, edit the default configuration to add Prometheus annotations as follows:
									</p><pre class="programlisting language-bash"># Update OPERATOR_NS accordingly
OPERATOR_NS=rhdh-operator
kubectl edit configmap backstage-default-config -n "${OPERATOR_NS}"</pre></li><li class="listitem"><p class="simpara">
										Find the <code class="literal">deployment.yaml</code> key in the ConfigMap and add the annotations to the <code class="literal">spec.template.metadata.annotations</code> field as follows:
									</p><pre class="programlisting language-yaml">deployment.yaml: |-
  apiVersion: apps/v1
  kind: Deployment
  # --- truncated ---
  spec:
    template:
      # --- truncated ---
      metadata:
        labels:
         rhdh.redhat.com/app:  # placeholder for 'backstage-&lt;cr-name&gt;'
        # --- truncated ---
        annotations:
          prometheus.io/scrape: 'true'
          prometheus.io/path: '/metrics'
          prometheus.io/port: '9464'
          prometheus.io/scheme: 'http'
  # --- truncated ---</pre></li><li class="listitem">
										Save your changes.
									</li></ol></div></dd></dl></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
						To verify if the scraping works:
					</p></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Use <code class="literal">kubectl</code> to port-forward the Prometheus console to your local machine as follows:
						</p><pre class="programlisting language-bash">kubectl --namespace=prometheus port-forward deploy/prometheus-server 9090</pre></li><li class="listitem">
							Open your web browser and navigate to <code class="literal">http://localhost:9090</code> to access the Prometheus console.
						</li><li class="listitem">
							Monitor relevant metrics, such as <code class="literal">process_cpu_user_seconds_total</code>.
						</li></ol></div></section></section><section class="section" id="logging-with-amazon-cloudwatch-logs"><div class="titlepage"><div><div><h3 class="title">2.2. Logging with Amazon CloudWatch logs</h3></div></div></div><p>
				Logging within the Red Hat Developer Hub relies on the <a class="link" href="https://github.com/winstonjs/winston">winston library</a>. By default, logs at the debug level are not recorded. To activate debug logs, you must set the environment variable <code class="literal">LOG_LEVEL</code> to debug in your Red Hat Developer Hub instance.
			</p><section class="section" id="configuring-the-application-log-level"><div class="titlepage"><div><div><h4 class="title">2.2.1. Configuring the application log level</h4></div></div></div><p>
					You can configure the application log level in both Helm deployment and Operator-backed deployment.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Helm deployment</span></dt><dd><p class="simpara">
								To update the logging level, add the environment variable <code class="literal">LOG_LEVEL</code> to your Helm chart’s <code class="literal">values.yaml</code> file:
							</p><pre class="programlisting language-yaml">upstream:
  backstage:
    # --- Truncated ---
    extraEnvVars:
      - name: LOG_LEVEL
        value: debug</pre></dd><dt><span class="term">Operator-backed deployment</span></dt><dd><p class="simpara">
								You can modify the logging level by including the environment variable <code class="literal">LOG_LEVEL</code> in your custom resource as follows:
							</p><pre class="programlisting language-yaml">spec:
  # Other fields omitted
  application:
    extraEnvs:
      envs:
        - name: LOG_LEVEL
          value: debug</pre></dd></dl></div></section><section class="section" id="retrieving-logs-from-amazon-cloudwatch"><div class="titlepage"><div><div><h4 class="title">2.2.2. Retrieving logs from Amazon CloudWatch</h4></div></div></div><p>
					The CloudWatch Container Insights are used to capture logs and metrics for Amazon EKS. For more information, see <a class="link" href="https://docs.aws.amazon.com/prescriptive-guidance/latest/implementing-logging-monitoring-cloudwatch/kubernetes-eks-logging.html">Logging for Amazon EKS</a> documentation.
				</p><p>
					To capture the logs and metrics, <a class="link" href="https://docs.aws.amazon.com/AmazonCloudWatch/latest/monitoring/Container-Insights-setup-EKS-addon.html">install the Amazon CloudWatch Observability EKS add-on</a> in your cluster. Following the setup of Container Insights, you can access container logs using Logs Insights or Live Tail views.
				</p><p>
					CloudWatch names the log group where all container logs are consolidated in the following manner:
				</p><p>
					<code class="literal">/aws/containerinsights/&lt;ClusterName&gt;/application</code>
				</p><p>
					Following is an example query to retrieve logs from the Developer Hub instance:
				</p><pre class="programlisting language-sql">fields @timestamp, @message, kubernetes.container_name
| filter kubernetes.container_name in ["install-dynamic-plugins", "backstage-backend"]</pre></section></section></section><section class="section" id="assembly-monitoring-and-logging-aks"><div class="titlepage"><div><div><h2 class="title">3. Monitoring and logging with Azure Kubernetes Services (AKS) in Red Hat Developer Hub</h2></div></div></div><p>
			Monitoring and logging are integral aspects of managing and maintaining Azure Kubernetes Services (AKS) in Red Hat Developer Hub. With features like Managed Prometheus Monitoring and Azure Monitor integration, administrators can efficiently monitor resource utilization, diagnose issues, and ensure the reliability of their containerized workloads.
		</p><section class="section" id="proc-enabling-azure-monitor-metrics_assembly-monitoring-and-logging-aks"><div class="titlepage"><div><div><h3 class="title">3.1. Enabling Azure Monitor metrics</h3></div></div></div><p>
				To enable managed Prometheus monitoring, use the <code class="literal">-enable-azure-monitor-metrics</code> option within either the <code class="literal">az aks create</code> or <code class="literal">az aks update</code> command, depending on whether you’re creating a new cluster or updating an existing one, such as:
			</p><pre class="programlisting language-bash">az aks create/update --resource-group &lt;your-ResourceGroup&gt; --name &lt;your-Cluster&gt; --enable-azure-monitor-metrics</pre><p>
				The previous command installs the metrics add-on, which gathers <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/prometheus-metrics-overview">Prometheus metrics</a>. Using the previous command, you can enable monitoring of Azure resources through both native Azure Monitor metrics. You can also view the results in the portal under <span class="strong strong"><strong>Monitoring → Insights</strong></span>. For more information, see <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/monitor-azure-resource">Monitor Azure resources with Azure Monitor</a>.
			</p><p>
				Furthermore, metrics from both the Managed Prometheus service and Azure Monitor can be accessed through Azure Managed Grafana service. For more information, see <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/essentials/azure-monitor-workspace-manage?tabs=azure-portal#link-a-grafana-workspace">Link a Grafana workspace</a> section.
			</p><p>
				By default, Prometheus uses the minimum ingesting profile, which optimizes ingestion volume and sets default configurations for scrape frequency, targets, and metrics collected. The default settings can be customized through custom configuration. Azure offers various methods, including using different ConfigMaps, to provide scrape configuration and other metric add-on settings. For more information about default configuration, see <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/containers/prometheus-metrics-scrape-default">Default Prometheus metrics configuration in Azure Monitor</a> and <a class="link" href="https://learn.microsoft.com/en-us/azure/azure-monitor/containers/prometheus-metrics-scrape-configuration?tabs=CRDConfig%2CCRDScrapeConfig">Customize scraping of Prometheus metrics in Azure Monitor managed service for Prometheus</a> documentation.
			</p></section><section class="section" id="proc-configure-annotations-for-aks-monitoring_assembly-monitoring-and-logging-aks"><div class="titlepage"><div><div><h3 class="title">3.2. Configuring annotations for monitoring</h3></div></div></div><p>
				You can configure the annotations for monitoring Red Hat Developer Hub specific metrics in both Helm deployment and Operator-backed deployment.
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Helm deployment</span></dt><dd><p class="simpara">
							To annotate the backstage pod for monitoring, update your <code class="literal">values.yaml</code> file as follows:
						</p><pre class="programlisting language-yaml">upstream:
  backstage:
    # --- TRUNCATED ---
    podAnnotations:
      prometheus.io/scrape: 'true'
      prometheus.io/path: '/metrics'
      prometheus.io/port: '9464'
      prometheus.io/scheme: 'http'</pre></dd><dt><span class="term">Operator-backed deployment</span></dt><dd><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
									As an administrator of the operator, edit the default configuration to add Prometheus annotations as follows:
								</p><pre class="programlisting language-bash"># Update OPERATOR_NS accordingly
OPERATOR_NS=rhdh-operator
kubectl edit configmap backstage-default-config -n "${OPERATOR_NS}"</pre></li><li class="listitem"><p class="simpara">
									Find the <code class="literal">deployment.yaml</code> key in the ConfigMap and add the annotations to the <code class="literal">spec.template.metadata.annotations</code> field as follows:
								</p><pre class="programlisting language-yaml">deployment.yaml: |-
  apiVersion: apps/v1
  kind: Deployment
  # --- truncated ---
  spec:
    template:
      # --- truncated ---
      metadata:
        labels:
         rhdh.redhat.com/app:  # placeholder for 'backstage-&lt;cr-name&gt;'
        # --- truncated ---
        annotations:
          prometheus.io/scrape: 'true'
          prometheus.io/path: '/metrics'
          prometheus.io/port: '9464'
          prometheus.io/scheme: 'http'
  # --- truncated ---</pre></li><li class="listitem">
									Save your changes.
								</li></ol></div></dd></dl></div><div class="formalpara"><p class="title"><strong>Verification</strong></p><p>
					To verify if the scraping works, navigate to the corresponding Azure Monitor Workspace and view the metrics under <span class="strong strong"><strong>Monitoring → Metrics</strong></span>.
				</p></div></section><section class="section" id="proc-view-logs-aks_assembly-monitoring-and-logging-aks"><div class="titlepage"><div><div><h3 class="title">3.3. Viewing logs with Azure Kubernetes Services (AKS)</h3></div></div></div><p>
				You can access live data logs generated by Kubernetes objects and collect log data in Container Insights within AKS.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have deployed Developer Hub on AKS.
					</li></ul></div><p>
				For more information, see <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.4/html-single/installing_red_hat_developer_hub_on_microsoft_azure_kubernetes_service/index.xml#assembly-install-rhdh-aks">Installing Red Hat Developer Hub on Microsoft Azure Kubernetes Service</a>.
			</p><div class="variablelist"><p class="title"><strong>Procedure</strong></p><dl class="variablelist"><dt><span class="term">View live logs from your Developer Hub instance</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Navigate to the Azure Portal.
								</li><li class="listitem">
									Search for the resource group <code class="literal">&lt;your-ResourceGroup&gt;</code> and locate your AKS cluster <code class="literal">&lt;your-Cluster&gt;</code>.
								</li><li class="listitem">
									Select <span class="strong strong"><strong>Kubernetes resources → Workloads</strong></span> from the menu.
								</li><li class="listitem">
									Select the <code class="literal">&lt;your-rhdh-cr&gt;-developer-hub</code> (in case of Helm Chart installation) or <code class="literal">&lt;your-rhdh-cr&gt;-backstage</code> (in case of Operator-backed installation) deployment.
								</li><li class="listitem">
									Click <span class="strong strong"><strong>Live Logs</strong></span> in the left menu.
								</li><li class="listitem"><p class="simpara">
									Select the pod.
								</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
										There must be only single pod.
									</p></div></div></li></ol></div><p class="simpara">
							Live log data is collected and displayed.
						</p></dd><dt><span class="term">View real-time log data from the Container Engine</span></dt><dd><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
									Navigate to the Azure Portal.
								</li><li class="listitem">
									Search for the resource group <code class="literal">&lt;your-ResourceGroup&gt;</code> and locate your AKS cluster <code class="literal">&lt;your-Cluster&gt;</code>.
								</li><li class="listitem">
									Select <span class="strong strong"><strong>Monitoring</strong></span> → <span class="strong strong"><strong>Insights</strong></span> from the menu.
								</li><li class="listitem">
									Go to the <span class="strong strong"><strong>Containers</strong></span> tab.
								</li><li class="listitem">
									Find the backend-backstage container and click it to view real-time log data as it’s generated by the Container Engine.
								</li></ol></div></dd></dl></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm46236693888496"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2025 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></section></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>