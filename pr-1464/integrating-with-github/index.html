<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Integrating Red Hat Developer Hub with GitHub</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="As a Red Hat Developer Hub (RHDH) platform engineer, you can integrate RHDH with the GitHub Git provider."/><link rel="next" href="#enabling-github-repository-discovery" title="1. Enabling GitHub repository discovery"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><section xml:lang="en-US" class="article" id="idm46127225775568"><div class="titlepage"><div><div class="producttitle"><span class="productname">Red Hat Developer Hub</span> <span class="productnumber">1.8</span></div><div><h1 class="title">Integrating Red Hat Developer Hub with GitHub</h1></div><div><h3 class="subtitle"><em>Configuring integration to the GitHub Git provider in Red Hat Developer Hub</em></h3></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm46127205276736">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				As a Red Hat Developer Hub (RHDH) platform engineer, you can integrate RHDH with the GitHub Git provider.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="section"><a href="#enabling-github-repository-discovery">1. Enabling GitHub repository discovery</a></span></li><li><span class="section"><a href="#bulk-importing-github-repositories">2. Bulk importing GitHub repositories</a></span><ul><li><span class="section"><a href="#enabling-and-giving-access-to-the-bulk-import-feature">2.1. Enabling and giving access to the Bulk Import feature</a></span></li><li><span class="section"><a href="#importing-multiple-github-repositories">2.2. Importing multiple GitHub repositories</a></span></li><li><span class="section"><a href="#managing-the-added-repositories">2.3. Managing the added repositories</a></span></li><li><span class="section"><a href="#understanding-bulk-import-audit-logs">2.4. Understanding the Bulk Import audit Logs</a></span></li><li><span class="section"><a href="#bulk-import-scaffolder-template">2.5. Input parameters for Bulk Import Scaffolder template</a></span></li><li><span class="section"><a href="#integrating-bulk-import-with-orchestrator-workflows">2.6. Setting up a custom Scaffolder workflow for Bulk Import</a></span></li><li><span class="section"><a href="#full-data-handoff-and-custom-workflow-design">2.7. Data handoff and custom workflow design</a></span></li></ul></li></ul></div><section class="section" id="enabling-github-repository-discovery"><div class="titlepage"><div><div><h2 class="title">1. Enabling GitHub repository discovery</h2></div></div></div><p>
			Consider configuring Developer Hub to discover and ingest your GitHub repositories automatically. If a repository contains a <code class="literal">catalog-info.yaml</code> file, Developer Hub ingests the repository into the catalog as a component.
		</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
					You <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_red_hat_developer_hub/index">added a custom Developer Hub application configuration</a>, and have sufficient permissions to modify it.
				</li><li class="listitem">
					You have sufficient permissions in GitHub to create and manage a <a class="link" href="https://docs.github.com/en/apps/overview">GitHub App</a>.
				</li><li class="listitem">
					To allow users to access GitHub templates or plugins that require GitHub authentication, you have configured GitHub either <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/authentication_in_red_hat_developer_hub/index#enabling-user-authentication-with-github-as-an-auxiliary-authentication-provider">as an auxiliary authentication provider</a> or <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/authentication_in_red_hat_developer_hub/index#enabling-user-authentication-with-github">as your main authentication provider</a>.
				</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
					To allow Developer Hub to access the GitHub API, create a GitHub App. Opt for a GitHub App instead of an OAuth app to use fine-grained permissions, gain more control over which repositories the application can access, and use short-lived tokens.
				</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
							<a class="link" href="https://docs.github.com/en/apps/creating-github-apps/registering-a-github-app/registering-a-github-app">Register a GitHub App</a> with the following configuration:
						</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">GitHub App name</span></dt><dd>
										Enter a unique name identifying your GitHub App, such as <code class="literal">integrating-with-rhdh-<span class="emphasis"><em>&lt;GUID&gt;</em></span></code>.
									</dd><dt><span class="term">Homepage URL</span></dt><dd>
										Enter your Developer Hub URL: <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span></code>.
									</dd><dt><span class="term">Authorization callback URL</span></dt><dd>
										Enter your Developer Hub authentication backend URL: <code class="literal">https://<span class="emphasis"><em>&lt;my_developer_hub_domain&gt;</em></span>/api/auth/github/handler/frame</code>.
									</dd><dt><span class="term">Webhook</span></dt><dd>
										Clear "Active", as this is not needed for authentication and catalog providers.
									</dd><dt><span class="term">App permissions</span></dt><dd><p class="simpara">
										Select permissions to define the level of access for the app. Adapt permissions to your needs:
									</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Reading software components</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Contents</span></dt><dd>
																<code class="literal">Read-only</code>
															</dd><dt><span class="term">Commit statuses</span></dt><dd>
																<code class="literal">Read-only</code>
															</dd></dl></div></dd><dt><span class="term">Reading organization data</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Members</span></dt><dd>
																<code class="literal">Read-only</code>
															</dd></dl></div></dd><dt><span class="term">Publishing software templates</span></dt><dd><p class="simpara">
													Set permissions if you intend to use the same GitHub App for software templates.
												</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Administration</span></dt><dd>
																<code class="literal">Read &amp; write</code> (for creating repositories)
															</dd><dt><span class="term">Contents</span></dt><dd>
																<code class="literal">Read &amp; write</code>
															</dd><dt><span class="term">Metadata</span></dt><dd>
																<code class="literal">Read-only</code>
															</dd><dt><span class="term">Pull requests</span></dt><dd>
																<code class="literal">Read &amp; write</code>
															</dd><dt><span class="term">Issues</span></dt><dd>
																<code class="literal">Read &amp; write</code>
															</dd><dt><span class="term">Workflows</span></dt><dd>
																<code class="literal">Read &amp; write</code> (if templates include GitHub workflows)
															</dd><dt><span class="term">Variables</span></dt><dd>
																<code class="literal">Read &amp; write</code> (if templates include GitHub Action Repository Variables)
															</dd><dt><span class="term">Secrets</span></dt><dd>
																<code class="literal">Read &amp; write</code> (if templates include GitHub Action Repository Secrets)
															</dd><dt><span class="term">Environments</span></dt><dd>
																<code class="literal">Read &amp; write</code> (if templates include GitHub Environments)
															</dd></dl></div></dd></dl></div></dd><dt><span class="term">Organization permissions</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">Members</span></dt><dd>
													<code class="literal">Read-only</code>
												</dd></dl></div></dd><dt><span class="term">Where can this GitHub App be installed?</span></dt><dd>
										Select <code class="literal">Only on this account</code>.
									</dd></dl></div></li><li class="listitem">
							In the <span class="strong strong"><strong>General</strong></span> → <span class="strong strong"><strong>Clients secrets</strong></span> section, click <span class="strong strong"><strong>Generate a new client secret</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>General</strong></span> → <span class="strong strong"><strong>Private keys</strong></span> section, click <span class="strong strong"><strong>Generate a private key</strong></span>.
						</li><li class="listitem">
							In the <span class="strong strong"><strong>Install App</strong></span> tab, choose an account to install your GitHub App on.
						</li><li class="listitem"><p class="simpara">
							Save the following values for the next step:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<span class="strong strong"><strong>App ID</strong></span>
								</li><li class="listitem">
									<span class="strong strong"><strong>Client ID</strong></span>
								</li><li class="listitem">
									<span class="strong strong"><strong>Client secret</strong></span>
								</li><li class="listitem">
									<span class="strong strong"><strong>Private key</strong></span>
								</li></ul></div></li></ol></div></li><li class="listitem"><p class="simpara">
					To add your GitHub credentials to Developer Hub, add the following key/value pairs to <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/configuring_dynamic_plugins/index#provisioning-your-custom-configuration">your Developer Hub secrets</a>. You can use these secrets in the Developer Hub configuration files by using their respective environment variable name.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">GITHUB_INTEGRATION_APP_ID</code></span></dt><dd>
								Enter the saved <span class="strong strong"><strong>App ID</strong></span>.
							</dd><dt><span class="term"><code class="literal">GITHUB_INTEGRATION_CLIENT_ID</code></span></dt><dd>
								Enter the saved <span class="strong strong"><strong>Client ID</strong></span>.
							</dd><dt><span class="term"><code class="literal">GITHUB_INTEGRATION_CLIENT_SECRET</code></span></dt><dd>
								Enter the saved <span class="strong strong"><strong>Client Secret</strong></span>.
							</dd><dt><span class="term"><code class="literal">GITHUB_INTEGRATION_HOST_DOMAIN</code></span></dt><dd>
								Enter the GitHub host domain: <code class="literal">github.com</code>.
							</dd><dt><span class="term"><code class="literal">GITHUB_INTEGRATION_ORGANIZATION</code></span></dt><dd>
								Enter your GitHub organization name, such as `<span class="emphasis"><em>&lt;your_github_organization_name&gt;</em></span>'.
							</dd><dt><span class="term"><code class="literal">GITHUB_INTEGRATION_PRIVATE_KEY_FILE</code></span></dt><dd>
								Enter the saved <span class="strong strong"><strong>Private key</strong></span>.
							</dd></dl></div></li><li class="listitem"><p class="simpara">
					Enable the <code class="literal">plugin-catalog-backend-module-github</code> plugin in your <code class="literal">dynamic-plugins.yaml</code> file.
				</p><p class="simpara">
					This plugin discovers catalog entities by scanning repositories within a GitHub organization for <code class="literal">catalog-info.yaml</code> files. It provides an automated alternative to manually registering components via <code class="literal">catalog.locations</code>. When a repository contains a <code class="literal">catalog-info.yaml</code> file, the entity is ingested into the catalog as a component.
				</p><div class="formalpara"><p class="title"><strong><code class="literal">dynamic-plugins.yaml</code> file fragment</strong></p><p>
						
<pre class="programlisting language-yaml">plugins:
  - package: './dynamic-plugins/dist/backstage-plugin-catalog-backend-module-github'
    disabled: false</pre>
					</p></div></li><li class="listitem"><p class="simpara">
					Configure the GitHub integration, by adding the <code class="literal">catalog.providers.github</code> and the <code class="literal">integrations.github</code> sections to your custom Developer Hub <code class="literal">app-config.yaml</code> configuration file:
				</p><div class="formalpara"><p class="title"><strong><code class="literal">app-config.yaml</code> file fragment with mandatory fields to enable GitHub integration</strong></p><p>
						
<pre class="programlisting language-yaml">catalog:
  providers:
    github:
      providerId:
        organization: "${GITHUB_INTEGRATION_ORGANIZATION}"
        schedule:
          frequency:
            minutes: 30
          initialDelay:
            seconds: 15
          timeout:
            minutes: 15
integrations:
  github:
    - host: ${GITHUB_INTEGRATION_HOST_DOMAIN}
      apps:
        - appId: ${GITHUB_INTEGRATION_APP_ID}
          clientId: ${GITHUB_INTEGRATION_CLIENT_ID}
          clientSecret: ${GITHUB_INTEGRATION_CLIENT_SECRET}
          privateKey: |
            ${GITHUB_INTEGRATION_PRIVATE_KEY_FILE}</pre>
					</p></div></li></ol></div></section><section class="section" id="bulk-importing-github-repositories"><div class="titlepage"><div><div><h2 class="title">2. Bulk importing GitHub repositories</h2></div></div></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
				These features are for Technology Preview only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs), might not be functionally complete, and Red Hat does not recommend using them for production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
			</p><p>
				For more information on Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Scope</a>.
			</p></div></div><p>
			Red Hat Developer Hub can automate GitHub repositories onboarding and track their import status.
		</p><section class="section" id="enabling-and-giving-access-to-the-bulk-import-feature"><div class="titlepage"><div><div><h3 class="title">2.1. Enabling and giving access to the Bulk Import feature</h3></div></div></div><p>
				You can enable the Bulk Import feature for users and give them the necessary permissions to access it.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/integrating_red_hat_developer_hub_with_github/index#enabling-github-repository-discovery">enabled GitHub repository discovery</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						The Bulk Import plugins are installed but disabled by default. To enable the <code class="literal">./dynamic-plugins/dist/red-hat-developer-hub-backstage-plugin-bulk-import-backend-dynamic</code> and <code class="literal">./dynamic-plugins/dist/red-hat-developer-hub-backstage-plugin-bulk-import</code> plugins, edit your <code class="literal">dynamic-plugins.yaml</code> with the following content:
					</p><div class="formalpara"><p class="title"><strong><code class="literal">dynamic-plugins.yaml</code> fragment</strong></p><p>
							
<pre class="programlisting language-yaml">plugins:
  - package: ./dynamic-plugins/dist/red-hat-developer-hub-backstage-plugin-bulk-import-backend-dynamic
    disabled: false
  - package: ./dynamic-plugins/dist/red-hat-developer-hub-backstage-plugin-bulk-import
    disabled: false</pre>
						</p></div><p class="simpara">
						See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/installing_and_viewing_plugins_in_red_hat_developer_hub/index">Installing and viewing plugins in Red Hat Developer Hub</a>.
					</p></li><li class="listitem"><p class="simpara">
						Configure the required <code class="literal">bulk.import</code> RBAC permission for the users who are not administrators as follows:
					</p><div class="formalpara"><p class="title"><strong><code class="literal">rbac-policy.csv</code> fragment</strong></p><p>
							
<pre class="programlisting language-csv">p, role:default/bulk-import, bulk.import, use, allow
g, user:default/<span class="emphasis"><em>&lt;your_user&gt;</em></span>, role:default/bulk-import</pre>
						</p></div><p class="simpara">
						Note that only Developer Hub administrators or users with the <code class="literal">bulk.import</code> permission can use the Bulk Import feature. See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/authorization_in_red_hat_developer_hub/index#ref-rbac-permission-policies_title-authorization">Permission policies in Red Hat Developer Hub</a>.
					</p></li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The sidebar displays a <span class="strong strong"><strong>Bulk Import</strong></span> option.
					</li><li class="listitem">
						The <span class="strong strong"><strong>Bulk Import</strong></span> page shows a list of <span class="strong strong"><strong>Added Repositories</strong></span>.
					</li></ul></div></section><section class="section" id="importing-multiple-github-repositories"><div class="titlepage"><div><div><h3 class="title">2.2. Importing multiple GitHub repositories</h3></div></div></div><p>
				In Red Hat Developer Hub, you can select your GitHub repositories and automate their onboarding to the Developer Hub catalog.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have <a class="link" href="#enabling-and-giving-access-to-the-bulk-import-feature" title="2.1. Enabling and giving access to the Bulk Import feature">enabled the Bulk Import feature and gave access to it</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
						Click <span class="strong strong"><strong>Bulk Import</strong></span> in the left sidebar.
					</li><li class="listitem"><p class="simpara">
						Click the <span class="strong strong"><strong>Add</strong></span> button in the top-right corner to see the list of all repositories accessible from the configured GitHub integrations.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								From the <span class="strong strong"><strong>Repositories</strong></span> view, you can select any repository, or search for any accessible repositories. For each repository selected, a <code class="literal">catalog-info.yaml</code> is generated.
							</li><li class="listitem">
								From the <span class="strong strong"><strong>Organizations</strong></span> view, you can select any organization by clicking <span class="strong strong"><strong>Select</strong></span> in the third column. This option allows you to select one or more repositories from the selected organization.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Preview file</strong></span> to view or edit the details of the pull request for each repository.
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Review the pull request description and the <code class="literal">catalog-info.yaml</code> file content.
							</li><li class="listitem">
								Optional: when the repository has a <code class="literal">.github/CODEOWNERS</code> file, you can select the <span class="strong strong"><strong>Use CODEOWNERS file as Entity Owner</strong></span> checkbox to use it, rather than having the <code class="literal">content-info.yaml</code> contain a specific entity owner.
							</li><li class="listitem">
								Click <span class="strong strong"><strong>Save</strong></span>.
							</li></ol></div></li><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Create pull requests</strong></span>. At this point, a set of dry-run checks runs against the selected repositories to ensure they meet the requirements for import, such as:
					</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
								Verifying that there is no entity in the Developer Hub catalog with the name specified in the repository <code class="literal">catalog-info.yaml</code>
							</li><li class="listitem">
								Verifying that the repository is not empty
							</li><li class="listitem"><p class="simpara">
								Verifying that the repository contains a <code class="literal">.github/CODEOWNERS</code> file if the <span class="strong strong"><strong>Use CODEOWNERS file as Entity Owner</strong></span> checkbox is selected for that repository
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										If any errors occur, the pull requests are not created, and you see a <span class="emphasis"><em>Failed to create PR</em></span> error message detailing the issues. To view more details about the reasons, click <span class="strong strong"><strong>Edit</strong></span>.
									</li><li class="listitem">
										If there are no errors, the pull requests are created, and you are redirected to the list of added repositories.
									</li></ul></div></li></ol></div></li><li class="listitem">
						Review and merge each pull request that creates a <code class="literal">catalog-info.yml</code> file.
					</li></ol></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The <span class="strong strong"><strong>Added repositories</strong></span> list displays the repositories you imported, each with an appropriate status: either <span class="emphasis"><em>Waiting for approval</em></span> or <span class="emphasis"><em>Added</em></span>.
					</li><li class="listitem">
						For each <span class="emphasis"><em>Waiting for approval</em></span> import job listed, there is a corresponding pull request adding the <code class="literal">catalog-info.yaml</code> file in the corresponding repository.
					</li></ul></div></section><section class="section" id="managing-the-added-repositories"><div class="titlepage"><div><div><h3 class="title">2.3. Managing the added repositories</h3></div></div></div><p>
				You can oversee and manage the repositories that are imported to the Developer Hub.
			</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You have <a class="link" href="#importing-multiple-github-repositories" title="2.2. Importing multiple GitHub repositories">imported GitHub repositories</a>.
					</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
						Click <span class="strong strong"><strong>Bulk Import</strong></span> in the left sidebar to display all the current repositories that are being tracked as Import jobs, along with their status.
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Added</span></dt><dd>
									The repository is added to the Developer Hub catalog after the import pull request is merged or if the repository already contained a <code class="literal">catalog-info.yaml</code> file during the bulk import. Note that it may take a few minutes for the entities to be available in the catalog.
								</dd><dt><span class="term">Waiting for approval</span></dt><dd><p class="simpara">
									There is an open pull request adding a <code class="literal">catalog-info.yaml</code> file to the repository. You can:
								</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
											Click the <span class="strong strong"><strong>pencil icon</strong></span> on the right to see details about the pull request or edit the pull request content right from Developer Hub.
										</li><li class="listitem">
											Delete the Import job, this action closes the import PR as well.
										</li><li class="listitem">
											To transition the Import job to the <span class="emphasis"><em>Added</em></span> state, merge the import pull request from the Git repository.
										</li></ul></div></dd><dt><span class="term">Empty</span></dt><dd>
									Developer Hub is unable to determine the import job status because the repository is imported from other sources but does not have a <code class="literal">catalog-info.yaml</code> file and lacks any import pull request adding it.
								</dd></dl></div></li></ol></div><div class="admonition note"><div class="admonition_header">Note</div><div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							After an import pull request is merged, the import status is marked as <span class="emphasis"><em>Added</em></span> in the list of Added Repositories, but it might take a few seconds for the corresponding entities to appear in the Developer Hub Catalog.
						</li><li class="listitem"><p class="simpara">
							A location added through other sources (like statically in an <code class="literal">app-config.yaml</code> file, dynamically when <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/integrating_red_hat_developer_hub_with_github/index#enabling-github-repository-discovery">enabling GitHub discovery</a>, or registered manually using the "Register an existing component" page) might show up in the Bulk Import list of Added Repositories if the following conditions are met:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									The target repository is accessible from the configured GitHub integrations.
								</li><li class="listitem">
									The location URL points to a <code class="literal">catalog-info.yaml</code> file at the root of the repository default branch.
								</li></ul></div></li></ul></div></div></div></section><section class="section" id="understanding-bulk-import-audit-logs"><div class="titlepage"><div><div><h3 class="title">2.4. Understanding the Bulk Import audit Logs</h3></div></div></div><p>
				The Bulk Import backend plugin adds the following events to the Developer Hub audit logs. See <a class="link" href="https://docs.redhat.com/en/documentation/red_hat_developer_hub/1.8/html-single/audit_logs_in_red_hat_developer_hub/index">Audit logs in Red Hat Developer Hub</a> for more information on how to configure and view audit logs.
			</p><p>
				<span class="strong strong"><strong>Bulk Import Events</strong></span>:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">BulkImportUnknownEndpoint</code></span></dt><dd>
							Tracks requests to unknown endpoints.
						</dd><dt><span class="term"><code class="literal">BulkImportPing</code></span></dt><dd>
							Tracks <code class="literal">GET</code> requests to the <code class="literal">/ping</code> endpoint, which allows us to make sure the bulk import backend is up and running.
						</dd><dt><span class="term"><code class="literal">BulkImportFindAllOrganizations</code></span></dt><dd>
							Tracks <code class="literal">GET</code> requests to the <code class="literal">/organizations</code> endpoint, which returns the list of organizations accessible from all configured GitHub Integrations.
						</dd><dt><span class="term"><code class="literal">BulkImportFindRepositoriesByOrganization</code></span></dt><dd>
							Tracks <code class="literal">GET</code> requests to the <code class="literal">/organizations/:orgName/repositories</code> endpoint, which returns the list of repositories for the specified organization (accessible from any of the configured GitHub Integrations).
						</dd><dt><span class="term"><code class="literal">BulkImportFindAllRepositories</code></span></dt><dd>
							Tracks GET requests to the <code class="literal">/repositories</code> endpoint, which returns the list of repositories accessible from all configured GitHub Integrations.
						</dd><dt><span class="term"><code class="literal">BulkImportFindAllImports</code></span></dt><dd>
							Tracks <code class="literal">GET</code> requests to the <code class="literal">/imports</code> endpoint, which returns the list of existing import jobs along with their statuses.
						</dd><dt><span class="term"><code class="literal">BulkImportCreateImportJobs</code></span></dt><dd>
							Tracks <code class="literal">POST</code> requests to the <code class="literal">/imports</code> endpoint, which allows to submit requests to bulk-import one or many repositories into the Developer Hub catalog, by eventually creating import pull requests in the target repositories.
						</dd><dt><span class="term"><code class="literal">BulkImportFindImportStatusByRepo</code></span></dt><dd>
							Tracks <code class="literal">GET</code> requests to the <code class="literal">/import/by-repo</code> endpoint, which fetches details about the import job for the specified repository.
						</dd><dt><span class="term"><code class="literal">BulkImportDeleteImportByRepo</code></span></dt><dd>
							Tracks <code class="literal">DELETE</code> requests to the <code class="literal">/import/by-repo</code> endpoint, which deletes any existing import job for the specified repository, by closing any open import pull request that could have been created.
						</dd></dl></div><div class="formalpara"><p class="title"><strong>Example bulk import audit logs</strong></p><p>
					
<pre class="programlisting language-json">{
  "actor": {
    "actorId": "user:default/myuser",
    "hostname": "localhost",
    "ip": "::1",
    "userAgent": "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/128.0.0.0 Safari/537.36"
  },
  "eventName": "BulkImportFindAllOrganizations",
  "isAuditLog": true,
  "level": "info",
  "message": "'get /organizations' endpoint hit by user:default/myuser",
  "meta": {},
  "plugin": "bulk-import",
  "request": {
    "body": {},
    "method": "GET",
    "params": {},
    "query": {
      "pagePerIntegration": "1",
      "sizePerIntegration": "5"
    },
    "url": "/api/bulk-import/organizations?pagePerIntegration=1&amp;sizePerIntegration=5"
  },
  "response": {
    "status": 200
  },
  "service": "backstage",
  "stage": "completion",
  "status": "succeeded",
  "timestamp": "2024-08-26 16:41:02"
}</pre>
				</p></div></section><section class="section" id="bulk-import-scaffolder-template"><div class="titlepage"><div><div><h3 class="title">2.5. Input parameters for Bulk Import Scaffolder template</h3></div></div></div><p>
				As an administrator, you can use the Bulk Import plugin to run a Scaffolder template task with specified parameters, which you must define within the template.
			</p><p>
				The Bulk Import plugin analyzes Git repository information and provides the following parameters for the Scaffolder template task:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">repoUrl</code></span></dt><dd><p class="simpara">
							Normalized repository URL in the following format:
						</p><pre class="programlisting language-yaml">  ${gitProviderHost}?owner=${owner}&amp;repo=${repository-name}</pre></dd><dt><span class="term"><code class="literal">name</code></span></dt><dd>
							The repository name.
						</dd><dt><span class="term"><code class="literal">organization</code></span></dt><dd>
							The repository owner, which can be a user nickname or organization name.
						</dd><dt><span class="term"><code class="literal">branchName</code></span></dt><dd>
							The proposed repository branch. By default, the proposed repository branch is <code class="literal">bulk-import-catalog-entity</code>.
						</dd><dt><span class="term"><code class="literal">targetBranchName</code></span></dt><dd>
							The default branch of the Git repository.
						</dd><dt><span class="term"><code class="literal">gitProviderHost</code></span></dt><dd>
							The Git provider host parsed from the repository URL. You can use this parameter to write <code class="literal">Git-provider-agnostic</code> templates.
						</dd></dl></div><p>
				Example of a Scaffolder template:
			</p><pre class="programlisting language-yaml">parameters:
  - title: Repository details
    required:
      - repoUrl
      - branchName
      - targetBranchName
      - name
      - organization
    properties:
      repoUrl:
        type: string
        title: Repository URL (Backstage format)
        description: github.com?owner=Org&amp;repo=repoName
      organization:
        type: string
        title: Owner of the repository
      name:
        type: string
        title: Name of the repository
      branchName:
        type: string
        title: Branch to add the catalog entity to
      targetBranchName:
        type: string
        title: Branch to target the PR/MR to
      gitProviderHost:
        type: string
        title: Git provider host</pre></section><section class="section" id="integrating-bulk-import-with-orchestrator-workflows"><div class="titlepage"><div><div><h3 class="title">2.6. Setting up a custom Scaffolder workflow for Bulk Import</h3></div></div></div><p>
				As an administrator, you can create a custom Scaffolder template in line with the repository conventions of your organization and add the template into the Red Hat Developer Hub catalog for use by the Bulk Import plugin on multiple selected repositories.
			</p><p>
				You can define various custom tasks, including, but not limited to the following:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Importing existing catalog entities from a repository
					</li><li class="listitem">
						Creating pull requests for cleanup
					</li><li class="listitem">
						Calling webhooks for external system integration
					</li></ul></div><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						You created a custom Scaffolder template for the Bulk Import plugin.
					</li><li class="listitem"><p class="simpara">
						You have run your RHDH instance with the following environment variable enabled to allow the use of the Scaffolder functionality:
					</p><pre class="programlisting language-yaml">export NODE_OPTIONS=--no-node-snapshot</pre></li></ul></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						Configure your app-config.yaml configuration to instruct the Bulk Import plugin to use your custom template as shown in the following example:
					</p><pre class="programlisting language-yaml">bulkImport:
  importTemplate: &lt;your_template_entity_reference_or_template_name&gt;
  importAPI: `open-pull-requests` | `scaffolder`;</pre><p class="simpara">
						where:
					</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="literal">importTemplate:</code></span></dt><dd>
									Enter your Scaffolder template entity reference.
								</dd><dt><span class="term"><code class="literal">importAPI</code></span></dt><dd>
									Set the API to 'scaffolder' to trigger the defined workflow for high-fidelity automation. This field defines the import workflow and currently supports two following options:
								</dd><dt><span class="term"><code class="literal">open-pull-requests</code></span></dt><dd>
									This is the default import workflow, which includes the logic for creating pull requests for every selected repository.
								</dd><dt><span class="term"><code class="literal">scaffolder</code></span></dt><dd><p class="simpara">
									This workflow uses an import scenario defined in the Scaffolder template to create import jobs. Select this option to use the custom import scenario defined in your Scaffolder template.
								</p><p class="simpara">
									Optional: You can direct the Bulk Import plugin to hand off the entire list of selected repositories to a custom Orchestrator workflow.
								</p><div class="admonition important"><div class="admonition_header">Important</div><div><p>
										The Scaffolder template must be generic and not specific to a single repository if you want your custom Scaffolder template to run successfully for every repository in the bulk list.
									</p></div></div></dd></dl></div></li></ul></div><div class="itemizedlist"><p class="title"><strong>Verification</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
						The Bulk Import plugin runs the custom Scaffolder template for the list of repositories using the <code class="literal">/task-imports</code> API endpoint.
					</li></ul></div></section><section class="section" id="full-data-handoff-and-custom-workflow-design"><div class="titlepage"><div><div><h3 class="title">2.7. Data handoff and custom workflow design</h3></div></div></div><p>
				When you configure the Bulk Import plugin by setting the importAPI field to <code class="literal">scaffolder</code>, the Bulk Import Backend passes all necessary context directly to the Scaffolder API.
			</p><p>
				As an administrator, you can define the Scaffolder template workflow and structure the workflow to do the following:
			</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Define template parameters to consume input</span></dt><dd>
							Structure the Scaffolder template to receive the repository data as template parameters for the current workflow run. The template must be generic, and not specific to a single repository, so that it can successfully run for every repository in the bulk list.
						</dd><dt><span class="term">Automate processing for each repository</span></dt><dd>
							Implement the custom logic needed for a single repository within the template. The Orchestrator iterates through the repository list, launching the template once for each repository and passes only the data for that single repository to the template run. This allows you to automate tasks such as creating the <code class="literal">catalog-info.yaml</code>, running compliance checks, or registering the entity with the catalog.
						</dd></dl></div></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm46127205276736"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2025 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></section></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>