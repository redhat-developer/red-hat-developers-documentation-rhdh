:_mod-docs-content-type: PROCEDURE

[id="proc-install-in-air-gapped-environment.adoc_{context}"]
=  Installing {product} with the Orchestrator in an air-gapped environment

You can install {product} with the Orchestrator in an air-gapped environment by mirroring required container images, Helm charts, and NPM packages to internal registries.

.Prerequisites

* You have administrative access to the {ocp-short} cluster and mirroring tools such as `oc`, `podman`, or `skopeo`.
* You have access to `npm.registry.redhat.com` from a connected network to pull and mirror Orchestrator plugin tarballs.
* You have mirroring permissions and credentials for all required sources.

.Procedure

. From a connected network, log in to the external registries.

. Identify and mirror all required container images to your internal registry.

. Mirror the Orchestrator plugin NPM packages to your internal NPM registry:

. Update the `dynamic-plugins` configuration to reference the internal NPM registry:
+
[source,yaml]
----
plugins:
  - package: "@redhat/backstage-plugin-orchestrator@<version>"
    disabled: false
    registry: {INTERNAL_REGISTRY_EXAMPLE} # Specify the URL for the internal NPM registry.
----

. (Optional) If you use Helm charts, download them from a connected environment and push them to your internal chart repository.

. Make sure _NetworkPolicies_, Role, and _RoleBinding_ resources for the _SonataFlow_ platform are included in your deployment configuration. The {product-short} Operator applies these automatically when the `SonataFlowPlatform` custom resource is created.

[NOTE]
====
For the connected environment resource requirements, see link:{installing-orch-on-ocp-book-url}[Resource requirements for the Operator-based Orchestrator].
====

.Verification
* Make sure all pods for OpenShift Serverless, Knative Serving/Eventing, SonataFlow, and PostgreSQL start successfully.