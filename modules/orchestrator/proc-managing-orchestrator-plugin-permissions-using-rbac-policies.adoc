:_mod-docs-content-type: PROCEDURE

[id="proc-managing-orchestrator-plugin-permissions-using-rbac-policies_{context}"]
= Managing Orchestrator plugin permissions using RBAC policies

You can configure Role-Based Access Control (RBAC) policies so that users can view workflow details without the permission to run those workflows. This configuration limits user interaction to explicitly authorized workflows.

.Prerequisites
•  You have identified the specific [`workflowId`] for each workflow you want to restrict.
•  You have enabled the RBAC plugin and configured the `policies-csv-file` path in your `{my-app-config-file}`.

.Procedure
. Identify the `workflowId` from your workflow definition file as shown in the following example:
+
[source,yaml]
----
id: greeting
version: '1.0'
----
. Create or update your RBAC policy CSV file to define permissions. Use the format `p, role, permission, action, allow`.
+
[NOTE]
====
You can grant access using generic permissions, (for example, `orchestrator.workflow`) or specific permissions targeting a `workflowId`, (for example, `orchestrator.workflow.greeting`). Generic permissions take precedence; you cannot grant generic access and then selectively deny a specific ID.
====

. Add the following example policies to your CSV file to establish basic user and administrator roles:
+
[source,yaml]
----
# Minimal user role - can only view and run specific workflows
p, role:default/workflowUser, orchestrator.workflow.greeting, read, allow
p, role:default/workflowUser, orchestrator.workflow.use.greeting, update, allow
# Support role - can view all workflows and instances, but not execute
p, role:default/workflowSupport, orchestrator.workflow, read, allow
p, role:default/workflowSupport, orchestrator.instanceAdminView, read, allow
# Full admin role - complete access to all Orchestrator functions
p, role:default/workflowAdmin, orchestrator.workflow, read, allow
p, role:default/workflowAdmin, orchestrator.workflow.use, update, allow
p, role:default/workflowAdmin, orchestrator.workflowAdminView, read, allow
p, role:default/workflowAdmin, orchestrator.instanceAdminView, read, allow
# Assign users to the roles
g, user:default/example_user, role:default/workflowUser
----
. Enable permissions in your `{my-app-config-file}` file by adding the `orchestrator` plugin to the `rbac` section and set `policyFileReload` to true.
+
[source,subs="+attributes,+quotes"]
----
permission:
  enabled: true
  rbac:
    policies-csv-file: <absolute_path_to_the_policy_file>
    pluginsWithPermission:
      - orchestrator
    policyFileReload: true
    admin:
      users:
        - name: user:default/YOUR_USER
----
. Restart the application to apply the changes.

.Verification
. Log in as a user assigned to the `workflowUser` role.
. Navigate to the Orchestrator plugin and verify that you can see the workflow in the list.

[IMPORTANT]
====
You can view dynamic permissions containing a `workflowId` in the RBAC UI, but you cannot modify them in the interface. Use the policy CSV file or the RBAC API to manage these specific workflow permissions.
====

[role="_additional-resources"]
.Additional resources
* For more information on `casbin` rules, see link:https://www.casbin.org/docs/rbac[RBAC documentation].