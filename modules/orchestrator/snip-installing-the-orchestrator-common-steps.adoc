Run the following command to list the OpenShift Serverless Logic Operator images:

[source,subs="+attributes,+quotes"]
----
IMG=registry.redhat.io/openshift-serverless-1/logic-operator-bundle:{rhoserverless-version}.0-8
mkdir local-manifests-osl
podman create --name temp-container "$IMG" -c "cat /manifests/logic-operator-rhel8.clusterserviceversion.yaml"
podman cp temp-container:/manifests ./local-manifests-osl
podman rm temp-container
yq -r '.data."controllers_cfg.yaml" | from_yaml | .. | select(tag == "!!str") | select(test("^.*\\/.*:.*$"))' ./local-manifests-osl/manifests/logic-operator-rhel8-controllers-config_v1_configmap.yaml
yq -r '.. | select(has("image")) | .image' ./local-manifests-osl/manifests/logic-operator-rhel8.clusterserviceversion.yaml
podman image inspect "$IMG" --format '{{ index .RepoDigests 0 }}'
----

Run the following command to generate the Serverless Operator images list:

[source,subs="+attributes,+quotes"]
----
IMG=registry.redhat.io/openshift-serverless-1/serverless-operator-bundle:{rhoserverless-version}.0
podman run --rm --entrypoint bash "$IMG" -c "cat /manifests/serverless-operator.clusterserviceversion.yaml" | yq '.spec.relatedImages[].image' | sort | uniq
podman pull "$IMG"
podman image inspect "$IMG" --format '{{ index .RepoDigests 0 }}'
----

Use the latest version of the bundle operator, {rhoserverless-version} to avoid missing or having outdated image references.

[source,subs="+attributes,+quotes"]
----
IMG=registry.redhat.io/openshift-serverless-1/logic-operator-bundle:{rhoserverless-version}.0-8
mkdir local-manifests-osl
podman create --name temp-container "$IMG" -c "cat /manifests/logic-operator-rhel8.clusterserviceversion.yaml"
podman cp temp-container:/manifests ./local-manifests-osl
podman rm temp-container
yq -r '.data."controllers_cfg.yaml" | from_yaml | .. | select(tag == "!!str") | select(test("^.*\\/.*:.*$"))' ./local-manifests-osl/manifests/logic-operator-rhel8-controllers-config_v1_configmap.yaml
----

For more information, refer to {orchestrator-book-link}#con-compatibility-guide-for-orchestrator.adoc_orchestrator-rhdh[Compatibility guide for Orchestrator].

. Create the `ImageTagMirrorSet` and `ImageDigestMirrorSet` for the Serverless Functions (SF) images as shown in the following examples:
+
* Creating `ImageTagMirrorSet` for the SF images:
+
[source,subs="+attributes,+quotes"]
----
apiVersion: config.openshift.io/v1
kind: ImageTagMirrorSet
metadata:
  name: rhdh-tag-mirror
spec:
 imageTagMirrors:
   - mirrors:
       - '<my.registry.example.com>/openshift-serverless-1/logic-operator-bundle'
     source: registry.redhat.io/openshift-serverless-1/logic-operator-bundle
   - mirrors:
       - '<my.registry.example.com>/openshift4/ose-cli'
     source: registry.redhat.io/openshift4/ose-cli
   - mirrors:
       - '<my.registry.example.com>/openshift-serverless-1/logic-jobs-service-postgresql-rhel8'
     source: registry.redhat.io/openshift-serverless-1/logic-jobs-service-postgresql-rhel8
   - mirrors:
       - '<my.registry.example.com>/openshift-serverless-1/logic-jobs-service-ephemeral-rhel8'
     source: registry.redhat.io/openshift-serverless-1/logic-jobs-service-ephemeral-rhel8
   - mirrors:
       - '<my.registry.example.com>/openshift-serverless-1/logic-data-index-postgresql-rhel8'
     source: registry.redhat.io/openshift-serverless-1/logic-data-index-postgresql-rhel8
   - mirrors:
       - '<my.registry.example.com>/openshift-serverless-1/logic-data-index-ephemeral-rhel8'
     source: registry.redhat.io/openshift-serverless-1/logic-data-index-ephemeral-rhel8
   - mirrors:
       - '<my.registry.example.com>/openshift-serverless-1/logic-swf-builder-rhel8'
     source: registry.redhat.io/openshift-serverless-1/logic-swf-builder-rhel8
   - mirrors:
       - '<my.registry.example.com>/openshift-serverless-1/logic-swf-devmode-rhel8'
     source: registry.redhat.io/openshift-serverless-1/logic-swf-devmode-rhel8
----
+
* Creating `ImageDigestMirrorSet` for the SF images:
+
[source,subs="+attributes,+quotes"]
----
kind: ImageDigestMirrorSet
apiVersion: config.openshift.io/v1
metadata:
 name: rhdhorchestrator-mirror
spec:
 imageDigestMirrors:
   # Chart deployment
   - source: registry.redhat.io/openshift4/ose-cli
     mirrors:
       - <my.registry.example.com>/ose-cli
   - source: registry.access.redhat.com/ubi9-minimal
     mirrors:
       - <my.registry.example.com>/ubi9-minimal
   # Serverless workflows
   - source: registry.redhat.io/openshift-serverless-1/logic-rhel8-operator
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/logic-rhel8-operator
   - source: registry.redhat.io/openshift-serverless-1/logic-jobs-service-postgresql-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/logic-jobs-service-postgresql-rhel8
   - source: registry.redhat.io/openshift-serverless-1/logic-jobs-service-ephemeral-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/logic-jobs-service-ephemeral-rhel8
   - source: registry.redhat.io/openshift-serverless-1/logic-data-index-postgresql-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/logic-data-index-postgresql-rhel8
   - source: registry.redhat.io/openshift-serverless-1/logic-data-index-ephemeral-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/logic-data-index-ephemeral-rhel8
   - source: registry.redhat.io/openshift-serverless-1/logic-swf-builder-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/logic-swf-builder-rhel8
   - source: registry.redhat.io/openshift-serverless-1/logic-swf-devmode-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/logic-swf-devmode-rhel8
   # {product-very-short}
   - source: registry.redhat.io/rhdh/rhdh-rhel9-operator
     mirrors:
       - <my.registry.example.com>/rhdh/rhdh-rhel9-operator
   - source: registry.redhat.io/rhdh/rhdh-operator-bundle
     mirrors:
       - <my.registry.example.com>/rhdh/rhdh-operator-bundle
   - source: registry.redhat.io/rhdh/rhdh-hub-rhel9
     mirrors:
       - <my.registry.example.com>/rhdh/rhdh-hub-rhel9
   # Knative Serving
   - source: registry.redhat.io/openshift-serverless-1/kn-serving-activator-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-serving-activator-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-serving-autoscaler-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-serving-autoscaler-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-serving-autoscaler-hpa-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-serving-autoscaler-hpa-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-serving-controller-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-serving-controller-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-serving-webhook-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-serving-webhook-rhel8
   # Knative Serving Ingress
   - source: registry.redhat.io/openshift-serverless-1/kourier-control-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kourier-control-rhel8
   - source: registry.redhat.io/openshift-service-mesh/proxyv2-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-service-mesh/proxyv2-rhel8
   # Knative Eventing
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-controller-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-eventing-controller-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-apiserver-receive-adapter-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-eventing-apiserver-receive-adapter-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-webhook-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-eventing-webhook-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-channel-controller-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-eventing-channel-controller-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-channel-dispatcher-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-eventing-channel-dispatcher-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-jobsink-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-eventing-jobsink-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-mtchannel-broker-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-eventing-mtchannel-broker-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-filter-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-eventing-filter-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-ingress-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverless-1/kn-eventing-ingress-rhel8
   - source: registry.redhat.io/openshift-serverless-1/kn-eventing-mtping-rhel8
     mirrors:
       - <my.registry.example.com>/openshift-serverle
ss-1/kn-eventing-mtping-rhel8
----
+
[NOTE]
====
If these objects already exist from the previous image mirroring step, you can skip this task.
====

. Wait for all the nodes to update after applying the `ImageTagMirrorSet`.
Track the update using the following command:
+
[source,yaml]
----
oc get mcp -A
----
+
Once all Machine Config Pools (MCP) are applied, the new image configuration propagates to all nodes.

. Download the Node Package Manager (NPM) packages for orchestrator {product-bundle-version} using the following methods:
+
* Download them as `tgz` files from the following registry:
** https://npm.registry.redhat.com/@redhat/backstage-plugin-orchestrator/-/backstage-plugin-orchestrator-{product-bundle-version}.tgz
** https://npm.registry.redhat.com/@redhat/backstage-plugin-orchestrator-backend-dynamic/-/backstage-plugin-orchestrator-backend-dynamic-{product-bundle-version}.tgz
** https://npm.registry.redhat.com/@redhat/backstage-plugin-scaffolder-backend-module-orchestrator-dynamic/-/backstage-plugin-scaffolder-backend-module-orchestrator-dynamic-{product-bundle-version}.tgz
** https://npm.registry.redhat.com/@redhat/backstage-plugin-orchestrator-form-widgets/-/backstage-plugin-orchestrator-form-widgets-{product-bundle-version}.tgz
+
* Alternatively, use the NPM packages from link:https://npm.registry.redhat.com[{company-name} NPM registry] as shown in the following example:
+
[source,subs="+attributes,+quotes"]
----
npm pack "@redhat/backstage-plugin-orchestrator@{product-bundle-version}" --registry=https://npm.registry.redhat.com
npm pack "@redhat/backstage-plugin-orchestrator-backend-dynamic@{product-bundle-version}" --registry=https://npm.registry.redhat.com
npm pack "@redhat/backstage-plugin-scaffolder-backend-module-orchestrator-dynamic@{product-bundle-version} --registry=https://npm.registry.redhat.com
npm pack "@redhat/backstage-plugin-orchestrator-form-widgets@{product-bundle-version}" --registry=https://npm.registry.redhat.com
----

. Push the NPM packages you have downloaded to your NPM server as shown in the following example:
+
[source,subs="+attributes,+quotes"]
----
npm publish backstage-plugin-orchestrator-{product-bundle-version}.tgz
npm publish backstage-plugin-orchestrator-backend-dynamic-{product-bundle-version}.tgz
npm publish backstage-plugin-orchestrator-form-widgets-{product-bundle-version}.tgz
npm publish backstage-plugin-scaffolder-backend-module-orchestrator-dynamic-{product-bundle-version}.tgz
----