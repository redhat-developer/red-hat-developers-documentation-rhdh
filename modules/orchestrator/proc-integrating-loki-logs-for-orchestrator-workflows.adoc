:_mod-docs-content-type: PROCEDURE

[id="proc-integrating-loki-logs-for-orchestrator-workflows_{context}"]
= Integrating Loki logs for Orchestrator workflows

To troubleshoot and debug errors, integrate Loki logs into the {product} interface. You must install the Loki backend module and configure the connection details.

.Prerequisites

* You have enabled the Orchestrator plugins in your {product} instance.

* You have a running Loki instance.

* You have stored your Orchestrator logs in the Loki instance.

.Procedure

. Enable the Loki backend module by enabling it in the `redhat-developer-hub-dynamic-plugins` ConfigMap.
+
image::rhdh/enable-the-loki-backend-module.png[]

. Open the ConfigMap and choose the *YAML* view.

. Add the Loki backend module to the `plugins` section:
+
[source,yaml,subs="+attributes,+quotes"]
----
- disabled: false
      package: oci://registry.access.redhat.com/rhdh/red-hat-developer-hub-backstage-plugin-orchestrator-backend-module-loki:{{inherit}}
----
+
image::rhdh/add-loki-backend-module-plugin.png[]

. Save the file.

. Add the Loki workflow log provider integration to the *orchestrator* section of your application `{my-app-config-file}` ConfigMap:
+
[source,yaml]
----
orchestrator:
  workflowLogProvider:
    loki:
      baseUrl: http://localhost:3100
      # logStreamSelectors:
      #   - label: 'app'
      #     value: '=\~".+"'
----
where:

`baseUrl`:: Specifies the base URL of your Loki instance. This value is required.

`logStreamSelectors`:: Specifies log stream selectors to filter the logs. By default, the plugin retrieves all logs. For more information about selector syntax, see the link:https://grafana.com/docs/loki/latest/query/log_queries/#log-stream-selector[Grafana Loki documentation].
+
image::rhdh/add-loki-workflow-log-provider.png[]
+
image::rhdh/loki-workflow-log-provider.png[]
+
[NOTE]
====
The `baseURl` in the screenshot might look different depending on where you store and access the Loki logs.
====

. Save the ConfigMap.

. Restart the {product} `pod`.

.Verification

* Navigate to the Orchestrator plugin in the {product-very-short} interface.
* Select a workflow instance.
* Click *View Logs* to display the workflow instance logs.