:_mod-docs-content-type: PROCEDURE

[id="proc-configuring-jira-scorecards-in-rhdh-instance_{context}"]
= Configuring Jira Scorecards to view Jira metrics in your {product} instance

To bring critical project tracking and workflow data from Atlassian Jira directly into your {product-very-short} instance, , you must configure the Jira Scorecards plugin. This integration provides engineering teams with a centralized view of development status and reduces context switching, enabling faster assessment of component readiness and delivery velocity.

The following Jira versions are supported:

* Jira Cloud: API version 3
* Jira Data Center: API version 2

.Prerequisites

* You must have administrator privileges for Jira and {product-very-short}.
* You have {install-category-link}[installed your {product-very-short} instance].
* You have {scorecard-plugin-book-link}#proc-installing-scorecard-plugin-in-rhdh-instance[installed the Scorecard images].
* You must have {configuring-book-link}[added a custom {product-very-short} application configuration] and have sufficient permissions to change it.

.Procedure
To install and configure Jira Scorecards in your {product-very-short} instance, complete the following steps:

[NOTE]
====
You must use the proxy setup to ensure configuration compatibility if the Roadie Jira Frontend Plugin is also in use.
====

. Create a Jira configuration token using one of the following methods, depending on your Jira product:
** Jira Cloud: https://id.atlassian.com/manage-profile/security/api-tokens[Create a personal token]. You must then create a `Base64-encoded` string using the following plain text format: `your-atlassian-email:your-jira-api-token`.
+
[source,bash]
----
echo -n 'your-atlassian-email:your-jira-api-token' | base64
----
** Jira datacenter: Create and use a Personal Access Token (PAT) in your Jira datacenter account. For more information, see the https://confluence.atlassian.com/enterprise/using-personal-access-tokens-1026032365.html[Atlassian] documentation.

. Add your Jira configuration (${JIRA_TOKEN}) to {configuring-book-link}#provisioning-your-custom-configuration[your {product-very-short} secrets] using the following key/value pairs:
+
`JIRA_TOKEN`:: Enter your Jira token.
`JIRA_BASE_URL`:: Enter your Jira base URL.

. Install the Jira Scorecard plugin in your {product-very-short} `dynamic-plugins-config.yaml` file using either a direct setup or a proxy setup.
** Use a direct setup: 
... Add the following code to your {product-very-short} `dynamic-plugins-config.yaml` file:
+
[source,yaml]
----
plugins:
  - package: oci://ghcr.io/redhat-developer/rhdh-plugin-export-overlays/red-hat-developer-hub-backstage-plugin-scorecard-backend-module-jira:pr_1499__0.1.0!red-hat-developer-hub-backstage-plugin-scorecard-backend-module-jira
    disabled: false
----
... In your {product-very-short} `{my-app-config-file}` file, add the following direct setup settings:
+
[source,yaml]
----
jira:
  baseUrl: ${JIRA_BASE_URL}
  token: ${JIRA_TOKEN}
  product: _<jira_product>_
----
where:

`baseUrl`:: The base URL of your Jira instance, configured under ${JIRA_BASE_URL} in your {product-very-short} secrets.
`token`:: The Jira token (Base64 string for Cloud, PAT for Data Center), configured under ${JIRA_TOKEN} in your {product-very-short} secrets.
`product`:: Enter the supported product: `cloud` or `datacenter`.

** Use a proxy setup: 
... In your {product-very-short} `dynamic-plugins-config.yaml` file, add the following code:
+
[source,yaml]
----
plugins:
  - package: oci://ghcr.io/redhat-developer/rhdh-plugin-export-overlays/red-hat-developer-hub-backstage-plugin-scorecard-backend-module-jira:pr_1499__0.1.0!red-hat-developer-hub-backstage-plugin-scorecard-backend-module-jira
    disabled: false
----

... In your {product-very-short} `{my-app-config-file}` file, add the following proxy settings:
+
[source,yaml]
----
proxy:
  endpoints:
    '/jira/api':
      target: ${JIRA_BASE_URL}
      headers:
        Accept: 'application/json'
        Content-Type: 'application/json'
        X-Atlassian-Token: 'no-check'
        Authorization: ${JIRA_TOKEN} # Must be configured in your environment
jira:
  proxyPath: /jira/api
  product: cloud # Change to 'datacenter' if using Jira Datacenter
----
+
where:

`target`:: The base URL of your Jira instance, configured under ${JIRA_BASE_URL} in your {product-very-short} secrets.
`Authorization`:: The Jira token, configured under ${JIRA_TOKEN} in your {product-very-short} secrets. Set the token value as one of the following values:
* For *Cloud*: `Basic YourCreatedCloudToken`
* For *Data Center*: `Bearer YourJiraToken`

. Annotate the component entity in the `catalog-info.yaml` file.
.. Link the component to the Jira data source by adding the necessary annotations:
+
[source,yaml]
----
apiVersion: backstage.io/v1alpha1
kind: Component
metadata:
  name: my-service
  annotations:
    jira/project-key: PROJECT
    jira/component: Component
    jira/label: UI
    jira/team: 9d3ea319-fb5b-4621-9dab-05fe502283e
    jira/custom-filter: 'reporter = "abc@xyz.com" AND resolution is not EMPTY'
spec:
  type: website
  lifecycle: experimental
  owner: guests
  system: examples
  providesApis: [example-grpc-api]
----
+
where:

`jira/project-key`:: Required: Enter the Jira project key.
`jira/component`:: Optional: Enter the Jira component name.
`jira/label`:: Optional: Enter the Jira label.
`jira/team`:: Optional: Enter the Jira team ID (not the team title).
`jira/custom-filter`:: Optional: Enter a custom Jira Query Language (JQL) filter.

. Statically ingest the catalog entity by adding the `catalog.locations` section in your {product-very-short} `{my-app-config-file}` file that links to the `catalog-info.yaml` file:
+
[source,yaml]
----
catalog:
  locations:
    - type: url
      target: https://github.com/owner/repo/catalog-info.yaml
----

. (Optional) Configure *Jira Open Issues* metric thresholds by adding the following to your {product-very-short} `{my-app-config-file}` file:
+
[source,yaml]
----
scorecard:
  plugins:
    jira:
      open_issues:
        thresholds:
          rules:
            - key: success
              expression: '<10'
            - key: warning
              expression: '10-50'
            - key: error
              expression: '>50'
----
+
where:

`scorecard:plugins:jira:open_issues:thresholds`:: Lists the default threshold values for the *Jira Open Issues* metric.

. (Optional) Define global or custom mandatory filters that entities can override by adding the following code to your {product-very-short} `{my-app-config-file}` file:
+
[source,yaml]
----
scorecard:
  plugins:
    jira:
      open_issues:
        options:
          mandatoryFilter: Type = Task AND Resolution = Unresolved
          customFilter: priority in ("Critical", "Blocker")
----
+
where:

`mandatoryFilter`:: Optional: Replaces the default filter (`type = Bug and resolution = Unresolved`).
`customFilter`:: Optional: Specifies a global custom filter. The entity annotation `jira/custom-filter` overrides this value.

For more information about how to customize the threshold values, see {scorecard-plugin-book-link}#con-manage-metric-thresholds-in-scorecard-plugin[Thresholds in Scorecard plugins].

