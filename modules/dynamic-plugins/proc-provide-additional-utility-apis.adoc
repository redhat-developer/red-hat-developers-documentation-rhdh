[id="proc-provide-additional-utility-apis"]

= Provide additional utility APIs

If a dynamic plugin exports the plugin object returned by `createPlugin`, it is supplied to the `createApp` API. All API factories exported by the plugin are automatically registered and available in the front-end application.

You can add an entry to the `dynamicPlugins.frontend` configuration when a dynamic plugin contains only API factories as shown in the following example:

[source,yaml]
----
# app-config.yaml
dynamicPlugins:
  frontend:
    my-dynamic-plugin-package-with-api-factories: {}
----

However, when the dynamic plugin is not exporting the plugin object, explicitly configure each API factory that should be registered with the `createApp` API using the `apiFactories` configuration as shown in the following example:

[source,yaml]
----
# app-config.yaml
dynamicPlugins:
  frontend:
    my-plugin: # <1>
      apiFactories:
        - importName: BarApi # <2>
          module: CustomModule # <3>
----
<1> Specify the plugin package name.
<2> Optional: Specify the import name that references a `AnyApiFactory<{}>` implementation. Defaults to `default` export.
<3> Optional: An argument which allows you to specify which set of assets you want to access within the plugin. If not provided, the default module named PluginRoot is used.

The API factories initialized by the {product-short} application shell can be overridden by an API factory provided by a dynamic plugin by specifying the same API ref ID. A dynamic plugin can export `AnyApiFactory<{}>` to cater for some specific use case as shown in the following example:

[source,yaml]
----
export const customScmAuthApiFactory = createApiFactory({
  api: scmAuthApiRef,
  deps: { githubAuthApi: githubAuthApiRef },
  factory: ({ githubAuthApi }) =>
    ScmAuth.merge(
      ScmAuth.forGithub(githubAuthApi, { host: "github.someinstance.com" }),
      ScmAuth.forGithub(githubAuthApi, {
        host: "github.someotherinstance.com",
      }),
    ),
});
----

The corresponding configuration which overrides the default `ScmAuth` API factory that {product-short} defaults to is as shown in the following example:

[source,yaml]
----
dynamicPlugins:
  frontend:
    my-plugin:  # <1>
      apiFactories:
        - importName: customScmAuthApiFactory
----
<1> Specify the plugin package name.