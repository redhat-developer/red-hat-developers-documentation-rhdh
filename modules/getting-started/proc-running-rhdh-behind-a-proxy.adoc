[id='proc-running-rhdh-behind-a-proxy_{context}']
= Running the {product-very-short} application behind a corporate proxy

You can run the {product-very-short} application behind a corporate proxy by setting any of the following environment variables before starting the application:

* `HTTP_PROXY`: denotes the HTTP proxy to use.
* `HTTPS_PROXY`: denotes a distinct proxy to use for HTTPS requests.

Additionally, you can set the `NO_PROXY` environment variable to exclude certain domains from proxying. The variable value is a comma-separated list of hostnames that do not require a proxy to get reached, even if one is specified.

.Prerequisites

* {product} is installed and running. For more information about installing the {product-short}, see xref:proc-install-rhdh_rhdh-getting-started[].
* You have created a project in the {product-short}.

.Procedure

. Configure proxy information in one of the following deployments based on your needs:

.Helm deployment
* Set the proxy information in your Helm configuration file:

[source,yaml]
----
upstream:
  backstage:
    extraEnvVars:
      - name: HTTP_PROXY
        value: '<http_proxy_url>'
      - name: HTTPS_PROXY
        value: '<https_proxy_url>'
      - name: NO_PROXY
        value: '<no_proxy_settings>'
----

Where,

`<http_proxy_url>`:: Denotes a variable that you must replace with the HTTP proxy URL.
`<https_proxy_url>`:: Denotes a variable that you must replace with the HTTPS proxy URL.
`<no_proxy_settings>`:: Denotes a variable that you must replace with comma-separated URLs, which you want to exclude from proxying, for example, `foo.com,baz.com`.

.Example: Setting proxy using Helm Chart

[source,yaml]
----
upstream:
  backstage:
    extraEnvVars:
      - name: HTTP_PROXY
        value: 'http://10.10.10.105:3128'
      - name: HTTPS_PROXY
        value: 'http://10.10.10.106:3128'
      - name: NO_PROXY
        value: 'localhost,example.org'
----

.Operator deployment 
* Set the proxy information in your ConfigMap file or custom resource:

[source,yaml]
----
spec:
  application:
    extraEnvs:
      envs:
        - name: HTTP_PROXY
          value: '<http_proxy_url>'
        - name: HTTPS_PROXY
          value: '<https_proxy_url>'
        - name: NO_PROXY
          value: '<no_proxy_settings>'
----

Where,

`<http_proxy_url>`:: Denotes a variable that you must replace with the HTTP proxy URL.
`<https_proxy_url>`:: Denotes a variable that you must replace with the HTTPS proxy URL.
`<no_proxy_settings>`:: Denotes a variable that you must replace with comma-separated URLs, which you want to exclude from proxying, for example, `foo.com,baz.com`.

.Example: Setting proxy using Operator
[source, yaml]
----
spec:
  application:
    extraEnvs:
      envs:
        - name: HTTP_PROXY
          value: 'http://10.10.10.105:3128'
        - name: HTTPS_PROXY
          value: 'http://10.10.10.106:3128'
        - name: NO_PROXY
          value: 'localhost,example.org'
----

.Local deployment

If you are behind a corporate proxy and are running the RHDH application locally, as depicted in [Running locally with a basic configuration](./getting-started.md#running-locally-with-a-basic-configuration) or [Running locally with the Optional Plugins](./getting-started.md#running-locally-with-the-optional-plugins), you will need to additionally 

* Set the `GLOBAL_AGENT_ENVIRONMENT_VARIABLE_NAMESPACE` variable to an empty value before running the `yarn start` command.

.Example: Setting proxy in your local environment

[source,command]
----
$ GLOBAL_AGENT_ENVIRONMENT_VARIABLE_NAMESPACE='' \
  HTTP_PROXY=http://10.10.10.105:3128 \
  HTTPS_PROXY=http://10.10.10.106:3128 \
  NO_PROXY='localhost,example.org' \
  yarn start
----
