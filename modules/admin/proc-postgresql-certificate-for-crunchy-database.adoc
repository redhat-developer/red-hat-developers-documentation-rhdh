[id='postgresql-certificate-for-crunchy-database_{context}']
= Generating PostgreSQL certificate for the Crunchy database

For the Crunchy database, you can generate a CA certificate file along with TLS key, and TLS certificate. The content of these files is used for creating a certificate secret to configure an external PostgreSQL instance with TLS connection in {product-short}.

.Prerequisites

* You have a Crunchy database account with active subscription. 
* You have installed the CrunchyData PostgreSQL Operator on the {ocp-short} cluster. For more information, see link:https://access.crunchydata.com/documentation/postgres-operator/latest/quickstart#installation[Installing the PostgreSQL Operator].
* You are using PostgreSQL version 15 on the Crunchy database. 
* You have your database host, database port, username, and password handy. The database port that is usually used is `5432`.
* You have installed the {product-very-short} application by using one of the following options:
** {product} Operator
** Helm Chart
* Optional: You have installed the `psql` client to check your database connection.

.Procedure

. Optional: Check your database connection by running the following command:
+
[source,terminal]
----
psql -h <db-host> -p <db-port> -U <username> -P <password>
----
+
.Example output
[source,terminal]
----
SSL connection (protocol: TLSv1.3, cipher: TLS_AES_256_GCM_SHA384, compression: off)
Type "help" for help.
postgres=>
(type ‘\q’ to quit from psql CLI)
----

. Go to the link:https://www.crunchydata.com/blog/set-up-tls-for-postgresql-in-kubernetes#prerequisites[Prerequisites to configure PostgreSQL with TLS - Crunchy database] site and generate a CA certificate, a TLS private key, and a TLS certificate.

. Use the generated certificate files and the TLS private key to create a certificate secret. For more information, see link:{LinkAdminGuide}#proc-configuring-postgresql-with-tls-using-operator_admin-rhdh[Configuring an external PostgreSQL instance with TLS connection using the Operator] or link:{LinkAdminGuide}#proc-configuring-postgresql-with-tls-using-helm_admin-rhdh[Configuring an external PostgreSQL instance with TLS connection using the Helm Chart].

