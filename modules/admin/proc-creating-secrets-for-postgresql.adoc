[id="proc-creating-secrets-for-postgresql_{context}"]
= Creating PostgreSQL secrets

For both Helm Chart and Operator-based installation options, you must create PostgreSQL secrets in the namespace where you plan to configure the {product-very-short} instance. 

.Procedure

. Create a secret with the content of the .pem certificate file: 
+
[source,yaml]
----
apiVersion: v1
kind: Secret
metadata:
 name: <postgres-crt>
type: Opaque
stringData:
 postgres-crt.pem: |-
   -----BEGIN CERTIFICATE-----
   MIIFqDCCA5CgAwIBAgIQHtOXCV/YtLNHcB6qvn9FszANBgkqhkiG9w0BAQwFADBl
   ................ 
----

. Apply the secret by running the following command:
+
[source,bash]
----
oc -n <your-namespace> apply -f <postgres-crt>.yaml
----

. Create a secret to connect with the PostgreSQL database:
+
[source,yaml]
----
apiVersion: v1
kind: Secret
metadata:
 name: <postgres-cred>
type: Opaque
stringData:
 POSTGRES_PASSWORD: <password>
 POSTGRES_PORT: <db-port>
 POSTGRES_USER: <username>
 POSTGRES_HOST: <db-host>
 PGSSLMODE: require 
 NODE_EXTRA_CA_CERTS: <abs-path-to-pem-file> # e.g. /opt/app-root/src/postgres-crt.pem
----

. Apply the secret by running the following command:
+
[source,bash]
----
oc -n <your-namespace> apply -f <postgres-cred>.yaml
----
