:_mod-docs-content-type: ASSEMBLY

[id="rinstall-plugins-from-oci-registries-by-using-custom-certificates"]
= Install plugins from OCI registries by using custom certificates

The goal is to install OCI plugins stored in an internal OCI artifact registry served over HTTPS with customer CA certificates. For example a user with something like this in their dynamic-plugins:

[source,terminal,subs="+attributes,+quotes"]
----
includes:
- dynamic-plugins.default.yaml

plugins:
- disabled: false
  package: oci://reg.example.com:5000/myplugin:v0.0.1!backstage-plugin-myplugin

----

.Prerequisites
* You have a corporate CA bundle or a set of custom container-registry TLS certificates that the system should trust.
+
[NOTE]
====
You can create a CA bundle from a set of CA certificates manually by concatenating them into a single file, like so:

[source,terminal]
----
# Concatenate CA certificates
cat registry.crt intermediate.crt corporate-root.crt > ca-bundle.crt

# Validate
openssl verify -CAfile ca-bundle.crt registry.crt

----
====

// Installing plugins from OCI plugins by using per-registry TLS configuration
include::../modules/dynamic-plugins/proc-installing-plugins-from-oci-plugins-by-using-per-registry-tls-configuration.adoc[leveloffset=+1]

// Installing plugins from OCI plugins by mounting the CA bundle
include::../modules/dynamic-plugins/proc-installing-plugins-from-oci-plugins-by-mounting-the-ca-bundle.adoc[leveloffset=+1]

// Installing plugins from OCI plugins in OpenShift
include::../modules/dynamic-plugins/proc-installing-plugins-from-oci-plugins-in-openshift.adoc[leveloffset=+1]